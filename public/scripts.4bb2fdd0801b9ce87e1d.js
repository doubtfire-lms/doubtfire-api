!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";var t,e;function n(){return t.apply(null,arguments)}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(o(t,e))return!1;return!0}function s(t){return void 0===t}function u(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function c(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function f(t,e){for(var n in e)o(e,n)&&(t[n]=e[n]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,n,r){return ke(t,e,n,r,!0).utc()}function h(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function p(t){if(null==t._isValid){var n=h(t),r=e.call(n.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&r);if(t._strict&&(i=i&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function g(t){var e=d(NaN);return null!=t?f(h(e),t):h(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),r=n.length>>>0;for(e=0;e<r;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var v=n.momentProperties=[],m=!1;function y(t,e){var n,r,i;if(s(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),s(e._i)||(t._i=e._i),s(e._f)||(t._f=e._f),s(e._l)||(t._l=e._l),s(e._strict)||(t._strict=e._strict),s(e._tzm)||(t._tzm=e._tzm),s(e._isUTC)||(t._isUTC=e._isUTC),s(e._offset)||(t._offset=e._offset),s(e._pf)||(t._pf=h(e)),s(e._locale)||(t._locale=e._locale),v.length>0)for(n=0;n<v.length;n++)s(i=e[r=v[n]])||(t[r]=i);return t}function b(t){y(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===m&&(m=!0,n.updateOffset(this),m=!1)}function x(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function w(t){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function k(t,e){var r=!0;return f(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,t),r){var i,a,s,u=[];for(a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(s in i+="\n["+a+"] ",arguments[0])o(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[a];u.push(i)}w(t+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),r=!1}return e.apply(this,arguments)},e)}var _,M={};function S(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),M[t]||(w(e),M[t]=!0)}function C(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function A(t,e){var n,r=f({},t);for(n in e)o(e,n)&&(i(t[n])&&i(e[n])?(r[n]={},f(r[n],t[n]),f(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)o(t,n)&&!o(e,n)&&i(t[n])&&(r[n]=f({},r[n]));return r}function D(t){null!=t&&this.set(t)}function T(t,e,n){var r=""+Math.abs(t);return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,e-r.length)).toString().substr(1)+r}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,_=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)o(t,e)&&n.push(e);return n};var L=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,E=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,N={},O={};function F(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(O[t]=i),e&&(O[e[0]]=function(){return T(i.apply(this,arguments),e[1],e[2])}),n&&(O[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function P(t,e){return t.isValid()?(e=W(e,t.localeData()),N[e]=N[e]||function(t){var e,n,r,i=t.match(L);for(e=0,n=i.length;e<n;e++)i[e]=O[i[e]]?O[i[e]]:(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,o="";for(r=0;r<n;r++)o+=C(i[r])?i[r].call(e,t):i[r];return o}}(e),N[e](t)):t.localeData().invalidDate()}function W(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(E.lastIndex=0;n>=0&&E.test(t);)t=t.replace(E,r),E.lastIndex=0,n-=1;return t}var R={};function z(t,e){var n=t.toLowerCase();R[n]=R[n+"s"]=R[e]=t}function I(t){return"string"==typeof t?R[t]||R[t.toLowerCase()]:void 0}function H(t){var e,n,r={};for(n in t)o(t,n)&&(e=I(n))&&(r[e]=t[n]);return r}var Y={};function B(t,e){Y[t]=e}function j(t){return t%4==0&&t%100!=0||t%400==0}function U(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function G(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=U(e)),n}function V(t,e){return function(r){return null!=r?($(this,t,r),n.updateOffset(this,e),this):q(this,t)}}function q(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function $(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&j(t.year())&&1===t.month()&&29===t.date()?(n=G(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),xt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var X,Z=/\d/,K=/\d\d/,Q=/\d{3}/,J=/\d{4}/,tt=/[+-]?\d{6}/,et=/\d\d?/,nt=/\d\d\d\d?/,rt=/\d\d\d\d\d\d?/,it=/\d{1,3}/,ot=/\d{1,4}/,at=/[+-]?\d{1,6}/,st=/\d+/,ut=/[+-]?\d+/,lt=/Z|[+-]\d\d:?\d\d/gi,ct=/Z|[+-]\d\d(?::?\d\d)?/gi,ft=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function dt(t,e,n){X[t]=C(e)?e:function(t,r){return t&&n?n:e}}function ht(t,e){return o(X,t)?X[t](e._strict,e._locale):new RegExp(pt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,i){return e||n||r||i})))}function pt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}X={};var gt,vt={};function mt(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),u(e)&&(r=function(t,n){n[e]=G(t)}),n=0;n<t.length;n++)vt[t[n]]=r}function yt(t,e){mt(t,function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)})}function bt(t,e,n){null!=e&&o(vt,t)&&vt[t](e,n._a,n,t)}function xt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%12+12)%12;return t+=(e-n)/12,1===n?j(t)?29:28:31-n%7%2}gt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),F("MMMM",0,0,function(t){return this.localeData().months(this,t)}),z("month","M"),B("month",8),dt("M",et),dt("MM",et,K),dt("MMM",function(t,e){return e.monthsShortRegex(t)}),dt("MMMM",function(t,e){return e.monthsRegex(t)}),mt(["M","MM"],function(t,e){e[1]=G(t)-1}),mt(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[1]=i:h(n).invalidMonth=t});var wt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),kt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_t=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Mt=ft,St=ft;function Ct(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=d([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=gt.call(this._shortMonthsParse,a))?i:null:-1!==(i=gt.call(this._longMonthsParse,a))?i:null:"MMM"===e?-1!==(i=gt.call(this._shortMonthsParse,a))||-1!==(i=gt.call(this._longMonthsParse,a))?i:null:-1!==(i=gt.call(this._longMonthsParse,a))||-1!==(i=gt.call(this._shortMonthsParse,a))?i:null}function At(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=G(e);else if(!u(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),xt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Dt(t){return null!=t?(At(this,t),n.updateOffset(this,!0),this):q(this,"Month")}function Tt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;e<12;e++)n=d([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)r[e]=pt(r[e]),i[e]=pt(i[e]);for(e=0;e<24;e++)o[e]=pt(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Lt(t){return j(t)?366:365}F("Y",0,0,function(){var t=this.year();return t<=9999?T(t,4):"+"+t}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),z("year","y"),B("year",1),dt("Y",ut),dt("YY",et,K),dt("YYYY",ot,J),dt("YYYYY",at,tt),dt("YYYYYY",at,tt),mt(["YYYYY","YYYYYY"],0),mt("YYYY",function(t,e){e[0]=2===t.length?n.parseTwoDigitYear(t):G(t)}),mt("YY",function(t,e){e[0]=n.parseTwoDigitYear(t)}),mt("Y",function(t,e){e[0]=parseInt(t,10)}),n.parseTwoDigitYear=function(t){return G(t)+(G(t)>68?1900:2e3)};var Et=V("FullYear",!0);function Nt(t,e,n,r,i,o,a){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,o,a),s}function Ot(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Ft(t,e,n){var r=7+e-n;return-(7+Ot(t,0,r).getUTCDay()-e)%7+r-1}function Pt(t,e,n,r,i){var o,a,s=1+7*(e-1)+(7+n-r)%7+Ft(t,r,i);return s<=0?a=Lt(o=t-1)+s:s>Lt(t)?(o=t+1,a=s-Lt(t)):(o=t,a=s),{year:o,dayOfYear:a}}function Wt(t,e,n){var r,i,o=Ft(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?r=a+Rt(i=t.year()-1,e,n):a>Rt(t.year(),e,n)?(r=a-Rt(t.year(),e,n),i=t.year()+1):(i=t.year(),r=a),{week:r,year:i}}function Rt(t,e,n){var r=Ft(t,e,n),i=Ft(t+1,e,n);return(Lt(t)-r+i)/7}function zt(t,e){return t.slice(e,7).concat(t.slice(0,e))}F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),B("week",5),B("isoWeek",5),dt("w",et),dt("ww",et,K),dt("W",et),dt("WW",et,K),yt(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=G(t)}),F("d",0,"do","day"),F("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),F("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),F("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),B("day",11),B("weekday",11),B("isoWeekday",11),dt("d",et),dt("e",et),dt("E",et),dt("dd",function(t,e){return e.weekdaysMinRegex(t)}),dt("ddd",function(t,e){return e.weekdaysShortRegex(t)}),dt("dddd",function(t,e){return e.weekdaysRegex(t)}),yt(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:h(n).invalidWeekday=t}),yt(["d","e","E"],function(t,e,n,r){e[r]=G(t)});var It="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ht="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Yt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Bt=ft,jt=ft,Ut=ft;function Gt(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=d([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=gt.call(this._weekdaysParse,a))?i:null:"ddd"===e?-1!==(i=gt.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=gt.call(this._minWeekdaysParse,a))?i:null:"dddd"===e?-1!==(i=gt.call(this._weekdaysParse,a))||-1!==(i=gt.call(this._shortWeekdaysParse,a))||-1!==(i=gt.call(this._minWeekdaysParse,a))?i:null:"ddd"===e?-1!==(i=gt.call(this._shortWeekdaysParse,a))||-1!==(i=gt.call(this._weekdaysParse,a))||-1!==(i=gt.call(this._minWeekdaysParse,a))?i:null:-1!==(i=gt.call(this._minWeekdaysParse,a))||-1!==(i=gt.call(this._weekdaysParse,a))||-1!==(i=gt.call(this._shortWeekdaysParse,a))?i:null}function Vt(){function t(t,e){return e.length-t.length}var e,n,r,i,o,a=[],s=[],u=[],l=[];for(e=0;e<7;e++)n=d([2e3,1]).day(e),r=pt(this.weekdaysMin(n,"")),i=pt(this.weekdaysShort(n,"")),o=pt(this.weekdays(n,"")),a.push(r),s.push(i),u.push(o),l.push(r),l.push(i),l.push(o);a.sort(t),s.sort(t),u.sort(t),l.sort(t),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function qt(){return this.hours()%12||12}function $t(t,e){F(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Xt(t,e){return e._meridiemParse}F("H",["HH",2],0,"hour"),F("h",["hh",2],0,qt),F("k",["kk",2],0,function(){return this.hours()||24}),F("hmm",0,0,function(){return""+qt.apply(this)+T(this.minutes(),2)}),F("hmmss",0,0,function(){return""+qt.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),F("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),F("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),$t("a",!0),$t("A",!1),z("hour","h"),B("hour",13),dt("a",Xt),dt("A",Xt),dt("H",et),dt("h",et),dt("k",et),dt("HH",et,K),dt("hh",et,K),dt("kk",et,K),dt("hmm",nt),dt("hmmss",rt),dt("Hmm",nt),dt("Hmmss",rt),mt(["H","HH"],3),mt(["k","kk"],function(t,e,n){var r=G(t);e[3]=24===r?0:r}),mt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),mt(["h","hh"],function(t,e,n){e[3]=G(t),h(n).bigHour=!0}),mt("hmm",function(t,e,n){var r=t.length-2;e[3]=G(t.substr(0,r)),e[4]=G(t.substr(r)),h(n).bigHour=!0}),mt("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=G(t.substr(0,r)),e[4]=G(t.substr(r,2)),e[5]=G(t.substr(i)),h(n).bigHour=!0}),mt("Hmm",function(t,e,n){var r=t.length-2;e[3]=G(t.substr(0,r)),e[4]=G(t.substr(r))}),mt("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=G(t.substr(0,r)),e[4]=G(t.substr(r,2)),e[5]=G(t.substr(i))});var Zt,Kt=V("Hours",!0),Qt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:wt,monthsShort:kt,week:{dow:0,doy:6},weekdays:It,weekdaysMin:Yt,weekdaysShort:Ht,meridiemParse:/[ap]\.?m?\.?/i},Jt={},te={};function ee(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function ne(t){return t?t.toLowerCase().replace("_","-"):t}function re(t){var e=null;if(void 0===Jt[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Zt._abbr,require("./locale/"+t),ie(e)}catch(n){Jt[t]=null}return Jt[t]}function ie(t,e){var n;return t&&((n=s(e)?ae(t):oe(t,e))?Zt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Zt._abbr}function oe(t,e){if(null!==e){var n,r=Qt;if(e.abbr=t,null!=Jt[t])S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Jt[t]._config;else if(null!=e.parentLocale)if(null!=Jt[e.parentLocale])r=Jt[e.parentLocale]._config;else{if(null==(n=re(e.parentLocale)))return te[e.parentLocale]||(te[e.parentLocale]=[]),te[e.parentLocale].push({name:t,config:e}),null;r=n._config}return Jt[t]=new D(A(r,e)),te[t]&&te[t].forEach(function(t){oe(t.name,t.config)}),ie(t),Jt[t]}return delete Jt[t],null}function ae(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Zt;if(!r(t)){if(e=re(t))return e;t=[t]}return function(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=ne(t[o]).split("-")).length,n=(n=ne(t[o+1]))?n.split("-"):null;e>0;){if(r=re(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&ee(i,n)>=e-1)break;e--}o++}return Zt}(t)}function se(t){var e,n=t._a;return n&&-2===h(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>xt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,h(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),h(t)._overflowWeeks&&-1===e&&(e=7),h(t)._overflowWeekday&&-1===e&&(e=8),h(t).overflow=e),t}var ue=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,le=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ce=/Z|[+-]\d\d(?::?\d\d)?/,fe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],de=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],he=/^\/?Date\((-?\d+)/i,pe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ge={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ve(t){var e,n,r,i,o,a,s=t._i,u=ue.exec(s)||le.exec(s);if(u){for(h(t).iso=!0,e=0,n=fe.length;e<n;e++)if(fe[e][1].exec(u[1])){i=fe[e][0],r=!1!==fe[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=de.length;e<n;e++)if(de[e][1].exec(u[3])){o=(u[2]||" ")+de[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(u[4]){if(!ce.exec(u[4]))return void(t._isValid=!1);a="Z"}t._f=i+(o||"")+(a||""),xe(t)}else t._isValid=!1}function me(t){var e,n,r,i,o,a,s,u,l,c=pe.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[3],r=c[2],i=c[5],o=c[6],a=c[7],s=[(u=c[4],l=parseInt(u,10),l<=49?2e3+l:l<=999?1900+l:l),kt.indexOf(n),parseInt(r,10),parseInt(i,10),parseInt(o,10)],a&&s.push(parseInt(a,10)),!function(t,e,n){return!t||Ht.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(h(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],e=s,t))return;t._a=e,t._tzm=function(t,e,n){if(t)return ge[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(c[8],c[9],c[10]),t._d=Ot.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),h(t).rfc2822=!0}else t._isValid=!1}function ye(t,e,n){return null!=t?t:null!=e?e:n}function be(t){var e,r,i,o,a,s=[];if(!t._d){for(i=function(t){var e=new Date(n.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,r,i,o,a,s,u,l;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,a=4,n=ye(e.GG,t._a[0],Wt(_e(),1,4).year),r=ye(e.W,1),((i=ye(e.E,1))<1||i>7)&&(u=!0)):(o=t._locale._week.dow,a=t._locale._week.doy,l=Wt(_e(),o,a),n=ye(e.gg,t._a[0],l.year),r=ye(e.w,l.week),null!=e.d?((i=e.d)<0||i>6)&&(u=!0):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(u=!0)):i=o),r<1||r>Rt(n,o,a)?h(t)._overflowWeeks=!0:null!=u?h(t)._overflowWeekday=!0:(s=Pt(n,r,i,o,a),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(a=ye(t._a[0],i[0]),(t._dayOfYear>Lt(a)||0===t._dayOfYear)&&(h(t)._overflowDayOfYear=!0),r=Ot(a,0,t._dayOfYear),t._a[1]=r.getUTCMonth(),t._a[2]=r.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Ot:Nt).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(h(t).weekdayMismatch=!0)}}function xe(t){if(t._f!==n.ISO_8601)if(t._f!==n.RFC_2822){t._a=[],h(t).empty=!0;var e,r,i,o,a,s,u=""+t._i,l=u.length,c=0;for(i=W(t._f,t._locale).match(L)||[],e=0;e<i.length;e++)(r=(u.match(ht(o=i[e],t))||[])[0])&&((a=u.substr(0,u.indexOf(r))).length>0&&h(t).unusedInput.push(a),u=u.slice(u.indexOf(r)+r.length),c+=r.length),O[o]?(r?h(t).empty=!1:h(t).unusedTokens.push(o),bt(o,r,t)):t._strict&&!r&&h(t).unusedTokens.push(o);h(t).charsLeftOver=l-c,u.length>0&&h(t).unusedInput.push(u),t._a[3]<=12&&!0===h(t).bigHour&&t._a[3]>0&&(h(t).bigHour=void 0),h(t).parsedDateParts=t._a.slice(0),h(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),null!==(s=h(t).era)&&(t._a[0]=t._locale.erasConvertYear(s,t._a[0])),be(t),se(t)}else me(t);else ve(t)}function we(t){var e=t._i,o=t._f;return t._locale=t._locale||ae(t._l),null===e||void 0===o&&""===e?g({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),x(e)?new b(se(e)):(l(e)?t._d=e:r(o)?function(t){var e,n,r,i,o,a,s=!1;if(0===t._f.length)return h(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)o=0,a=!1,e=y({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],xe(e),p(e)&&(a=!0),o+=h(e).charsLeftOver,o+=10*h(e).unusedTokens.length,h(e).score=o,s?o<r&&(r=o,n=e):(null==r||o<r||a)&&(r=o,n=e,a&&(s=!0));f(t,n||e)}(t):o?xe(t):function(t){var e=t._i;s(e)?t._d=new Date(n.now()):l(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=he.exec(t._i);null===e?(ve(t),!1===t._isValid&&(delete t._isValid,me(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:n.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):r(e)?(t._a=c(e.slice(0),function(t){return parseInt(t,10)}),be(t)):i(e)?function(t){if(!t._d){var e=H(t._i);t._a=c([e.year,e.month,void 0===e.day?e.date:e.day,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),be(t)}}(t):u(e)?t._d=new Date(e):n.createFromInputFallback(t)}(t),p(t)||(t._d=null),t))}function ke(t,e,n,o,s){var u,l={};return!0!==e&&!1!==e||(o=e,e=void 0),!0!==n&&!1!==n||(o=n,n=void 0),(i(t)&&a(t)||r(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=n,l._i=t,l._f=e,l._strict=o,(u=new b(se(we(l))))._nextDay&&(u.add(1,"d"),u._nextDay=void 0),u}function _e(t,e,n,r){return ke(t,e,n,r,!1)}n.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var Me=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=_e.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:g()}),Se=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=_e.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:g()});function Ce(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return _e();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}var Ae=["year","quarter","month","week","day","hour","minute","second","millisecond"];function De(t){var e=H(t),n=e.year||0,r=e.quarter||0,i=e.month||0,a=e.week||e.isoWeek||0,s=e.day||0,u=e.hour||0,l=e.minute||0,c=e.second||0,f=e.millisecond||0;this._isValid=function(t){var e,n,r=!1;for(e in t)if(o(t,e)&&(-1===gt.call(Ae,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<Ae.length;++n)if(t[Ae[n]]){if(r)return!1;parseFloat(t[Ae[n]])!==G(t[Ae[n]])&&(r=!0)}return!0}(e),this._milliseconds=+f+1e3*c+6e4*l+1e3*u*60*60,this._days=+s+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=ae(),this._bubble()}function Te(t){return t instanceof De}function Le(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ee(t,e){F(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+T(~~(t/60),2)+e+T(~~t%60,2)})}Ee("Z",":"),Ee("ZZ",""),dt("Z",ct),dt("ZZ",ct),mt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Oe(ct,t)});var Ne=/([\+\-]|\d\d)/gi;function Oe(t,e){var n,r,i=(e||"").match(t);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(Ne)||["-",0,0])[1]+G(n[2]))?0:"+"===n[0]?r:-r}function Fe(t,e){var r,i;return e._isUTC?(r=e.clone(),i=(x(t)||l(t)?t.valueOf():_e(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),n.updateOffset(r,!1),r):_e(t).local()}function Pe(t){return-Math.round(t._d.getTimezoneOffset())}function We(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var Re=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ze=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ie(t,e){var n,r,i,a,s,l,c=t,f=null;return Te(t)?c={ms:t._milliseconds,d:t._days,M:t._months}:u(t)||!isNaN(+t)?(c={},e?c[e]=+t:c.milliseconds=+t):(f=Re.exec(t))?(n="-"===f[1]?-1:1,c={y:0,d:G(f[2])*n,h:G(f[3])*n,m:G(f[4])*n,s:G(f[5])*n,ms:G(Le(1e3*f[6]))*n}):(f=ze.exec(t))?c={y:He(f[2],n="-"===f[1]?-1:1),M:He(f[3],n),w:He(f[4],n),d:He(f[5],n),h:He(f[6],n),m:He(f[7],n),s:He(f[8],n)}:null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(a=_e(c.from),s=_e(c.to),i=a.isValid()&&s.isValid()?(s=Fe(s,a),a.isBefore(s)?l=Ye(a,s):((l=Ye(s,a)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(c={}).ms=i.milliseconds,c.M=i.months),r=new De(c),Te(t)&&o(t,"_locale")&&(r._locale=t._locale),Te(t)&&o(t,"_isValid")&&(r._isValid=t._isValid),r}function He(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ye(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Be(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(S(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),je(this,Ie(n,r),t),this}}function je(t,e,r,i){var o=e._milliseconds,a=Le(e._days),s=Le(e._months);t.isValid()&&(i=null==i||i,s&&At(t,q(t,"Month")+s*r),a&&$(t,"Date",q(t,"Date")+a*r),o&&t._d.setTime(t._d.valueOf()+o*r),i&&n.updateOffset(t,a||s))}Ie.fn=De.prototype,Ie.invalid=function(){return Ie(NaN)};var Ue=Be(1,"add"),Ge=Be(-1,"subtract");function Ve(t){return"string"==typeof t||t instanceof String}function qe(t){return x(t)||l(t)||Ve(t)||u(t)||function(t){var e=r(t),n=!1;return e&&(n=0===t.filter(function(e){return!u(e)&&Ve(t)}).length),e&&n}(t)||function(t){var e,n=i(t)&&!a(t),r=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<s.length;e+=1)r=r||o(t,s[e]);return n&&r}(t)||null==t}function $e(t){var e,n=i(t)&&!a(t),r=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<s.length;e+=1)r=r||o(t,s[e]);return n&&r}function Xe(t,e){if(t.date()<e.date())return-Xe(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function Ze(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ae(t))&&(this._locale=e),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ke=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function Qe(){return this._locale}var Je=1e3,tn=6e4,en=36e5,nn=126227808e5;function rn(t,e){return(t%e+e)%e}function on(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-nn:new Date(t,e,n).valueOf()}function an(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-nn:Date.UTC(t,e,n)}function sn(t,e){return e.erasAbbrRegex(t)}function un(){var t,e,n=[],r=[],i=[],o=[],a=this.eras();for(t=0,e=a.length;t<e;++t)r.push(pt(a[t].name)),n.push(pt(a[t].abbr)),i.push(pt(a[t].narrow)),o.push(pt(a[t].name)),o.push(pt(a[t].abbr)),o.push(pt(a[t].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function ln(t,e){F(0,[t,t.length],0,e)}function cn(t,e,n,r,i){var o;return null==t?Wt(this,r,i).year:(e>(o=Rt(t,r,i))&&(e=o),fn.call(this,t,e,n,r,i))}function fn(t,e,n,r,i){var o=Pt(t,e,n,r,i),a=Ot(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}F("N",0,0,"eraAbbr"),F("NN",0,0,"eraAbbr"),F("NNN",0,0,"eraAbbr"),F("NNNN",0,0,"eraName"),F("NNNNN",0,0,"eraNarrow"),F("y",["y",1],"yo","eraYear"),F("y",["yy",2],0,"eraYear"),F("y",["yyy",3],0,"eraYear"),F("y",["yyyy",4],0,"eraYear"),dt("N",sn),dt("NN",sn),dt("NNN",sn),dt("NNNN",function(t,e){return e.erasNameRegex(t)}),dt("NNNNN",function(t,e){return e.erasNarrowRegex(t)}),mt(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?h(n).era=i:h(n).invalidEra=t}),dt("y",st),dt("yy",st),dt("yyy",st),dt("yyyy",st),dt("yo",function(t,e){return e._eraYearOrdinalRegex||st}),mt(["y","yy","yyy","yyyy"],0),mt(["yo"],function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),e[0]=n._locale.eraYearOrdinalParse?n._locale.eraYearOrdinalParse(t,i):parseInt(t,10)}),F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ln("gggg","weekYear"),ln("ggggg","weekYear"),ln("GGGG","isoWeekYear"),ln("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),B("weekYear",1),B("isoWeekYear",1),dt("G",ut),dt("g",ut),dt("GG",et,K),dt("gg",et,K),dt("GGGG",ot,J),dt("gggg",ot,J),dt("GGGGG",at,tt),dt("ggggg",at,tt),yt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=G(t)}),yt(["gg","GG"],function(t,e,r,i){e[i]=n.parseTwoDigitYear(t)}),F("Q",0,"Qo","quarter"),z("quarter","Q"),B("quarter",7),dt("Q",Z),mt("Q",function(t,e){e[1]=3*(G(t)-1)}),F("D",["DD",2],"Do","date"),z("date","D"),B("date",9),dt("D",et),dt("DD",et,K),dt("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),mt(["D","DD"],2),mt("Do",function(t,e){e[2]=G(t.match(et)[0])});var dn=V("Date",!0);F("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),B("dayOfYear",4),dt("DDD",it),dt("DDDD",Q),mt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=G(t)}),F("m",["mm",2],0,"minute"),z("minute","m"),B("minute",14),dt("m",et),dt("mm",et,K),mt(["m","mm"],4);var hn=V("Minutes",!1);F("s",["ss",2],0,"second"),z("second","s"),B("second",15),dt("s",et),dt("ss",et,K),mt(["s","ss"],5);var pn,gn,vn=V("Seconds",!1);for(F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),B("millisecond",16),dt("S",it,Z),dt("SS",it,K),dt("SSS",it,Q),pn="SSSS";pn.length<=9;pn+="S")dt(pn,st);function mn(t,e){e[6]=G(1e3*("0."+t))}for(pn="S";pn.length<=9;pn+="S")mt(pn,mn);gn=V("Milliseconds",!1),F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var yn=b.prototype;function bn(t){return t}yn.add=Ue,yn.calendar=function(t,e){1===arguments.length&&(arguments[0]?qe(arguments[0])?(t=arguments[0],e=void 0):$e(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var r=t||_e(),i=Fe(r,this).startOf("day"),o=n.calendarFormat(this,i)||"sameElse",a=e&&(C(e[o])?e[o].call(this,r):e[o]);return this.format(a||this.localeData().calendar(o,this,_e(r)))},yn.clone=function(){return new b(this)},yn.diff=function(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=Fe(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=I(e)){case"year":o=Xe(this,r)/12;break;case"month":o=Xe(this,r);break;case"quarter":o=Xe(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:U(o)},yn.endOf=function(t){var e,r;if(void 0===(t=I(t))||"millisecond"===t||!this.isValid())return this;switch(r=this._isUTC?an:on,t){case"year":e=r(this.year()+1,0,1)-1;break;case"quarter":e=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=r(this.year(),this.month()+1,1)-1;break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=en-rn(e+(this._isUTC?0:this.utcOffset()*tn),en)-1;break;case"minute":e=this._d.valueOf(),e+=tn-rn(e,tn)-1;break;case"second":e=this._d.valueOf(),e+=Je-rn(e,Je)-1}return this._d.setTime(e),n.updateOffset(this,!0),this},yn.format=function(t){t||(t=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var e=P(this,t);return this.localeData().postformat(e)},yn.from=function(t,e){return this.isValid()&&(x(t)&&t.isValid()||_e(t).isValid())?Ie({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},yn.fromNow=function(t){return this.from(_e(),t)},yn.to=function(t,e){return this.isValid()&&(x(t)&&t.isValid()||_e(t).isValid())?Ie({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},yn.toNow=function(t){return this.to(_e(),t)},yn.get=function(t){return C(this[t=I(t)])?this[t]():this},yn.invalidAt=function(){return h(this).overflow},yn.isAfter=function(t,e){var n=x(t)?t:_e(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=I(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},yn.isBefore=function(t,e){var n=x(t)?t:_e(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=I(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},yn.isBetween=function(t,e,n,r){var i=x(t)?t:_e(t),o=x(e)?e:_e(e);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},yn.isSame=function(t,e){var n,r=x(t)?t:_e(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=I(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},yn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},yn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},yn.isValid=function(){return p(this)},yn.lang=Ke,yn.locale=Ze,yn.localeData=Qe,yn.max=Se,yn.min=Me,yn.parsingFlags=function(){return f({},h(this))},yn.set=function(t,e){if("object"==typeof t){var n,r=function(t){var e,n=[];for(e in t)o(t,e)&&n.push({unit:e,priority:Y[e]});return n.sort(function(t,e){return t.priority-e.priority}),n}(t=H(t));for(n=0;n<r.length;n++)this[r[n].unit](t[r[n].unit])}else if(C(this[t=I(t)]))return this[t](e);return this},yn.startOf=function(t){var e,r;if(void 0===(t=I(t))||"millisecond"===t||!this.isValid())return this;switch(r=this._isUTC?an:on,t){case"year":e=r(this.year(),0,1);break;case"quarter":e=r(this.year(),this.month()-this.month()%3,1);break;case"month":e=r(this.year(),this.month(),1);break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=r(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=rn(e+(this._isUTC?0:this.utcOffset()*tn),en);break;case"minute":e=this._d.valueOf(),e-=rn(e,tn);break;case"second":e=this._d.valueOf(),e-=rn(e,Je)}return this._d.setTime(e),n.updateOffset(this,!0),this},yn.subtract=Ge,yn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},yn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},yn.toDate=function(){return new Date(this.valueOf())},yn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?P(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",P(n,"Z")):P(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},yn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n="moment",r="";return this.isLocal()||(n=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),t="["+n+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+r+'[")]')},"undefined"!=typeof Symbol&&null!=Symbol.for&&(yn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),yn.toJSON=function(){return this.isValid()?this.toISOString():null},yn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},yn.unix=function(){return Math.floor(this.valueOf()/1e3)},yn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},yn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},yn.eraName=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].name;if(r[t].until<=n&&n<=r[t].since)return r[t].name}return""},yn.eraNarrow=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].narrow;if(r[t].until<=n&&n<=r[t].since)return r[t].narrow}return""},yn.eraAbbr=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].abbr;if(r[t].until<=n&&n<=r[t].since)return r[t].abbr}return""},yn.eraYear=function(){var t,e,r,i,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t)if(r=o[t].since<=o[t].until?1:-1,i=this.clone().startOf("day").valueOf(),o[t].since<=i&&i<=o[t].until||o[t].until<=i&&i<=o[t].since)return(this.year()-n(o[t].since).year())*r+o[t].offset;return this.year()},yn.year=Et,yn.isLeapYear=function(){return j(this.year())},yn.weekYear=function(t){return cn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},yn.isoWeekYear=function(t){return cn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},yn.quarter=yn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},yn.month=Dt,yn.daysInMonth=function(){return xt(this.year(),this.month())},yn.week=yn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},yn.isoWeek=yn.isoWeeks=function(t){var e=Wt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},yn.weeksInYear=function(){var t=this.localeData()._week;return Rt(this.year(),t.dow,t.doy)},yn.weeksInWeekYear=function(){var t=this.localeData()._week;return Rt(this.weekYear(),t.dow,t.doy)},yn.isoWeeksInYear=function(){return Rt(this.year(),1,4)},yn.isoWeeksInISOWeekYear=function(){return Rt(this.isoWeekYear(),1,4)},yn.date=dn,yn.day=yn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},yn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},yn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},yn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},yn.hour=yn.hours=Kt,yn.minute=yn.minutes=hn,yn.second=yn.seconds=vn,yn.millisecond=yn.milliseconds=gn,yn.utcOffset=function(t,e,r){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Oe(ct,t)))return this}else Math.abs(t)<16&&!r&&(t*=60);return!this._isUTC&&e&&(i=Pe(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?je(this,Ie(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Pe(this)},yn.utc=function(t){return this.utcOffset(0,t)},yn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Pe(this),"m")),this},yn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Oe(lt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},yn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?_e(t).utcOffset():0,(this.utcOffset()-t)%60==0)},yn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},yn.isLocal=function(){return!!this.isValid()&&!this._isUTC},yn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},yn.isUtc=We,yn.isUTC=We,yn.zoneAbbr=function(){return this._isUTC?"UTC":""},yn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},yn.dates=k("dates accessor is deprecated. Use date instead.",dn),yn.months=k("months accessor is deprecated. Use month instead",Dt),yn.years=k("years accessor is deprecated. Use year instead",Et),yn.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),yn.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var t,e={};return y(e,this),(e=we(e))._a?(t=e._isUTC?d(e._a):_e(e._a),this._isDSTShifted=this.isValid()&&function(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(r=0;r<i;r++)G(t[r])!==G(e[r])&&a++;return a+o}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var xn=D.prototype;function wn(t,e,n,r){var i=ae(),o=d().set(r,e);return i[n](o,t)}function kn(t,e,n){if(u(t)&&(e=t,t=void 0),t=t||"",null!=e)return wn(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=wn(t,r,n,"month");return i}function _n(t,e,n,r){"boolean"==typeof t?(u(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,u(e)&&(n=e,e=void 0),e=e||"");var i,o=ae(),a=t?o._week.dow:0,s=[];if(null!=n)return wn(e,(n+a)%7,r,"day");for(i=0;i<7;i++)s[i]=wn(e,(i+a)%7,r,"day");return s}xn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return C(r)?r.call(e,n):r},xn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(L).map(function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t}).join(""),this._longDateFormat[t])},xn.invalidDate=function(){return this._invalidDate},xn.ordinal=function(t){return this._ordinal.replace("%d",t)},xn.preparse=bn,xn.postformat=bn,xn.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return C(i)?i(t,e,n,r):i.replace(/%d/i,t)},xn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return C(n)?n(e):n.replace(/%s/i,e)},xn.set=function(t){var e,n;for(n in t)o(t,n)&&(C(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},xn.eras=function(t,e){var r,i,o,a=this._eras||ae("en")._eras;for(r=0,i=a.length;r<i;++r){switch(typeof a[r].since){case"string":o=n(a[r].since).startOf("day"),a[r].since=o.valueOf()}switch(typeof a[r].until){case"undefined":a[r].until=1/0;break;case"string":o=n(a[r].until).startOf("day").valueOf(),a[r].until=o.valueOf()}}return a},xn.erasParse=function(t,e,n){var r,i,o,a,s,u=this.eras();for(t=t.toUpperCase(),r=0,i=u.length;r<i;++r)if(o=u[r].name.toUpperCase(),a=u[r].abbr.toUpperCase(),s=u[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return u[r];break;case"NNNN":if(o===t)return u[r];break;case"NNNNN":if(s===t)return u[r]}else if([o,a,s].indexOf(t)>=0)return u[r]},xn.erasConvertYear=function(t,e){var r=t.since<=t.until?1:-1;return void 0===e?n(t.since).year():n(t.since).year()+(e-t.offset)*r},xn.erasAbbrRegex=function(t){return o(this,"_erasAbbrRegex")||un.call(this),t?this._erasAbbrRegex:this._erasRegex},xn.erasNameRegex=function(t){return o(this,"_erasNameRegex")||un.call(this),t?this._erasNameRegex:this._erasRegex},xn.erasNarrowRegex=function(t){return o(this,"_erasNarrowRegex")||un.call(this),t?this._erasNarrowRegex:this._erasRegex},xn.months=function(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||_t).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone},xn.monthsShort=function(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[_t.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},xn.monthsParse=function(t,e,n){var r,i,o;if(this._monthsParseExact)return Ct.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=d([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},xn.monthsRegex=function(t){return this._monthsParseExact?(o(this,"_monthsRegex")||Tt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=St),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},xn.monthsShortRegex=function(t){return this._monthsParseExact?(o(this,"_monthsRegex")||Tt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=Mt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},xn.week=function(t){return Wt(t,this._week.dow,this._week.doy).week},xn.firstDayOfYear=function(){return this._week.doy},xn.firstDayOfWeek=function(){return this._week.dow},xn.weekdays=function(t,e){var n=r(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?zt(n,this._week.dow):t?n[t.day()]:n},xn.weekdaysMin=function(t){return!0===t?zt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},xn.weekdaysShort=function(t){return!0===t?zt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},xn.weekdaysParse=function(t,e,n){var r,i,o;if(this._weekdaysParseExact)return Gt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=d([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},xn.weekdaysRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Bt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},xn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},xn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ut),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},xn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},xn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},ie("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===G(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),n.lang=k("moment.lang is deprecated. Use moment.locale instead.",ie),n.langData=k("moment.langData is deprecated. Use moment.localeData instead.",ae);var Mn=Math.abs;function Sn(t,e,n,r){var i=Ie(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function Cn(t){return t<0?Math.floor(t):Math.ceil(t)}function An(t){return 4800*t/146097}function Dn(t){return 146097*t/4800}function Tn(t){return function(){return this.as(t)}}var Ln=Tn("ms"),En=Tn("s"),Nn=Tn("m"),On=Tn("h"),Fn=Tn("d"),Pn=Tn("w"),Wn=Tn("M"),Rn=Tn("Q"),zn=Tn("y");function In(t){return function(){return this.isValid()?this._data[t]:NaN}}var Hn=In("milliseconds"),Yn=In("seconds"),Bn=In("minutes"),jn=In("hours"),Un=In("days"),Gn=In("months"),Vn=In("years"),qn=Math.round,$n={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Xn(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}var Zn=Math.abs;function Kn(t){return(t>0)-(t<0)||+t}function Qn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,o,a,s,u=Zn(this._milliseconds)/1e3,l=Zn(this._days),c=Zn(this._months),f=this.asSeconds();return f?(t=U(u/60),e=U(t/60),u%=60,t%=60,n=U(c/12),c%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=f<0?"-":"",o=Kn(this._months)!==Kn(f)?"-":"",a=Kn(this._days)!==Kn(f)?"-":"",s=Kn(this._milliseconds)!==Kn(f)?"-":"",i+"P"+(n?o+n+"Y":"")+(c?o+c+"M":"")+(l?a+l+"D":"")+(e||t||u?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(u?s+r+"S":"")):"P0D"}var Jn=De.prototype;return Jn.isValid=function(){return this._isValid},Jn.abs=function(){var t=this._data;return this._milliseconds=Mn(this._milliseconds),this._days=Mn(this._days),this._months=Mn(this._months),t.milliseconds=Mn(t.milliseconds),t.seconds=Mn(t.seconds),t.minutes=Mn(t.minutes),t.hours=Mn(t.hours),t.months=Mn(t.months),t.years=Mn(t.years),this},Jn.add=function(t,e){return Sn(this,t,e,1)},Jn.subtract=function(t,e){return Sn(this,t,e,-1)},Jn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=I(t))||"quarter"===t||"year"===t)switch(n=this._months+An(e=this._days+r/864e5),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Dn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Jn.asMilliseconds=Ln,Jn.asSeconds=En,Jn.asMinutes=Nn,Jn.asHours=On,Jn.asDays=Fn,Jn.asWeeks=Pn,Jn.asMonths=Wn,Jn.asQuarters=Rn,Jn.asYears=zn,Jn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*G(this._months/12):NaN},Jn._bubble=function(){var t,e,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Cn(Dn(s)+a),a=0,s=0),u.milliseconds=o%1e3,t=U(o/1e3),u.seconds=t%60,e=U(t/60),u.minutes=e%60,n=U(e/60),u.hours=n%24,a+=U(n/24),s+=i=U(An(a)),a-=Cn(Dn(i)),r=U(s/12),s%=12,u.days=a,u.months=s,u.years=r,this},Jn.clone=function(){return Ie(this)},Jn.get=function(t){return t=I(t),this.isValid()?this[t+"s"]():NaN},Jn.milliseconds=Hn,Jn.seconds=Yn,Jn.minutes=Bn,Jn.hours=jn,Jn.days=Un,Jn.weeks=function(){return U(this.days()/7)},Jn.months=Gn,Jn.years=Vn,Jn.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=$n;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(i=t),"object"==typeof e&&(o=Object.assign({},$n,e),null!=e.s&&null==e.ss&&(o.ss=e.s-1)),r=function(t,e,n,r){var i=Ie(t).abs(),o=qn(i.as("s")),a=qn(i.as("m")),s=qn(i.as("h")),u=qn(i.as("d")),l=qn(i.as("M")),c=qn(i.as("w")),f=qn(i.as("y")),d=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(d=d||c<=1&&["w"]||c<n.w&&["ww",c]),(d=d||l<=1&&["M"]||l<n.M&&["MM",l]||f<=1&&["y"]||["yy",f])[2]=e,d[3]=+t>0,d[4]=r,Xn.apply(null,d)}(this,!i,o,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)},Jn.toISOString=Qn,Jn.toString=Qn,Jn.toJSON=Qn,Jn.locale=Ze,Jn.localeData=Qe,Jn.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qn),Jn.lang=Ke,F("X",0,0,"unix"),F("x",0,0,"valueOf"),dt("x",ut),dt("X",/[+-]?\d+(\.\d{1,3})?/),mt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t))}),mt("x",function(t,e,n){n._d=new Date(G(t))}),n.version="2.29.1",t=_e,n.fn=yn,n.min=function(){var t=[].slice.call(arguments,0);return Ce("isBefore",t)},n.max=function(){var t=[].slice.call(arguments,0);return Ce("isAfter",t)},n.now=function(){return Date.now?Date.now():+new Date},n.utc=d,n.unix=function(t){return _e(1e3*t)},n.months=function(t,e){return kn(t,e,"months")},n.isDate=l,n.locale=ie,n.invalid=g,n.duration=Ie,n.isMoment=x,n.weekdays=function(t,e,n){return _n(t,e,n,"weekdays")},n.parseZone=function(){return _e.apply(null,arguments).parseZone()},n.localeData=ae,n.isDuration=Te,n.monthsShort=function(t,e){return kn(t,e,"monthsShort")},n.weekdaysMin=function(t,e,n){return _n(t,e,n,"weekdaysMin")},n.defineLocale=oe,n.updateLocale=function(t,e){if(null!=e){var n,r,i=Qt;null!=Jt[t]&&null!=Jt[t].parentLocale?Jt[t].set(A(Jt[t]._config,e)):(null!=(r=re(t))&&(i=r._config),e=A(i,e),null==r&&(e.abbr=t),(n=new D(e)).parentLocale=Jt[t],Jt[t]=n),ie(t)}else null!=Jt[t]&&(null!=Jt[t].parentLocale?(Jt[t]=Jt[t].parentLocale,t===ie()&&ie(t)):null!=Jt[t]&&delete Jt[t]);return Jt[t]},n.locales=function(){return _(Jt)},n.weekdaysShort=function(t,e,n){return _n(t,e,n,"weekdaysShort")},n.normalizeUnits=I,n.relativeTimeRounding=function(t){return void 0===t?qn:"function"==typeof t&&(qn=t,!0)},n.relativeTimeThreshold=function(t,e){return void 0!==$n[t]&&(void 0===e?$n[t]:($n[t]=e,"s"===t&&($n.ss=e-1),!0))},n.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},n.prototype=yn,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}),function(){var t={version:"3.5.17"},e=[].slice,n=function(t){return e.call(t)},r=this.document;function i(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(r)try{n(r.documentElement.childNodes)}catch(su){n=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),r)try{r.createElement("DIV").style.setProperty("opacity",0,"")}catch(uu){var a=this.Element.prototype,s=a.setAttribute,u=a.setAttributeNS,l=this.CSSStyleDeclaration.prototype,c=l.setProperty;a.setAttribute=function(t,e){s.call(this,t,e+"")},a.setAttributeNS=function(t,e,n){u.call(this,t,e,n+"")},l.setProperty=function(t,e,n){c.call(this,t,e+"",n)}}function f(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function d(t){return null===t?NaN:+t}function h(t){return!isNaN(t)}function p(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}t.ascending=f,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},t.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},t.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},t.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)h(n=+t[o])&&(r+=n);else for(;++o<i;)h(n=+e.call(t,t[o],o))&&(r+=n);return r},t.mean=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)h(n=d(t[o]))?r+=n:--a;else for(;++o<i;)h(n=d(e.call(t,t[o],o)))?r+=n:--a;if(a)return r/a},t.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},t.median=function(e,n){var r,i=[],o=e.length,a=-1;if(1===arguments.length)for(;++a<o;)h(r=d(e[a]))&&i.push(r);else for(;++a<o;)h(r=d(n.call(e,e[a],a)))&&i.push(r);if(i.length)return t.quantile(i.sort(f),.5)},t.variance=function(t,e){var n,r,i=t.length,o=0,a=0,s=-1,u=0;if(1===arguments.length)for(;++s<i;)h(n=d(t[s]))&&(a+=(r=n-o)*(n-(o+=r/++u)));else for(;++s<i;)h(n=d(e.call(t,t[s],s)))&&(a+=(r=n-o)*(n-(o+=r/++u)));if(u>1)return a/(u-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var g=p(f);function v(t){return t.length}t.bisectLeft=g.left,t.bisect=t.bisectRight=g.right,t.bisector=function(t){return p(1===t.length?function(e,n){return f(t(e),n)}:t)},t.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},t.transpose=function(e){if(!(o=e.length))return[];for(var n=-1,r=t.min(e,v),i=new Array(r);++n<r;)for(var o,a=-1,s=i[n]=new Array(o);++a<o;)s[a]=e[a][n];return i},t.zip=function(){return t.transpose(arguments)},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var m=Math.abs;function y(t){for(var e=1;t*e%1;)e*=10;return e}function b(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function x(){this._=Object.create(null)}function w(t){return"__proto__"==(t+="")||"\0"===t[0]?"\0"+t:t}function k(t){return"\0"===(t+="")[0]?t.slice(1):t}function _(t){return w(t)in this._}function M(t){return(t=w(t))in this._&&delete this._[t]}function S(){var t=[];for(var e in this._)t.push(k(e));return t}function C(){var t=0;for(var e in this._)++t;return t}function A(){for(var t in this._)return!1;return!0}function D(){this._=Object.create(null)}function T(t){return t}function L(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function E(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=N.length;n<r;++n){var i=N[n]+e;if(i in t)return i}}t.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],o=y(m(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},t.map=function(t,e){var n=new x;if(t instanceof x)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n},b(x,{has:_,get:function(t){return this._[w(t)]},set:function(t,e){return this._[w(t)]=e},remove:M,keys:S,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:k(e),value:this._[e]});return t},size:C,empty:A,forEach:function(t){for(var e in this._)t.call(this,k(e),this._[e])}}),t.nest=function(){var e,n,r={},i=[],o=[];function a(t,o,s){if(s>=i.length)return n?n.call(r,o):e?o.sort(e):o;for(var u,l,c,f,d=-1,h=o.length,p=i[s++],g=new x;++d<h;)(f=g.get(u=p(l=o[d])))?f.push(l):g.set(u,[l]);return t?(l=t(),c=function(e,n){l.set(e,a(t,n,s))}):(l={},c=function(e,n){l[e]=a(t,n,s)}),g.forEach(c),l}function s(t,e){if(e>=i.length)return t;var n=[],r=o[e++];return t.forEach(function(t,r){n.push({key:t,values:s(r,e)})}),r?n.sort(function(t,e){return r(t.key,e.key)}):n}return r.map=function(t,e){return a(e,t,0)},r.entries=function(e){return s(a(t.map,e,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return o[i.length-1]=t,r},r.sortValues=function(t){return e=t,r},r.rollup=function(t){return n=t,r},r},t.set=function(t){var e=new D;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},b(D,{has:_,add:function(t){return this._[w(t+="")]=!0,t},remove:M,values:S,size:C,empty:A,forEach:function(t){for(var e in this._)t.call(this,k(e))}}),t.behavior={},t.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=L(t,e,e[n]);return t};var N=["webkit","ms","moz","Moz","o","O"];function O(){}function F(){}function P(t){var e=[],n=new x;function r(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function W(){t.event.preventDefault()}function R(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function z(e){for(var n=new F,r=0,i=arguments.length;++r<i;)n[arguments[r]]=P(n);return n.of=function(r,i){return function(o){try{var a=o.sourceEvent=t.event;o.target=e,t.event=o,n[o.type].apply(r,i)}finally{t.event=a}}},n}t.dispatch=function(){for(var t=new F,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=P(t);return t},F.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},t.event=null,t.requote=function(t){return t.replace(I,"\\$&")};var I=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,H={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function Y(t){return H(t,G),t}var B=function(t,e){return e.querySelector(t)},j=function(t,e){return e.querySelectorAll(t)},U=function(t,e){var n=t.matches||t[E(t,"matchesSelector")];return(U=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(B=function(t,e){return Sizzle(t,e)[0]||null},j=Sizzle,U=Sizzle.matchesSelector),t.selection=function(){return t.select(r.documentElement)};var G=t.selection.prototype=[];function V(t){return"function"==typeof t?t:function(){return B(t,this)}}function q(t){return"function"==typeof t?t:function(){return j(t,this)}}G.select=function(t){var e,n,r,i,o=[];t=V(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return Y(o)},G.selectAll=function(t){var e,r,i=[];t=q(t);for(var o=-1,a=this.length;++o<a;)for(var s=this[o],u=-1,l=s.length;++u<l;)(r=s[u])&&(i.push(e=n(t.call(r,r.__data__,u,o))),e.parentNode=r);return Y(i)};var $="http://www.w3.org/1999/xhtml",X={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Z(e,n){return e=t.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function K(t){return t.trim().replace(/\s+/g," ")}function Q(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function J(t){return(t+"").trim().split(/^|\s+/)}function tt(t,e){var n=(t=J(t).map(et)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function et(t){var e=Q(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",K(i+" "+t))):n.setAttribute("class",K(i.replace(e," ")))}}function nt(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function rt(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function it(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===$&&t.documentElement.namespaceURI===$?t.createElement(e):t.createElementNS(n,e)}}function ot(){var t=this.parentNode;t&&t.removeChild(this)}function at(t){return{__data__:t}}function st(t){return function(){return U(this,t)}}function ut(t){return arguments.length||(t=f),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function lt(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],a=0,s=o.length;a<s;a++)(i=o[a])&&e(i,a,n);return t}function ct(t){return H(t,ft),t}t.ns={prefix:X,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),X.hasOwnProperty(n)?{space:X[n],local:t}:t}},G.attr=function(e,n){if(arguments.length<2){if("string"==typeof e){var r=this.node();return(e=t.ns.qualify(e)).local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(n in e)this.each(Z(n,e[n]));return this}return this.each(Z(e,n))},G.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=J(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!Q(t[i]).test(e))return!1;return!0}for(e in t)this.each(tt(e,t[e]));return this}return this.each(tt(t,e))},G.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(nt(n,t[n],e));return this}if(r<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(nt(t,e,n))},G.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(rt(e,t[e]));return this}return this.each(rt(t,e))},G.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},G.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},G.append=function(t){return t=it(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},G.insert=function(t,e){return t=it(t),e=V(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},G.remove=function(){return this.each(ot)},G.data=function(t,e){var n,r,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(t[i]=r.__data__);return t}function a(t,n){var r,i,o,a=t.length,c=n.length,f=Math.min(a,c),d=new Array(c),h=new Array(c),p=new Array(a);if(e){var g,v=new x,m=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(v.has(g=e.call(i,i.__data__,r))?p[r]=i:v.set(g,i),m[r]=g);for(r=-1;++r<c;)(i=v.get(g=e.call(n,o=n[r],r)))?!0!==i&&(d[r]=i,i.__data__=o):h[r]=at(o),v.set(g,!0);for(r=-1;++r<a;)r in m&&!0!==v.get(m[r])&&(p[r]=t[r])}else{for(r=-1;++r<f;)o=n[r],(i=t[r])?(i.__data__=o,d[r]=i):h[r]=at(o);for(;r<c;++r)h[r]=at(n[r]);for(;r<a;++r)p[r]=t[r]}h.update=d,h.parentNode=d.parentNode=p.parentNode=t.parentNode,s.push(h),u.push(d),l.push(p)}var s=ct([]),u=Y([]),l=Y([]);if("function"==typeof t)for(;++i<o;)a(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<o;)a(n=this[i],t);return u.enter=function(){return s},u.exit=function(){return l},u},G.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},G.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=st(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return Y(i)},G.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},G.sort=function(t){t=ut.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},G.each=function(t){return lt(this,function(e,n,r){t.call(e,e.__data__,n,r)})},G.call=function(t){var e=n(arguments);return t.apply(e[0]=this,e),this},G.empty=function(){return!this.node()},G.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},G.size=function(){var t=0;return lt(this,function(){++t}),t};var ft=[];function dt(t){var e,n;return function(r,i,o){var a,s=t[o].update,u=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<u;);return a}}function ht(e,r,i){var o="__on"+e,a=e.indexOf("."),s=gt;a>0&&(e=e.slice(0,a));var u=pt.get(e);function l(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}return u&&(e=u,s=vt),a?r?function(){var t=s(r,n(arguments));l.call(this),this.addEventListener(e,this[o]=t,t.$=i),t._=r}:l:r?O:function(){var n,r=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var i in this)if(n=i.match(r)){var o=this[i];this.removeEventListener(n[1],o,o.$),delete this[i]}}}t.selection.enter=ct,t.selection.enter.prototype=ft,ft.append=G.append,ft.empty=G.empty,ft.node=G.node,ft.call=G.call,ft.size=G.size,ft.select=function(t){for(var e,n,r,i,o,a=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(o=i[l])?(e.push(r[l]=n=t.call(i.parentNode,o.__data__,l,s)),n.__data__=o.__data__):e.push(null)}return Y(a)},ft.insert=function(t,e){return arguments.length<2&&(e=dt(this)),G.insert.call(this,t,e)},t.select=function(t){var e;return"string"==typeof t?(e=[B(t,r)]).parentNode=r.documentElement:(e=[t]).parentNode=i(t),Y([e])},t.selectAll=function(t){var e;return"string"==typeof t?(e=n(j(t,r))).parentNode=r.documentElement:(e=n(t)).parentNode=null,Y([e])},G.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(ht(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(ht(t,e,n))};var pt=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function gt(e,n){return function(r){var i=t.event;t.event=r,n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=i}}}function vt(t,e){var n=gt(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}r&&pt.forEach(function(t){"on"+t in r&&pt.remove(t)});var mt,yt=0;function bt(e){var n=".dragsuppress-"+ ++yt,r="click"+n,a=t.select(o(e)).on("touchmove"+n,W).on("dragstart"+n,W).on("selectstart"+n,W);if(null==mt&&(mt=!("onselectstart"in e)&&E(e.style,"userSelect")),mt){var s=i(e).style,u=s[mt];s[mt]="none"}return function(t){if(a.on(n,null),mt&&(s[mt]=u),t){var e=function(){a.on(r,null)};a.on(r,function(){W(),e()},!0),setTimeout(e,0)}}}t.mouse=function(t){return wt(t,R())};var xt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function wt(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(xt<0){var a=o(e);if(a.scrollX||a.scrollY){var s=(r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xt=!(s.f||s.e),r.remove()}}return xt?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var u=e.getBoundingClientRect();return[n.clientX-u.left-e.clientLeft,n.clientY-u.top-e.clientTop]}function kt(){return t.event.changedTouches[0].identifier}t.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=R().changedTouches),e)for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).identifier===n)return wt(t,r)},t.behavior.drag=function(){var e=z(a,"drag","dragstart","dragend"),n=null,r=s(O,t.mouse,o,"mousemove","mouseup"),i=s(kt,t.touch,T,"touchmove","touchend");function a(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function s(r,i,o,a,s){return function(){var u,l=this,c=t.event.target.correspondingElement||t.event.target,f=l.parentNode,d=e.of(l,arguments),h=0,p=r(),g=".drag"+(null==p?"":"-"+p),v=t.select(o(c)).on(a+g,b).on(s+g,x),m=bt(c),y=i(f,p);function b(){var t,e,n=i(f,p);n&&(h|=(t=n[0]-y[0])|(e=n[1]-y[1]),y=n,d({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:t,dy:e}))}function x(){i(f,p)&&(v.on(a+g,null).on(s+g,null),m(h),d({type:"dragend"}))}u=n?[(u=n.apply(l,arguments)).x-y[0],u.y-y[1]]:[0,0],d({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(n=t,a):n},t.rebind(a,e,"on")},t.touches=function(t,e){return arguments.length<2&&(e=R().touches),e?n(e).map(function(e){var n=wt(t,e);return n.identifier=e.identifier,n}):[]};var _t=1e-6,Mt=_t*_t,St=Math.PI,Ct=2*St,At=Ct-_t,Dt=St/2,Tt=St/180,Lt=180/St;function Et(t){return t>0?1:t<0?-1:0}function Nt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Ot(t){return t>1?0:t<-1?St:Math.acos(t)}function Ft(t){return t>1?Dt:t<-1?-Dt:Math.asin(t)}function Pt(t){return((t=Math.exp(t))+1/t)/2}function Wt(t){return(t=Math.sin(t/2))*t}var Rt=Math.SQRT2;t.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[2],u=e[0]-i,l=e[1]-o,c=u*u+l*l;if(c<Mt)r=Math.log(s/a)/Rt,n=function(t){return[i+t*u,o+t*l,a*Math.exp(Rt*t*r)]};else{var f=Math.sqrt(c),d=(s*s-a*a+4*c)/(2*a*2*f),h=(s*s-a*a-4*c)/(2*s*2*f),p=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(h*h+1)-h);r=(g-p)/Rt,n=function(t){var e,n=t*r,s=Pt(p),c=a/(2*f)*(s*(e=Rt*n+p,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(p));return[i+c*u,o+c*l,a*s/Pt(Rt*n+p)]}}return n.duration=1e3*r,n},t.behavior.zoom=function(){var e,n,i,a,s,u,l,c,f,d={x:0,y:0,k:1},h=[960,500],p=Ht,g=250,v=0,m="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",w=z(k,"zoomstart","zoom","zoomend");function k(t){t.on(m,E).on(It+".zoom",O).on("dblclick.zoom",F).on(x,N)}function _(t){return[(t[0]-d.x)/d.k,(t[1]-d.y)/d.k]}function M(t){d.k=Math.max(p[0],Math.min(p[1],t))}function S(t,e){e=function(t){return[t[0]*d.k+d.x,t[1]*d.k+d.y]}(e),d.x+=t[0]-e[0],d.y+=t[1]-e[1]}function C(e,r,i,o){e.__chart__={x:d.x,y:d.y,k:d.k},M(Math.pow(2,o)),S(n=r,i),e=t.select(e),g>0&&(e=e.transition().duration(g)),e.call(k.event)}function A(){l&&l.domain(u.range().map(function(t){return(t-d.x)/d.k}).map(u.invert)),f&&f.domain(c.range().map(function(t){return(t-d.y)/d.k}).map(c.invert))}function D(t){v++||t({type:"zoomstart"})}function T(t){A(),t({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function L(t){--v||(t({type:"zoomend"}),n=null)}function E(){var e=this,n=w.of(e,arguments),r=0,i=t.select(o(e)).on(y,u).on(b,l),a=_(t.mouse(e)),s=bt(e);function u(){r=1,S(t.mouse(e),a),T(n)}function l(){i.on(y,null).on(b,null),s(r),L(n)}Ls.call(e),D(n)}function N(){var e,n=this,r=w.of(n,arguments),i={},o=0,a=".zoom-"+t.event.changedTouches[0].identifier,u="touchmove"+a,l="touchend"+a,c=[],f=t.select(n),h=bt(n);function p(){var r=t.touches(n);return e=d.k,r.forEach(function(t){t.identifier in i&&(i[t.identifier]=_(t))}),r}function g(){var e=t.event.target;t.select(e).on(u,v).on(l,y),c.push(e);for(var r=t.event.changedTouches,a=0,f=r.length;a<f;++a)i[r[a].identifier]=null;var h=p(),g=Date.now();if(1===h.length)g-s<500&&(C(n,m=h[0],i[m.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),W()),s=g;else if(h.length>1){var m,b=h[1],x=(m=h[0])[0]-b[0],w=m[1]-b[1];o=x*x+w*w}}function v(){var a,u,l,c,f=t.touches(n);Ls.call(n);for(var d=0,h=f.length;d<h;++d,c=null)if(c=i[(l=f[d]).identifier]){if(u)break;a=l,u=c}if(c){var p=(p=l[0]-a[0])*p+(p=l[1]-a[1])*p,g=o&&Math.sqrt(p/o);a=[(a[0]+l[0])/2,(a[1]+l[1])/2],u=[(u[0]+c[0])/2,(u[1]+c[1])/2],M(g*e)}s=null,S(a,u),T(r)}function y(){if(t.event.touches.length){for(var e=t.event.changedTouches,n=0,o=e.length;n<o;++n)delete i[e[n].identifier];for(var s in i)return void p()}t.selectAll(c).on(a,null),f.on(m,E).on(x,N),h(),L(r)}g(),D(r),f.on(m,null).on(x,g)}function O(){var r=w.of(this,arguments);a?clearTimeout(a):(Ls.call(this),e=_(n=i||t.mouse(this)),D(r)),a=setTimeout(function(){a=null,L(r)},50),W(),M(Math.pow(2,.002*zt())*d.k),S(n,e),T(r)}function F(){var e=t.mouse(this),n=Math.log(d.k)/Math.LN2;C(this,e,_(e),t.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return It||(It="onwheel"in r?(zt=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in r?(zt=function(){return t.event.wheelDelta},"mousewheel"):(zt=function(){return-t.event.detail},"MozMousePixelScroll")),k.event=function(e){e.each(function(){var e=w.of(this,arguments),r=d;Os?t.select(this).transition().each("start.zoom",function(){d=this.__chart__||{x:0,y:0,k:1},D(e)}).tween("zoom:zoom",function(){var i=h[0],o=n?n[0]:i/2,a=n?n[1]:h[1]/2,s=t.interpolateZoom([(o-d.x)/d.k,(a-d.y)/d.k,i/d.k],[(o-r.x)/r.k,(a-r.y)/r.k,i/r.k]);return function(t){var n=s(t),r=i/n[2];this.__chart__=d={x:o-n[0]*r,y:a-n[1]*r,k:r},T(e)}}).each("interrupt.zoom",function(){L(e)}).each("end.zoom",function(){L(e)}):(this.__chart__=d,D(e),T(e),L(e))})},k.translate=function(t){return arguments.length?(d={x:+t[0],y:+t[1],k:d.k},A(),k):[d.x,d.y]},k.scale=function(t){return arguments.length?(d={x:d.x,y:d.y,k:null},M(+t),A(),k):d.k},k.scaleExtent=function(t){return arguments.length?(p=null==t?Ht:[+t[0],+t[1]],k):p},k.center=function(t){return arguments.length?(i=t&&[+t[0],+t[1]],k):i},k.size=function(t){return arguments.length?(h=t&&[+t[0],+t[1]],k):h},k.duration=function(t){return arguments.length?(g=+t,k):g},k.x=function(t){return arguments.length?(l=t,u=t.copy(),d={x:0,y:0,k:1},k):l},k.y=function(t){return arguments.length?(f=t,c=t.copy(),d={x:0,y:0,k:1},k):f},t.rebind(k,w,"on")};var zt,It,Ht=[0,1/0];function Yt(){}function Bt(t,e,n){return this instanceof Bt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Bt?new Bt(t.h,t.s,t.l):le(""+t,ce,Bt):new Bt(t,e,n)}t.color=Yt,Yt.prototype.toString=function(){return this.rgb()+""},t.hsl=Bt;var jt=Bt.prototype=new Yt;function Ut(t,e,n){var r,i;function o(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new ie(o(t+120),o(t),o(t-120))}function Gt(e,n,r){return this instanceof Gt?(this.h=+e,this.c=+n,void(this.l=+r)):arguments.length<2?e instanceof Gt?new Gt(e.h,e.c,e.l):te(e instanceof $t?e.l:(e=fe((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Gt(e,n,r)}jt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Bt(this.h,this.s,this.l/t)},jt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Bt(this.h,this.s,t*this.l)},jt.rgb=function(){return Ut(this.h,this.s,this.l)},t.hcl=Gt;var Vt=Gt.prototype=new Yt;function qt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new $t(n,Math.cos(t*=Tt)*e,Math.sin(t)*e)}function $t(t,e,n){return this instanceof $t?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof $t?new $t(t.l,t.a,t.b):t instanceof Gt?qt(t.h,t.c,t.l):fe((t=ie(t)).r,t.g,t.b):new $t(t,e,n)}Vt.brighter=function(t){return new Gt(this.h,this.c,Math.min(100,this.l+Xt*(arguments.length?t:1)))},Vt.darker=function(t){return new Gt(this.h,this.c,Math.max(0,this.l-Xt*(arguments.length?t:1)))},Vt.rgb=function(){return qt(this.h,this.c,this.l).rgb()},t.lab=$t;var Xt=18,Zt=.95047,Kt=1.08883,Qt=$t.prototype=new Yt;function Jt(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return new ie(re(3.2404542*(i=ee(i)*Zt)-1.5371385*(r=1*ee(r))-.4985314*(o=ee(o)*Kt)),re(-.969266*i+1.8760108*r+.041556*o),re(.0556434*i-.2040259*r+1.0572252*o))}function te(t,e,n){return t>0?new Gt(Math.atan2(n,e)*Lt,Math.sqrt(e*e+n*n),t):new Gt(NaN,NaN,t)}function ee(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ne(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function re(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ie(t,e,n){return this instanceof ie?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ie?new ie(t.r,t.g,t.b):le(""+t,ie,Ut):new ie(t,e,n)}function oe(t){return new ie(t>>16,t>>8&255,255&t)}function ae(t){return oe(t)+""}Qt.brighter=function(t){return new $t(Math.min(100,this.l+Xt*(arguments.length?t:1)),this.a,this.b)},Qt.darker=function(t){return new $t(Math.max(0,this.l-Xt*(arguments.length?t:1)),this.a,this.b)},Qt.rgb=function(){return Jt(this.l,this.a,this.b)},t.rgb=ie;var se=ie.prototype=new Yt;function ue(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function le(t,e,n){var r,i,o,a=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(he(i[0]),he(i[1]),he(i[2]))}return(o=pe.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,u=15&o,u|=u<<4):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),e(a,s,u))}function ce(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,u=(a+o)/2;return s?(i=u<.5?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=u>0&&u<1?0:r),new Bt(r,i,u)}function fe(t,e,n){var r=ne((.4124564*(t=de(t))+.3575761*(e=de(e))+.1804375*(n=de(n)))/Zt),i=ne((.2126729*t+.7151522*e+.072175*n)/1);return $t(116*i-16,500*(r-i),200*(i-ne((.0193339*t+.119192*e+.9503041*n)/Kt)))}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function he(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}se.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ie(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new ie(i,i,i)},se.darker=function(t){return new ie((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},se.hsl=function(){return ce(this.r,this.g,this.b)},se.toString=function(){return"#"+ue(this.r)+ue(this.g)+ue(this.b)};var pe=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ge(t){return"function"==typeof t?t:function(){return t}}function ve(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),me(e,n,t,r)}}function me(e,r,i,o){var a={},s=t.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;function f(){var t,e=l.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||e>=200&&e<300||304===e){try{t=i.call(a,l)}catch(su){return void s.error.call(a,su)}s.load.call(a,t)}else s.error.call(a,l)}return this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()},l.onprogress=function(e){var n=t.event;t.event=e;try{s.progress.call(a,l)}finally{t.event=n}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(r=null==t?null:t+"",a):r},a.responseType=function(t){return arguments.length?(c=t,a):c},a.response=function(t){return i=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(n(arguments)))}}),a.send=function(t,n,i){if(2===arguments.length&&"function"==typeof n&&(i=n,n=null),l.open(t,e,!0),null==r||"accept"in u||(u.accept=r+",*/*"),l.setRequestHeader)for(var o in u)l.setRequestHeader(o,u[o]);return null!=r&&l.overrideMimeType&&l.overrideMimeType(r),null!=c&&(l.responseType=c),null!=i&&a.on("error",i).on("load",function(t){i(null,t)}),s.beforesend.call(a,l),l.send(null==n?null:n),a},a.abort=function(){return l.abort(),a},t.rebind(a,s,"on"),null==o?a:a.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(o))}pe.forEach(function(t,e){pe.set(t,oe(e))}),t.functor=ge,t.xhr=ve(T),t.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=me(t,e,null==n?o:a(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?o:a(t)):n},i}function o(t){return i.parse(t.responseText)}function a(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(u).join(t)}function u(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i})},i.parseRows=function(t,e){var n,i,o={},a={},s=[],u=t.length,l=0,c=0;function f(){if(l>=u)return a;if(i)return i=!1,o;var e=l;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return l=n+2,13===(s=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++l):10===s&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l<u;){var s,c=1;if(10===(s=t.charCodeAt(l++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(l)&&(++l,++c);else if(s!==r)continue;return t.slice(e,l-c)}return t.slice(e)}for(;(n=f())!==a;){for(var d=[];n!==o&&n!==a;)d.push(n),n=f();e&&null==(d=e(d,c++))||s.push(d)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new D,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(u).join(t)].concat(e.map(function(e){return r.map(function(t){return u(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var ye,be,xe,we,ke=this[E(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function _e(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i=n+e,o={c:t,t:i,n:null};return be?be.n=o:ye=o,be=o,xe||(we=clearTimeout(we),xe=1,ke(Me)),o}function Me(){var t=Se(),e=Ce()-t;e>24?(isFinite(e)&&(clearTimeout(we),we=setTimeout(Me,e)),xe=0):(xe=1,ke(Me))}function Se(){for(var t=Date.now(),e=ye;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ce(){for(var t,e=ye,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ye=e.n;return be=t,n}function Ae(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}t.timer=function(){_e.apply(this,arguments)},t.timer.flush=function(){Se(),Ce()},t.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var De=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*m(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});function Te(e){var n=e.decimal,r=e.thousands,i=e.grouping,o=e.currency,a=i&&r?function(t,e){for(var n=t.length,o=[],a=0,s=i[0],u=0;n>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),o.push(t.substring(n-=s,n+s)),!((u+=s+1)>e));)s=i[a=(a+1)%i.length];return o.reverse().join(r)}:T;return function(e){var r=Le.exec(e),i=r[1]||" ",s=r[2]||">",u=r[3]||"-",l=r[4]||"",c=r[5],f=+r[6],d=r[7],h=r[8],p=r[9],g=1,v="",m="",y=!1,b=!0;switch(h&&(h=+h.substring(1)),(c||"0"===i&&"="===s)&&(c=i="0",s="="),p){case"n":d=!0,p="g";break;case"%":g=100,m="%",p="f";break;case"p":g=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+p.toLowerCase());case"c":b=!1;case"d":y=!0,h=0;break;case"s":g=-1,p="r"}"$"===l&&(v=o[0],m=o[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=Ee.get(p)||Ne;var x=c&&d;return function(e){var r=m;if(y&&e%1)return"";var o=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===u?"":u;if(g<0){var l=t.formatPrefix(e,h);e=l.scale(e),r=l.symbol+m}else e*=g;var w,k,_=(e=p(e,h)).lastIndexOf(".");if(_<0){var M=b?e.lastIndexOf("e"):-1;M<0?(w=e,k=""):(w=e.substring(0,M),k=e.substring(M))}else w=e.substring(0,_),k=n+e.substring(_+1);!c&&d&&(w=a(w,1/0));var S=v.length+w.length+k.length+(x?0:o.length),C=S<f?new Array(S=f-S+1).join(i):"";return x&&(w=a(C+w,C.length?f-k.length:1/0)),o+=v,e=w+k,("<"===s?o+e+C:">"===s?C+o+e:"^"===s?C.substring(0,S>>=1)+o+e+C.substring(S):o+(x?e:C+e))+r}}}t.formatPrefix=function(e,n){var r=0;return(e=+e)&&(e<0&&(e*=-1),n&&(e=t.round(e,Ae(e,n))),r=1+Math.floor(1e-12+Math.log(e)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),De[8+r/3]};var Le=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ee=t.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(e,n){return(e=t.round(e,Ae(e,n))).toFixed(Math.max(0,Math.min(20,Ae(e*(1+1e-15),n))))}});function Ne(t){return t+""}var Oe=t.time={},Fe=Date;function Pe(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Pe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){We.setUTCDate.apply(this._,arguments)},setDay:function(){We.setUTCDay.apply(this._,arguments)},setFullYear:function(){We.setUTCFullYear.apply(this._,arguments)},setHours:function(){We.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){We.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){We.setUTCMinutes.apply(this._,arguments)},setMonth:function(){We.setUTCMonth.apply(this._,arguments)},setSeconds:function(){We.setUTCSeconds.apply(this._,arguments)},setTime:function(){We.setTime.apply(this._,arguments)}};var We=Date.prototype;function Re(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Fe(n-1)),1),n}function o(t,n){return e(t=new Fe(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;a<r;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;a<r;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=ze(t);return s.floor=s,s.round=ze(r),s.ceil=ze(i),s.offset=ze(o),s.range=function(t,e,n){try{Fe=Pe;var r=new Pe;return r._=t,a(r,e,n)}finally{Fe=Date}},t}function ze(t){return function(e,n){try{Fe=Pe;var r=new Pe;return r._=e,t(r,n)._}finally{Fe=Date}}}function Ie(e){var n=e.dateTime,r=e.date,i=e.time,o=e.periods,a=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function c(t){var e=t.length;function n(n){for(var r,i,o,a=[],s=-1,u=0;++s<e;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=He[r=t.charAt(++s)])&&(r=t.charAt(++s)),(o=w[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Fe!==Pe,i=new(r?Pe:Fe);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return t},n}function f(t,e,n,r){for(var i,o,a,s=0,u=e.length,l=n.length;s<u;){if(r>=l)return-1;if(37===(i=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=k[a in He?e.charAt(s++):a])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(t){var e=c(t);function n(t){try{var n=new(Fe=Pe);return n._=t,e(n)}finally{Fe=Date}}return n.parse=function(t){try{Fe=Pe;var n=e.parse(t);return n&&n._}finally{Fe=Date}},n.toString=e.toString,n},c.multi=c.utc.multi=un;var d=t.map(),h=Ue(a),p=Ge(a),g=Ue(s),v=Ge(s),m=Ue(u),y=Ge(u),b=Ue(l),x=Ge(l);o.forEach(function(t,e){d.set(t.toLowerCase(),e)});var w={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:c(n),d:function(t,e){return je(t.getDate(),e,2)},e:function(t,e){return je(t.getDate(),e,2)},H:function(t,e){return je(t.getHours(),e,2)},I:function(t,e){return je(t.getHours()%12||12,e,2)},j:function(t,e){return je(1+Oe.dayOfYear(t),e,3)},L:function(t,e){return je(t.getMilliseconds(),e,3)},m:function(t,e){return je(t.getMonth()+1,e,2)},M:function(t,e){return je(t.getMinutes(),e,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,e){return je(t.getSeconds(),e,2)},U:function(t,e){return je(Oe.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return je(Oe.mondayOfYear(t),e,2)},x:c(r),X:c(i),y:function(t,e){return je(t.getFullYear()%100,e,2)},Y:function(t,e){return je(t.getFullYear()%1e4,e,4)},Z:an,"%":function(){return"%"}},k={a:function(t,e,n){g.lastIndex=0;var r=g.exec(e.slice(n));return r?(t.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){h.lastIndex=0;var r=h.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){m.lastIndex=0;var r=m.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return f(t,w.c.toString(),e,n)},d:Je,e:Je,H:en,I:en,j:tn,L:on,m:Qe,M:nn,p:function(t,e,n){var r=d.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:rn,U:qe,w:Ve,W:$e,x:function(t,e,n){return f(t,w.x.toString(),e,n)},X:function(t,e,n){return f(t,w.X.toString(),e,n)},y:Ze,Y:Xe,Z:Ke,"%":sn};return c}Oe.year=Re(function(t){return(t=Oe.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Oe.years=Oe.year.range,Oe.years.utc=Oe.year.utc.range,Oe.day=Re(function(t){var e=new Fe(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Oe.days=Oe.day.range,Oe.days.utc=Oe.day.utc.range,Oe.dayOfYear=function(t){var e=Oe.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Oe[t]=Re(function(t){return(t=Oe.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Oe.year(t).getDay();return Math.floor((Oe.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Oe[t+"s"]=n.range,Oe[t+"s"].utc=n.utc.range,Oe[t+"OfYear"]=function(t){var n=Oe.year(t).getDay();return Math.floor((Oe.dayOfYear(t)+(n+e)%7)/7)}}),Oe.week=Oe.sunday,Oe.weeks=Oe.sunday.range,Oe.weeks.utc=Oe.sunday.utc.range,Oe.weekOfYear=Oe.sundayOfYear;var He={"-":"",_:" ",0:"0"},Ye=/^\s*\d+/,Be=/^%/;function je(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Ue(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function Ge(t){for(var e=new x,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ve(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function qe(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function $e(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Xe(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ze(t,e,n){Ye.lastIndex=0;var r,i=Ye.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function Ke(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Qe(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Je(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function tn(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function en(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function nn(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function rn(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function on(t,e,n){Ye.lastIndex=0;var r=Ye.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function an(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=m(e)/60|0,i=m(e)%60;return n+je(r,"0",2)+je(i,"0",2)}function sn(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function un(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}t.locale=function(t){return{numberFormat:Te(t),timeFormat:Ie(t)}};var ln=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cn(){}t.format=ln.numberFormat,t.geo={},cn.prototype={s:0,t:0,add:function(t){dn(t,this.t,fn),dn(fn.s,this.s,this),this.s?this.t+=fn.t:this.s=fn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var fn=new cn;function dn(t,e,n){var r=n.s=t+e,i=r-t;n.t=t-(r-i)+(e-i)}function hn(t,e){t&&gn.hasOwnProperty(t.type)&&gn[t.type](t,e)}t.geo.stream=function(t,e){t&&pn.hasOwnProperty(t.type)?pn[t.type](t,e):hn(t,e)};var pn={Feature:function(t,e){hn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)hn(n[r].geometry,e)}},gn={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){vn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)vn(n[r],e,0)},Polygon:function(t,e){mn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)mn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)hn(n[r],e)}};function vn(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function mn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)vn(t[n],e,1);e.polygonEnd()}t.geo.area=function(e){return yn=0,t.geo.stream(e,En),yn};var yn,bn,xn,wn,kn,_n,Mn,Sn,Cn,An,Dn,Tn,Ln=new cn,En={sphere:function(){yn+=4*St},point:O,lineStart:O,lineEnd:O,polygonStart:function(){Ln.reset(),En.lineStart=Nn},polygonEnd:function(){var t=2*Ln;yn+=t<0?4*St+t:t,En.lineStart=En.lineEnd=En.point=O}};function Nn(){var t,e,n,r,i;function o(t,e){e=e*Tt/2+St/4;var o=(t*=Tt)-n,a=o>=0?1:-1,s=a*o,u=Math.cos(e),l=Math.sin(e),c=i*l,f=r*u+c*Math.cos(s),d=c*a*Math.sin(s);Ln.add(Math.atan2(d,f)),n=t,r=u,i=l}En.point=function(a,s){En.point=o,n=(t=a)*Tt,r=Math.cos(s=(e=s)*Tt/2+St/4),i=Math.sin(s)},En.lineEnd=function(){o(t,e)}}function On(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Fn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Pn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Wn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Rn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function zn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function In(t){return[Math.atan2(t[1],t[0]),Ft(t[2])]}function Hn(t,e){return m(t[0]-e[0])<_t&&m(t[1]-e[1])<_t}t.geo.bounds=function(){var e,n,r,i,o,a,s,u,l,c,f,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=x,l=0,En.polygonStart()},polygonEnd:function(){En.polygonEnd(),d.point=h,d.lineStart=g,d.lineEnd=v,Ln<0?(e=-(r=180),n=-(i=90)):l>_t?i=90:l<-_t&&(n=-90),f[0]=e,f[1]=r}};function h(t,o){c.push(f=[e=t,r=t]),o<n&&(n=o),o>i&&(i=o)}function p(t,a){var s=On([t*Tt,a*Tt]);if(u){var l=Pn(u,s),c=Pn([l[1],-l[0],0],l);zn(c),c=In(c);var f=t-o,d=f>0?1:-1,p=c[0]*Lt*d,g=m(f)>180;if(g^(d*o<p&&p<d*t))(v=c[1]*Lt)>i&&(i=v);else if(g^(d*o<(p=(p+360)%360-180)&&p<d*t)){var v;(v=-c[1]*Lt)<n&&(n=v)}else a<n&&(n=a),a>i&&(i=a);g?t<o?w(e,t)>w(e,r)&&(r=t):w(t,r)>w(e,r)&&(e=t):r>=e?(t<e&&(e=t),t>r&&(r=t)):t>o?w(e,t)>w(e,r)&&(r=t):w(t,r)>w(e,r)&&(e=t)}else h(t,a);u=s,o=t}function g(){d.point=p}function v(){f[0]=e,f[1]=r,d.point=h,u=null}function y(t,e){if(u){var n=t-o;l+=m(n)>180?n+(n>0?360:-360):n}else a=t,s=e;En.point(t,e),p(t,e)}function b(){En.lineStart()}function x(){y(a,s),En.lineEnd(),m(l)>_t&&(e=-(r=180)),f[0]=e,f[1]=r,u=null}function w(t,e){return(e-=t)<0?e+360:e}function k(t,e){return t[0]-e[0]}function _(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(o){if(i=r=-(e=n=1/0),c=[],t.geo.stream(o,d),l=c.length){c.sort(k);for(var a=1,s=[g=c[0]];a<l;++a)_((h=c[a])[0],g)||_(h[1],g)?(w(g[0],h[1])>w(g[0],g[1])&&(g[1]=h[1]),w(h[0],g[1])>w(g[0],g[1])&&(g[0]=h[0])):s.push(g=h);for(var u,l,h,p=-1/0,g=(a=0,s[l=s.length-1]);a<=l;g=h,++a)(u=w(g[1],(h=s[a])[0]))>p&&(p=u,e=h[0],r=g[1])}return c=f=null,e===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,n],[r,i]]}}(),t.geo.centroid=function(e){bn=xn=wn=kn=_n=Mn=Sn=Cn=An=Dn=Tn=0,t.geo.stream(e,Yn);var n=An,r=Dn,i=Tn,o=n*n+r*r+i*i;return o<Mt&&(n=Mn,r=Sn,i=Cn,xn<_t&&(n=wn,r=kn,i=_n),(o=n*n+r*r+i*i)<Mt)?[NaN,NaN]:[Math.atan2(r,n)*Lt,Ft(i/Math.sqrt(o))*Lt]};var Yn={sphere:O,point:Bn,lineStart:Un,lineEnd:Gn,polygonStart:function(){Yn.lineStart=Vn},polygonEnd:function(){Yn.lineStart=Un}};function Bn(t,e){t*=Tt;var n=Math.cos(e*=Tt);jn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function jn(t,e,n){++bn,wn+=(t-wn)/bn,kn+=(e-kn)/bn,_n+=(n-_n)/bn}function Un(){var t,e,n;function r(r,i){r*=Tt;var o=Math.cos(i*=Tt),a=o*Math.cos(r),s=o*Math.sin(r),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=e*u-n*s)*l+(l=n*a-t*u)*l+(l=t*s-e*a)*l),t*a+e*s+n*u);xn+=l,Mn+=l*(t+(t=a)),Sn+=l*(e+(e=s)),Cn+=l*(n+(n=u)),jn(t,e,n)}Yn.point=function(i,o){i*=Tt;var a=Math.cos(o*=Tt);t=a*Math.cos(i),e=a*Math.sin(i),n=Math.sin(o),Yn.point=r,jn(t,e,n)}}function Gn(){Yn.point=Bn}function Vn(){var t,e,n,r,i;function o(t,e){t*=Tt;var o=Math.cos(e*=Tt),a=o*Math.cos(t),s=o*Math.sin(t),u=Math.sin(e),l=r*u-i*s,c=i*a-n*u,f=n*s-r*a,d=Math.sqrt(l*l+c*c+f*f),h=n*a+r*s+i*u,p=d&&-Ot(h)/d,g=Math.atan2(d,h);An+=p*l,Dn+=p*c,Tn+=p*f,xn+=g,Mn+=g*(n+(n=a)),Sn+=g*(r+(r=s)),Cn+=g*(i+(i=u)),jn(n,r,i)}Yn.point=function(a,s){t=a,e=s,Yn.point=o,a*=Tt;var u=Math.cos(s*=Tt);n=u*Math.cos(a),r=u*Math.sin(a),i=Math.sin(s),jn(n,r,i)},Yn.lineEnd=function(){o(t,e),Yn.lineEnd=Gn,Yn.point=Bn}}function qn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function $n(){return!0}function Xn(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Hn(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);i.lineEnd()}else{var u=new Kn(n,t,null,!0),l=new Kn(n,null,u,!1);u.o=l,o.push(u),a.push(l),u=new Kn(r,t,null,!1),l=new Kn(r,null,u,!0),u.o=l,o.push(u),a.push(l)}}}),a.sort(e),Zn(o),Zn(a),o.length){for(var s=0,u=n,l=a.length;s<l;++s)a[s].e=u=!u;for(var c,f,d=o[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(s=0,l=c.length;s<l;++s)i.point((f=c[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(s=(c=h.p.z).length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Zn(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Kn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Qn(e,n,r,i){return function(o,a){var s,u=n(a),l=o.invert(i[0],i[1]),c={point:f,lineStart:h,lineEnd:p,polygonStart:function(){c.point=x,c.lineStart=w,c.lineEnd=k,s=[],g=[]},polygonEnd:function(){c.point=f,c.lineStart=h,c.lineEnd=p,s=t.merge(s);var e=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Ln.reset();for(var s=0,u=e.length;s<u;++s){var l=e[s],c=l.length;if(c)for(var f=l[0],d=f[0],h=f[1]/2+St/4,p=Math.sin(h),g=Math.cos(h),v=1;;){v===c&&(v=0);var m=(t=l[v])[0],y=t[1]/2+St/4,b=Math.sin(y),x=Math.cos(y),w=m-d,k=w>=0?1:-1,_=k*w,M=_>St,S=p*b;if(Ln.add(Math.atan2(S*k*Math.sin(_),g*x+S*Math.cos(_))),o+=M?w+k*Ct:w,M^d>=n^m>=n){var C=Pn(On(f),On(t));zn(C);var A=Pn(i,C);zn(A);var D=(M^w>=0?-1:1)*Ft(A[2]);(r>D||r===D&&(C[0]||C[1]))&&(a+=M^w>=0?1:-1)}if(!v++)break;d=m,p=b,g=x,f=t}}return(o<-_t||o<_t&&Ln<-_t)^1&a}(l,g);s.length?(b||(a.polygonStart(),b=!0),Xn(s,er,e,r,a)):e&&(b||(a.polygonStart(),b=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),s=g=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function f(t,n){var r=o(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function d(t,e){var n=o(t,e);u.point(n[0],n[1])}function h(){c.point=d,u.lineStart()}function p(){c.point=f,u.lineEnd()}var g,v,m=tr(),y=n(m),b=!1;function x(t,e){v.push([t,e]);var n=o(t,e);y.point(n[0],n[1])}function w(){y.lineStart(),v=[]}function k(){x(v[0][0],v[0][1]),y.lineEnd();var t,e=y.clean(),n=m.buffer(),r=n.length;if(v.pop(),g.push(v),v=null,r)if(1&e){var i,o=-1;if((r=(t=n[0]).length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(Jn))}return c}}function Jn(t){return t.length>1}function tr(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:O,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function er(t,e){return((t=t.x)[0]<0?t[1]-Dt-_t:Dt-t[1])-((e=e.x)[0]<0?e[1]-Dt-_t:Dt-e[1])}var nr=Qn($n,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?St:-St,u=m(o-n);m(u-St)<_t?(t.point(n,r=(r+a)/2>0?Dt:-Dt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=St&&(m(n-i)<_t&&(n-=i*_t),m(o-s)<_t&&(o-=s*_t),r=function(t,e,n,r){var i,o,a=Math.sin(t-n);return m(a)>_t?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)r.point(-St,i=n*Dt),r.point(0,i),r.point(St,i),r.point(St,0),r.point(St,-i),r.point(0,-i),r.point(-St,-i),r.point(-St,0),r.point(-St,i);else if(m(t[0]-e[0])>_t){var o=t[0]<e[0]?St:-St;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-St,-St/2]);function rr(t){var e=Math.cos(t),n=e>0,r=m(e)>_t;return Qn(i,function(t){var e,s,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],g=i(f,d),v=n?g?0:a(f,d):g?a(f+(f<0?St:-St),d):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(h=o(e,p),(Hn(e,h)||Hn(p,h))&&(p[0]+=_t,p[1]+=_t,g=i(p[0],p[1]))),g!==u)c=0,g?(t.lineStart(),h=o(p,e),t.point(h[0],h[1])):(h=o(e,p),t.point(h[0],h[1]),t.lineEnd()),e=h;else if(r&&e&&n^g){var m;v&s||!(m=o(p,e,!0))||(c=0,n?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&Hn(e,p)||t.point(p[0],p[1]),e=p,u=g,s=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},Hr(t,6*Tt),n?[0,-t]:[-St,t-St]);function i(t,n){return Math.cos(t)*Math.cos(n)>e}function o(t,n,r){var i=[1,0,0],o=Pn(On(t),On(n)),a=Fn(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var l=e*a/u,c=-e*s/u,f=Pn(i,o),d=Rn(i,l);Wn(d,Rn(o,c));var h=f,p=Fn(d,h),g=Fn(h,h),v=p*p-g*(Fn(d,d)-1);if(!(v<0)){var y=Math.sqrt(v),b=Rn(h,(-p-y)/g);if(Wn(b,d),b=In(b),!r)return b;var x,w=t[0],k=n[0],_=t[1],M=n[1];k<w&&(x=w,w=k,k=x);var S=k-w,C=m(S-St)<_t;if(!C&&M<_&&(x=_,_=M,M=x),C||S<_t?C?_+M>0^b[1]<(m(b[0]-w)<_t?_:M):_<=b[1]&&b[1]<=M:S>St^(w<=b[0]&&b[0]<=k)){var A=Rn(h,(-p+y)/g);return Wn(A,d),[b,In(A)]}}}function a(e,r){var i=n?t:St-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}function ir(t,e,n,r){return function(i){var o,a=i.a,s=i.b,u=a.x,l=a.y,c=0,f=1,d=s.x-u,h=s.y-l;if(o=t-u,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>c&&(c=o)}if(o=n-u,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<f&&(f=o)}if(o=e-l,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=r-l,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<f&&(f=o)}return c>0&&(i.a={x:u+c*d,y:l+c*h}),f<1&&(i.b={x:u+f*d,y:l+f*h}),i}}}}}}var or=1e9;function ar(e,n,r,i){return function(u){var l,c,f,d,h,p,g,v,m,y,b,x=u,w=tr(),k=ir(e,n,r,i),_={point:C,lineStart:function(){_.point=A,c&&c.push(f=[]),y=!0,m=!1,g=v=NaN},lineEnd:function(){l&&(A(d,h),p&&m&&w.rejoin(),l.push(w.buffer())),_.point=C,m&&u.lineEnd()},polygonStart:function(){u=w,l=[],c=[],b=!0},polygonEnd:function(){u=x,l=t.merge(l);var n=function(t){for(var e=0,n=c.length,r=t[1],i=0;i<n;++i)for(var o,a=1,s=c[i],u=s.length,l=s[0];a<u;++a)o=s[a],l[1]<=r?o[1]>r&&Nt(l,o,t)>0&&++e:o[1]<=r&&Nt(l,o,t)<0&&--e,l=o;return 0!==e}([e,i]),r=b&&n,o=l.length;(r||o)&&(u.polygonStart(),r&&(u.lineStart(),M(null,null,1,u),u.lineEnd()),o&&Xn(l,a,n,M,u),u.polygonEnd()),l=c=f=null}};function M(t,a,u,l){var c=0,f=0;if(null==t||(c=o(t,u))!==(f=o(a,u))||s(t,a)<0^u>0)do{l.point(0===c||3===c?e:r,c>1?i:n)}while((c=(c+u+4)%4)!==f);else l.point(a[0],a[1])}function S(t,o){return e<=t&&t<=r&&n<=o&&o<=i}function C(t,e){S(t,e)&&u.point(t,e)}function A(t,e){var n=S(t=Math.max(-1e9,Math.min(or,t)),e=Math.max(-1e9,Math.min(or,e)));if(c&&f.push([t,e]),y)d=t,h=e,p=n,y=!1,n&&(u.lineStart(),u.point(t,e));else if(n&&m)u.point(t,e);else{var r={a:{x:g,y:v},b:{x:t,y:e}};k(r)?(m||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),b=!1):n&&(u.lineStart(),u.point(t,e),b=!1)}g=t,v=e,m=n}return _};function o(t,i){return m(t[0]-e)<_t?i>0?0:3:m(t[0]-r)<_t?i>0?2:1:m(t[1]-n)<_t?i>0?1:0:i>0?3:2}function a(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function sr(t){var e=0,n=St/3,r=Nr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*St/180,n=t[1]*St/180):[e/St*180,n/St*180]},i}function ur(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function a(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}return a.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,Ft((i-(t*t+n*n)*r*r)/(2*r))]},a}t.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),(i=o(t)).valid=!0,i},extent:function(s){return arguments.length?(o=ar(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(t.geo.conicEqualArea=function(){return sr(ur)}).raw=ur,t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},t.geo.albersUsa=function(){var e,n,r,i,o=t.geo.albers(),a=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};function l(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}return l.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:o).invert(t)},l.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},l.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),l):o.precision()},l.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),l.translate(o.translate())):o.scale()},l.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),c=+t[0],f=+t[1];return n=o.translate(t).clipExtent([[c-.455*e,f-.238*e],[c+.455*e,f+.238*e]]).stream(u).point,r=a.translate([c-.307*e,f+.201*e]).clipExtent([[c-.425*e+_t,f+.12*e+_t],[c-.214*e-_t,f+.234*e-_t]]).stream(u).point,i=s.translate([c-.205*e,f+.212*e]).clipExtent([[c-.214*e+_t,f+.166*e+_t],[c-.115*e-_t,f+.234*e-_t]]).stream(u).point,l},l.scale(1070)};var lr,cr,fr,dr,hr,pr,gr={point:O,lineStart:O,lineEnd:O,polygonStart:function(){cr=0,gr.lineStart=vr},polygonEnd:function(){gr.lineStart=gr.lineEnd=gr.point=O,lr+=m(cr/2)}};function vr(){var t,e,n,r;function i(t,e){cr+=r*t-n*e,n=t,r=e}gr.point=function(o,a){gr.point=i,t=n=o,e=r=a},gr.lineEnd=function(){i(t,e)}}var mr={point:function(t,e){t<fr&&(fr=t),t>hr&&(hr=t),e<dr&&(dr=e),e>pr&&(pr=e)},lineStart:O,lineEnd:O,polygonStart:O,polygonEnd:O};function yr(){var t=br(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=br(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=o}function o(t,n){e.push("L",t,",",n)}function a(){n.point=r}function s(){e.push("Z")}return n}function br(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var xr,wr={point:kr,lineStart:_r,lineEnd:Mr,polygonStart:function(){wr.lineStart=Sr},polygonEnd:function(){wr.point=kr,wr.lineStart=_r,wr.lineEnd=Mr}};function kr(t,e){wn+=t,kn+=e,++_n}function _r(){var t,e;function n(n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o);Mn+=a*(t+n)/2,Sn+=a*(e+r)/2,Cn+=a,kr(t=n,e=r)}wr.point=function(r,i){wr.point=n,kr(t=r,e=i)}}function Mr(){wr.point=kr}function Sr(){var t,e,n,r;function i(t,e){var i=t-n,o=e-r,a=Math.sqrt(i*i+o*o);Mn+=a*(n+t)/2,Sn+=a*(r+e)/2,Cn+=a,An+=(a=r*t-n*e)*(n+t),Dn+=a*(r+e),Tn+=3*a,kr(n=t,r=e)}wr.point=function(o,a){wr.point=i,kr(t=n=o,e=r=a)},wr.lineEnd=function(){i(t,e)}}function Cr(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=t,n},result:O};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,Ct)}function i(e,r){t.moveTo(e,r),n.point=o}function o(e,n){t.lineTo(e,n)}function a(){n.point=r}function s(){t.closePath()}return n}function Ar(t){var e=.5,n=Math.cos(30*Tt),r=16;function i(t){return(r?a:o)(t)}function o(e){return Lr(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function a(e){var n,i,o,a,u,l,c,f,d,h,p,g,v={point:m,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),v.lineStart=w},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){f=NaN,v.point=b,e.lineStart()}function b(n,i){var o=On([n,i]),a=t(n,i);s(f,d,c,h,p,g,f=a[0],d=a[1],c=n,h=o[0],p=o[1],g=o[2],r,e),e.point(f,d)}function x(){v.point=m,e.lineEnd()}function w(){y(),v.point=k,v.lineEnd=_}function k(t,e){b(n=t,e),i=f,o=d,a=h,u=p,l=g,v.point=b}function _(){s(f,d,c,h,p,g,i,o,n,a,u,l,r,e),v.lineEnd=x,x()}return v}function s(r,i,o,a,u,l,c,f,d,h,p,g,v,y){var b=c-r,x=f-i,w=b*b+x*x;if(w>4*e&&v--){var k=a+h,_=u+p,M=l+g,S=Math.sqrt(k*k+_*_+M*M),C=Math.asin(M/=S),A=m(m(M)-1)<_t||m(o-d)<_t?(o+d)/2:Math.atan2(_,k),D=t(A,C),T=D[0],L=D[1],E=T-r,N=L-i,O=x*E-b*N;(O*O/w>e||m((b*E+x*N)/w-.5)>.3||a*h+u*p+l*g<n)&&(s(r,i,o,a,u,l,T,L,A,k/=S,_/=S,M,v,y),y.point(T,L),s(T,L,A,k,_,M,c,f,d,h,p,g,v,y))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Dr(t){var e=Ar(function(e,n){return t([e*Lt,n*Lt])});return function(t){return Or(e(t))}}function Tr(t){this.stream=t}function Lr(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Er(t){return Nr(function(){return t})()}function Nr(e){var n,r,i,o,a,s,u=Ar(function(t,e){return[(t=n(t,e))[0]*l+o,a-t[1]*l]}),l=150,c=480,f=250,d=0,h=0,p=0,g=0,v=0,m=nr,y=T,b=null,x=null;function w(t){return[(t=i(t[0]*Tt,t[1]*Tt))[0]*l+o,a-t[1]*l]}function k(t){return(t=i.invert((t[0]-o)/l,(a-t[1])/l))&&[t[0]*Lt,t[1]*Lt]}function _(){i=qn(r=Wr(p,g,v),n);var t=n(d,h);return o=c-t[0]*l,a=f+t[1]*l,M()}function M(){return s&&(s.valid=!1,s=null),w}return w.stream=function(t){return s&&(s.valid=!1),(s=Or(m(r,u(y(t))))).valid=!0,s},w.clipAngle=function(t){return arguments.length?(m=null==t?(b=t,nr):rr((b=+t)*Tt),M()):b},w.clipExtent=function(t){return arguments.length?(x=t,y=t?ar(t[0][0],t[0][1],t[1][0],t[1][1]):T,M()):x},w.scale=function(t){return arguments.length?(l=+t,_()):l},w.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],_()):[c,f]},w.center=function(t){return arguments.length?(d=t[0]%360*Tt,h=t[1]%360*Tt,_()):[d*Lt,h*Lt]},w.rotate=function(t){return arguments.length?(p=t[0]%360*Tt,g=t[1]%360*Tt,v=t.length>2?t[2]%360*Tt:0,_()):[p*Lt,g*Lt,v*Lt]},t.rebind(w,u,"precision"),function(){return n=e.apply(this,arguments),w.invert=n.invert&&k,_()}}function Or(t){return Lr(t,function(e,n){t.point(e*Tt,n*Tt)})}function Fr(t,e){return[t,e]}function Pr(t,e){return[t>St?t-Ct:t<-St?t+Ct:t,e]}function Wr(t,e,n){return t?e||n?qn(zr(t),Ir(e,n)):zr(t):e||n?Ir(e,n):Pr}function Rr(t){return function(e,n){return[(e+=t)>St?e-Ct:e<-St?e+Ct:e,n]}}function zr(t){var e=Rr(t);return e.invert=Rr(-t),e}function Ir(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),o=Math.sin(e);function a(t,e){var a=Math.cos(e),s=Math.cos(t)*a,u=Math.sin(t)*a,l=Math.sin(e),c=l*n+s*r;return[Math.atan2(u*i-c*o,s*n-l*r),Ft(c*i+u*o)]}return a.invert=function(t,e){var a=Math.cos(e),s=Math.cos(t)*a,u=Math.sin(t)*a,l=Math.sin(e),c=l*i-u*o;return[Math.atan2(u*i+l*o,s*n+c*r),Ft(c*n-s*r)]},a}function Hr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var u=a*e;null!=i?(i=Yr(n,i),o=Yr(n,o),(a>0?i<o:i>o)&&(i+=a*Ct)):(i=t+a*Ct,o=t-.5*u);for(var l,c=i;a>0?c>o:c<o;c-=u)s.point((l=In([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function Yr(t,e){var n=On(e);n[0]-=t,zn(n);var r=Ot(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-_t)%(2*Math.PI)}function Br(e,n,r){var i=t.range(e,n-_t,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function jr(e,n,r){var i=t.range(e,n-_t,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function Ur(t){return t.source}function Gr(t){return t.target}t.geo.path=function(){var e,n,r,i,o,a=4.5;function s(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=r(i)),t.geo.stream(e,o)),i.result()}function u(){return o=null,s}return s.area=function(e){return lr=0,t.geo.stream(e,r(gr)),lr},s.centroid=function(e){return wn=kn=_n=Mn=Sn=Cn=An=Dn=Tn=0,t.geo.stream(e,r(wr)),Tn?[An/Tn,Dn/Tn]:Cn?[Mn/Cn,Sn/Cn]:_n?[wn/_n,kn/_n]:[NaN,NaN]},s.bounds=function(e){return hr=pr=-(fr=dr=1/0),t.geo.stream(e,r(mr)),[[fr,dr],[hr,pr]]},s.projection=function(t){return arguments.length?(r=(e=t)?t.stream||Dr(t):T,u()):e},s.context=function(t){return arguments.length?(i=null==(n=t)?new yr:new Cr(t),"function"!=typeof a&&i.pointRadius(a),u()):n},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),s):a},s.projection(t.geo.albersUsa()).context(null)},t.geo.transform=function(t){return{stream:function(e){var n=new Tr(e);for(var r in t)n[r]=t[r];return n}}},Tr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},t.geo.projection=Er,t.geo.projectionMutator=Nr,(t.geo.equirectangular=function(){return Er(Fr)}).raw=Fr.invert=Fr,t.geo.rotation=function(t){function e(e){return(e=t(e[0]*Tt,e[1]*Tt))[0]*=Lt,e[1]*=Lt,e}return t=Wr(t[0]%360*Tt,t[1]*Tt,t.length>2?t[2]*Tt:0),e.invert=function(e){return(e=t.invert(e[0]*Tt,e[1]*Tt))[0]*=Lt,e[1]*=Lt,e},e},Pr.invert=Fr,t.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"==typeof n?n.apply(this,arguments):n,r=Wr(-t[0]*Tt,-t[1]*Tt,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=Lt,t[1]*=Lt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=Hr((t=+n)*Tt,r*Tt),i):t},i.precision=function(n){return arguments.length?(e=Hr(t*Tt,(r=+n)*Tt),i):r},i.angle(90)},t.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Tt,i=t[1]*Tt,o=e[1]*Tt,a=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},t.geo.graticule=function(){var e,n,r,i,o,a,s,u,l,c,f,d,h=10,p=h,g=90,v=360,y=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return t.range(Math.ceil(i/g)*g,r,g).map(f).concat(t.range(Math.ceil(u/v)*v,s,v).map(d)).concat(t.range(Math.ceil(n/h)*h,e,h).filter(function(t){return m(t%g)>_t}).map(l)).concat(t.range(Math.ceil(a/p)*p,o,p).filter(function(t){return m(t%v)>_t}).map(c))}return b.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},b.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(d(s).slice(1),f(r).reverse().slice(1),d(u).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.majorExtent(t).minorExtent(t):b.minorExtent()},b.majorExtent=function(t){return arguments.length?(u=+t[0][1],s=+t[1][1],(i=+t[0][0])>(r=+t[1][0])&&(t=i,i=r,r=t),u>s&&(t=u,u=s,s=t),b.precision(y)):[[i,u],[r,s]]},b.minorExtent=function(t){return arguments.length?(a=+t[0][1],o=+t[1][1],(n=+t[0][0])>(e=+t[1][0])&&(t=n,n=e,e=t),a>o&&(t=a,a=o,o=t),b.precision(y)):[[n,a],[e,o]]},b.step=function(t){return arguments.length?b.majorStep(t).minorStep(t):b.minorStep()},b.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],b):[g,v]},b.minorStep=function(t){return arguments.length?(h=+t[0],p=+t[1],b):[h,p]},b.precision=function(t){return arguments.length?(y=+t,l=Br(a,o,90),c=jr(n,e,y),f=Br(u,s,90),d=jr(i,r,y),b):y},b.majorExtent([[-180,-90+_t],[180,90-_t]]).minorExtent([[-180,-80-_t],[180,80+_t]])},t.geo.greatArc=function(){var e,n,r=Ur,i=Gr;function o(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}return o.distance=function(){return t.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},o.source=function(t){return arguments.length?(r=t,e="function"==typeof t?null:t,o):r},o.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,o):i},o.precision=function(){return arguments.length?o:0},o},t.geo.interpolate=function(t,e){return n=t[0]*Tt,r=t[1]*Tt,i=e[0]*Tt,o=e[1]*Tt,a=Math.cos(r),s=Math.sin(r),u=Math.cos(o),l=Math.sin(o),c=a*Math.cos(n),f=a*Math.sin(n),d=u*Math.cos(i),h=u*Math.sin(i),p=2*Math.asin(Math.sqrt(Wt(o-r)+a*u*Wt(i-n))),g=1/Math.sin(p),(v=p?function(t){var e=Math.sin(t*=p)*g,n=Math.sin(p-t)*g,r=n*c+e*d,i=n*f+e*h,o=n*s+e*l;return[Math.atan2(i,r)*Lt,Math.atan2(o,Math.sqrt(r*r+i*i))*Lt]}:function(){return[n*Lt,r*Lt]}).distance=p,v;var n,r,i,o,a,s,u,l,c,f,d,h,p,g,v},t.geo.length=function(e){return xr=0,t.geo.stream(e,Vr),xr};var Vr={sphere:O,point:O,lineStart:function(){var t,e,n;function r(r,i){var o=Math.sin(i*=Tt),a=Math.cos(i),s=m((r*=Tt)-t),u=Math.cos(s);xr+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*o-e*a*u)*s),e*o+n*a*u),t=r,e=o,n=a}Vr.point=function(i,o){t=i*Tt,e=Math.sin(o*=Tt),n=Math.cos(o),Vr.point=r},Vr.lineEnd=function(){Vr.point=Vr.lineEnd=O}},lineEnd:O,polygonStart:O,polygonEnd:O};function qr(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}var $r=qr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(t.geo.azimuthalEqualArea=function(){return Er($r)}).raw=$r;var Xr=qr(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},T);function Zr(t,e){var n=Math.cos(t),r=function(t){return Math.tan(St/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),o=n*Math.pow(r(t),i)/i;if(!i)return Jr;function a(t,e){o>0?e<-Dt+_t&&(e=-Dt+_t):e>Dt-_t&&(e=Dt-_t);var n=o/Math.pow(r(e),i);return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}return a.invert=function(t,e){var n=o-e,r=Et(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(o/r,1/i))-Dt]},a}function Kr(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(m(r)<_t)return Fr;function o(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return o.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-Et(r)*Math.sqrt(t*t+n*n)]},o}(t.geo.azimuthalEquidistant=function(){return Er(Xr)}).raw=Xr,(t.geo.conicConformal=function(){return sr(Zr)}).raw=Zr,(t.geo.conicEquidistant=function(){return sr(Kr)}).raw=Kr;var Qr=qr(function(t){return 1/t},Math.atan);function Jr(t,e){return[t,Math.log(Math.tan(St/4+e/2))]}function ti(t){var e,n=Er(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=St*r(),u=i();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}(t.geo.gnomonic=function(){return Er(Qr)}).raw=Qr,Jr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Dt]},(t.geo.mercator=function(){return ti(Jr)}).raw=Jr;var ei=qr(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Er(ei)}).raw=ei;var ni=qr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function ri(t,e){return[Math.log(Math.tan(St/4+e/2)),-t]}function ii(t){return t[0]}function oi(t){return t[1]}function ai(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&Nt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function si(t,e){return t[0]-e[0]||t[1]-e[1]}(t.geo.stereographic=function(){return Er(ni)}).raw=ni,ri.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Dt]},(t.geo.transverseMercator=function(){var t=ti(ri),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=ri,t.geom={},t.geom.hull=function(t){var e=ii,n=oi;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=ge(e),o=ge(n),a=t.length,s=[],u=[];for(r=0;r<a;r++)s.push([+i.call(this,t[r],r),+o.call(this,t[r],r),r]);for(s.sort(si),r=0;r<a;r++)u.push([s[r][0],-s[r][1]]);var l=ai(s),c=ai(u),f=c[0]===l[0],d=c[c.length-1]===l[l.length-1],h=[];for(r=l.length-1;r>=0;--r)h.push(t[s[l[r]][2]]);for(r=+f;r<c.length-d;++r)h.push(t[s[c[r]][2]]);return h}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},t.geom.polygon=function(t){return H(t,ui),t};var ui=t.geom.polygon.prototype=[];function li(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function ci(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,u=t[1],l=n[1],c=e[1]-u,f=r[1]-l,d=(s*(u-l)-f*(i-o))/(f*a-s*c);return[i+d*a,u+d*c]}function fi(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}ui.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)i+=(t=r)[1]*(r=this[e])[0]-t[0]*r[1];return.5*i},ui.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)o+=((e=s)[0]+(s=this[r])[0])*(n=e[0]*s[1]-s[0]*e[1]),a+=(e[1]+s[1])*n;return[o*t,a*t]},ui.clip=function(t){for(var e,n,r,i,o,a,s=fi(t),u=-1,l=this.length-fi(this),c=this[l-1];++u<l;){for(e=t.slice(),t.length=0,i=this[u],o=e[(r=e.length-s)-1],n=-1;++n<r;)li(a=e[n],c,i)?(li(o,c,i)||t.push(ci(o,a,c,i)),t.push(a)):li(o,c,i)&&t.push(ci(o,a,c,i)),o=a;s&&t.push(t[0]),c=i}return t};var di,hi,pi,gi,vi,mi=[],yi=[];function bi(){Ri(this),this.edge=this.site=this.circle=null}function xi(t){var e=mi.pop()||new bi;return e.site=t,e}function wi(t){Li(t),pi.remove(t),mi.push(t),Ri(t)}function ki(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];wi(t);for(var u=o;u.circle&&m(n-u.circle.x)<_t&&m(r-u.circle.cy)<_t;)o=u.P,s.unshift(u),wi(u),u=o;s.unshift(u),Li(u);for(var l=a;l.circle&&m(n-l.circle.x)<_t&&m(r-l.circle.cy)<_t;)a=l.N,s.push(l),wi(l),l=a;s.push(l),Li(l);var c,f=s.length;for(c=1;c<f;++c)Fi((l=s[c]).edge,(u=s[c-1]).site,l.site,i);(l=s[f-1]).edge=Oi((u=s[0]).site,l.site,null,i),Ti(u),Ti(l)}function _i(t){for(var e,n,r,i,o=t.x,a=t.y,s=pi._;s;)if((r=Mi(s,a)-o)>_t)s=s.L;else{if(!((i=o-Si(s,a))>_t)){r>-_t?(e=s.P,n=s):i>-_t?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=xi(t);if(pi.insert(e,u),e||n){if(e===n)return Li(e),n=xi(e.site),pi.insert(u,n),u.edge=n.edge=Oi(e.site,u.site),Ti(e),void Ti(n);if(n){Li(e),Li(n);var l=e.site,c=l.x,f=l.y,d=t.x-c,h=t.y-f,p=n.site,g=p.x-c,v=p.y-f,m=2*(d*v-h*g),y=d*d+h*h,b=g*g+v*v,x={x:(v*y-h*b)/m+c,y:(d*b-g*y)/m+f};Fi(n.edge,l,p,x),u.edge=Oi(l,t,null,x),n.edge=Oi(t,p,null,x),Ti(e),Ti(n)}else u.edge=Oi(e.site,u.site)}}function Mi(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,u=n.y,l=u-e;if(!l)return s;var c=s-r,f=1/o-1/l,d=c/l;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+i-o/2)))/f+r:(r+s)/2}function Si(t,e){var n=t.N;if(n)return Mi(n,e);var r=t.site;return r.y===e?r.x:1/0}function Ci(t){this.site=t,this.edges=[]}function Ai(t,e){return e.angle-t.angle}function Di(){Ri(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ti(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,u=r.x-a,l=r.y-s,c=o.x-a,f=2*(u*(v=o.y-s)-l*c);if(!(f>=-Mt)){var d=u*u+l*l,h=c*c+v*v,p=(v*d-l*h)/f,g=(u*h-c*d)/f,v=g+s,m=yi.pop()||new Di;m.arc=t,m.site=i,m.x=p+a,m.y=v+Math.sqrt(p*p+g*g),m.cy=v,t.circle=m;for(var y=null,b=vi._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}vi.insert(y,m),y||(gi=m)}}}}function Li(t){var e=t.circle;e&&(e.P||(gi=e.N),vi.remove(e),yi.push(e),Ri(e),t.circle=null)}function Ei(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],u=e[0][1],l=e[1][1],c=t.l,f=t.r,d=c.x,h=c.y,p=f.x,g=f.y,v=(d+p)/2;if(g===h){if(v<a||v>=s)return;if(d>p){if(o){if(o.y>=l)return}else o={x:v,y:u};n={x:v,y:l}}else{if(o){if(o.y<u)return}else o={x:v,y:l};n={x:v,y:u}}}else if(i=(h+g)/2-(r=(d-p)/(g-h))*v,r<-1||r>1)if(d>p){if(o){if(o.y>=l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(o){if(o.y<u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(h<g){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Ni(t,e){this.l=t,this.r=e,this.a=this.b=null}function Oi(t,e,n,r){var i=new Ni(t,e);return di.push(i),n&&Fi(i,t,e,n),r&&Fi(i,e,t,r),hi[t.i].edges.push(new Pi(i,t,e)),hi[e.i].edges.push(new Pi(i,e,t)),i}function Fi(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Pi(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Wi(){this._=null}function Ri(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function zi(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ii(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Hi(t){for(;t.L;)t=t.L;return t}function Yi(t,e){var n,r,i,o=t.sort(Bi).pop();for(di=[],hi=new Array(t.length),pi=new Wi,vi=new Wi;;)if(i=gi,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(hi[o.i]=new Ci(o),_i(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;ki(i.arc)}e&&(function(t){for(var e,n=di,r=ir(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Ei(e=n[i],t)||!r(e)||m(e.a.x-e.b.x)<_t&&m(e.a.y-e.b.y)<_t)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,o,a,s,u,l,c,f=t[0][0],d=t[1][0],h=t[0][1],p=t[1][1],g=hi,v=g.length;v--;)if((o=g[v])&&o.prepare())for(u=(s=o.edges).length,a=0;a<u;)r=(c=s[a].end()).x,i=c.y,n=(l=s[++a%u].start()).y,(m(r-(e=l.x))>_t||m(i-n)>_t)&&(s.splice(a,0,new Pi((y=o.site,b=c,x=m(r-f)<_t&&p-i>_t?{x:f,y:m(e-f)<_t?n:p}:m(i-p)<_t&&d-r>_t?{x:m(n-p)<_t?e:d,y:p}:m(r-d)<_t&&i-h>_t?{x:d,y:m(e-d)<_t?n:h}:m(i-h)<_t&&r-f>_t?{x:m(n-h)<_t?e:f,y:h}:null,w=void 0,(w=new Ni(y,null)).a=b,w.b=x,di.push(w),w),o.site,null)),++u);var y,b,x,w}(e));var a={cells:hi,edges:di};return pi=vi=di=hi=null,a}function Bi(t,e){return e.y-t.y||e.x-t.x}Ci.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Ai),e.length},Pi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Wi.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Hi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(zi(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ii(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Ii(this,n),n=(t=n).U),n.C=!1,r.C=!0,zi(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Hi(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,zi(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ii(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,zi(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ii(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,zi(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ii(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},t.geom.voronoi=function(t){var e=ii,n=oi,r=e,i=n,o=ji;if(t)return a(t);function a(t){var e=new Array(t.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return Yi(s(t),o).cells.forEach(function(o,s){var u=o.edges,l=o.site;(e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[]).point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/_t)*_t,y:Math.round(i(t,e)/_t)*_t,i:e}})}return a.links=function(t){return Yi(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(t){var e=[];return Yi(s(t)).cells.forEach(function(n,r){for(var i,o,a,s,u=n.site,l=n.edges.sort(Ai),c=-1,f=l.length,d=l[f-1].edge,h=d.l===u?d.r:d.l;++c<f;)i=h,h=(d=l[c].edge).l===u?d.r:d.l,r<i.i&&r<h.i&&((o=u).x-(s=h).x)*((a=i).y-o.y)-(o.x-a.x)*(s.y-o.y)<0&&e.push([t[r],t[i.i],t[h.i]])}),e},a.x=function(t){return arguments.length?(r=ge(e=t),a):e},a.y=function(t){return arguments.length?(i=ge(n=t),a):n},a.clipExtent=function(t){return arguments.length?(o=null==t?ji:t,a):o===ji?null:o},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):o===ji?null:o&&o[1]},a};var ji=[[-1e6,-1e6],[1e6,1e6]];function Ui(t){return t.x}function Gi(t){return t.y}function Vi(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),u=e.nodes;u[0]&&Vi(t,u[0],n,r,a,s),u[1]&&Vi(t,u[1],a,r,i,s),u[2]&&Vi(t,u[2],n,s,a,o),u[3]&&Vi(t,u[3],a,s,i,o)}}function qi(t,e,n,r,i,o,a){var s,u=1/0;return function t(l,c,f,d,h){if(!(c>o||f>a||d<r||h<i)){if(p=l.point){var p,g=e-l.x,v=n-l.y,m=g*g+v*v;if(m<u){var y=Math.sqrt(u=m);r=e-y,i=n-y,o=e+y,a=n+y,s=p}}for(var b=l.nodes,x=.5*(c+d),w=.5*(f+h),k=(n>=w)<<1|e>=x,_=k+4;k<_;++k)if(l=b[3&k])switch(3&k){case 0:t(l,c,f,x,w);break;case 1:t(l,x,f,d,w);break;case 2:t(l,c,w,x,h);break;case 3:t(l,x,w,d,h)}}}(t,r,i,o,a),s}function $i(e,n){e=t.rgb(e),n=t.rgb(n);var r=e.r,i=e.g,o=e.b,a=n.r-r,s=n.g-i,u=n.b-o;return function(t){return"#"+ue(Math.round(r+a*t))+ue(Math.round(i+s*t))+ue(Math.round(o+u*t))}}function Xi(t,e){var n,r={},i={};for(n in t)n in e?r[n]=to(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Zi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ki(t,e){var n,r,i,o=Qi.lastIndex=Ji.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Qi.exec(t))&&(r=Ji.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Zi(n,r)})),o=Ji.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(t,e,n,r,i){var o,a=ii,s=oi;if(o=arguments.length)return a=Ui,s=Gi,3===o&&(i=n,r=e,n=e=0),u(t);function u(t){var u,l,c,f,d,h,p,g,v,y=ge(a),b=ge(s);if(null!=e)h=e,p=n,g=r,v=i;else if(g=v=-(h=p=1/0),l=[],c=[],d=t.length,o)for(f=0;f<d;++f)(u=t[f]).x<h&&(h=u.x),u.y<p&&(p=u.y),u.x>g&&(g=u.x),u.y>v&&(v=u.y),l.push(u.x),c.push(u.y);else for(f=0;f<d;++f){var x=+y(u=t[f],f),w=+b(u,f);x<h&&(h=x),w<p&&(p=w),x>g&&(g=x),w>v&&(v=w),l.push(x),c.push(w)}var k=g-h,_=v-p;function M(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,l=t.y;if(null!=u)if(m(u-n)+m(l-r)<.01)S(t,e,n,r,i,o,a,s);else{var c=t.point;t.x=t.y=t.point=null,S(t,c,u,l,i,o,a,s),S(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else S(t,e,n,r,i,o,a,s)}function S(t,e,n,r,i,o,a,s){var u=.5*(i+a),l=.5*(o+s),c=n>=u,f=r>=l,d=f<<1|c;t.leaf=!1,c?i=u:a=u,f?o=l:s=l,M(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,r,i,o,a,s)}k>_?v=p+k:g=h+_;var C={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){M(C,t,+y(t,++f),+b(t,f),h,p,g,v)},visit:function(t){Vi(t,C,h,p,g,v)},find:function(t){return qi(C,t[0],t[1],h,p,g,v)}};if(f=-1,null==e){for(;++f<d;)M(C,t[f],l[f],c[f],h,p,g,v);--f}else t.forEach(C.add);return l=c=t=u=null,C}return u.x=function(t){return arguments.length?(a=t,u):a},u.y=function(t){return arguments.length?(s=t,u):s},u.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),u):null==e?null:[[e,n],[r,i]]},u.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),u):null==e?null:[r-e,i-n]},u},t.interpolateRgb=$i,t.interpolateObject=Xi,t.interpolateNumber=Zi,t.interpolateString=Ki;var Qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ji=new RegExp(Qi.source,"g");function to(e,n){for(var r,i=t.interpolators.length;--i>=0&&!(r=t.interpolators[i](e,n)););return r}function eo(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(to(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}t.interpolate=to,t.interpolators=[function(t,e){var n=typeof e;return("string"===n?pe.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?$i:Ki:e instanceof Yt?$i:Array.isArray(e)?eo:"object"===n&&isNaN(e)?Xi:Zi)(t,e)}],t.interpolateArray=eo;var no=function(){return T},ro=t.map({linear:no,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return uo},cubic:function(){return lo},sin:function(){return fo},exp:function(){return ho},circle:function(){return po},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Ct*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Ct/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return go}}),io=t.map({in:T,out:ao,"in-out":so,"out-in":function(t){return so(ao(t))}});function oo(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function ao(t){return function(e){return 1-t(1-e)}}function so(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function uo(t){return t*t}function lo(t){return t*t*t}function co(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function fo(t){return 1-Math.cos(t*Dt)}function ho(t){return Math.pow(2,10*(t-1))}function po(t){return 1-Math.sqrt(1-t*t)}function go(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function vo(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function mo(t){var e,n,r,i=[t.a,t.b],o=[t.c,t.d],a=bo(i),s=yo(i,o),u=bo(((e=o)[0]+=(r=-s)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*Lt,this.translate=[t.e,t.f],this.scale=[a,u],this.skew=u?Math.atan2(s,u)*Lt:0}function yo(t,e){return t[0]*e[0]+t[1]*e[1]}function bo(t){var e=Math.sqrt(yo(t,t));return e&&(t[0]/=e,t[1]/=e),e}t.ease=function(t){var n=t.indexOf("-"),r=n>=0?t.slice(0,n):t,i=n>=0?t.slice(n+1):"in";return r=ro.get(r)||no,oo((i=io.get(i)||T)(r.apply(null,e.call(arguments,1))))},t.interpolateHcl=function(e,n){e=t.hcl(e),n=t.hcl(n);var r=e.h,i=e.c,o=e.l,a=n.h-r,s=n.c-i,u=n.l-o;return isNaN(s)&&(s=0,i=isNaN(i)?n.c:i),isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:a<-180&&(a+=360),function(t){return qt(r+a*t,i+s*t,o+u*t)+""}},t.interpolateHsl=function(e,n){e=t.hsl(e),n=t.hsl(n);var r=e.h,i=e.s,o=e.l,a=n.h-r,s=n.s-i,u=n.l-o;return isNaN(s)&&(s=0,i=isNaN(i)?n.s:i),isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:a<-180&&(a+=360),function(t){return Ut(r+a*t,i+s*t,o+u*t)+""}},t.interpolateLab=function(e,n){e=t.lab(e),n=t.lab(n);var r=e.l,i=e.a,o=e.b,a=n.l-r,s=n.a-i,u=n.b-o;return function(t){return Jt(r+a*t,i+s*t,o+u*t)+""}},t.interpolateRound=vo,t.transform=function(e){var n=r.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new mo(e?e.matrix:xo)})(e)},mo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var xo={a:1,b:0,c:0,d:1,e:0,f:0};function wo(t){return t.length?t.pop()+",":""}function ko(e,n){var r=[],i=[];return e=t.transform(e),n=t.transform(n),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Zi(t[0],e[0])},{i:i-2,x:Zi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(e.translate,n.translate,r,i),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(wo(n)+"rotate(",null,")")-2,x:Zi(t,e)})):e&&n.push(wo(n)+"rotate("+e+")")}(e.rotate,n.rotate,r,i),function(t,e,n,r){t!==e?r.push({i:n.push(wo(n)+"skewX(",null,")")-2,x:Zi(t,e)}):e&&n.push(wo(n)+"skewX("+e+")")}(e.skew,n.skew,r,i),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(wo(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Zi(t[0],e[0])},{i:i-2,x:Zi(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(wo(n)+"scale("+e+")")}(e.scale,n.scale,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}function _o(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Mo(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function So(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;for(var n=Co(t),r=Co(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}(e,n),i=[e];e!==r;)i.push(e=e.parent);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Co(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Ao(t){t.fixed|=2}function Do(t){t.fixed&=-7}function To(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Lo(t){t.fixed&=-5}function Eo(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,u=-1;++u<s;)null!=(o=a[u])&&(Eo(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,r+=l*t.point.x,i+=l*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}t.interpolateTransform=ko,t.layout={},t.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(So(t[n]));return e}},t.layout.chord=function(){var e,n,r,i,o,a,s,u={},l=0;function c(){var u,c,d,h,p,g={},v=[],m=t.range(i),y=[];for(e=[],n=[],u=0,h=-1;++h<i;){for(c=0,p=-1;++p<i;)c+=r[h][p];v.push(c),y.push(t.range(i)),u+=c}for(o&&m.sort(function(t,e){return o(v[t],v[e])}),a&&y.forEach(function(t,e){t.sort(function(t,n){return a(r[e][t],r[e][n])})}),u=(Ct-l*i)/u,c=0,h=-1;++h<i;){for(d=c,p=-1;++p<i;){var b=m[h],x=y[b][p],w=r[b][x],k=c,_=c+=w*u;g[b+"-"+x]={index:b,subindex:x,startAngle:k,endAngle:_,value:w}}n[b]={index:b,startAngle:d,endAngle:c,value:v[b]},c+=l}for(h=-1;++h<i;)for(p=h-1;++p<i;){var M=g[h+"-"+p],S=g[p+"-"+h];(M.value||S.value)&&e.push(M.value<S.value?{source:S,target:M}:{source:M,target:S})}s&&f()}function f(){e.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return u.matrix=function(t){return arguments.length?(i=(r=t)&&r.length,e=n=null,u):r},u.padding=function(t){return arguments.length?(l=t,e=n=null,u):l},u.sortGroups=function(t){return arguments.length?(o=t,e=n=null,u):o},u.sortSubgroups=function(t){return arguments.length?(a=t,e=null,u):a},u.sortChords=function(t){return arguments.length?(s=t,e&&f(),u):s},u.chords=function(){return e||c(),e},u.groups=function(){return n||c(),n},u},t.layout.force=function(){var e,n,r,i,o,a,s={},u=t.dispatch("start","tick","end"),l=[1,1],c=.9,f=No,d=Oo,h=-30,p=Fo,g=.1,v=.64,m=[],y=[];function b(t){return function(e,n,r,i){if(e.point!==t){var o,a=e.cx-t.x,s=e.cy-t.y,u=i-n,l=a*a+s*s;if(u*u/v<l)return l<p&&(t.px-=a*(o=e.charge/l),t.py-=s*o),!0;e.point&&l&&l<p&&(t.px-=a*(o=e.pointCharge/l),t.py-=s*o)}return!e.charge}}function x(e){e.px=t.event.x,e.py=t.event.y,s.resume()}return s.tick=function(){if((r*=.99)<.005)return e=null,u.end({type:"end",alpha:r=0}),!0;var n,s,f,d,p,v,x,w,k,_=m.length,M=y.length;for(s=0;s<M;++s)(v=(w=(p=(f=y[s]).target).x-(d=f.source).x)*w+(k=p.y-d.y)*k)&&(k*=v=r*o[s]*((v=Math.sqrt(v))-i[s])/v,p.x-=(w*=v)*(x=d.weight+p.weight?d.weight/(d.weight+p.weight):.5),p.y-=k*x,d.x+=w*(x=1-x),d.y+=k*x);if((x=r*g)&&(w=l[0]/2,k=l[1]/2,s=-1,x))for(;++s<_;)(f=m[s]).x+=(w-f.x)*x,f.y+=(k-f.y)*x;if(h)for(Eo(n=t.geom.quadtree(m),r,a),s=-1;++s<_;)(f=m[s]).fixed||n.visit(b(f));for(s=-1;++s<_;)(f=m[s]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);u.tick({type:"tick",alpha:r})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(l=t,s):l},s.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(v=t*t,s):Math.sqrt(v)},s.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(e.c=null,e.t=NaN,e=null,u.end({type:"end",alpha:r=0})):t>0&&(u.start({type:"start",alpha:r=t}),e=_e(s.tick)),s):r},s.start=function(){var t,e,n,r=m.length,u=y.length,c=l[0],p=l[1];for(t=0;t<r;++t)(n=m[t]).index=t,n.weight=0;for(t=0;t<u;++t)"number"==typeof(n=y[t]).source&&(n.source=m[n.source]),"number"==typeof n.target&&(n.target=m[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<r;++t)n=m[t],isNaN(n.x)&&(n.x=g("x",c)),isNaN(n.y)&&(n.y=g("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof f)for(t=0;t<u;++t)i[t]=+f.call(this,y[t],t);else for(t=0;t<u;++t)i[t]=f;if(o=[],"function"==typeof d)for(t=0;t<u;++t)o[t]=+d.call(this,y[t],t);else for(t=0;t<u;++t)o[t]=d;if(a=[],"function"==typeof h)for(t=0;t<r;++t)a[t]=+h.call(this,m[t],t);else for(t=0;t<r;++t)a[t]=h;function g(n,i){if(!e){for(e=new Array(r),l=0;l<r;++l)e[l]=[];for(l=0;l<u;++l){var o=y[l];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,s=e[t],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][n]))return a;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(n||(n=t.behavior.drag().origin(T).on("dragstart.force",Ao).on("drag.force",x).on("dragend.force",Do)),!arguments.length)return n;this.on("mouseover.force",To).on("mouseout.force",Lo).call(n)},t.rebind(s,u,"on")};var No=20,Oo=1,Fo=1/0;function Po(e,n){return t.rebind(e,n,"sort","children","value"),e.nodes=e,e.links=Yo,e}function Wo(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Ro(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function zo(t){return t.children}function Io(t){return t.value}function Ho(t,e){return e.value-t.value}function Yo(e){return t.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}t.layout.hierarchy=function(){var t=Ho,e=zo,n=Io;function r(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(l=e.call(r,o,o.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)a.push(c=l[u]),c.parent=o,c.depth=o.depth+1;n&&(o.value=0),o.children=l}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return Ro(i,function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)}),s}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(Wo(t,function(t){t.children&&(t.value=0)}),Ro(t,function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},r},t.layout.partition=function(){var e=t.layout.hierarchy(),n=[1,1];function r(t,e,n,i){var o=t.children;if(t.x=e,t.y=t.depth*i,t.dx=n,t.dy=i,o&&(a=o.length)){var a,s,u,l=-1;for(n=t.value?n/t.value:0;++l<a;)r(s=o[l],e,u=s.value*n,i),e+=u}}function i(t){var e=t.children,n=0;if(e&&(r=e.length))for(var r,o=-1;++o<r;)n=Math.max(n,i(e[o]));return 1+n}function o(t,o){var a=e.call(this,t,o);return r(a[0],0,n[0],n[1]/i(a[0])),a}return o.size=function(t){return arguments.length?(n=t,o):n},Po(o,e)},t.layout.pie=function(){var e=Number,n=Bo,r=0,i=Ct,o=0;function a(s){var u,l=s.length,c=s.map(function(t,n){return+e.call(a,t,n)}),f=+("function"==typeof r?r.apply(this,arguments):r),d=("function"==typeof i?i.apply(this,arguments):i)-f,h=Math.min(Math.abs(d)/l,+("function"==typeof o?o.apply(this,arguments):o)),p=h*(d<0?-1:1),g=t.sum(c),v=g?(d-l*p)/g:0,m=t.range(l),y=[];return null!=n&&m.sort(n===Bo?function(t,e){return c[e]-c[t]}:function(t,e){return n(s[t],s[e])}),m.forEach(function(t){y[t]={data:s[t],value:u=c[t],startAngle:f,endAngle:f+=u*v+p,padAngle:h}}),y}return a.value=function(t){return arguments.length?(e=t,a):e},a.sort=function(t){return arguments.length?(n=t,a):n},a.startAngle=function(t){return arguments.length?(r=t,a):r},a.endAngle=function(t){return arguments.length?(i=t,a):i},a.padAngle=function(t){return arguments.length?(o=t,a):o},a};var Bo={};function jo(t){return t.x}function Uo(t){return t.y}function Go(t,e,n){t.y0=e,t.y=n}t.layout.stack=function(){var e=T,n=$o,r=Xo,i=Go,o=jo,a=Uo;function s(u,l){if(!(h=u.length))return u;var c=u.map(function(t,n){return e.call(s,t,n)}),f=c.map(function(t){return t.map(function(t,e){return[o.call(s,t,e),a.call(s,t,e)]})}),d=n.call(s,f,l);c=t.permute(c,d),f=t.permute(f,d);var h,p,g,v,m=r.call(s,f,l),y=c[0].length;for(g=0;g<y;++g)for(i.call(s,c[0][g],v=m[g],f[0][g][1]),p=1;p<h;++p)i.call(s,c[p][g],v+=f[p-1][g][1],f[p][g][1]);return u}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(t){return arguments.length?(n="function"==typeof t?t:Vo.get(t)||$o,s):n},s.offset=function(t){return arguments.length?(r="function"==typeof t?t:qo.get(t)||Xo,s):r},s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(a=t,s):a},s.out=function(t){return arguments.length?(i=t,s):i},s};var Vo=t.map({"inside-out":function(e){var n,r,i=e.length,o=e.map(Zo),a=e.map(Ko),s=t.range(i).sort(function(t,e){return o[t]-o[e]}),u=0,l=0,c=[],f=[];for(n=0;n<i;++n)r=s[n],u<l?(u+=a[r],c.push(r)):(l+=a[r],f.push(r));return f.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:$o}),qo=t.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,u=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<o;++n)u[n]=(s-a[n])/2;return u},wiggle:function(t){var e,n,r,i,o,a,s,u,l,c=t.length,f=t[0],d=f.length,h=[];for(h[0]=u=l=0,n=1;n<d;++n){for(e=0,i=0;e<c;++e)i+=t[e][n][1];for(e=0,o=0,s=f[n][0]-f[n-1][0];e<c;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}h[n]=u-=i?o/i*s:0,u<l&&(l=u)}for(n=0;n<d;++n)h[n]-=l;return h},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:Xo});function $o(e){return t.range(e.length)}function Xo(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function Zo(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function Ko(t){return t.reduce(Qo,0)}function Qo(t,e){return t+e[1]}function Jo(t,e){return ta(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ta(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function ea(e){return[t.min(e),t.max(e)]}function na(t,e){return t.value-e.value}function ra(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function ia(t,e){t._pack_next=e,e._pack_prev=t}function oa(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function aa(t){if((e=t.children)&&(u=e.length)){var e,n,r,i,o,a,s,u,l=1/0,c=-1/0,f=1/0,d=-1/0;if(e.forEach(sa),(n=e[0]).x=-n.r,n.y=0,b(n),u>1&&((r=e[1]).x=r.r,r.y=0,b(r),u>2))for(ca(n,r,i=e[2]),b(i),ra(n,i),n._pack_prev=i,ra(i,r),r=n._pack_next,o=3;o<u;o++){ca(n,r,i=e[o]);var h=0,p=1,g=1;for(a=r._pack_next;a!==r;a=a._pack_next,p++)if(oa(a,i)){h=1;break}if(1==h)for(s=n._pack_prev;s!==a._pack_prev&&!oa(s,i);s=s._pack_prev,g++);h?(p<g||p==g&&r.r<n.r?ia(n,r=a):ia(n=s,r),o--):(ra(n,i),r=i,b(i))}var v=(l+c)/2,m=(f+d)/2,y=0;for(o=0;o<u;o++)(i=e[o]).x-=v,i.y-=m,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(ua)}function b(t){l=Math.min(t.x-t.r,l),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),d=Math.max(t.y+t.r,d)}}function sa(t){t._pack_next=t._pack_prev=t}function ua(t){delete t._pack_next,delete t._pack_prev}function la(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)la(i[o],e,n,r)}function ca(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o,u=.5+((r*=r)-(a*=a))/(2*s),l=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+u*i+l*o,n.y=t.y+u*o-l*i}else n.x=t.x+r,n.y=t.y}function fa(t,e){return t.parent==e.parent?1:2}function da(t){var e=t.children;return e.length?e[0]:t.t}function ha(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function pa(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function ga(t,e,n){return t.a.parent===e.parent?t.a:n}function va(t){var e=t.children;return e&&e.length?va(e[0]):t}function ma(t){var e,n=t.children;return n&&(e=n.length)?ma(n[e-1]):t}function ya(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ba(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function xa(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function wa(t){return t.rangeExtent?t.rangeExtent():xa(t.range())}function ka(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function _a(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Ma(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Sa}t.layout.histogram=function(){var e=!0,n=Number,r=ea,i=Jo;function o(o,a){for(var s,u,l=[],c=o.map(n,this),f=r.call(this,c,a),d=i.call(this,f,c,a),h=(a=-1,c.length),p=d.length-1,g=e?1:1/h;++a<p;)(s=l[a]=[]).dx=d[a+1]-(s.x=d[a]),s.y=0;if(p>0)for(a=-1;++a<h;)(u=c[a])>=f[0]&&u<=f[1]&&((s=l[t.bisect(d,u,1,p)-1]).y+=g,s.push(o[a]));return l}return o.value=function(t){return arguments.length?(n=t,o):n},o.range=function(t){return arguments.length?(r=ge(t),o):r},o.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return ta(e,t)}:ge(t),o):i},o.frequency=function(t){return arguments.length?(e=!!t,o):e},o},t.layout.pack=function(){var e,n=t.layout.hierarchy().sort(na),r=0,i=[1,1];function o(t,o){var a=n.call(this,t,o),s=a[0],u=i[0],l=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Ro(s,function(t){t.r=+c(t.value)}),Ro(s,aa),r){var f=r*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;Ro(s,function(t){t.r+=f}),Ro(s,aa),Ro(s,function(t){t.r-=f})}return la(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),a}return o.size=function(t){return arguments.length?(i=t,o):i},o.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,o):e},o.padding=function(t){return arguments.length?(r=+t,o):r},Po(o,n)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),n=fa,r=[1,1],i=null;function o(t,o){var l=e.call(this,t,o),c=l[0],f=function(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;a<s;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(c);if(Ro(f,a),f.parent.m=-f.z,Wo(f,s),i)Wo(c,u);else{var d=c,h=c,p=c;Wo(c,function(t){t.x<d.x&&(d=t),t.x>h.x&&(h=t),t.depth>p.depth&&(p=t)});var g=n(d,h)/2-d.x,v=r[0]/(h.x+n(h,d)/2+g),m=r[1]/(p.depth||1);Wo(c,function(t){t.x=(t.x+g)*v,t.y=t.depth*m})}return l}function a(t){var e=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+n(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+n(t._,i._));t.parent.A=function(t,e,r){if(e){for(var i,o=t,a=t,s=e,u=o.parent.children[0],l=o.m,c=a.m,f=s.m,d=u.m;s=ha(s),o=da(o),s&&o;)u=da(u),(a=ha(a)).a=t,(i=s.z+f-o.z-l+n(s._,o._))>0&&(pa(ga(s,t,r),t,i),l+=i,c+=i),f+=s.m,l+=o.m,d+=u.m,c+=a.m;s&&!ha(a)&&(a.t=s,a.m+=f-c),o&&!da(u)&&(u.t=o,u.m+=l-d,r=t)}return r}(t,i,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=r[0],t.y=t.depth*r[1]}return o.separation=function(t){return arguments.length?(n=t,o):n},o.size=function(t){return arguments.length?(i=null==(r=t)?u:null,o):i?null:r},o.nodeSize=function(t){return arguments.length?(i=null==(r=t)?null:u,o):i?r:null},Po(o,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),n=fa,r=[1,1],i=!1;function o(o,a){var s,u=e.call(this,o,a),l=u[0],c=0;Ro(l,function(e){var r=e.children;r&&r.length?(e.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(r),e.y=function(e){return 1+t.max(e,function(t){return t.y})}(r)):(e.x=s?c+=n(e,s):0,e.y=0,s=e)});var f=va(l),d=ma(l),h=f.x-n(f,d)/2,p=d.x+n(d,f)/2;return Ro(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),u}return o.separation=function(t){return arguments.length?(n=t,o):n},o.size=function(t){return arguments.length?(i=null==(r=t),o):i?null:r},o.nodeSize=function(t){return arguments.length?(i=null!=(r=t),o):i?r:null},Po(o,e)},t.layout.treemap=function(){var e,n=t.layout.hierarchy(),r=Math.round,i=[1,1],o=null,a=ya,s=!1,u="squarify",l=.5*(1+Math.sqrt(5));function c(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function f(t){var e=t.children;if(e&&e.length){var n,r,i,o=a(t),s=[],l=e.slice(),d=1/0,g="slice"===u?o.dx:"dice"===u?o.dy:"slice-dice"===u?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(c(l,o.dx*o.dy/t.value),s.area=0;(i=l.length)>0;)s.push(n=l[i-1]),s.area+=n.area,"squarify"!==u||(r=h(s,g))<=d?(l.pop(),d=r):(s.area-=s.pop().area,p(s,g,o,!1),g=Math.min(o.dx,o.dy),s.length=s.area=0,d=1/0);s.length&&(p(s,g,o,!0),s.length=s.area=0),e.forEach(f)}}function d(t){var e=t.children;if(e&&e.length){var n,r=a(t),i=e.slice(),o=[];for(c(i,r.dx*r.dy/t.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(p(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);e.forEach(d)}}function h(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*l/r,r/(e*o*l)):1/0}function p(t,e,n,i){var o,a=-1,s=t.length,u=n.x,l=n.y,c=e?r(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<s;)(o=t[a]).x=u,o.y=l,o.dy=c,u+=o.dx=Math.min(n.x+n.dx-u,c?r(o.area/c):0);o.z=!0,o.dx+=n.x+n.dx-u,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<s;)(o=t[a]).x=u,o.y=l,o.dx=c,l+=o.dy=Math.min(n.y+n.dy-l,c?r(o.area/c):0);o.z=!1,o.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function g(t){var r=e||n(t),o=r[0];return o.x=o.y=0,o.value?(o.dx=i[0],o.dy=i[1]):o.dx=o.dy=0,e&&n.revalue(o),c([o],o.dx*o.dy/o.value),(e?d:f)(o),s&&(e=r),r}return g.size=function(t){return arguments.length?(i=t,g):i},g.padding=function(t){if(!arguments.length)return o;function e(e){var n=t.call(g,e,e.depth);return null==n?ya(e):ba(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return ba(e,t)}var r;return a=null==(o=t)?ya:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,g},g.round=function(t){return arguments.length?(r=t?Math.round:Number,g):r!=Number},g.sticky=function(t){return arguments.length?(s=t,e=null,g):s},g.ratio=function(t){return arguments.length?(l=t,g):l},g.mode=function(t){return arguments.length?(u=t+"",g):u},Po(g,n)},t.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},t.scale={};var Sa={floor:T,ceil:T};function Ca(e,n,r,i){var o=[],a=[],s=0,u=Math.min(e.length,n.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<=u;)o.push(r(e[s-1],e[s])),a.push(i(n[s-1],n[s]));return function(n){var r=t.bisect(e,n,1,u)-1;return a[r](o[r](n))}}function Aa(t,e,n,r){var i,o;function a(){var a=Math.min(t.length,e.length)>2?Ca:ka,u=r?Mo:_o;return i=a(t,e,u,n),o=a(e,t,u,to),s}function s(t){return i(t)}return s.invert=function(t){return o(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),a()):t},s.range=function(t){return arguments.length?(e=t,a()):e},s.rangeRound=function(t){return s.range(t).interpolate(vo)},s.clamp=function(t){return arguments.length?(r=t,a()):r},s.interpolate=function(t){return arguments.length?(n=t,a()):n},s.ticks=function(e){return Ea(t,e)},s.tickFormat=function(e,n){return Na(t,e,n)},s.nice=function(e){return Ta(t,e),a()},s.copy=function(){return Aa(t,e,n,r)},a()}function Da(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function Ta(t,e){return _a(t,Ma(La(t,e)[2])),_a(t,Ma(La(t,e)[2])),t}function La(t,e){null==e&&(e=10);var n=xa(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ea(e,n){return t.range.apply(t,La(e,n))}function Na(e,n,r){var i=La(e,n);if(r){var o=Le.exec(r);if(o.shift(),"s"===o[8]){var a=t.formatPrefix(Math.max(m(i[0]),m(i[1])));return o[7]||(o[7]="."+Fa(a.scale(i[2]))),o[8]="f",r=t.format(o.join("")),function(t){return r(a.scale(t))+a.symbol}}o[7]||(o[7]="."+function(t,e){var n=Fa(e[2]);return t in Oa?Math.abs(n-Fa(Math.max(m(e[0]),m(e[1]))))+ +("e"!==t):n-2*("%"===t)}(o[8],i)),r=o.join("")}else r=",."+Fa(i[2])+"f";return t.format(r)}t.scale.linear=function(){return Aa([0,1],[0,1],to,!1)};var Oa={s:1,g:1,p:1,r:1,e:1};function Fa(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Pa(e,n,r,i){function o(t){return(r?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function a(t){return r?Math.pow(n,t):-Math.pow(n,-t)}function s(t){return e(o(t))}return s.invert=function(t){return a(e.invert(t))},s.domain=function(t){return arguments.length?(r=t[0]>=0,e.domain((i=t.map(Number)).map(o)),s):i},s.base=function(t){return arguments.length?(n=+t,e.domain(i.map(o)),s):n},s.nice=function(){var t=_a(i.map(o),r?Math:Ra);return e.domain(t),i=t.map(a),s},s.ticks=function(){var t=xa(i),e=[],s=t[0],u=t[1],l=Math.floor(o(s)),c=Math.ceil(o(u)),f=n%1?2:n;if(isFinite(c-l)){if(r){for(;l<c;l++)for(var d=1;d<f;d++)e.push(a(l)*d);e.push(a(l))}else for(e.push(a(l));l++<c;)for(d=f-1;d>0;d--)e.push(a(l)*d);for(l=0;e[l]<s;l++);for(c=e.length;e[c-1]>u;c--);e=e.slice(l,c)}return e},s.tickFormat=function(e,r){if(!arguments.length)return Wa;arguments.length<2?r=Wa:"function"!=typeof r&&(r=t.format(r));var i=Math.max(1,n*e/s.ticks().length);return function(t){var e=t/a(Math.round(o(t)));return e*n<n-.5&&(e*=n),e<=i?r(t):""}},s.copy=function(){return Pa(e.copy(),n,r,i)},Da(s,e)}t.scale.log=function(){return Pa(t.scale.linear().domain([0,1]),10,!0,[1,10])};var Wa=t.format(".0e"),Ra={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function za(t,e,n){var r=Ia(e),i=Ia(1/e);function o(e){return t(r(e))}return o.invert=function(e){return i(t.invert(e))},o.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),o):n},o.ticks=function(t){return Ea(n,t)},o.tickFormat=function(t,e){return Na(n,t,e)},o.nice=function(t){return o.domain(Ta(n,t))},o.exponent=function(a){return arguments.length?(r=Ia(e=a),i=Ia(1/e),t.domain(n.map(r)),o):e},o.copy=function(){return za(t.copy(),e,n)},Da(o,t)}function Ia(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ha(e,n){var r,i,o;function a(t){return i[((r.get(t)||("range"===n.t?r.set(t,e.push(t)):NaN))-1)%i.length]}function s(n,r){return t.range(e.length).map(function(t){return n+r*t})}return a.domain=function(t){if(!arguments.length)return e;e=[],r=new x;for(var i,o=-1,s=t.length;++o<s;)r.has(i=t[o])||r.set(i,e.push(i));return a[n.t].apply(a,n.a)},a.range=function(t){return arguments.length?(i=t,o=0,n={t:"range",a:arguments},a):i},a.rangePoints=function(t,r){arguments.length<2&&(r=0);var u=t[0],l=t[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+r);return i=s(u+c*r/2,c),o=0,n={t:"rangePoints",a:arguments},a},a.rangeRoundPoints=function(t,r){arguments.length<2&&(r=0);var u=t[0],l=t[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+r)|0;return i=s(u+Math.round(c*r/2+(l-u-(e.length-1+r)*c)/2),c),o=0,n={t:"rangeRoundPoints",a:arguments},a},a.rangeBands=function(t,r,u){arguments.length<2&&(r=0),arguments.length<3&&(u=r);var l=t[1]<t[0],c=t[l-0],f=t[1-l],d=(f-c)/(e.length-r+2*u);return i=s(c+d*u,d),l&&i.reverse(),o=d*(1-r),n={t:"rangeBands",a:arguments},a},a.rangeRoundBands=function(t,r,u){arguments.length<2&&(r=0),arguments.length<3&&(u=r);var l=t[1]<t[0],c=t[l-0],f=t[1-l],d=Math.floor((f-c)/(e.length-r+2*u));return i=s(c+Math.round((f-c-(e.length-r)*d)/2),d),l&&i.reverse(),o=Math.round(d*(1-r)),n={t:"rangeRoundBands",a:arguments},a},a.rangeBand=function(){return o},a.rangeExtent=function(){return xa(n.a[0])},a.copy=function(){return Ha(e,n)},a.domain(e)}t.scale.pow=function(){return za(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return Ha([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(Ya)},t.scale.category20=function(){return t.scale.ordinal().range(Ba)},t.scale.category20b=function(){return t.scale.ordinal().range(ja)},t.scale.category20c=function(){return t.scale.ordinal().range(Ua)};var Ya=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ae),Ba=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ae),ja=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ae),Ua=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ae);function Ga(e,n){var r;function i(){var i=0,a=n.length;for(r=[];++i<a;)r[i-1]=t.quantile(e,i/a);return o}function o(e){if(!isNaN(e=+e))return n[t.bisect(r,e)]}return o.domain=function(t){return arguments.length?(e=t.map(d).filter(h).sort(f),i()):e},o.range=function(t){return arguments.length?(n=t,i()):n},o.quantiles=function(){return r},o.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?r[t-1]:e[0],t<r.length?r[t]:e[e.length-1]]},o.copy=function(){return Ga(e,n)},i()}function Va(t,e,n){var r,i;function o(e){return n[Math.max(0,Math.min(i,Math.floor(r*(e-t))))]}function a(){return r=n.length/(e-t),i=n.length-1,o}return o.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],a()):[t,e]},o.range=function(t){return arguments.length?(n=t,a()):n},o.invertExtent=function(e){return[e=(e=n.indexOf(e))<0?NaN:e/r+t,e+1/r]},o.copy=function(){return Va(t,e,n)},a()}function qa(e,n){function r(r){if(r<=r)return n[t.bisect(e,r)]}return r.domain=function(t){return arguments.length?(e=t,r):e},r.range=function(t){return arguments.length?(n=t,r):n},r.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},r.copy=function(){return qa(e,n)},r}function $a(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Ea(t,e)},e.tickFormat=function(e,n){return Na(t,e,n)},e.copy=function(){return $a(t)},e}function Xa(){return 0}t.scale.quantile=function(){return Ga([],[])},t.scale.quantize=function(){return Va(0,1,[0,1])},t.scale.threshold=function(){return qa([.5],[0,1])},t.scale.identity=function(){return $a([0,1])},t.svg={},t.svg.arc=function(){var t=Ka,e=Qa,n=Xa,r=Za,i=Ja,o=ts,a=es;function s(){var s=Math.max(0,+t.apply(this,arguments)),l=Math.max(0,+e.apply(this,arguments)),c=i.apply(this,arguments)-Dt,f=o.apply(this,arguments)-Dt,d=Math.abs(f-c),h=c>f?0:1;if(l<s&&(p=l,l=s,s=p),d>=At)return u(l,h)+(s?u(s,1-h):"")+"Z";var p,g,v,m,y,b,x,w,k,_,M,S,C=0,A=0,D=[];if((m=(+a.apply(this,arguments)||0)/2)&&(v=r===Za?Math.sqrt(s*s+l*l):+r.apply(this,arguments),h||(A*=-1),l&&(A=Ft(v/l*Math.sin(m))),s&&(C=Ft(v/s*Math.sin(m)))),l){y=l*Math.cos(c+A),b=l*Math.sin(c+A),x=l*Math.cos(f-A),w=l*Math.sin(f-A);var T=Math.abs(f-c-2*A)<=St?0:1;if(A&&ns(y,b,x,w)===h^T){var L=(c+f)/2;y=l*Math.cos(L),b=l*Math.sin(L),x=w=null}}else y=b=0;if(s){k=s*Math.cos(f-C),_=s*Math.sin(f-C),M=s*Math.cos(c+C),S=s*Math.sin(c+C);var E=Math.abs(c-f+2*C)<=St?0:1;if(C&&ns(k,_,M,S)===1-h^E){var N=(c+f)/2;k=s*Math.cos(N),_=s*Math.sin(N),M=S=null}}else k=_=0;if(d>_t&&(p=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){g=s<l^h?0:1;var O=p,F=p;if(d<St){var P=null==M?[k,_]:null==x?[y,b]:ci([y,b],[M,S],[x,w],[k,_]),W=y-P[0],R=b-P[1],z=x-P[0],I=w-P[1],H=1/Math.sin(Math.acos((W*z+R*I)/(Math.sqrt(W*W+R*R)*Math.sqrt(z*z+I*I)))/2),Y=Math.sqrt(P[0]*P[0]+P[1]*P[1]);F=Math.min(p,(s-Y)/(H-1)),O=Math.min(p,(l-Y)/(H+1))}if(null!=x){var B=rs(null==M?[k,_]:[M,S],[y,b],l,O,h),j=rs([x,w],[k,_],l,O,h);p===O?D.push("M",B[0],"A",O,",",O," 0 0,",g," ",B[1],"A",l,",",l," 0 ",1-h^ns(B[1][0],B[1][1],j[1][0],j[1][1]),",",h," ",j[1],"A",O,",",O," 0 0,",g," ",j[0]):D.push("M",B[0],"A",O,",",O," 0 1,",g," ",j[0])}else D.push("M",y,",",b);if(null!=M){var U=rs([y,b],[M,S],s,-F,h),G=rs([k,_],null==x?[y,b]:[x,w],s,-F,h);p===F?D.push("L",G[0],"A",F,",",F," 0 0,",g," ",G[1],"A",s,",",s," 0 ",h^ns(G[1][0],G[1][1],U[1][0],U[1][1]),",",1-h," ",U[1],"A",F,",",F," 0 0,",g," ",U[0]):D.push("L",G[0],"A",F,",",F," 0 0,",g," ",U[0])}else D.push("L",k,",",_)}else D.push("M",y,",",b),null!=x&&D.push("A",l,",",l," 0 ",T,",",h," ",x,",",w),D.push("L",k,",",_),null!=M&&D.push("A",s,",",s," 0 ",E,",",1-h," ",M,",",S);return D.push("Z"),D.join("")}function u(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=ge(e),s):t},s.outerRadius=function(t){return arguments.length?(e=ge(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=ge(t),s):n},s.padRadius=function(t){return arguments.length?(r=t==Za?Za:ge(t),s):r},s.startAngle=function(t){return arguments.length?(i=ge(t),s):i},s.endAngle=function(t){return arguments.length?(o=ge(t),s):o},s.padAngle=function(t){return arguments.length?(a=ge(t),s):a},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Dt;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Za="auto";function Ka(t){return t.innerRadius}function Qa(t){return t.outerRadius}function Ja(t){return t.startAngle}function ts(t){return t.endAngle}function es(t){return t&&t.padAngle}function ns(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function rs(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),u=s*a,l=-s*o,c=t[0]+u,f=t[1]+l,d=e[0]+u,h=e[1]+l,p=(c+d)/2,g=(f+h)/2,v=d-c,m=h-f,y=v*v+m*m,b=n-r,x=c*h-d*f,w=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),k=(x*m-v*w)/y,_=(-x*v-m*w)/y,M=(x*m+v*w)/y,S=(-x*v+m*w)/y,C=k-p,A=_-g,D=M-p,T=S-g;return C*C+A*A>D*D+T*T&&(k=M,_=S),[[k-u,_-l],[k*n/b,_*n/b]]}function is(t){var e=ii,n=oi,r=$n,i=as,o=i.key,a=.7;function s(o){var s,u=[],l=[],c=-1,f=o.length,d=ge(e),h=ge(n);function p(){u.push("M",i(t(l),a))}for(;++c<f;)r.call(this,s=o[c],c)?l.push([+d.call(this,s,c),+h.call(this,s,c)]):l.length&&(p(),l=[]);return l.length&&p(),u.length?u.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=os.get(t)||as).key,s):o},s.tension=function(t){return arguments.length?(a=t,s):a},s}t.svg.line=function(){return is(T)};var os=t.map({linear:as,"linear-closed":ss,step:function(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":us,"step-after":ls,basis:ds,"basis-open":function(t){if(t.length<4)return as(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)o.push((e=t[r])[0]),a.push(e[1]);for(n.push(hs(vs,o)+","+hs(vs,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),ms(n,o,a);return n.join("")},"basis-closed":function(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];++r<4;)a.push((n=t[r%i])[0]),s.push(n[1]);for(e=[hs(vs,a),",",hs(vs,s)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),ms(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,u=t[n][1]-a,l=-1;++l<=n;)(r=t[l])[0]=e*r[0]+(1-e)*(o+(i=l/n)*s),r[1]=e*r[1]+(1-e)*(a+i*u);return ds(t)},cardinal:function(t,e){return t.length<3?as(t):t[0]+cs(t,fs(t,e))},"cardinal-open":function(t,e){return t.length<4?as(t):t[1]+cs(t.slice(1,-1),fs(t,e))},"cardinal-closed":function(t,e){return t.length<3?ss(t):t[0]+cs((t.push(t[0]),t),fs([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?as(t):t[0]+cs(t,function(t){for(var e,n,r,i,o=[],a=function(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=ys(i,o);++e<n;)r[e]=(a+(a=ys(i=o,o=t[e+1])))/2;return r[e]=a,r}(t),s=-1,u=t.length-1;++s<u;)e=ys(t[s],t[s+1]),m(e)<_t?a[s]=a[s+1]=0:(i=(n=a[s]/e)*n+(r=a[s+1]/e)*r)>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r);for(s=-1;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(t))}});function as(t){return t.length>1?t.join("L"):t+"Z"}function ss(t){return t.join("L")+"Z"}function us(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function ls(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function cs(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return as(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,u=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],u=2),e.length>1){o=t[u],u++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-(s=e[1])[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var l=2;l<e.length;l++,u++)r+="S"+((o=t[u])[0]-(s=e[l])[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[u];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function fs(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,u=t.length;++s<u;)n=o,o=a,r.push([i*((a=t[s])[0]-n[0]),i*(a[1]-n[1])]);return r}function ds(t){if(t.length<3)return as(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],u=[i,",",o,"L",hs(vs,a),",",hs(vs,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),ms(u,a,s);return t.pop(),u.push("L",r),u.join("")}function hs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}os.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var ps=[0,2/3,1/3,0],gs=[0,1/3,2/3,0],vs=[0,1/6,2/3,1/6];function ms(t,e,n){t.push("C",hs(ps,e),",",hs(ps,n),",",hs(gs,e),",",hs(gs,n),",",hs(vs,e),",",hs(vs,n))}function ys(t,e){return(e[1]-t[1])/(e[0]-t[0])}function bs(t){for(var e,n,r,i=-1,o=t.length;++i<o;)r=(e=t[i])[1]-Dt,e[0]=(n=e[0])*Math.cos(r),e[1]=n*Math.sin(r);return t}function xs(t){var e=ii,n=ii,r=0,i=oi,o=$n,a=as,s=a.key,u=a,l="L",c=.7;function f(s){var f,d,h,p=[],g=[],v=[],m=-1,y=s.length,b=ge(e),x=ge(r),w=e===n?function(){return d}:ge(n),k=r===i?function(){return h}:ge(i);function _(){p.push("M",a(t(v),c),l,u(t(g.reverse()),c),"Z")}for(;++m<y;)o.call(this,f=s[m],m)?(g.push([d=+b.call(this,f,m),h=+x.call(this,f,m)]),v.push([+w.call(this,f,m),+k.call(this,f,m)])):g.length&&(_(),g=[],v=[]);return g.length&&_(),p.length?p.join(""):null}return f.x=function(t){return arguments.length?(e=n=t,f):n},f.x0=function(t){return arguments.length?(e=t,f):e},f.x1=function(t){return arguments.length?(n=t,f):n},f.y=function(t){return arguments.length?(r=i=t,f):i},f.y0=function(t){return arguments.length?(r=t,f):r},f.y1=function(t){return arguments.length?(i=t,f):i},f.defined=function(t){return arguments.length?(o=t,f):o},f.interpolate=function(t){return arguments.length?(s="function"==typeof t?a=t:(a=os.get(t)||as).key,u=a.reverse||a,l=a.closed?"M":"L",f):s},f.tension=function(t){return arguments.length?(c=t,f):c},f}function ws(t){return t.radius}function ks(t){return[t.x,t.y]}function _s(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Dt;return[n*Math.cos(r),n*Math.sin(r)]}}function Ms(){return 64}function Ss(){return"circle"}function Cs(t){var e=Math.sqrt(t/St);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}t.svg.line.radial=function(){var t=is(bs);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},us.reverse=ls,ls.reverse=us,t.svg.area=function(){return xs(T)},t.svg.area.radial=function(){var t=xs(bs);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},t.svg.chord=function(){var t=Ur,e=Gr,n=ws,r=Ja,i=ts;function o(n,r){var i,o,l=a(this,t,n,r),c=a(this,e,n,r);return"M"+l.p0+s(l.r,l.p1,l.a1-l.a0)+((i=l).a0==(o=c).a0&&i.a1==o.a1?u(0,0,0,l.p0):u(0,0,0,c.p0)+s(c.r,c.p1,c.a1-c.a0)+u(0,0,0,l.p0))+"Z"}function a(t,e,o,a){var s=e.call(t,o,a),u=n.call(t,s,a),l=r.call(t,s,a)-Dt,c=i.call(t,s,a)-Dt;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>St)+",1 "+e}function u(t,e,n,r){return"Q 0,0 "+r}return o.radius=function(t){return arguments.length?(n=ge(t),o):n},o.source=function(e){return arguments.length?(t=ge(e),o):t},o.target=function(t){return arguments.length?(e=ge(t),o):e},o.startAngle=function(t){return arguments.length?(r=ge(t),o):r},o.endAngle=function(t){return arguments.length?(i=ge(t),o):i},o},t.svg.diagonal=function(){var t=Ur,e=Gr,n=ks;function r(r,i){var o=t.call(this,r,i),a=e.call(this,r,i),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(e){return arguments.length?(t=ge(e),r):t},r.target=function(t){return arguments.length?(e=ge(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=ks,r=e.projection;return e.projection=function(t){return arguments.length?r(_s(n=t)):n},e},t.svg.symbol=function(){var t=Ss,e=Ms;function n(n,r){return(As.get(t.call(this,n,r))||Cs)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=ge(e),n):t},n.size=function(t){return arguments.length?(e=ge(t),n):e},n};var As=t.map({circle:Cs,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Ts)),n=e*Ts;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ds),n=e*Ds/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ds),n=e*Ds/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});t.svg.symbolTypes=As.keys();var Ds=Math.sqrt(3),Ts=Math.tan(30*Tt);G.transition=function(t){for(var e,n,r=Os||++Ws,i=Is(t),o=[],a=Fs||{time:Date.now(),ease:co,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(e=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&Hs(n,c,i,r,a),e.push(n)}return Ns(o,i,r)},G.interrupt=function(t){return this.each(null==t?Ls:Es(Is(t)))};var Ls=Es(Is());function Es(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ns(t,e,n){return H(t,Ps),t.namespace=e,t.id=n,t}var Os,Fs,Ps=[],Ws=0;function Rs(t,e,n,r){var i=t.id,o=t.namespace;return lt(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function zs(t){return null==t&&(t=""),function(){this.textContent=t}}function Is(t){return null==t?"__transition__":"__transition_"+t+"__"}function Hs(t,e,n,r,i){var o,a,s,u,l,c=t[n]||(t[n]={active:0,count:0}),f=c[r];function d(n){var i=c.active,d=c[i];for(var p in d&&(d.timer.c=null,d.timer.t=NaN,--c.count,delete c[i],d.event&&d.event.interrupt.call(t,t.__data__,d.index)),c)if(+p<r){var g=c[p];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[p]}a.c=h,_e(function(){return a.c&&h(n||1)&&(a.c=null,a.t=NaN),1},0,o),c.active=r,f.event&&f.event.start.call(t,t.__data__,e),l=[],f.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&l.push(r)}),u=f.ease,s=f.duration}function h(i){for(var o=i/s,a=u(o),d=l.length;d>0;)l[--d].call(t,a);if(o>=1)return f.event&&f.event.end.call(t,t.__data__,e),--c.count?delete c[r]:delete t[n],1}f||(a=_e(function(t){var e=f.delay;if(a.t=e+o,e<=t)return d(t-e);a.c=d},0,o=i.time),f=c[r]={tween:new x,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++c.count)}Ps.call=G.call,Ps.empty=G.empty,Ps.node=G.node,Ps.size=G.size,t.transition=function(e,n){return e&&e.transition?Os?e.transition(n):e:t.selection().transition(e)},t.transition.prototype=Ps,Ps.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=V(t);for(var s=-1,u=this.length;++s<u;){a.push(e=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Hs(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return Ns(a,o,i)},Ps.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,u=[];t=q(t);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],d=-1,h=f.length;++d<h;)if(r=f[d]){o=r[s][a],n=t.call(r,r.__data__,d,l),u.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&Hs(i,p,s,a,o),e.push(i)}return Ns(u,s,a)},Ps.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=st(t));for(var i=0,o=this.length;i<o;i++){r.push(e=[]);for(var a,s=0,u=(a=this[i]).length;s<u;s++)(n=a[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return Ns(r,this.namespace,this.id)},Ps.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):lt(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Ps.attr=function(e,n){if(arguments.length<2){for(n in e)this.attr(n,e[n]);return this}var r="transform"==e?ko:to,i=t.ns.qualify(e);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}function s(t){return null==t?o:(t+="",function(){var e,n=this.getAttribute(i);return n!==t&&(e=r(n,t),function(t){this.setAttribute(i,e(t))})})}function u(t){return null==t?a:(t+="",function(){var e,n=this.getAttributeNS(i.space,i.local);return n!==t&&(e=r(n,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}return Rs(this,"attr."+e,n,i.local?u:s)},Ps.attrTween=function(e,n){var r=t.ns.qualify(e);return this.tween("attr."+e,r.local?function(t,e){var i=n.call(this,t,e,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}:function(t,e){var i=n.call(this,t,e,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}})},Ps.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}function a(e){return null==e?i:(e+="",function(){var r,i=o(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=to(i,e),function(e){this.style.setProperty(t,r(e),n)})})}return Rs(this,"style."+t,e,a)},Ps.styleTween=function(t,e,n){function r(r,i){var a=e.call(this,r,i,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Ps.text=function(t){return Rs(this,"text",t,zs)},Ps.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ps.ease=function(e){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),lt(this,function(t){t[r][n].ease=e}))},Ps.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:lt(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Ps.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:lt(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Ps.each=function(e,n){var r=this.id,i=this.namespace;if(arguments.length<2){var o=Fs,a=Os;try{Os=r,lt(this,function(t,n,o){Fs=t[i][r],e.call(t,t.__data__,n,o)})}finally{Fs=o,Os=a}}else lt(this,function(o){var a=o[i][r];(a.event||(a.event=t.dispatch("start","end","interrupt"))).on(e,n)});return this},Ps.transition=function(){for(var t,e,n,r=this.id,i=++Ws,o=this.namespace,a=[],s=0,u=this.length;s<u;s++){a.push(t=[]);for(var l,c=0,f=(l=this[s]).length;c<f;c++)(e=l[c])&&Hs(e,c,o,i,{time:(n=e[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return Ns(a,o,i)},t.svg.axis=function(){var e,r=t.scale.linear(),i=Ys,o=6,a=6,s=3,u=[10],l=null;function c(n){n.each(function(){var n,c=t.select(this),f=this.__chart__||r,d=this.__chart__=r.copy(),h=null==l?d.ticks?d.ticks.apply(d,u):d.domain():l,p=null==e?d.tickFormat?d.tickFormat.apply(d,u):T:e,g=c.selectAll(".tick").data(h,d),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",_t),m=t.transition(g.exit()).style("opacity",_t).remove(),y=t.transition(g.order()).style("opacity",1),b=Math.max(o,0)+s,x=wa(d),w=c.selectAll(".domain").data([0]),k=(w.enter().append("path").attr("class","domain"),t.transition(w));v.append("line"),v.append("text");var _,M,S,C,A=v.select("line"),D=y.select("line"),L=g.select("text").text(p),E=v.select("text"),N=y.select("text"),O="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(n=js,_="x",S="y",M="x2",C="y2",L.attr("dy",O<0?"0em":".71em").style("text-anchor","middle"),k.attr("d","M"+x[0]+","+O*a+"V0H"+x[1]+"V"+O*a)):(n=Us,_="y",S="x",M="y2",C="x2",L.attr("dy",".32em").style("text-anchor",O<0?"end":"start"),k.attr("d","M"+O*a+","+x[0]+"H0V"+x[1]+"H"+O*a)),A.attr(C,O*o),E.attr(S,O*b),D.attr(M,0).attr(C,O*o),N.attr(_,0).attr(S,O*b),d.rangeBand){var F=d,P=F.rangeBand()/2;f=d=function(t){return F(t)+P}}else f.rangeBand?f=d:m.call(n,d,f);v.call(n,f,d),y.call(n,d,d)})}return c.scale=function(t){return arguments.length?(r=t,c):r},c.orient=function(t){return arguments.length?(i=t in Bs?t+"":Ys,c):i},c.ticks=function(){return arguments.length?(u=n(arguments),c):u},c.tickValues=function(t){return arguments.length?(l=t,c):l},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(t){var e=arguments.length;return e?(o=+t,a=+arguments[e-1],c):o},c.innerTickSize=function(t){return arguments.length?(o=+t,c):o},c.outerTickSize=function(t){return arguments.length?(a=+t,c):a},c.tickPadding=function(t){return arguments.length?(s=+t,c):s},c.tickSubdivide=function(){return arguments.length&&c},c};var Ys="bottom",Bs={top:1,right:1,bottom:1,left:1};function js(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Us(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}t.svg.brush=function(){var e,n,r=z(d,"brushstart","brush","brushend"),i=null,a=null,s=[0,0],u=[0,0],l=!0,c=!0,f=Vs[0];function d(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=e.selectAll(".resize").data(f,T);r.exit().remove(),r.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Gs[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),r.style("display",d.empty()?"none":null);var o,s=t.transition(e),u=t.transition(n);i&&(o=wa(i),u.attr("x",o[0]).attr("width",o[1]-o[0]),p(s)),a&&(o=wa(a),u.attr("y",o[0]).attr("height",o[1]-o[0]),g(s)),h(s)})}function h(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+s[+/e$/.test(t)]+","+u[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function g(t){t.select(".extent").attr("y",u[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",u[1]-u[0])}function v(){var f,v,m=this,y=t.select(t.event.target),b=r.of(m,arguments),x=t.select(m),w=y.datum(),k=!/^(n|s)$/.test(w)&&i,_=!/^(e|w)$/.test(w)&&a,M=y.classed("extent"),S=bt(m),C=t.mouse(m),A=t.select(o(m)).on("keydown.brush",L).on("keyup.brush",E);if(t.event.changedTouches?A.on("touchmove.brush",N).on("touchend.brush",F):A.on("mousemove.brush",N).on("mouseup.brush",F),x.interrupt().selectAll("*").interrupt(),M)C[0]=s[0]-C[0],C[1]=u[0]-C[1];else if(w){var D=+/w$/.test(w),T=+/^n/.test(w);v=[s[1-D]-C[0],u[1-T]-C[1]],C[0]=s[D],C[1]=u[T]}else t.event.altKey&&(f=C.slice());function L(){32==t.event.keyCode&&(M||(f=null,C[0]-=s[1],C[1]-=u[1],M=2),W())}function E(){32==t.event.keyCode&&2==M&&(C[0]+=s[1],C[1]+=u[1],M=0,W())}function N(){var e=t.mouse(m),n=!1;v&&(e[0]+=v[0],e[1]+=v[1]),M||(t.event.altKey?(f||(f=[(s[0]+s[1])/2,(u[0]+u[1])/2]),C[0]=s[+(e[0]<f[0])],C[1]=u[+(e[1]<f[1])]):f=null),k&&O(e,i,0)&&(p(x),n=!0),_&&O(e,a,1)&&(g(x),n=!0),n&&(h(x),b({type:"brush",mode:M?"move":"resize"}))}function O(t,r,i){var o,a,d=wa(r),h=d[0],p=d[1],g=C[i],v=i?u:s,m=v[1]-v[0];if(M&&(h-=g,p-=m+g),o=(i?c:l)?Math.max(h,Math.min(p,t[i])):t[i],M?a=(o+=g)+m:(f&&(g=Math.max(h,Math.min(p,2*f[i]-o))),g<o?(a=o,o=g):a=g),v[0]!=o||v[1]!=a)return i?n=null:e=null,v[0]=o,v[1]=a,!0}function F(){N(),x.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),t.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),S(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),N()}return d.event=function(i){i.each(function(){var i=r.of(this,arguments),o={x:s,y:u,i:e,j:n},a=this.__chart__||o;this.__chart__=o,Os?t.select(this).transition().each("start.brush",function(){e=a.i,n=a.j,s=a.x,u=a.y,i({type:"brushstart"})}).tween("brush:brush",function(){var t=eo(s,o.x),r=eo(u,o.y);return e=n=null,function(e){s=o.x=t(e),u=o.y=r(e),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=o.i,n=o.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},d.x=function(t){return arguments.length?(f=Vs[!(i=t)<<1|!a],d):i},d.y=function(t){return arguments.length?(f=Vs[!i<<1|!(a=t)],d):a},d.clamp=function(t){return arguments.length?(i&&a?(l=!!t[0],c=!!t[1]):i?l=!!t:a&&(c=!!t),d):i&&a?[l,c]:i?l:a?c:null},d.extent=function(t){var r,o,l,c,f;return arguments.length?(i&&(r=t[0],o=t[1],a&&(r=r[0],o=o[0]),e=[r,o],i.invert&&(r=i(r),o=i(o)),o<r&&(f=r,r=o,o=f),r==s[0]&&o==s[1]||(s=[r,o])),a&&(l=t[0],c=t[1],i&&(l=l[1],c=c[1]),n=[l,c],a.invert&&(l=a(l),c=a(c)),c<l&&(f=l,l=c,c=f),l==u[0]&&c==u[1]||(u=[l,c])),d):(i&&(e?(r=e[0],o=e[1]):(r=s[0],o=s[1],i.invert&&(r=i.invert(r),o=i.invert(o)),o<r&&(f=r,r=o,o=f))),a&&(n?(l=n[0],c=n[1]):(l=u[0],c=u[1],a.invert&&(l=a.invert(l),c=a.invert(c)),c<l&&(f=l,l=c,c=f))),i&&a?[[r,l],[o,c]]:i?[r,o]:a&&[l,c])},d.clear=function(){return d.empty()||(s=[0,0],u=[0,0],e=n=null),d},d.empty=function(){return!!i&&s[0]==s[1]||!!a&&u[0]==u[1]},t.rebind(d,r,"on")};var Gs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],qs=Oe.format=ln.timeFormat,$s=qs.utc,Xs=$s("%Y-%m-%dT%H:%M:%S.%LZ");function Zs(t){return t.toISOString()}function Ks(e,n,r){function i(t){return e(t)}function o(e,r){var i=(e[1]-e[0])/r,o=t.bisect(Js,i);return o==Js.length?[n.year,La(e.map(function(t){return t/31536e6}),r)[2]]:o?n[i/Js[o-1]<Js[o]/i?o-1:o]:[nu,La(e,r)[2]]}return i.invert=function(t){return Qs(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Qs)},i.nice=function(t,e){var n=i.domain(),r=xa(n),a=null==t?o(r,10):"number"==typeof t&&o(r,t);function s(n){return!isNaN(n)&&!t.range(n,Qs(+n+1),e).length}return a&&(t=a[0],e=a[1]),i.domain(_a(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Qs(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Qs(+e+1);return e}}:t))},i.ticks=function(t,e){var n=xa(i.domain()),r=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return r&&(t=r[0],e=r[1]),t.range(n[0],Qs(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return r},i.copy=function(){return Ks(e.copy(),n,r)},Da(i,e)}function Qs(t){return new Date(t)}qs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Zs:Xs,Zs.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Zs.toString=Xs.toString,Oe.second=Re(function(t){return new Fe(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Oe.seconds=Oe.second.range,Oe.seconds.utc=Oe.second.utc.range,Oe.minute=Re(function(t){return new Fe(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Oe.minutes=Oe.minute.range,Oe.minutes.utc=Oe.minute.utc.range,Oe.hour=Re(function(t){var e=t.getTimezoneOffset()/60;return new Fe(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Oe.hours=Oe.hour.range,Oe.hours.utc=Oe.hour.utc.range,Oe.month=Re(function(t){return(t=Oe.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Oe.months=Oe.month.range,Oe.months.utc=Oe.month.utc.range;var Js=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],tu=[[Oe.second,1],[Oe.second,5],[Oe.second,15],[Oe.second,30],[Oe.minute,1],[Oe.minute,5],[Oe.minute,15],[Oe.minute,30],[Oe.hour,1],[Oe.hour,3],[Oe.hour,6],[Oe.hour,12],[Oe.day,1],[Oe.day,2],[Oe.week,1],[Oe.month,1],[Oe.month,3],[Oe.year,1]],eu=qs.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",$n]]),nu={range:function(e,n,r){return t.range(Math.ceil(e/r)*r,+n,r).map(Qs)},floor:T,ceil:T};tu.year=Oe.year,Oe.scale=function(){return Ks(t.scale.linear(),tu,eu)};var ru=tu.map(function(t){return[t[0].utc,t[1]]}),iu=$s.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",$n]]);function ou(t){return JSON.parse(t.responseText)}function au(t){var e=r.createRange();return e.selectNode(r.body),e.createContextualFragment(t.responseText)}ru.year=Oe.year.utc,Oe.scale.utc=function(){return Ks(t.scale.linear(),ru,iu)},t.text=ve(function(t){return t.responseText}),t.json=function(t,e){return me(t,"application/json",ou,e)},t.html=function(t,e){return me(t,"text/html",au,e)},t.xml=ve(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=t,define(t)):"object"==typeof module&&module.exports?module.exports=t:this.d3=t}(),(function(){var t,e="Expected a function",n="__lodash_hash_undefined__",r="__lodash_placeholder__",i=32,o=128,a=1/0,s=9007199254740991,u=NaN,l=4294967295,c=[["ary",o],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",i],["partialRight",64],["rearg",256]],f="[object Arguments]",d="[object Array]",h="[object Boolean]",p="[object Date]",g="[object Error]",v="[object Function]",m="[object GeneratorFunction]",y="[object Map]",b="[object Number]",x="[object Object]",w="[object Promise]",k="[object RegExp]",_="[object Set]",M="[object String]",S="[object Symbol]",C="[object WeakMap]",A="[object ArrayBuffer]",D="[object DataView]",T="[object Float32Array]",L="[object Float64Array]",E="[object Int8Array]",N="[object Int16Array]",O="[object Int32Array]",F="[object Uint8Array]",P="[object Uint8ClampedArray]",W="[object Uint16Array]",R="[object Uint32Array]",z=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,B=/[&<>"']/g,j=RegExp(Y.source),U=RegExp(B.source),G=/<%-([\s\S]+?)%>/g,V=/<%([\s\S]+?)%>/g,q=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/[\\^$.*+?()[\]{}|]/g,Q=RegExp(K.source),J=/^\s+/,tt=/\s/,et=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nt=/\{\n\/\* \[wrapped with (.+)\] \*/,rt=/,? & /,it=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ot=/[()=,{}\[\]\/\s]/,at=/\\(\\)?/g,st=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ut=/\w*$/,lt=/^[-+]0x[0-9a-f]+$/i,ct=/^0b[01]+$/i,ft=/^\[object .+?Constructor\]$/,dt=/^0o[0-7]+$/i,ht=/^(?:0|[1-9]\d*)$/,pt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gt=/($^)/,vt=/['\n\r\u2028\u2029\\]/g,mt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",yt="a-z\\xdf-\\xf6\\xf8-\\xff",bt="A-Z\\xc0-\\xd6\\xd8-\\xde",xt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wt="["+xt+"]",kt="["+mt+"]",_t="\\d+",Mt="["+yt+"]",St="[^\\ud800-\\udfff"+xt+_t+"\\u2700-\\u27bf"+yt+bt+"]",Ct="\\ud83c[\\udffb-\\udfff]",At="[^\\ud800-\\udfff]",Dt="(?:\\ud83c[\\udde6-\\uddff]){2}",Tt="[\\ud800-\\udbff][\\udc00-\\udfff]",Lt="["+bt+"]",Et="(?:"+Mt+"|"+St+")",Nt="(?:"+Lt+"|"+St+")",Ot="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ft="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Pt="(?:"+kt+"|"+Ct+")?",Wt="[\\ufe0e\\ufe0f]?",Rt=Wt+Pt+"(?:\\u200d(?:"+[At,Dt,Tt].join("|")+")"+Wt+Pt+")*",zt="(?:"+["[\\u2700-\\u27bf]",Dt,Tt].join("|")+")"+Rt,It="(?:"+[At+kt+"?",kt,Dt,Tt,"[\\ud800-\\udfff]"].join("|")+")",Ht=RegExp("['\u2019]","g"),Yt=RegExp(kt,"g"),Bt=RegExp(Ct+"(?="+Ct+")|"+It+Rt,"g"),jt=RegExp([Lt+"?"+Mt+"+"+Ot+"(?="+[wt,Lt,"$"].join("|")+")",Nt+"+"+Ft+"(?="+[wt,Lt+Et,"$"].join("|")+")",Lt+"?"+Et+"+"+Ot,Lt+"+"+Ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_t,zt].join("|"),"g"),Ut=RegExp("[\\u200d\\ud800-\\udfff"+mt+"\\ufe0e\\ufe0f]"),Gt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qt=-1,$t={};$t[T]=$t[L]=$t[E]=$t[N]=$t[O]=$t[F]=$t[P]=$t[W]=$t[R]=!0,$t[f]=$t[d]=$t[A]=$t[h]=$t[D]=$t[p]=$t[g]=$t[v]=$t[y]=$t[b]=$t[x]=$t[k]=$t[_]=$t[M]=$t[C]=!1;var Xt={};Xt[f]=Xt[d]=Xt[A]=Xt[D]=Xt[h]=Xt[p]=Xt[T]=Xt[L]=Xt[E]=Xt[N]=Xt[O]=Xt[y]=Xt[b]=Xt[x]=Xt[k]=Xt[_]=Xt[M]=Xt[S]=Xt[F]=Xt[P]=Xt[W]=Xt[R]=!0,Xt[g]=Xt[v]=Xt[C]=!1;var Zt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kt=parseFloat,Qt=parseInt,Jt="object"==typeof global&&global&&global.Object===Object&&global,te="object"==typeof self&&self&&self.Object===Object&&self,ee=Jt||te||Function("return this")(),ne="object"==typeof exports&&exports&&!exports.nodeType&&exports,re=ne&&"object"==typeof module&&module&&!module.nodeType&&module,ie=re&&re.exports===ne,oe=ie&&Jt.process,ae=function(){try{return re&&re.require&&re.require("util").types||oe&&oe.binding&&oe.binding("util")}catch(t){}}(),se=ae&&ae.isArrayBuffer,ue=ae&&ae.isDate,le=ae&&ae.isMap,ce=ae&&ae.isRegExp,fe=ae&&ae.isSet,de=ae&&ae.isTypedArray;function he(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function pe(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function ge(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ve(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function me(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ye(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function be(t,e){return!(null==t||!t.length)&&Te(t,e,0)>-1}function xe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function we(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function ke(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function _e(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Me(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Se(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Ce=Oe("length");function Ae(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function De(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Te(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):De(t,Ee,n)}function Le(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Ee(t){return t!=t}function Ne(t,e){var n=null==t?0:t.length;return n?We(t,e)/n:u}function Oe(e){return function(n){return null==n?t:n[e]}}function Fe(e){return function(n){return null==e?t:e[n]}}function Pe(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function We(e,n){for(var r,i=-1,o=e.length;++i<o;){var a=n(e[i]);a!==t&&(r=r===t?a:r+a)}return r}function Re(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function ze(t){return t?t.slice(0,nn(t)+1).replace(J,""):t}function Ie(t){return function(e){return t(e)}}function He(t,e){return we(e,function(e){return t[e]})}function Ye(t,e){return t.has(e)}function Be(t,e){for(var n=-1,r=t.length;++n<r&&Te(e,t[n],0)>-1;);return n}function je(t,e){for(var n=t.length;n--&&Te(e,t[n],0)>-1;);return n}function Ue(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Ge=Fe({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Ve=Fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function qe(t){return"\\"+Zt[t]}function $e(t){return Ut.test(t)}function Xe(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Ze(t,e){return function(n){return t(e(n))}}function Ke(t,e){for(var n=-1,i=t.length,o=0,a=[];++n<i;){var s=t[n];s!==e&&s!==r||(t[n]=r,a[o++]=n)}return a}function Qe(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Je(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function tn(t){return $e(t)?function(t){for(var e=Bt.lastIndex=0;Bt.test(t);)++e;return e}(t):Ce(t)}function en(t){return $e(t)?function(t){return t.match(Bt)||[]}(t):function(t){return t.split("")}(t)}function nn(t){for(var e=t.length;e--&&tt.test(t.charAt(e)););return e}var rn=Fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),on=function tt(mt){var yt,bt=(mt=null==mt?ee:on.defaults(ee.Object(),mt,on.pick(ee,Vt))).Array,xt=mt.Date,wt=mt.Error,kt=mt.Function,_t=mt.Math,Mt=mt.Object,St=mt.RegExp,Ct=mt.String,At=mt.TypeError,Dt=bt.prototype,Tt=Mt.prototype,Lt=mt["__core-js_shared__"],Et=kt.prototype.toString,Nt=Tt.hasOwnProperty,Ot=0,Ft=(yt=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+yt:"",Pt=Tt.toString,Wt=Et.call(Mt),Rt=ee._,zt=St("^"+Et.call(Nt).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),It=ie?mt.Buffer:t,Bt=mt.Symbol,Ut=mt.Uint8Array,Zt=It?It.allocUnsafe:t,Jt=Ze(Mt.getPrototypeOf,Mt),te=Mt.create,ne=Tt.propertyIsEnumerable,re=Dt.splice,oe=Bt?Bt.isConcatSpreadable:t,ae=Bt?Bt.iterator:t,Ce=Bt?Bt.toStringTag:t,Fe=function(){try{var t=uo(Mt,"defineProperty");return t({},"",{}),t}catch(e){}}(),an=mt.clearTimeout!==ee.clearTimeout&&mt.clearTimeout,sn=xt&&xt.now!==ee.Date.now&&xt.now,un=mt.setTimeout!==ee.setTimeout&&mt.setTimeout,ln=_t.ceil,cn=_t.floor,fn=Mt.getOwnPropertySymbols,dn=It?It.isBuffer:t,hn=mt.isFinite,pn=Dt.join,gn=Ze(Mt.keys,Mt),vn=_t.max,mn=_t.min,yn=xt.now,bn=mt.parseInt,xn=_t.random,wn=Dt.reverse,kn=uo(mt,"DataView"),_n=uo(mt,"Map"),Mn=uo(mt,"Promise"),Sn=uo(mt,"Set"),Cn=uo(mt,"WeakMap"),An=uo(Mt,"create"),Dn=Cn&&new Cn,Tn={},Ln=zo(kn),En=zo(_n),Nn=zo(Mn),On=zo(Sn),Fn=zo(Cn),Pn=Bt?Bt.prototype:t,Wn=Pn?Pn.valueOf:t,Rn=Pn?Pn.toString:t;function zn(t){if(es(t)&&!Ua(t)&&!(t instanceof Bn)){if(t instanceof Yn)return t;if(Nt.call(t,"__wrapped__"))return Io(t)}return new Yn(t)}var In=function(){function e(){}return function(n){if(!ts(n))return{};if(te)return te(n);e.prototype=n;var r=new e;return e.prototype=t,r}}();function Hn(){}function Yn(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}function Bn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=l,this.__views__=[]}function jn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Gn;++e<n;)this.add(t[e])}function qn(t){var e=this.__data__=new Un(t);this.size=e.size}function $n(t,e){var n=Ua(t),r=!n&&ja(t),i=!n&&!r&&$a(t),o=!n&&!r&&!i&&ls(t),a=n||r||i||o,s=a?Re(t.length,Ct):[],u=s.length;for(var l in t)!e&&!Nt.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||vo(l,u))||s.push(l);return s}function Xn(e){var n=e.length;return n?e[Gr(0,n-1)]:t}function Zn(t,e){return Oo(Ci(t),or(e,0,t.length))}function Kn(t){return Oo(Ci(t))}function Qn(e,n,r){(r!==t&&!Ha(e[n],r)||r===t&&!(n in e))&&rr(e,n,r)}function Jn(e,n,r){var i=e[n];Nt.call(e,n)&&Ha(i,r)&&(r!==t||n in e)||rr(e,n,r)}function tr(t,e){for(var n=t.length;n--;)if(Ha(t[n][0],e))return n;return-1}function er(t,e,n,r){return cr(t,function(t,i,o){e(r,t,n(t),o)}),r}function nr(t,e){return t&&Ai(e,Es(e),t)}function rr(t,e,n){"__proto__"==e&&Fe?Fe(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(e,n){for(var r=-1,i=n.length,o=bt(i),a=null==e;++r<i;)o[r]=a?t:Cs(e,n[r]);return o}function or(e,n,r){return e==e&&(r!==t&&(e=e<=r?e:r),n!==t&&(e=e>=n?e:n)),e}function ar(e,n,r,i,o,a){var s,u=1&n,l=2&n,c=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),s!==t)return s;if(!ts(e))return e;var d=Ua(e);if(d){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Nt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!u)return Ci(e,s)}else{var g=fo(e),w=g==v||g==m;if($a(e))return xi(e,u);if(g==x||g==f||w&&!o){if(s=l||w?{}:po(e),!u)return l?function(t,e){return Ai(t,co(t),e)}(e,function(t,e){return t&&Ai(e,Ns(e),t)}(s,e)):function(t,e){return Ai(t,lo(t),e)}(e,nr(s,e))}else{if(!Xt[g])return o?e:{};s=function(t,e,n){var r=t.constructor;switch(e){case A:return wi(t);case h:case p:return new r(+t);case D:return function(t,e){var n=e?wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case T:case L:case E:case N:case O:case F:case P:case W:case R:return ki(t,n);case y:return new r;case b:case M:return new r(t);case k:return function(t){var e=new t.constructor(t.source,ut.exec(t));return e.lastIndex=t.lastIndex,e}(t);case _:return new r;case S:return Wn?Mt(Wn.call(t)):{}}}(e,g,u)}}a||(a=new qn);var C=a.get(e);if(C)return C;a.set(e,s),as(e)?e.forEach(function(t){s.add(ar(t,n,r,t,e,a))}):ns(e)&&e.forEach(function(t,i){s.set(i,ar(t,n,r,i,e,a))});var z=d?t:(c?l?eo:to:l?Ns:Es)(e);return ge(z||e,function(t,i){z&&(t=e[i=t]),Jn(s,i,ar(t,n,r,i,e,a))}),s}function sr(e,n,r){var i=r.length;if(null==e)return!i;for(e=Mt(e);i--;){var o=r[i],a=e[o];if(a===t&&!(o in e)||!(0,n[o])(a))return!1}return!0}function ur(n,r,i){if("function"!=typeof n)throw new At(e);return To(function(){n.apply(t,i)},r)}function lr(t,e,n,r){var i=-1,o=be,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=we(e,Ie(n))),r?(o=xe,a=!1):e.length>=200&&(o=Ye,a=!1,e=new Vn(e));t:for(;++i<s;){var c=t[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f==f){for(var d=l;d--;)if(e[d]===f)continue t;u.push(c)}else o(e,f,r)||u.push(c)}return u}zn.templateSettings={escape:G,evaluate:V,interpolate:q,variable:"",imports:{_:zn}},(zn.prototype=Hn.prototype).constructor=zn,(Yn.prototype=In(Hn.prototype)).constructor=Yn,(Bn.prototype=In(Hn.prototype)).constructor=Bn,jn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},jn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},jn.prototype.get=function(e){var r=this.__data__;if(An){var i=r[e];return i===n?t:i}return Nt.call(r,e)?r[e]:t},jn.prototype.has=function(e){var n=this.__data__;return An?n[e]!==t:Nt.call(n,e)},jn.prototype.set=function(e,r){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=An&&r===t?n:r,this},Un.prototype.clear=function(){this.__data__=[],this.size=0},Un.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},Un.prototype.get=function(e){var n=this.__data__,r=tr(n,e);return r<0?t:n[r][1]},Un.prototype.has=function(t){return tr(this.__data__,t)>-1},Un.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new jn,map:new(_n||Un),string:new jn}},Gn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Gn.prototype.get=function(t){return ao(this,t).get(t)},Gn.prototype.has=function(t){return ao(this,t).has(t)},Gn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Vn.prototype.add=Vn.prototype.push=function(t){return this.__data__.set(t,n),this},Vn.prototype.has=function(t){return this.__data__.has(t)},qn.prototype.clear=function(){this.__data__=new Un,this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},qn.prototype.get=function(t){return this.__data__.get(t)},qn.prototype.has=function(t){return this.__data__.has(t)},qn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Un){var r=n.__data__;if(!_n||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(t,e),this.size=n.size,this};var cr=Li(yr),fr=Li(br,!0);function dr(t,e){var n=!0;return cr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function hr(e,n,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=n(a);if(null!=s&&(u===t?s==s&&!us(s):r(s,u)))var u=s,l=a}return l}function pr(t,e){var n=[];return cr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function gr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=go),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?gr(s,e-1,n,r,i):ke(i,s):r||(i[i.length]=s)}return i}var vr=Ei(),mr=Ei(!0);function yr(t,e){return t&&vr(t,e,Es)}function br(t,e){return t&&mr(t,e,Es)}function xr(t,e){return ye(e,function(e){return Ka(t[e])})}function wr(e,n){for(var r=0,i=(n=vi(n,e)).length;null!=e&&r<i;)e=e[Ro(n[r++])];return r&&r==i?e:t}function kr(t,e,n){var r=e(t);return Ua(t)?r:ke(r,n(t))}function _r(e){return null==e?e===t?"[object Undefined]":"[object Null]":Ce&&Ce in Mt(e)?function(e){var n=Nt.call(e,Ce),r=e[Ce];try{e[Ce]=t;var i=!0}catch(a){}var o=Pt.call(e);return i&&(n?e[Ce]=r:delete e[Ce]),o}(e):function(t){return Pt.call(t)}(e)}function Mr(t,e){return t>e}function Sr(t,e){return null!=t&&Nt.call(t,e)}function Cr(t,e){return null!=t&&e in Mt(t)}function Ar(e,n,r){for(var i=r?xe:be,o=e[0].length,a=e.length,s=a,u=bt(a),l=1/0,c=[];s--;){var f=e[s];s&&n&&(f=we(f,Ie(n))),l=mn(f.length,l),u[s]=!r&&(n||o>=120&&f.length>=120)?new Vn(s&&f):t}f=e[0];var d=-1,h=u[0];t:for(;++d<o&&c.length<l;){var p=f[d],g=n?n(p):p;if(p=r||0!==p?p:0,!(h?Ye(h,g):i(c,g,r))){for(s=a;--s;){var v=u[s];if(!(v?Ye(v,g):i(e[s],g,r)))continue t}h&&h.push(g),c.push(p)}}return c}function Dr(e,n,r){var i=null==(e=So(e,n=vi(n,e)))?e:e[Ro(Zo(n))];return null==i?t:he(i,e,r)}function Tr(t){return es(t)&&_r(t)==f}function Lr(e,n,r,i,o){return e===n||(null==e||null==n||!es(e)&&!es(n)?e!=e&&n!=n:function(e,n,r,i,o,a){var s=Ua(e),u=Ua(n),l=s?d:fo(e),c=u?d:fo(n),v=(l=l==f?x:l)==x,m=(c=c==f?x:c)==x,w=l==c;if(w&&$a(e)){if(!$a(n))return!1;s=!0,v=!1}if(w&&!v)return a||(a=new qn),s||ls(e)?Qi(e,n,r,i,o,a):function(t,e,n,r,i,o,a){switch(n){case D:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case A:return!(t.byteLength!=e.byteLength||!o(new Ut(t),new Ut(e)));case h:case p:case b:return Ha(+t,+e);case g:return t.name==e.name&&t.message==e.message;case k:case M:return t==e+"";case y:var s=Xe;case _:if(s||(s=Qe),t.size!=e.size&&!(1&r))return!1;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var l=Qi(s(t),s(e),r,i,o,a);return a.delete(t),l;case S:if(Wn)return Wn.call(t)==Wn.call(e)}return!1}(e,n,l,r,i,o,a);if(!(1&r)){var C=v&&Nt.call(e,"__wrapped__"),T=m&&Nt.call(n,"__wrapped__");if(C||T){var L=C?e.value():e,E=T?n.value():n;return a||(a=new qn),o(L,E,r,i,a)}}return!!w&&(a||(a=new qn),function(e,n,r,i,o,a){var s=1&r,u=to(e),l=u.length;if(l!=to(n).length&&!s)return!1;for(var c=l;c--;){var f=u[c];if(!(s?f in n:Nt.call(n,f)))return!1}var d=a.get(e),h=a.get(n);if(d&&h)return d==n&&h==e;var p=!0;a.set(e,n),a.set(n,e);for(var g=s;++c<l;){var v=e[f=u[c]],m=n[f];if(i)var y=s?i(m,v,f,n,e,a):i(v,m,f,e,n,a);if(!(y===t?v===m||o(v,m,r,i,a):y)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var b=e.constructor,x=n.constructor;b==x||!("constructor"in e)||!("constructor"in n)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(p=!1)}return a.delete(e),a.delete(n),p}(e,n,r,i,o,a))}(e,n,r,i,Lr,o))}function Er(e,n,r,i){var o=r.length,a=o,s=!i;if(null==e)return!a;for(e=Mt(e);o--;){var u=r[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var l=(u=r[o])[0],c=e[l],f=u[1];if(s&&u[2]){if(c===t&&!(l in e))return!1}else{var d=new qn;if(i)var h=i(c,f,l,e,n,d);if(!(h===t?Lr(f,c,3,i,d):h))return!1}}return!0}function Nr(t){return!(!ts(t)||(e=t,Ft&&Ft in e))&&(Ka(t)?zt:ft).test(zo(t));var e}function Or(t){return"function"==typeof t?t:null==t?ru:"object"==typeof t?Ua(t)?zr(t[0],t[1]):Rr(t):du(t)}function Fr(t){if(!wo(t))return gn(t);var e=[];for(var n in Mt(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Pr(t,e){return t<e}function Wr(t,e){var n=-1,r=Va(t)?bt(t.length):[];return cr(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Rr(t){var e=so(t);return 1==e.length&&e[0][2]?_o(e[0][0],e[0][1]):function(n){return n===t||Er(n,t,e)}}function zr(e,n){return yo(e)&&ko(n)?_o(Ro(e),n):function(r){var i=Cs(r,e);return i===t&&i===n?As(r,e):Lr(n,i,3)}}function Ir(e,n,r,i,o){e!==n&&vr(n,function(a,s){if(o||(o=new qn),ts(a))!function(e,n,r,i,o,a,s){var u=Ao(e,r),l=Ao(n,r),c=s.get(l);if(c)Qn(e,r,c);else{var f=a?a(u,l,r+"",e,n,s):t,d=f===t;if(d){var h=Ua(l),p=!h&&$a(l),g=!h&&!p&&ls(l);f=l,h||p||g?Ua(u)?f=u:qa(u)?f=Ci(u):p?(d=!1,f=xi(l,!0)):g?(d=!1,f=ki(l,!0)):f=[]:is(l)||ja(l)?(f=u,ja(u)?f=ms(u):ts(u)&&!Ka(u)||(f=po(l))):d=!1}d&&(s.set(l,f),o(f,l,i,a,s),s.delete(l)),Qn(e,r,f)}}(e,n,s,r,Ir,i,o);else{var u=i?i(Ao(e,s),a,s+"",e,n,o):t;u===t&&(u=a),Qn(e,s,u)}},Ns)}function Hr(e,n){var r=e.length;if(r)return vo(n+=n<0?r:0,r)?e[n]:t}function Yr(t,e,n){e=e.length?we(e,function(t){return Ua(t)?function(e){return wr(e,1===t.length?t[0]:t)}:t}):[ru];var r=-1;return e=we(e,Ie(oo())),function(t,e){var r=t.length;for(t.sort(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=_i(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)});r--;)t[r]=t[r].value;return t}(Wr(t,function(t,n,i){return{criteria:we(e,function(e){return e(t)}),index:++r,value:t}}))}function Br(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=wr(t,a);n(s,a)&&Zr(o,vi(a,t),s)}return o}function jr(t,e,n,r){var i=r?Le:Te,o=-1,a=e.length,s=t;for(t===e&&(e=Ci(e)),n&&(s=we(t,Ie(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&re.call(s,u,1),re.call(t,u,1);return t}function Ur(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;vo(i)?re.call(t,i,1):ui(t,i)}}return t}function Gr(t,e){return t+cn(xn()*(e-t+1))}function Vr(t,e){var n="";if(!t||e<1||e>s)return n;do{e%2&&(n+=t),(e=cn(e/2))&&(t+=t)}while(e);return n}function qr(t,e){return Lo(Mo(t,e,ru),t+"")}function $r(t){return Xn(Hs(t))}function Xr(t,e){var n=Hs(t);return Oo(n,or(e,0,n.length))}function Zr(e,n,r,i){if(!ts(e))return e;for(var o=-1,a=(n=vi(n,e)).length,s=a-1,u=e;null!=u&&++o<a;){var l=Ro(n[o]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=s){var f=u[l];(c=i?i(f,l,u):t)===t&&(c=ts(f)?f:vo(n[o+1])?[]:{})}Jn(u,l,c),u=u[l]}return e}var Kr=Dn?function(t,e){return Dn.set(t,e),t}:ru,Qr=Fe?function(t,e){return Fe(t,"toString",{configurable:!0,enumerable:!1,value:tu(e),writable:!0})}:ru;function Jr(t){return Oo(Hs(t))}function ti(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=bt(i);++r<i;)o[r]=t[r+e];return o}function ei(t,e){var n;return cr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!us(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ri(t,e,ru,n)}function ri(e,n,r,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(n=r(n))!=n,u=null===n,l=us(n),c=n===t;o<a;){var f=cn((o+a)/2),d=r(e[f]),h=d!==t,p=null===d,g=d==d,v=us(d);if(s)var m=i||g;else m=c?g&&(i||h):u?g&&h&&(i||!p):l?g&&h&&!p&&(i||!v):!p&&!v&&(i?d<=n:d<n);m?o=f+1:a=f}return mn(a,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ha(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function oi(t){return"number"==typeof t?t:us(t)?u:+t}function ai(t){if("string"==typeof t)return t;if(Ua(t))return we(t,ai)+"";if(us(t))return Rn?Rn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function si(t,e,n){var r=-1,i=be,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=xe;else if(o>=200){var l=e?null:Vi(t);if(l)return Qe(l);a=!1,i=Ye,u=new Vn}else u=e?[]:s;t:for(;++r<o;){var c=t[r],f=e?e(c):c;if(c=n||0!==c?c:0,a&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue t;e&&u.push(f),s.push(c)}else i(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function ui(t,e){return null==(t=So(t,e=vi(e,t)))||delete t[Ro(Zo(e))]}function li(t,e,n,r){return Zr(t,e,n(wr(t,e)),r)}function ci(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function fi(t,e){var n=t;return n instanceof Bn&&(n=n.value()),_e(e,function(t,e){return e.func.apply(e.thisArg,ke([t],e.args))},n)}function di(t,e,n){var r=t.length;if(r<2)return r?si(t[0]):[];for(var i=-1,o=bt(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=lr(o[i]||a,t[s],e,n));return si(gr(o,1),e,n)}function hi(e,n,r){for(var i=-1,o=e.length,a=n.length,s={};++i<o;)r(s,e[i],i<a?n[i]:t);return s}function pi(t){return qa(t)?t:[]}function gi(t){return"function"==typeof t?t:ru}function vi(t,e){return Ua(t)?t:yo(t,e)?[t]:Wo(ys(t))}var mi=qr;function yi(e,n,r){var i=e.length;return r=r===t?i:r,!n&&r>=i?e:ti(e,n,r)}var bi=an||function(t){return ee.clearTimeout(t)};function xi(t,e){if(e)return t.slice();var n=t.length,r=Zt?Zt(n):new t.constructor(n);return t.copy(r),r}function wi(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function ki(t,e){var n=e?wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function _i(e,n){if(e!==n){var r=e!==t,i=null===e,o=e==e,a=us(e),s=n!==t,u=null===n,l=n==n,c=us(n);if(!u&&!c&&!a&&e>n||a&&s&&l&&!u&&!c||i&&s&&l||!r&&l||!o)return 1;if(!i&&!a&&!c&&e<n||c&&r&&o&&!i&&!a||u&&r&&o||!s&&o||!l)return-1}return 0}function Mi(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,l=vn(o-a,0),c=bt(u+l),f=!r;++s<u;)c[s]=e[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function Si(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=vn(o-s,0),f=bt(c+l),d=!r;++i<c;)f[i]=t[i];for(var h=i;++u<l;)f[h+u]=e[u];for(;++a<s;)(d||i<o)&&(f[h+n[a]]=t[i++]);return f}function Ci(t,e){var n=-1,r=t.length;for(e||(e=bt(r));++n<r;)e[n]=t[n];return e}function Ai(e,n,r,i){var o=!r;r||(r={});for(var a=-1,s=n.length;++a<s;){var u=n[a],l=i?i(r[u],e[u],u,r,e):t;l===t&&(l=e[u]),o?rr(r,u,l):Jn(r,u,l)}return r}function Di(t,e){return function(n,r){var i=Ua(n)?pe:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Ti(e){return qr(function(n,r){var i=-1,o=r.length,a=o>1?r[o-1]:t,s=o>2?r[2]:t;for(a=e.length>3&&"function"==typeof a?(o--,a):t,s&&mo(r[0],r[1],s)&&(a=o<3?t:a,o=1),n=Mt(n);++i<o;){var u=r[i];u&&e(n,u,i,a)}return n})}function Li(t,e){return function(n,r){if(null==n)return n;if(!Va(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Mt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ei(t){return function(e,n,r){for(var i=-1,o=Mt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Ni(e){return function(n){var r=$e(n=ys(n))?en(n):t,i=r?r[0]:n.charAt(0),o=r?yi(r,1).join(""):n.slice(1);return i[e]()+o}}function Oi(t){return function(e){return _e(Ks(js(e).replace(Ht,"")),t,"")}}function Fi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=In(t.prototype),r=t.apply(n,e);return ts(r)?r:n}}function Pi(e){return function(n,r,i){var o=Mt(n);if(!Va(n)){var a=oo(r,3);n=Es(n),r=function(t){return a(o[t],t,o)}}var s=e(n,r,i);return s>-1?o[a?n[s]:s]:t}}function Wi(n){return Ji(function(r){var i=r.length,o=i,a=Yn.prototype.thru;for(n&&r.reverse();o--;){var s=r[o];if("function"!=typeof s)throw new At(e);if(a&&!u&&"wrapper"==ro(s))var u=new Yn([],!0)}for(o=u?o:i;++o<i;){var l=ro(s=r[o]),c="wrapper"==l?no(s):t;u=c&&bo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ro(c[0])].apply(u,c[3]):1==s.length&&bo(s)?u[l]():u.thru(s)}return function(){var t=arguments,e=t[0];if(u&&1==t.length&&Ua(e))return u.plant(e).value();for(var n=0,o=i?r[n].apply(this,t):e;++n<i;)o=r[n].call(this,o);return o}})}function Ri(e,n,r,i,a,s,u,l,c,f){var d=n&o,h=1&n,p=2&n,g=24&n,v=512&n,m=p?t:Fi(e);return function t(){for(var o=arguments.length,y=bt(o),b=o;b--;)y[b]=arguments[b];if(g)var x=io(t),w=Ue(y,x);if(i&&(y=Mi(y,i,a,g)),s&&(y=Si(y,s,u,g)),o-=w,g&&o<f){var k=Ke(y,x);return Ui(e,n,Ri,t.placeholder,r,y,k,l,c,f-o)}var _=h?r:this,M=p?_[e]:e;return o=y.length,l?y=Co(y,l):v&&o>1&&y.reverse(),d&&c<o&&(y.length=c),this&&this!==ee&&this instanceof t&&(M=m||Fi(M)),M.apply(_,y)}}function zi(t,e){return function(n,r){return function(t,e,n,r){return yr(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function Ii(e,n){return function(r,i){var o;if(r===t&&i===t)return n;if(r!==t&&(o=r),i!==t){if(o===t)return i;"string"==typeof r||"string"==typeof i?(r=ai(r),i=ai(i)):(r=oi(r),i=oi(i)),o=e(r,i)}return o}}function Hi(t){return Ji(function(e){return e=we(e,Ie(oo())),qr(function(n){var r=this;return t(e,function(t){return he(t,r,n)})})})}function Yi(e,n){var r=(n=n===t?" ":ai(n)).length;if(r<2)return r?Vr(n,e):n;var i=Vr(n,ln(e/tn(n)));return $e(n)?yi(en(i),0,e).join(""):i.slice(0,e)}function Bi(e){return function(n,r,i){return i&&"number"!=typeof i&&mo(n,r,i)&&(r=i=t),n=hs(n),r===t?(r=n,n=0):r=hs(r),function(t,e,n,r){for(var i=-1,o=vn(ln((e-t)/(n||1)),0),a=bt(o);o--;)a[r?o:++i]=t,t+=n;return a}(n,r,i=i===t?n<r?1:-1:hs(i),e)}}function ji(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vs(e),n=vs(n)),t(e,n)}}function Ui(e,n,r,o,a,s,u,l,c,f){var d=8&n;n|=d?i:64,4&(n&=~(d?64:i))||(n&=-4);var h=[e,n,a,d?s:t,d?u:t,d?t:s,d?t:u,l,c,f],p=r.apply(t,h);return bo(e)&&Do(p,h),p.placeholder=o,Eo(p,e,n)}function Gi(t){var e=_t[t];return function(t,n){if(t=vs(t),(n=null==n?0:mn(ps(n),292))&&hn(t)){var r=(ys(t)+"e").split("e");return+((r=(ys(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Vi=Sn&&1/Qe(new Sn([,-0]))[1]==a?function(t){return new Sn(t)}:uu;function qi(t){return function(e){var n=fo(e);return n==y?Xe(e):n==_?Je(e):function(t,e){return we(e,function(e){return[e,t[e]]})}(e,t(e))}}function $i(n,a,s,u,l,c,f,d){var h=2&a;if(!h&&"function"!=typeof n)throw new At(e);var p=u?u.length:0;if(p||(a&=-97,u=l=t),f=f===t?f:vn(ps(f),0),d=d===t?d:ps(d),p-=l?l.length:0,64&a){var g=u,v=l;u=l=t}var m=h?t:no(n),y=[n,a,s,u,l,g,v,c,f,d];if(m&&function(t,e){var n=t[1],i=e[1],a=n|i;if(!(a<131||i==o&&8==n||i==o&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n))return t;1&i&&(t[2]=e[2],a|=1&n?0:4);var s=e[3];if(s){var u=t[3];t[3]=u?Mi(u,s,e[4]):s,t[4]=u?Ke(t[3],r):e[4]}(s=e[5])&&(t[5]=(u=t[5])?Si(u,s,e[6]):s,t[6]=u?Ke(t[5],r):e[6]),(s=e[7])&&(t[7]=s),i&o&&(t[8]=null==t[8]?e[8]:mn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=a}(y,m),n=y[0],a=y[1],s=y[2],u=y[3],l=y[4],!(d=y[9]=y[9]===t?h?0:n.length:vn(y[9]-p,0))&&24&a&&(a&=-25),a&&1!=a)b=8==a||16==a?function(e,n,r){var i=Fi(e);return function o(){for(var a=arguments.length,s=bt(a),u=a,l=io(o);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:Ke(s,l);return(a-=c.length)<r?Ui(e,n,Ri,o.placeholder,t,s,c,t,t,r-a):he(this&&this!==ee&&this instanceof o?i:e,this,s)}}(n,a,d):a!=i&&33!=a||l.length?Ri.apply(t,y):function(t,e,n,r){var i=1&e,o=Fi(t);return function e(){for(var a=-1,s=arguments.length,u=-1,l=r.length,c=bt(l+s),f=this&&this!==ee&&this instanceof e?o:t;++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++a];return he(f,i?n:this,c)}}(n,a,s,u);else var b=function(t,e,n){var r=1&e,i=Fi(t);return function e(){return(this&&this!==ee&&this instanceof e?i:t).apply(r?n:this,arguments)}}(n,a,s);return Eo((m?Kr:Do)(b,y),n,a)}function Xi(e,n,r,i){return e===t||Ha(e,Tt[r])&&!Nt.call(i,r)?n:e}function Zi(e,n,r,i,o,a){return ts(e)&&ts(n)&&(a.set(n,e),Ir(e,n,t,Zi,a),a.delete(n)),e}function Ki(e){return is(e)?t:e}function Qi(e,n,r,i,o,a){var s=1&r,u=e.length,l=n.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e),f=a.get(n);if(c&&f)return c==n&&f==e;var d=-1,h=!0,p=2&r?new Vn:t;for(a.set(e,n),a.set(n,e);++d<u;){var g=e[d],v=n[d];if(i)var m=s?i(v,g,d,n,e,a):i(g,v,d,e,n,a);if(m!==t){if(m)continue;h=!1;break}if(p){if(!Se(n,function(t,e){if(!Ye(p,e)&&(g===t||o(g,t,r,i,a)))return p.push(e)})){h=!1;break}}else if(g!==v&&!o(g,v,r,i,a)){h=!1;break}}return a.delete(e),a.delete(n),h}function Ji(e){return Lo(Mo(e,t,Go),e+"")}function to(t){return kr(t,Es,lo)}function eo(t){return kr(t,Ns,co)}var no=Dn?function(t){return Dn.get(t)}:uu;function ro(t){for(var e=t.name+"",n=Tn[e],r=Nt.call(Tn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(Nt.call(zn,"placeholder")?zn:t).placeholder}function oo(){var t=zn.iteratee||iu;return t=t===iu?Or:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function so(t){for(var e=Es(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ko(i)]}return e}function uo(e,n){var r=function(e,n){return null==e?t:e[n]}(e,n);return Nr(r)?r:t}var lo=fn?function(t){return null==t?[]:(t=Mt(t),ye(fn(t),function(e){return ne.call(t,e)}))}:gu,co=fn?function(t){for(var e=[];t;)ke(e,lo(t)),t=Jt(t);return e}:gu,fo=_r;function ho(t,e,n){for(var r=-1,i=(e=vi(e,t)).length,o=!1;++r<i;){var a=Ro(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ja(i)&&vo(a,i)&&(Ua(t)||ja(t))}function po(t){return"function"!=typeof t.constructor||wo(t)?{}:In(Jt(t))}function go(t){return Ua(t)||ja(t)||!!(oe&&t&&t[oe])}function vo(t,e){var n=typeof t;return!!(e=null==e?s:e)&&("number"==n||"symbol"!=n&&ht.test(t))&&t>-1&&t%1==0&&t<e}function mo(t,e,n){if(!ts(n))return!1;var r=typeof e;return!!("number"==r?Va(n)&&vo(e,n.length):"string"==r&&e in n)&&Ha(n[e],t)}function yo(t,e){if(Ua(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!us(t))||X.test(t)||!$.test(t)||null!=e&&t in Mt(e)}function bo(t){var e=ro(t),n=zn[e];if("function"!=typeof n||!(e in Bn.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(kn&&fo(new kn(new ArrayBuffer(1)))!=D||_n&&fo(new _n)!=y||Mn&&fo(Mn.resolve())!=w||Sn&&fo(new Sn)!=_||Cn&&fo(new Cn)!=C)&&(fo=function(e){var n=_r(e),r=n==x?e.constructor:t,i=r?zo(r):"";if(i)switch(i){case Ln:return D;case En:return y;case Nn:return w;case On:return _;case Fn:return C}return n});var xo=Lt?Ka:vu;function wo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Tt)}function ko(t){return t==t&&!ts(t)}function _o(e,n){return function(r){return null!=r&&r[e]===n&&(n!==t||e in Mt(r))}}function Mo(e,n,r){return n=vn(n===t?e.length-1:n,0),function(){for(var t=arguments,i=-1,o=vn(t.length-n,0),a=bt(o);++i<o;)a[i]=t[n+i];i=-1;for(var s=bt(n+1);++i<n;)s[i]=t[i];return s[n]=r(a),he(e,this,s)}}function So(t,e){return e.length<2?t:wr(t,ti(e,0,-1))}function Co(e,n){for(var r=e.length,i=mn(n.length,r),o=Ci(e);i--;){var a=n[i];e[i]=vo(a,r)?o[a]:t}return e}function Ao(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Do=No(Kr),To=un||function(t,e){return ee.setTimeout(t,e)},Lo=No(Qr);function Eo(t,e,n){var r=e+"";return Lo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(et,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ge(c,function(n){var r="_."+n[0];e&n[1]&&!be(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(nt);return e?e[1].split(rt):[]}(r),n)))}function No(e){var n=0,r=0;return function(){var i=yn(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(t,arguments)}}function Oo(e,n){var r=-1,i=e.length,o=i-1;for(n=n===t?i:n;++r<n;){var a=Gr(r,o),s=e[a];e[a]=e[r],e[r]=s}return e.length=n,e}var Fo,Po,Wo=(Fo=Fa(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Z,function(t,n,r,i){e.push(r?i.replace(at,"$1"):n||t)}),e},function(t){return 500===Po.size&&Po.clear(),t}),Po=Fo.cache,Fo);function Ro(t){if("string"==typeof t||us(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function zo(t){if(null!=t){try{return Et.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Io(t){if(t instanceof Bn)return t.clone();var e=new Yn(t.__wrapped__,t.__chain__);return e.__actions__=Ci(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ho=qr(function(t,e){return qa(t)?lr(t,gr(e,1,qa,!0)):[]}),Yo=qr(function(e,n){var r=Zo(n);return qa(r)&&(r=t),qa(e)?lr(e,gr(n,1,qa,!0),oo(r,2)):[]}),Bo=qr(function(e,n){var r=Zo(n);return qa(r)&&(r=t),qa(e)?lr(e,gr(n,1,qa,!0),t,r):[]});function jo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=vn(r+i,0)),De(t,oo(e,3),i)}function Uo(e,n,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==t&&(o=ps(r),o=r<0?vn(i+o,0):mn(o,i-1)),De(e,oo(n,3),o,!0)}function Go(t){return null!=t&&t.length?gr(t,1):[]}function Vo(e){return e&&e.length?e[0]:t}var qo=qr(function(t){var e=we(t,pi);return e.length&&e[0]===t[0]?Ar(e):[]}),$o=qr(function(e){var n=Zo(e),r=we(e,pi);return n===Zo(r)?n=t:r.pop(),r.length&&r[0]===e[0]?Ar(r,oo(n,2)):[]}),Xo=qr(function(e){var n=Zo(e),r=we(e,pi);return(n="function"==typeof n?n:t)&&r.pop(),r.length&&r[0]===e[0]?Ar(r,t,n):[]});function Zo(e){var n=null==e?0:e.length;return n?e[n-1]:t}var Ko=qr(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?jr(t,e):t}var Jo=Ji(function(t,e){var n=null==t?0:t.length,r=ir(t,e);return Ur(t,we(e,function(t){return vo(t,n)?+t:t}).sort(_i)),r});function ta(t){return null==t?t:wn.call(t)}var ea=qr(function(t){return si(gr(t,1,qa,!0))}),na=qr(function(e){var n=Zo(e);return qa(n)&&(n=t),si(gr(e,1,qa,!0),oo(n,2))}),ra=qr(function(e){var n=Zo(e);return n="function"==typeof n?n:t,si(gr(e,1,qa,!0),t,n)});function ia(t){if(!t||!t.length)return[];var e=0;return t=ye(t,function(t){if(qa(t))return e=vn(t.length,e),!0}),Re(e,function(e){return we(t,Oe(e))})}function oa(e,n){if(!e||!e.length)return[];var r=ia(e);return null==n?r:we(r,function(e){return he(n,t,e)})}var aa=qr(function(t,e){return qa(t)?lr(t,e):[]}),sa=qr(function(t){return di(ye(t,qa))}),ua=qr(function(e){var n=Zo(e);return qa(n)&&(n=t),di(ye(e,qa),oo(n,2))}),la=qr(function(e){var n=Zo(e);return n="function"==typeof n?n:t,di(ye(e,qa),t,n)}),ca=qr(ia),fa=qr(function(e){var n=e.length,r=n>1?e[n-1]:t;return r="function"==typeof r?(e.pop(),r):t,oa(e,r)});function da(t){var e=zn(t);return e.__chain__=!0,e}function ha(t,e){return e(t)}var pa=Ji(function(e){var n=e.length,r=n?e[0]:0,i=this.__wrapped__,o=function(t){return ir(t,e)};return!(n>1||this.__actions__.length)&&i instanceof Bn&&vo(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:ha,args:[o],thisArg:t}),new Yn(i,this.__chain__).thru(function(e){return n&&!e.length&&e.push(t),e})):this.thru(o)}),ga=Di(function(t,e,n){Nt.call(t,n)?++t[n]:rr(t,n,1)}),va=Pi(jo),ma=Pi(Uo);function ya(t,e){return(Ua(t)?ge:cr)(t,oo(e,3))}function ba(t,e){return(Ua(t)?ve:fr)(t,oo(e,3))}var xa=Di(function(t,e,n){Nt.call(t,n)?t[n].push(e):rr(t,n,[e])}),wa=qr(function(t,e,n){var r=-1,i="function"==typeof e,o=Va(t)?bt(t.length):[];return cr(t,function(t){o[++r]=i?he(e,t,n):Dr(t,e,n)}),o}),ka=Di(function(t,e,n){rr(t,n,e)});function _a(t,e){return(Ua(t)?we:Wr)(t,oo(e,3))}var Ma=Di(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Sa=qr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&mo(t,e[0],e[1])?e=[]:n>2&&mo(e[0],e[1],e[2])&&(e=[e[0]]),Yr(t,gr(e,1),[])}),Ca=sn||function(){return ee.Date.now()};function Aa(e,n,r){return n=r?t:n,$i(e,o,t,t,t,t,n=e&&null==n?e.length:n)}function Da(n,r){var i;if("function"!=typeof r)throw new At(e);return n=ps(n),function(){return--n>0&&(i=r.apply(this,arguments)),n<=1&&(r=t),i}}var Ta=qr(function(t,e,n){var r=1;if(n.length){var o=Ke(n,io(Ta));r|=i}return $i(t,r,e,n,o)}),La=qr(function(t,e,n){var r=3;if(n.length){var o=Ke(n,io(La));r|=i}return $i(e,r,t,n,o)});function Ea(n,r,i){var o,a,s,u,l,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof n)throw new At(e);function g(e){var r=o,i=a;return o=a=t,f=e,u=n.apply(i,r)}function v(t){return f=t,l=To(y,r),d?g(t):u}function m(e){var n=e-c;return c===t||n>=r||n<0||h&&e-f>=s}function y(){var t=Ca();if(m(t))return b(t);l=To(y,function(t){var e=r-(t-c);return h?mn(e,s-(t-f)):e}(t))}function b(e){return l=t,p&&o?g(e):(o=a=t,u)}function x(){var e=Ca(),n=m(e);if(o=arguments,a=this,c=e,n){if(l===t)return v(c);if(h)return bi(l),l=To(y,r),g(c)}return l===t&&(l=To(y,r)),u}return r=vs(r)||0,ts(i)&&(d=!!i.leading,s=(h="maxWait"in i)?vn(vs(i.maxWait)||0,r):s,p="trailing"in i?!!i.trailing:p),x.cancel=function(){l!==t&&bi(l),f=0,o=c=a=l=t},x.flush=function(){return l===t?u:b(Ca())},x}var Na=qr(function(t,e){return ur(t,1,e)}),Oa=qr(function(t,e,n){return ur(t,vs(e)||0,n)});function Fa(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new At(e);var r=function(){var e=arguments,i=n?n.apply(this,e):e[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,e);return r.cache=o.set(i,a)||o,a};return r.cache=new(Fa.Cache||Gn),r}function Pa(t){if("function"!=typeof t)throw new At(e);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Fa.Cache=Gn;var Wa=mi(function(t,e){var n=(e=1==e.length&&Ua(e[0])?we(e[0],Ie(oo())):we(gr(e,1),Ie(oo()))).length;return qr(function(r){for(var i=-1,o=mn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return he(t,this,r)})}),Ra=qr(function(e,n){var r=Ke(n,io(Ra));return $i(e,i,t,n,r)}),za=qr(function(e,n){var r=Ke(n,io(za));return $i(e,64,t,n,r)}),Ia=Ji(function(e,n){return $i(e,256,t,t,t,n)});function Ha(t,e){return t===e||t!=t&&e!=e}var Ya=ji(Mr),Ba=ji(function(t,e){return t>=e}),ja=Tr(function(){return arguments}())?Tr:function(t){return es(t)&&Nt.call(t,"callee")&&!ne.call(t,"callee")},Ua=bt.isArray,Ga=se?Ie(se):function(t){return es(t)&&_r(t)==A};function Va(t){return null!=t&&Ja(t.length)&&!Ka(t)}function qa(t){return es(t)&&Va(t)}var $a=dn||vu,Xa=ue?Ie(ue):function(t){return es(t)&&_r(t)==p};function Za(t){if(!es(t))return!1;var e=_r(t);return e==g||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!is(t)}function Ka(t){if(!ts(t))return!1;var e=_r(t);return e==v||e==m||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qa(t){return"number"==typeof t&&t==ps(t)}function Ja(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function ts(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function es(t){return null!=t&&"object"==typeof t}var ns=le?Ie(le):function(t){return es(t)&&fo(t)==y};function rs(t){return"number"==typeof t||es(t)&&_r(t)==b}function is(t){if(!es(t)||_r(t)!=x)return!1;var e=Jt(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Et.call(n)==Wt}var os=ce?Ie(ce):function(t){return es(t)&&_r(t)==k},as=fe?Ie(fe):function(t){return es(t)&&fo(t)==_};function ss(t){return"string"==typeof t||!Ua(t)&&es(t)&&_r(t)==M}function us(t){return"symbol"==typeof t||es(t)&&_r(t)==S}var ls=de?Ie(de):function(t){return es(t)&&Ja(t.length)&&!!$t[_r(t)]},cs=ji(Pr),fs=ji(function(t,e){return t<=e});function ds(t){if(!t)return[];if(Va(t))return ss(t)?en(t):Ci(t);if(ae&&t[ae])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ae]());var e=fo(t);return(e==y?Xe:e==_?Qe:Hs)(t)}function hs(t){return t?(t=vs(t))===a||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ps(t){var e=hs(t),n=e%1;return e==e?n?e-n:e:0}function gs(t){return t?or(ps(t),0,l):0}function vs(t){if("number"==typeof t)return t;if(us(t))return u;if(ts(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ts(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ze(t);var n=ct.test(t);return n||dt.test(t)?Qt(t.slice(2),n?2:8):lt.test(t)?u:+t}function ms(t){return Ai(t,Ns(t))}function ys(t){return null==t?"":ai(t)}var bs=Ti(function(t,e){if(wo(e)||Va(e))Ai(e,Es(e),t);else for(var n in e)Nt.call(e,n)&&Jn(t,n,e[n])}),xs=Ti(function(t,e){Ai(e,Ns(e),t)}),ws=Ti(function(t,e,n,r){Ai(e,Ns(e),t,r)}),ks=Ti(function(t,e,n,r){Ai(e,Es(e),t,r)}),_s=Ji(ir),Ms=qr(function(e,n){e=Mt(e);var r=-1,i=n.length,o=i>2?n[2]:t;for(o&&mo(n[0],n[1],o)&&(i=1);++r<i;)for(var a=n[r],s=Ns(a),u=-1,l=s.length;++u<l;){var c=s[u],f=e[c];(f===t||Ha(f,Tt[c])&&!Nt.call(e,c))&&(e[c]=a[c])}return e}),Ss=qr(function(e){return e.push(t,Zi),he(Fs,t,e)});function Cs(e,n,r){var i=null==e?t:wr(e,n);return i===t?r:i}function As(t,e){return null!=t&&ho(t,e,Cr)}var Ds=zi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Pt.call(e)),t[e]=n},tu(ru)),Ts=zi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Pt.call(e)),Nt.call(t,e)?t[e].push(n):t[e]=[n]},oo),Ls=qr(Dr);function Es(t){return Va(t)?$n(t):Fr(t)}function Ns(t){return Va(t)?$n(t,!0):function(t){if(!ts(t))return function(t){var e=[];if(null!=t)for(var n in Mt(t))e.push(n);return e}(t);var e=wo(t),n=[];for(var r in t)("constructor"!=r||!e&&Nt.call(t,r))&&n.push(r);return n}(t)}var Os=Ti(function(t,e,n){Ir(t,e,n)}),Fs=Ti(function(t,e,n,r){Ir(t,e,n,r)}),Ps=Ji(function(t,e){var n={};if(null==t)return n;var r=!1;e=we(e,function(e){return e=vi(e,t),r||(r=e.length>1),e}),Ai(t,eo(t),n),r&&(n=ar(n,7,Ki));for(var i=e.length;i--;)ui(n,e[i]);return n}),Ws=Ji(function(t,e){return null==t?{}:function(t,e){return Br(t,e,function(e,n){return As(t,n)})}(t,e)});function Rs(t,e){if(null==t)return{};var n=we(eo(t),function(t){return[t]});return e=oo(e),Br(t,n,function(t,n){return e(t,n[0])})}var zs=qi(Es),Is=qi(Ns);function Hs(t){return null==t?[]:He(t,Es(t))}var Ys=Oi(function(t,e,n){return e=e.toLowerCase(),t+(n?Bs(e):e)});function Bs(t){return Zs(ys(t).toLowerCase())}function js(t){return(t=ys(t))&&t.replace(pt,Ge).replace(Yt,"")}var Us=Oi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Gs=Oi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Vs=Ni("toLowerCase"),qs=Oi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),$s=Oi(function(t,e,n){return t+(n?" ":"")+Zs(e)}),Xs=Oi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Zs=Ni("toUpperCase");function Ks(e,n,r){return e=ys(e),(n=r?t:n)===t?function(t){return Gt.test(t)}(e)?function(t){return t.match(jt)||[]}(e):function(t){return t.match(it)||[]}(e):e.match(n)||[]}var Qs=qr(function(e,n){try{return he(e,t,n)}catch(r){return Za(r)?r:new wt(r)}}),Js=Ji(function(t,e){return ge(e,function(e){e=Ro(e),rr(t,e,Ta(t[e],t))}),t});function tu(t){return function(){return t}}var eu=Wi(),nu=Wi(!0);function ru(t){return t}function iu(t){return Or("function"==typeof t?t:ar(t,1))}var ou=qr(function(t,e){return function(n){return Dr(n,t,e)}}),au=qr(function(t,e){return function(n){return Dr(t,n,e)}});function su(t,e,n){var r=Es(e),i=xr(e,r);null!=n||ts(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=xr(e,Es(e)));var o=!(ts(n)&&"chain"in n&&!n.chain),a=Ka(t);return ge(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Ci(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,ke([this.value()],arguments))})}),t}function uu(){}var lu=Hi(we),cu=Hi(me),fu=Hi(Se);function du(t){return yo(t)?Oe(Ro(t)):function(t){return function(e){return wr(e,t)}}(t)}var hu=Bi(),pu=Bi(!0);function gu(){return[]}function vu(){return!1}var mu,yu=Ii(function(t,e){return t+e},0),bu=Gi("ceil"),xu=Ii(function(t,e){return t/e},1),wu=Gi("floor"),ku=Ii(function(t,e){return t*e},1),_u=Gi("round"),Mu=Ii(function(t,e){return t-e},0);return zn.after=function(t,n){if("function"!=typeof n)throw new At(e);return t=ps(t),function(){if(--t<1)return n.apply(this,arguments)}},zn.ary=Aa,zn.assign=bs,zn.assignIn=xs,zn.assignInWith=ws,zn.assignWith=ks,zn.at=_s,zn.before=Da,zn.bind=Ta,zn.bindAll=Js,zn.bindKey=La,zn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ua(t)?t:[t]},zn.chain=da,zn.chunk=function(e,n,r){n=(r?mo(e,n,r):n===t)?1:vn(ps(n),0);var i=null==e?0:e.length;if(!i||n<1)return[];for(var o=0,a=0,s=bt(ln(i/n));o<i;)s[a++]=ti(e,o,o+=n);return s},zn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},zn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=bt(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return ke(Ua(n)?Ci(n):[n],gr(e,1))},zn.cond=function(t){var n=null==t?0:t.length,r=oo();return t=n?we(t,function(t){if("function"!=typeof t[1])throw new At(e);return[r(t[0]),t[1]]}):[],qr(function(e){for(var r=-1;++r<n;){var i=t[r];if(he(i[0],this,e))return he(i[1],this,e)}})},zn.conforms=function(t){return function(t){var e=Es(t);return function(n){return sr(n,t,e)}}(ar(t,1))},zn.constant=tu,zn.countBy=ga,zn.create=function(t,e){var n=In(t);return null==e?n:nr(n,e)},zn.curry=function e(n,r,i){var o=$i(n,8,t,t,t,t,t,r=i?t:r);return o.placeholder=e.placeholder,o},zn.curryRight=function e(n,r,i){var o=$i(n,16,t,t,t,t,t,r=i?t:r);return o.placeholder=e.placeholder,o},zn.debounce=Ea,zn.defaults=Ms,zn.defaultsDeep=Ss,zn.defer=Na,zn.delay=Oa,zn.difference=Ho,zn.differenceBy=Yo,zn.differenceWith=Bo,zn.drop=function(e,n,r){var i=null==e?0:e.length;return i?ti(e,(n=r||n===t?1:ps(n))<0?0:n,i):[]},zn.dropRight=function(e,n,r){var i=null==e?0:e.length;return i?ti(e,0,(n=i-(n=r||n===t?1:ps(n)))<0?0:n):[]},zn.dropRightWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!0,!0):[]},zn.dropWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!0):[]},zn.fill=function(e,n,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&mo(e,n,r)&&(r=0,i=o),function(e,n,r,i){var o=e.length;for((r=ps(r))<0&&(r=-r>o?0:o+r),(i=i===t||i>o?o:ps(i))<0&&(i+=o),i=r>i?0:gs(i);r<i;)e[r++]=n;return e}(e,n,r,i)):[]},zn.filter=function(t,e){return(Ua(t)?ye:pr)(t,oo(e,3))},zn.flatMap=function(t,e){return gr(_a(t,e),1)},zn.flatMapDeep=function(t,e){return gr(_a(t,e),a)},zn.flatMapDepth=function(e,n,r){return r=r===t?1:ps(r),gr(_a(e,n),r)},zn.flatten=Go,zn.flattenDeep=function(t){return null!=t&&t.length?gr(t,a):[]},zn.flattenDepth=function(e,n){return null!=e&&e.length?gr(e,n=n===t?1:ps(n)):[]},zn.flip=function(t){return $i(t,512)},zn.flow=eu,zn.flowRight=nu,zn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},zn.functions=function(t){return null==t?[]:xr(t,Es(t))},zn.functionsIn=function(t){return null==t?[]:xr(t,Ns(t))},zn.groupBy=xa,zn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},zn.intersection=qo,zn.intersectionBy=$o,zn.intersectionWith=Xo,zn.invert=Ds,zn.invertBy=Ts,zn.invokeMap=wa,zn.iteratee=iu,zn.keyBy=ka,zn.keys=Es,zn.keysIn=Ns,zn.map=_a,zn.mapKeys=function(t,e){var n={};return e=oo(e,3),yr(t,function(t,r,i){rr(n,e(t,r,i),t)}),n},zn.mapValues=function(t,e){var n={};return e=oo(e,3),yr(t,function(t,r,i){rr(n,r,e(t,r,i))}),n},zn.matches=function(t){return Rr(ar(t,1))},zn.matchesProperty=function(t,e){return zr(t,ar(e,1))},zn.memoize=Fa,zn.merge=Os,zn.mergeWith=Fs,zn.method=ou,zn.methodOf=au,zn.mixin=su,zn.negate=Pa,zn.nthArg=function(t){return t=ps(t),qr(function(e){return Hr(e,t)})},zn.omit=Ps,zn.omitBy=function(t,e){return Rs(t,Pa(oo(e)))},zn.once=function(t){return Da(2,t)},zn.orderBy=function(e,n,r,i){return null==e?[]:(Ua(n)||(n=null==n?[]:[n]),Ua(r=i?t:r)||(r=null==r?[]:[r]),Yr(e,n,r))},zn.over=lu,zn.overArgs=Wa,zn.overEvery=cu,zn.overSome=fu,zn.partial=Ra,zn.partialRight=za,zn.partition=Ma,zn.pick=Ws,zn.pickBy=Rs,zn.property=du,zn.propertyOf=function(e){return function(n){return null==e?t:wr(e,n)}},zn.pull=Ko,zn.pullAll=Qo,zn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?jr(t,e,oo(n,2)):t},zn.pullAllWith=function(e,n,r){return e&&e.length&&n&&n.length?jr(e,n,t,r):e},zn.pullAt=Jo,zn.range=hu,zn.rangeRight=pu,zn.rearg=Ia,zn.reject=function(t,e){return(Ua(t)?ye:pr)(t,Pa(oo(e,3)))},zn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Ur(t,i),n},zn.rest=function(n,r){if("function"!=typeof n)throw new At(e);return qr(n,r=r===t?r:ps(r))},zn.reverse=ta,zn.sampleSize=function(e,n,r){return n=(r?mo(e,n,r):n===t)?1:ps(n),(Ua(e)?Zn:Xr)(e,n)},zn.set=function(t,e,n){return null==t?t:Zr(t,e,n)},zn.setWith=function(e,n,r,i){return i="function"==typeof i?i:t,null==e?e:Zr(e,n,r,i)},zn.shuffle=function(t){return(Ua(t)?Kn:Jr)(t)},zn.slice=function(e,n,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&mo(e,n,r)?(n=0,r=i):(n=null==n?0:ps(n),r=r===t?i:ps(r)),ti(e,n,r)):[]},zn.sortBy=Sa,zn.sortedUniq=function(t){return t&&t.length?ii(t):[]},zn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},zn.split=function(e,n,r){return r&&"number"!=typeof r&&mo(e,n,r)&&(n=r=t),(r=r===t?l:r>>>0)?(e=ys(e))&&("string"==typeof n||null!=n&&!os(n))&&!(n=ai(n))&&$e(e)?yi(en(e),0,r):e.split(n,r):[]},zn.spread=function(t,n){if("function"!=typeof t)throw new At(e);return n=null==n?0:vn(ps(n),0),qr(function(e){var r=e[n],i=yi(e,0,n);return r&&ke(i,r),he(t,this,i)})},zn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},zn.take=function(e,n,r){return e&&e.length?ti(e,0,(n=r||n===t?1:ps(n))<0?0:n):[]},zn.takeRight=function(e,n,r){var i=null==e?0:e.length;return i?ti(e,(n=i-(n=r||n===t?1:ps(n)))<0?0:n,i):[]},zn.takeRightWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!1,!0):[]},zn.takeWhile=function(t,e){return t&&t.length?ci(t,oo(e,3)):[]},zn.tap=function(t,e){return e(t),t},zn.throttle=function(t,n,r){var i=!0,o=!0;if("function"!=typeof t)throw new At(e);return ts(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Ea(t,n,{leading:i,maxWait:n,trailing:o})},zn.thru=ha,zn.toArray=ds,zn.toPairs=zs,zn.toPairsIn=Is,zn.toPath=function(t){return Ua(t)?we(t,Ro):us(t)?[t]:Ci(Wo(ys(t)))},zn.toPlainObject=ms,zn.transform=function(t,e,n){var r=Ua(t),i=r||$a(t)||ls(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ts(t)&&Ka(o)?In(Jt(t)):{}}return(i?ge:yr)(t,function(t,r,i){return e(n,t,r,i)}),n},zn.unary=function(t){return Aa(t,1)},zn.union=ea,zn.unionBy=na,zn.unionWith=ra,zn.uniq=function(t){return t&&t.length?si(t):[]},zn.uniqBy=function(t,e){return t&&t.length?si(t,oo(e,2)):[]},zn.uniqWith=function(e,n){return n="function"==typeof n?n:t,e&&e.length?si(e,t,n):[]},zn.unset=function(t,e){return null==t||ui(t,e)},zn.unzip=ia,zn.unzipWith=oa,zn.update=function(t,e,n){return null==t?t:li(t,e,gi(n))},zn.updateWith=function(e,n,r,i){return i="function"==typeof i?i:t,null==e?e:li(e,n,gi(r),i)},zn.values=Hs,zn.valuesIn=function(t){return null==t?[]:He(t,Ns(t))},zn.without=aa,zn.words=Ks,zn.wrap=function(t,e){return Ra(gi(e),t)},zn.xor=sa,zn.xorBy=ua,zn.xorWith=la,zn.zip=ca,zn.zipObject=function(t,e){return hi(t||[],e||[],Jn)},zn.zipObjectDeep=function(t,e){return hi(t||[],e||[],Zr)},zn.zipWith=fa,zn.entries=zs,zn.entriesIn=Is,zn.extend=xs,zn.extendWith=ws,su(zn,zn),zn.add=yu,zn.attempt=Qs,zn.camelCase=Ys,zn.capitalize=Bs,zn.ceil=bu,zn.clamp=function(e,n,r){return r===t&&(r=n,n=t),r!==t&&(r=(r=vs(r))==r?r:0),n!==t&&(n=(n=vs(n))==n?n:0),or(vs(e),n,r)},zn.clone=function(t){return ar(t,4)},zn.cloneDeep=function(t){return ar(t,5)},zn.cloneDeepWith=function(e,n){return ar(e,5,n="function"==typeof n?n:t)},zn.cloneWith=function(e,n){return ar(e,4,n="function"==typeof n?n:t)},zn.conformsTo=function(t,e){return null==e||sr(t,e,Es(e))},zn.deburr=js,zn.defaultTo=function(t,e){return null==t||t!=t?e:t},zn.divide=xu,zn.endsWith=function(e,n,r){e=ys(e),n=ai(n);var i=e.length,o=r=r===t?i:or(ps(r),0,i);return(r-=n.length)>=0&&e.slice(r,o)==n},zn.eq=Ha,zn.escape=function(t){return(t=ys(t))&&U.test(t)?t.replace(B,Ve):t},zn.escapeRegExp=function(t){return(t=ys(t))&&Q.test(t)?t.replace(K,"\\$&"):t},zn.every=function(e,n,r){var i=Ua(e)?me:dr;return r&&mo(e,n,r)&&(n=t),i(e,oo(n,3))},zn.find=va,zn.findIndex=jo,zn.findKey=function(t,e){return Ae(t,oo(e,3),yr)},zn.findLast=ma,zn.findLastIndex=Uo,zn.findLastKey=function(t,e){return Ae(t,oo(e,3),br)},zn.floor=wu,zn.forEach=ya,zn.forEachRight=ba,zn.forIn=function(t,e){return null==t?t:vr(t,oo(e,3),Ns)},zn.forInRight=function(t,e){return null==t?t:mr(t,oo(e,3),Ns)},zn.forOwn=function(t,e){return t&&yr(t,oo(e,3))},zn.forOwnRight=function(t,e){return t&&br(t,oo(e,3))},zn.get=Cs,zn.gt=Ya,zn.gte=Ba,zn.has=function(t,e){return null!=t&&ho(t,e,Sr)},zn.hasIn=As,zn.head=Vo,zn.identity=ru,zn.includes=function(t,e,n,r){t=Va(t)?t:Hs(t),n=n&&!r?ps(n):0;var i=t.length;return n<0&&(n=vn(i+n,0)),ss(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Te(t,e,n)>-1},zn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=vn(r+i,0)),Te(t,e,i)},zn.inRange=function(e,n,r){return n=hs(n),r===t?(r=n,n=0):r=hs(r),function(t,e,n){return t>=mn(e,n)&&t<vn(e,n)}(e=vs(e),n,r)},zn.invoke=Ls,zn.isArguments=ja,zn.isArray=Ua,zn.isArrayBuffer=Ga,zn.isArrayLike=Va,zn.isArrayLikeObject=qa,zn.isBoolean=function(t){return!0===t||!1===t||es(t)&&_r(t)==h},zn.isBuffer=$a,zn.isDate=Xa,zn.isElement=function(t){return es(t)&&1===t.nodeType&&!is(t)},zn.isEmpty=function(t){if(null==t)return!0;if(Va(t)&&(Ua(t)||"string"==typeof t||"function"==typeof t.splice||$a(t)||ls(t)||ja(t)))return!t.length;var e=fo(t);if(e==y||e==_)return!t.size;if(wo(t))return!Fr(t).length;for(var n in t)if(Nt.call(t,n))return!1;return!0},zn.isEqual=function(t,e){return Lr(t,e)},zn.isEqualWith=function(e,n,r){var i=(r="function"==typeof r?r:t)?r(e,n):t;return i===t?Lr(e,n,t,r):!!i},zn.isError=Za,zn.isFinite=function(t){return"number"==typeof t&&hn(t)},zn.isFunction=Ka,zn.isInteger=Qa,zn.isLength=Ja,zn.isMap=ns,zn.isMatch=function(t,e){return t===e||Er(t,e,so(e))},zn.isMatchWith=function(e,n,r){return r="function"==typeof r?r:t,Er(e,n,so(n),r)},zn.isNaN=function(t){return rs(t)&&t!=+t},zn.isNative=function(t){if(xo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(t)},zn.isNil=function(t){return null==t},zn.isNull=function(t){return null===t},zn.isNumber=rs,zn.isObject=ts,zn.isObjectLike=es,zn.isPlainObject=is,zn.isRegExp=os,zn.isSafeInteger=function(t){return Qa(t)&&t>=-9007199254740991&&t<=s},zn.isSet=as,zn.isString=ss,zn.isSymbol=us,zn.isTypedArray=ls,zn.isUndefined=function(e){return e===t},zn.isWeakMap=function(t){return es(t)&&fo(t)==C},zn.isWeakSet=function(t){return es(t)&&"[object WeakSet]"==_r(t)},zn.join=function(t,e){return null==t?"":pn.call(t,e)},zn.kebabCase=Us,zn.last=Zo,zn.lastIndexOf=function(e,n,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==t&&(o=(o=ps(r))<0?vn(i+o,0):mn(o,i-1)),n==n?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(e,n,o):De(e,Ee,o,!0)},zn.lowerCase=Gs,zn.lowerFirst=Vs,zn.lt=cs,zn.lte=fs,zn.max=function(e){return e&&e.length?hr(e,ru,Mr):t},zn.maxBy=function(e,n){return e&&e.length?hr(e,oo(n,2),Mr):t},zn.mean=function(t){return Ne(t,ru)},zn.meanBy=function(t,e){return Ne(t,oo(e,2))},zn.min=function(e){return e&&e.length?hr(e,ru,Pr):t},zn.minBy=function(e,n){return e&&e.length?hr(e,oo(n,2),Pr):t},zn.stubArray=gu,zn.stubFalse=vu,zn.stubObject=function(){return{}},zn.stubString=function(){return""},zn.stubTrue=function(){return!0},zn.multiply=ku,zn.nth=function(e,n){return e&&e.length?Hr(e,ps(n)):t},zn.noConflict=function(){return ee._===this&&(ee._=Rt),this},zn.noop=uu,zn.now=Ca,zn.pad=function(t,e,n){t=ys(t);var r=(e=ps(e))?tn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Yi(cn(i),n)+t+Yi(ln(i),n)},zn.padEnd=function(t,e,n){t=ys(t);var r=(e=ps(e))?tn(t):0;return e&&r<e?t+Yi(e-r,n):t},zn.padStart=function(t,e,n){t=ys(t);var r=(e=ps(e))?tn(t):0;return e&&r<e?Yi(e-r,n)+t:t},zn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(ys(t).replace(J,""),e||0)},zn.random=function(e,n,r){if(r&&"boolean"!=typeof r&&mo(e,n,r)&&(n=r=t),r===t&&("boolean"==typeof n?(r=n,n=t):"boolean"==typeof e&&(r=e,e=t)),e===t&&n===t?(e=0,n=1):(e=hs(e),n===t?(n=e,e=0):n=hs(n)),e>n){var i=e;e=n,n=i}if(r||e%1||n%1){var o=xn();return mn(e+o*(n-e+Kt("1e-"+((o+"").length-1))),n)}return Gr(e,n)},zn.reduce=function(t,e,n){var r=Ua(t)?_e:Pe,i=arguments.length<3;return r(t,oo(e,4),n,i,cr)},zn.reduceRight=function(t,e,n){var r=Ua(t)?Me:Pe,i=arguments.length<3;return r(t,oo(e,4),n,i,fr)},zn.repeat=function(e,n,r){return n=(r?mo(e,n,r):n===t)?1:ps(n),Vr(ys(e),n)},zn.replace=function(){var t=arguments,e=ys(t[0]);return t.length<3?e:e.replace(t[1],t[2])},zn.result=function(e,n,r){var i=-1,o=(n=vi(n,e)).length;for(o||(o=1,e=t);++i<o;){var a=null==e?t:e[Ro(n[i])];a===t&&(i=o,a=r),e=Ka(a)?a.call(e):a}return e},zn.round=_u,zn.runInContext=tt,zn.sample=function(t){return(Ua(t)?Xn:$r)(t)},zn.size=function(t){if(null==t)return 0;if(Va(t))return ss(t)?tn(t):t.length;var e=fo(t);return e==y||e==_?t.size:Fr(t).length},zn.snakeCase=qs,zn.some=function(e,n,r){var i=Ua(e)?Se:ei;return r&&mo(e,n,r)&&(n=t),i(e,oo(n,3))},zn.sortedIndex=function(t,e){return ni(t,e)},zn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},zn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&Ha(t[r],e))return r}return-1},zn.sortedLastIndex=function(t,e){return ni(t,e,!0)},zn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},zn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(Ha(t[n],e))return n}return-1},zn.startCase=$s,zn.startsWith=function(t,e,n){return t=ys(t),n=null==n?0:or(ps(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},zn.subtract=Mu,zn.sum=function(t){return t&&t.length?We(t,ru):0},zn.sumBy=function(t,e){return t&&t.length?We(t,oo(e,2)):0},zn.template=function(e,n,r){var i=zn.templateSettings;r&&mo(e,n,r)&&(n=t),e=ys(e),n=ws({},n,i,Xi);var o,a,s=ws({},n.imports,i.imports,Xi),u=Es(s),l=He(s,u),c=0,f=n.interpolate||gt,d="__p += '",h=St((n.escape||gt).source+"|"+f.source+"|"+(f===q?st:gt).source+"|"+(n.evaluate||gt).source+"|$","g"),p="//# sourceURL="+(Nt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qt+"]")+"\n";e.replace(h,function(t,n,r,i,s,u){return r||(r=i),d+=e.slice(c,u).replace(vt,qe),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),d+="';\n";var g=Nt.call(n,"variable")&&n.variable;if(g){if(ot.test(g))throw new wt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(z,""):d).replace(I,"$1").replace(H,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Qs(function(){return kt(u,p+"return "+d).apply(t,l)});if(v.source=d,Za(v))throw v;return v},zn.times=function(t,e){if((t=ps(t))<1||t>s)return[];var n=l,r=mn(t,l);e=oo(e),t-=l;for(var i=Re(r,e);++n<t;)e(n);return i},zn.toFinite=hs,zn.toInteger=ps,zn.toLength=gs,zn.toLower=function(t){return ys(t).toLowerCase()},zn.toNumber=vs,zn.toSafeInteger=function(t){return t?or(ps(t),-9007199254740991,s):0===t?t:0},zn.toString=ys,zn.toUpper=function(t){return ys(t).toUpperCase()},zn.trim=function(e,n,r){if((e=ys(e))&&(r||n===t))return ze(e);if(!e||!(n=ai(n)))return e;var i=en(e),o=en(n);return yi(i,Be(i,o),je(i,o)+1).join("")},zn.trimEnd=function(e,n,r){if((e=ys(e))&&(r||n===t))return e.slice(0,nn(e)+1);if(!e||!(n=ai(n)))return e;var i=en(e);return yi(i,0,je(i,en(n))+1).join("")},zn.trimStart=function(e,n,r){if((e=ys(e))&&(r||n===t))return e.replace(J,"");if(!e||!(n=ai(n)))return e;var i=en(e);return yi(i,Be(i,en(n))).join("")},zn.truncate=function(e,n){var r=30,i="...";if(ts(n)){var o="separator"in n?n.separator:o;r="length"in n?ps(n.length):r,i="omission"in n?ai(n.omission):i}var a=(e=ys(e)).length;if($e(e)){var s=en(e);a=s.length}if(r>=a)return e;var u=r-tn(i);if(u<1)return i;var l=s?yi(s,0,u).join(""):e.slice(0,u);if(o===t)return l+i;if(s&&(u+=l.length-u),os(o)){if(e.slice(u).search(o)){var c,f=l;for(o.global||(o=St(o.source,ys(ut.exec(o))+"g")),o.lastIndex=0;c=o.exec(f);)var d=c.index;l=l.slice(0,d===t?u:d)}}else if(e.indexOf(ai(o),u)!=u){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+i},zn.unescape=function(t){return(t=ys(t))&&j.test(t)?t.replace(Y,rn):t},zn.uniqueId=function(t){var e=++Ot;return ys(t)+e},zn.upperCase=Xs,zn.upperFirst=Zs,zn.each=ya,zn.eachRight=ba,zn.first=Vo,su(zn,(mu={},yr(zn,function(t,e){Nt.call(zn.prototype,e)||(mu[e]=t)}),mu),{chain:!1}),zn.VERSION="4.17.21",ge(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){zn[t].placeholder=zn}),ge(["drop","take"],function(e,n){Bn.prototype[e]=function(r){r=r===t?1:vn(ps(r),0);var i=this.__filtered__&&!n?new Bn(this):this.clone();return i.__filtered__?i.__takeCount__=mn(r,i.__takeCount__):i.__views__.push({size:mn(r,l),type:e+(i.__dir__<0?"Right":"")}),i},Bn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),ge(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;Bn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),ge(["head","last"],function(t,e){var n="take"+(e?"Right":"");Bn.prototype[t]=function(){return this[n](1).value()[0]}}),ge(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Bn.prototype[t]=function(){return this.__filtered__?new Bn(this):this[n](1)}}),Bn.prototype.compact=function(){return this.filter(ru)},Bn.prototype.find=function(t){return this.filter(t).head()},Bn.prototype.findLast=function(t){return this.reverse().find(t)},Bn.prototype.invokeMap=qr(function(t,e){return"function"==typeof t?new Bn(this):this.map(function(n){return Dr(n,t,e)})}),Bn.prototype.reject=function(t){return this.filter(Pa(oo(t)))},Bn.prototype.slice=function(e,n){e=ps(e);var r=this;return r.__filtered__&&(e>0||n<0)?new Bn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),n!==t&&(r=(n=ps(n))<0?r.dropRight(-n):r.take(n-e)),r)},Bn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Bn.prototype.toArray=function(){return this.take(l)},yr(Bn.prototype,function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),o=zn[i?"take"+("last"==n?"Right":""):n],a=i||/^find/.test(n);o&&(zn.prototype[n]=function(){var n=this.__wrapped__,s=i?[1]:arguments,u=n instanceof Bn,l=s[0],c=u||Ua(n),f=function(t){var e=o.apply(zn,ke([t],s));return i&&d?e[0]:e};c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=a&&!d,g=u&&!h;if(!a&&c){n=g?n:new Bn(this);var v=e.apply(n,s);return v.__actions__.push({func:ha,args:[f],thisArg:t}),new Yn(v,d)}return p&&g?e.apply(this,s):(v=this.thru(f),p?i?v.value()[0]:v.value():v)})}),ge(["pop","push","shift","sort","splice","unshift"],function(t){var e=Dt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);zn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ua(i)?i:[],t)}return this[n](function(n){return e.apply(Ua(n)?n:[],t)})}}),yr(Bn.prototype,function(t,e){var n=zn[e];if(n){var r=n.name+"";Nt.call(Tn,r)||(Tn[r]=[]),Tn[r].push({name:e,func:n})}}),Tn[Ri(t,2).name]=[{name:"wrapper",func:t}],Bn.prototype.clone=function(){var t=new Bn(this.__wrapped__);return t.__actions__=Ci(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ci(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ci(this.__views__),t},Bn.prototype.reverse=function(){if(this.__filtered__){var t=new Bn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Bn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ua(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=mn(e,t+a);break;case"takeRight":t=vn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,h=mn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return fi(t,this.__actions__);var p=[];t:for(;u--&&d<h;){for(var g=-1,v=t[l+=e];++g<f;){var m=c[g],y=m.type,b=(0,m.iteratee)(v);if(2==y)v=b;else if(!b){if(1==y)continue t;break t}}p[d++]=v}return p},zn.prototype.at=pa,zn.prototype.chain=function(){return da(this)},zn.prototype.commit=function(){return new Yn(this.value(),this.__chain__)},zn.prototype.next=function(){this.__values__===t&&(this.__values__=ds(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},zn.prototype.plant=function(e){for(var n,r=this;r instanceof Hn;){var i=Io(r);i.__index__=0,i.__values__=t,n?o.__wrapped__=i:n=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,n},zn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Bn){var n=e;return this.__actions__.length&&(n=new Bn(this)),(n=n.reverse()).__actions__.push({func:ha,args:[ta],thisArg:t}),new Yn(n,this.__chain__)}return this.thru(ta)},zn.prototype.toJSON=zn.prototype.valueOf=zn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},zn.prototype.first=zn.prototype.head,ae&&(zn.prototype[ae]=function(){return this}),zn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ee._=on,define(function(){return on})):re?((re.exports=on)._=on,ne._=on):ee._=on}).call(this),function(t,e){"use strict";function n(t,e){var n,r,i=t.toLowerCase();for(e=[].concat(e),n=0;e.length>n;n+=1)if(r=e[n]){if(r.test&&r.test(t))return!0;if(r.toLowerCase()===i)return!0}}var r=e.prototype.trim,i=e.prototype.trimRight,o=e.prototype.trimLeft,a=function(t){return 1*t||0},s=function(t,e){if(1>e)return"";for(var n="";e>0;)1&e&&(n+=t),e>>=1,t+=t;return n},u=[].slice,l=function(t){return null==t?"\\s":t.source?t.source:"["+p.escapeRegExp(t)+"]"},c={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},f={};for(var d in c)f[c[d]]=d;f["'"]="#39";var h=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var n=s,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,i){var o,a,s,u,l,c,f,d=1,p=r.length,g="",v=[];for(a=0;p>a;a++)if("string"===(g=t(r[a])))v.push(r[a]);else if("array"===g){if((u=r[a])[2])for(o=i[d],s=0;u[2].length>s;s++){if(!o.hasOwnProperty(u[2][s]))throw new Error(h('[_.sprintf] property "%s" does not exist',u[2][s]));o=o[u[2][s]]}else o=u[1]?i[u[1]]:i[d++];if(/[^s]/.test(u[8])&&"number"!=t(o))throw new Error(h("[_.sprintf] expecting number but found %s",t(o)));switch(u[8]){case"b":o=o.toString(2);break;case"c":o=e.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=u[7]?o.toExponential(u[7]):o.toExponential();break;case"f":o=u[7]?parseFloat(o).toFixed(u[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=e(o))&&u[7]?o.substring(0,u[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(u[8])&&u[3]&&o>=0?"+"+o:o,c=u[4]?"0"==u[4]?"0":u[4].charAt(1):" ",f=u[6]-e(o).length,l=u[6]?n(c,f):"",v.push(u[5]?o+l:l+o)}return v.join("")},r.cache={},r.parse=function(t){for(var e=t,n=[],r=[],i=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var o=[],a=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[_.sprintf] huh?");for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw new Error("[_.sprintf] huh?");o.push(s[1])}n[2]=o}else i|=2;if(3===i)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}e=e.substring(n[0].length)}return r},r}(),p={VERSION:"2.3.0",isBlank:function(t){return null==t&&(t=""),/^\s*$/.test(t)},stripTags:function(t){return null==t?"":e(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return(t=null==t?"":e(t)).charAt(0).toUpperCase()+t.slice(1)},chop:function(t,n){return null==t?[]:(t=e(t),(n=~~n)>0?t.match(new RegExp(".{1,"+n+"}","g")):[t])},clean:function(t){return p.strip(t).replace(/\s+/g," ")},count:function(t,n){if(null==t||null==n)return 0;t=e(t);for(var r=0,i=0,o=(n=e(n)).length;-1!==(i=t.indexOf(n,i));)r++,i+=o;return r},chars:function(t){return null==t?[]:e(t).split("")},swapCase:function(t){return null==t?"":e(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":e(t).replace(/[&<>"']/g,function(t){return"&"+f[t]+";"})},unescapeHTML:function(t){return null==t?"":e(t).replace(/\&([^;]+);/g,function(t,n){var r;return n in c?c[n]:(r=n.match(/^#x([\da-fA-F]+)$/))?e.fromCharCode(parseInt(r[1],16)):(r=n.match(/^#(\d+)$/))?e.fromCharCode(~~r[1]):t})},escapeRegExp:function(t){return null==t?"":e(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,e,n,r){var i=p.chars(t);return i.splice(~~e,~~n,r),i.join("")},insert:function(t,e,n){return p.splice(t,e,0,n)},include:function(t,n){return""===n||null!=t&&-1!==e(t).indexOf(n)},join:function(){var t=u.call(arguments),e=t.shift();return null==e&&(e=""),t.join(e)},lines:function(t){return null==t?[]:e(t).split("\n")},reverse:function(t){return p.chars(t).reverse().join("")},startsWith:function(t,n){return""===n||null!=t&&null!=n&&(t=e(t),n=e(n),t.length>=n.length&&t.slice(0,n.length)===n)},endsWith:function(t,n){return""===n||null!=t&&null!=n&&(t=e(t),n=e(n),t.length>=n.length&&t.slice(t.length-n.length)===n)},succ:function(t){return null==t?"":(t=e(t)).slice(0,-1)+e.fromCharCode(t.charCodeAt(t.length-1)+1)},titleize:function(t){return null==t?"":(t=e(t).toLowerCase()).replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})},camelize:function(t){return p.trim(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},underscored:function(t){return p.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return p.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return p.titleize(e(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(t){return p.capitalize(p.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,n){return null==t?"":!n&&r?r.call(t):(n=l(n),e(t).replace(new RegExp("^"+n+"+|"+n+"+$","g"),""))},ltrim:function(t,n){return null==t?"":!n&&o?o.call(t):(n=l(n),e(t).replace(new RegExp("^"+n+"+"),""))},rtrim:function(t,n){return null==t?"":!n&&i?i.call(t):(n=l(n),e(t).replace(new RegExp(n+"+$"),""))},truncate:function(t,n,r){return null==t?"":(r=r||"...",(t=e(t)).length>(n=~~n)?t.slice(0,n)+r:t)},prune:function(t,n,r){if(null==t)return"";if(t=e(t),n=~~n,r=null!=r?e(r):"...",n>=t.length)return t;var i=t.slice(0,n+1).replace(/.(?=\W*\w*$)/g,function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "});return((i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):p.rtrim(i.slice(0,i.length-1)))+r).length>t.length?t:t.slice(0,i.length)+r},words:function(t,e){return p.isBlank(t)?[]:p.trim(t,e).split(e||/\s+/)},pad:function(t,n,r,i){t=null==t?"":e(t),n=~~n;var o=0;switch(r?r.length>1&&(r=r.charAt(0)):r=" ",i){case"right":return t+s(r,o=n-t.length);case"both":return o=n-t.length,s(r,Math.ceil(o/2))+t+s(r,Math.floor(o/2));default:return s(r,o=n-t.length)+t}},lpad:function(t,e,n){return p.pad(t,e,n)},rpad:function(t,e,n){return p.pad(t,e,n,"right")},lrpad:function(t,e,n){return p.pad(t,e,n,"both")},sprintf:h,vsprintf:function(t,e){return e.unshift(t),h.apply(null,e)},toNumber:function(t,e){return t?(t=p.trim(t)).match(/^-?\d+(?:\.\d+)?$/)?a(a(t).toFixed(~~e)):NaN:0},numberFormat:function(t,e,n,r){if(isNaN(t)||null==t)return"";r="string"==typeof r?r:",";var i=(t=t.toFixed(~~e)).split("."),o=i[1]?(n||".")+i[1]:"";return i[0].replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+o},strRight:function(t,n){if(null==t)return"";t=e(t);var r=(n=null!=n?e(n):n)?t.indexOf(n):-1;return~r?t.slice(r+n.length,t.length):t},strRightBack:function(t,n){if(null==t)return"";t=e(t);var r=(n=null!=n?e(n):n)?t.lastIndexOf(n):-1;return~r?t.slice(r+n.length,t.length):t},strLeft:function(t,n){if(null==t)return"";t=e(t);var r=(n=null!=n?e(n):n)?t.indexOf(n):-1;return~r?t.slice(0,r):t},strLeftBack:function(t,e){if(null==t)return"";var n=(t+="").lastIndexOf(e=null!=e?""+e:e);return~n?t.slice(0,n):t},toSentence:function(t,e,n,r){e=e||", ",n=n||" and ";var i=t.slice(),o=i.pop();return t.length>2&&r&&(n=p.rtrim(e)+n),i.length?i.join(e)+n+o:o},toSentenceSerial:function(){var t=u.call(arguments);return t[3]=!0,p.toSentence.apply(p,t)},slugify:function(t){if(null==t)return"";var n="\u0105\xe0\xe1\xe4\xe2\xe3\xe5\xe6\u0103\u0107\u0119\xe8\xe9\xeb\xea\xec\xed\xef\xee\u0142\u0144\xf2\xf3\xf6\xf4\xf5\xf8\u015b\u0219\u021b\xf9\xfa\xfc\xfb\xf1\xe7\u017c\u017a",r=new RegExp(l(n),"g");return t=e(t).toLowerCase().replace(r,function(t){var e=n.indexOf(t);return"aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz".charAt(e)||"-"}),p.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,e){return[e,t,e].join("")},quote:function(t,e){return p.surround(t,e||'"')},unquote:function(t,e){return t[0]===(e=e||'"')&&t[t.length-1]===e?t.slice(1,t.length-1):t},exports:function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse)$/)&&(t[e]=this[e]);return t},repeat:function(t,n,r){if(null==t)return"";if(n=~~n,null==r)return s(e(t),n);for(var i=[];n>0;i[--n]=t);return i.join(r)},naturalCmp:function(t,n){if(t==n)return 0;if(!t)return-1;if(!n)return 1;for(var r=/(\.\d+)|(\d+)|(\D+)/g,i=e(t).toLowerCase().match(r),o=e(n).toLowerCase().match(r),a=Math.min(i.length,o.length),s=0;a>s;s++){var u=i[s],l=o[s];if(u!==l){var c=parseInt(u,10);if(!isNaN(c)){var f=parseInt(l,10);if(!isNaN(f)&&c-f)return c-f}return l>u?-1:1}}return i.length===o.length?i.length-o.length:n>t?-1:1},levenshtein:function(t,n){if(null==t&&null==n)return 0;if(null==t)return e(n).length;if(null==n)return e(t).length;t=e(t),n=e(n);for(var r,i,o=[],a=0;n.length>=a;a++)for(var s=0;t.length>=s;s++)i=a&&s?t.charAt(s-1)===n.charAt(a-1)?r:Math.min(o[s],o[s-1],r)+1:a+s,r=o[s],o[s]=i;return o.pop()},toBoolean:function(t,e,r){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:!!n(t=p.trim(t),e||["true","1"])||!n(t,r||["false","0"])&&void 0}};p.strip=p.trim,p.lstrip=p.ltrim,p.rstrip=p.rtrim,p.center=p.lrpad,p.rjust=p.lpad,p.ljust=p.rpad,p.contains=p.include,p.q=p.quote,p.toBool=p.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=p),exports._s=p),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return p}),t._=t._||{},t._.string=t._.str=p}(this,String),function(){var t={dev:!1};t.tooltip=t.tooltip||{},t.utils=t.utils||{},t.models=t.models||{},t.charts={},t.logs={},t.dom={},t.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),t.dev&&(t.dispatch.on("render_start",function(e){t.logs.startTime=+new Date}),t.dispatch.on("render_end",function(e){t.logs.endTime=+new Date,t.logs.totalTime=t.logs.endTime-t.logs.startTime,t.log("total",t.logs.totalTime)})),t.log=function(){if(t.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(t.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){var e=Function.prototype.bind.call(console.log,console);e.apply(console,arguments)}return arguments[arguments.length-1]},t.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},t.render=function(e){e=e||1,t.render.active=!0,t.dispatch.render_start();var n=function(){for(var r,i,o=0;o<e&&(i=t.render.queue[o]);o++)r=i.generate(),typeof i.callback==typeof Function&&i.callback(r);t.render.queue.splice(0,o),t.render.queue.length?setTimeout(n):(t.dispatch.render_end(),t.render.active=!1)};setTimeout(n)},t.render.active=!1,t.render.queue=[],t.addGraph=function(e){typeof arguments[0]==typeof Function&&(e={generate:arguments[0],callback:arguments[1]}),t.render.queue.push(e),t.render.active||t.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=t),"undefined"!=typeof window&&(window.nv=t),t.dom.write=function(t){return void 0!==window.fastdom?fastdom.write(t):t()},t.dom.read=function(t){return void 0!==window.fastdom?fastdom.read(t):t()},t.interactiveGuideline=function(){"use strict";var e=t.models.tooltip();e.duration(0).hideDelay(0)._isInteractiveLayer(!0).hidden(!1);var n=null,r=null,i={left:0,top:0},o=d3.scale.linear(),a=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),s=!0,u=null,l="ActiveXObject"in window;function c(f){f.each(function(f){var d=d3.select(this),h=n||960,p=r||400,g=d.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([f]);function v(){var t=d3.mouse(this),n=t[0],r=t[1],s=!0,u=!1;if(l&&(n=d3.event.offsetX,r=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(s=!1),d3.event.target.className.baseVal.match("nv-legend")&&(u=!0)),s&&(n-=i.left,r-=i.top),n<0||r<0||n>h||r>p||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||u){if(l&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(e.nvPointerEventsClass)))return;return a.elementMouseout({mouseX:n,mouseY:r}),c.renderGuideLine(null),void e.hidden(!0)}e.hidden(!1);var f=o.invert(n);a.elementMousemove({mouseX:n,mouseY:r,pointXValue:f}),"dblclick"===d3.event.type&&a.elementDblclick({mouseX:n,mouseY:r,pointXValue:f}),"click"===d3.event.type&&a.elementClick({mouseX:n,mouseY:r,pointXValue:f})}g.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),u&&(u.on("touchmove",v).on("mousemove",v,!0).on("mouseout",v,!0).on("dblclick",v).on("click",v),c.guideLine=null,c.renderGuideLine=function(e){s&&(c.guideLine&&c.guideLine.attr("x1")===e||t.dom.write(function(){var n=g.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[t.utils.NaNtoZero(e)]:[],String);n.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",p).attr("y2",0),n.exit().remove()}))})})}return c.dispatch=a,c.tooltip=e,c.margin=function(t){return arguments.length?(i.top=void 0!==t.top?t.top:i.top,i.left=void 0!==t.left?t.left:i.left,c):i},c.width=function(t){return arguments.length?(n=t,c):n},c.height=function(t){return arguments.length?(r=t,c):r},c.xScale=function(t){return arguments.length?(o=t,c):o},c.showGuideLine=function(t){return arguments.length?(s=t,c):s},c.svgContainer=function(t){return arguments.length?(u=t,c):u},c},t.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var r;r="function"!=typeof n?function(t){return t.x}:n;var i=d3.bisector(function(t,e){return r(t)-e}).left,o=d3.max([0,i(t,e)-1]),a=r(t[o]);if(void 0===a&&(a=o),a===e)return o;var s=d3.min([o+1,t.length-1]),u=r(t[s]);return void 0===u&&(u=s),Math.abs(u-e)>=Math.abs(a-e)?o:s},t.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach(function(t,o){var a=Math.abs(e-t);null!=t&&a<=r&&a<n&&(r=a,i=o)}),i},function(){"use strict";t.models.tooltip=function(){var e=null,n="w",r=25,i=0,o=null,a=null,s=null,u=!0,l=400,c=null,f=null,d={left:null,top:null},h={left:0,top:0},p=!0,g=100,v=!0,m=!1,y="nvtooltip-"+Math.floor(1e5*Math.random()),b="nv-pointer-events-none",x=function(t,e){return t},w=function(t){return t},k=function(t,e){return t},_=function(t){if(null===t)return"";var e=d3.select(document.createElement("table"));v&&e.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(w(t.value));var n=e.selectAll("tbody").data([t]).enter().append("tbody").selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});n.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),n.append("td").classed("key",!0).html(function(t,e){return k(t.key,e)}),n.append("td").classed("value",!0).html(function(t,e){return x(t.value,e)}),n.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}});var r=e.node().outerHTML;return void 0!==t.footer&&(r+="<div class='footer'>"+t.footer+"</div>"),r},M=function(e){f&&t.dom.read(function(){var i,o,a=parseInt(f.offsetHeight,10),s=parseInt(f.offsetWidth,10),d=t.utils.windowSize().width,p=t.utils.windowSize().height,v=window.pageYOffset,m=window.pageXOffset;p=window.innerWidth>=document.body.scrollWidth?p:p-16,d=window.innerHeight>=document.body.scrollHeight?d:d-16;var y,b,x=function(t){var e=o;do{isNaN(t.offsetTop)||(e+=t.offsetTop),t=t.offsetParent}while(t);return e},w=function(t){var e=i;do{isNaN(t.offsetLeft)||(e+=t.offsetLeft),t=t.offsetParent}while(t);return e};switch(n){case"e":i=e[0]-s-r,o=e[1]-a/2,y=w(f),b=x(f),y<m&&(i=e[0]+r>m?e[0]+r:m-y+i),b<v&&(o=v-b+o),b+a>v+p&&(o=v+p-b+o-a);break;case"w":i=e[0]+r,o=e[1]-a/2,y=w(f),b=x(f),y+s>d&&(i=e[0]-s-r),b<v&&(o=v+5),b+a>v+p&&(o=v+p-b+o-a);break;case"n":i=e[0]-s/2-5,o=e[1]+r,y=w(f),b=x(f),y<m&&(i=m+5),y+s>d&&(i=i-s/2+5),b+a>v+p&&(o=v+p-b+o-a);break;case"s":i=e[0]-s/2,o=e[1]-a-r,y=w(f),b=x(f),y<m&&(i=m+5),y+s>d&&(i=i-s/2+5),v>b&&(o=v);break;case"none":i=e[0],o=e[1]-r,y=w(f),b=x(f)}i-=h.left,o-=h.top;var k=f.getBoundingClientRect(),_=(v=window.pageYOffset||document.documentElement.scrollTop,m=window.pageXOffset||document.documentElement.scrollLeft,"translate("+i+"px, "+o+"px)"),M=d3.interpolateString("translate("+(k.left+m)+"px, "+(k.top+v)+"px)",_),S=c.style("opacity")<.1;u?c.transition().delay(l).duration(0).style("opacity",0):c.interrupt().transition().duration(S?0:g).styleTween("transform",function(t){return M},"important").style("-webkit-transform",_).style("opacity",1)})};function S(){if(p&&function(t){if(t&&t.series){if(t.series instanceof Array)return!!t.series.length;if(t.series instanceof Object)return t.series=[t.series],!0}return!1}(e)){!function(){if(s){var t=d3.select(s);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"),10)/e[2];d.left=d.left*n,d.top=d.top*n}}}();var n=d.left,r=null!==o?o:d.top;return t.dom.write(function(){var o;c||(o=s||document.body,(c=d3.select(o).append("div").attr("class","nvtooltip "+(a||"xy-tooltip")).attr("id",y)).style("top",0).style("left",0),c.style("opacity",0),c.selectAll("div, table, td, tr").classed(b,!0),c.classed(b,!0),f=c.node());var u=_(e);u&&(f.innerHTML=u),s&&m?t.dom.read(function(){var t=s.getElementsByTagName("svg")[0],e={left:0,top:0};if(t){var o=t.getBoundingClientRect(),a=s.getBoundingClientRect(),u=o.top;if(u<0){var l=s.getBoundingClientRect();u=Math.abs(u)>l.height?0:u}e.top=Math.abs(u-a.top),e.left=Math.abs(o.left-a.left)}n+=s.offsetLeft+e.left-2*s.scrollLeft,r+=s.offsetTop+e.top-2*s.scrollTop,i&&i>0&&(r=Math.floor(r/i)*i),M([n,r])}):M([n,r])}),S}}return S.nvPointerEventsClass=b,S.options=t.utils.optionsFunc.bind(S),S._options=Object.create({},{duration:{get:function(){return g},set:function(t){g=t}},gravity:{get:function(){return n},set:function(t){n=t}},distance:{get:function(){return r},set:function(t){r=t}},snapDistance:{get:function(){return i},set:function(t){i=t}},classes:{get:function(){return a},set:function(t){a=t}},chartContainer:{get:function(){return s},set:function(t){s=t}},fixedTop:{get:function(){return o},set:function(t){o=t}},enabled:{get:function(){return p},set:function(t){p=t}},hideDelay:{get:function(){return l},set:function(t){l=t}},contentGenerator:{get:function(){return _},set:function(t){_=t}},valueFormatter:{get:function(){return x},set:function(t){x=t}},headerFormatter:{get:function(){return w},set:function(t){w=t}},keyFormatter:{get:function(){return k},set:function(t){k=t}},headerEnabled:{get:function(){return v},set:function(t){v=t}},_isInteractiveLayer:{get:function(){return m},set:function(t){m=!!t}},position:{get:function(){return d},set:function(t){d.left=void 0!==t.left?t.left:d.left,d.top=void 0!==t.top?t.top:d.top}},offset:{get:function(){return h},set:function(t){h.left=void 0!==t.left?t.left:h.left,h.top=void 0!==t.top?t.top:h.top}},hidden:{get:function(){return u},set:function(t){u!=t&&(u=!!t,S())}},data:{get:function(){return e},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),e=t}},tooltipElem:{get:function(){return f},set:function(t){}},id:{get:function(){return y},set:function(t){}}}),t.utils.initOptions(S),S}}(),t.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight,t):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight,t):document.body&&document.body.offsetWidth?(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight,t):t},t.utils.windowResize=function(e){return window.addEventListener?window.addEventListener("resize",e):t.log("ERROR: Failed to bind to window.resize with: ",e),{callback:e,clear:function(){window.removeEventListener("resize",e)}}},t.utils.getColor=function(e){if(void 0===e)return t.utils.defaultColor();if(Array.isArray(e)){var n=d3.scale.ordinal().range(e);return function(t,e){return t.color||n(void 0===e?t:e)}}return e},t.utils.defaultColor=function(){return t.utils.getColor(d3.scale.category20().range())},t.utils.customTheme=function(t,e,n){e=e||function(t){return t.key};var r=(n=n||d3.scale.category20().range()).length;return function(i,o){var a=e(i);return"function"==typeof t[a]?t[a]():void 0!==t[a]?t[a]:(r||(r=n.length),n[r-=1])}},t.utils.pjax=function(e,n){var r=function(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),t.utils.pjax(e,n)})};d3.selectAll(e).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},t.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px",""),10);return t.text().length*e*.5}return 0},t.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||t===1/0||t===-1/0?0:t},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},t.utils.renderWatch=function(e,n){if(!(this instanceof t.utils.renderWatch))return new t.utils.renderWatch(e,n);var r=void 0!==n?n:250,i=[],o=this;this.models=function(t){return(t=[].slice.call(arguments,0)).forEach(function(t){var e;t.__rendered=!1,(e=t).dispatch.on("renderEnd",function(t){e.__rendered=!0,o.renderEnd("model")}),i.indexOf(t)<0&&i.push(t)}),this},this.reset=function(t){void 0!==t&&(r=t),i=[]},this.transition=function(t,e,n){if(n=(e=arguments.length>1?[].slice.call(arguments,1):[]).length>1?e.pop():void 0!==r?r:250,t.__rendered=!1,i.indexOf(t)<0&&i.push(t),0===n)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;t.__rendered=0===t.length||!!t.every(function(t){return!t.length});var a=0;return t.transition().duration(n).each(function(){++a}).each("end",function(n,r){0==--a&&(t.__rendered=!0,o.renderEnd.apply(this,e))})},this.renderEnd=function(){i.every(function(t){return t.__rendered})&&(i.forEach(function(t){t.__rendered=!1}),e.renderEnd.apply(this,arguments))}},t.utils.deepExtend=function(e){var n=arguments.length>1?[].slice.call(arguments,1):[];n.forEach(function(n){for(var r in n)"object"!=typeof e[r]||e[r]instanceof Array||"object"!=typeof n[r]?e[r]=n[r]:t.utils.deepExtend(e[r],n[r])})},t.utils.state=function(){if(!(this instanceof t.utils.state))return new t.utils.state;var e={},n=function(){},r=function(){return{}},i=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){n(t,!0)}),this.getter=function(t){return r=t,this},this.setter=function(t,e){return e||(e=function(){}),n=function(n,r){t(n),r&&e()},this},this.init=function(e){t.utils.deepExtend(i=i||{},e)};var o=function(){var t=r();if(JSON.stringify(t)===JSON.stringify(e))return!1;for(var n in t)void 0===e[n]&&(e[n]={}),e[n]=t[n];return!0};this.update=function(){i&&(n(i,!1),i=null),o.call(this)&&this.dispatch.change(e)}},t.utils.optionsFunc=function(t){return t&&d3.map(t).forEach((function(t,e){"function"==typeof this[t]&&this[t](e)}).bind(this)),this},t.utils.calcTicksX=function(e,n){for(var r=1,i=0;i<n.length;i+=1){var o=n[i]&&n[i].values?n[i].values.length:0;r=o>r?o:r}return t.log("Requested number of ticks: ",e),t.log("Calculated max values to be: ",r),e=(e=e>r?e=r-1:e)<1?1:e,e=Math.floor(e),t.log("Calculating tick count as: ",e),e},t.utils.calcTicksY=function(e,n){return t.utils.calcTicksX(e,n)},t.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:(t[e]=function(n){return arguments.length?(t._overrides[e]=!0,t._options[e]=n,t):t._options[e]},t["_"+e]=function(n){return arguments.length?(t._overrides[e]||(t._options[e]=n),t):t._options[e]})},t.utils.initOptions=function(e){e._overrides=e._overrides||{};var n=Object.getOwnPropertyNames(e._options||{}),r=Object.getOwnPropertyNames(e._calls||{});for(var i in n=n.concat(r))t.utils.initOption(e,n[i])},t.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},t.utils.arrayUnique=function(t){return t.sort().filter(function(e,n){return!n||e!=t[n-1]})},t.utils.symbolMap=d3.map(),t.utils.symbol=function(){var e,n=64;function r(r,i){var o=e.call(this,r,i),a=n.call(this,r,i);return-1!==d3.svg.symbolTypes.indexOf(o)?d3.svg.symbol().type(o).size(a)():t.utils.symbolMap.get(o)(a)}return r.type=function(t){return arguments.length?(e=d3.functor(t),r):e},r.size=function(t){return arguments.length?(n=d3.functor(t),r):n},r},t.utils.inheritOptions=function(e,n){var r=Object.getOwnPropertyNames(n._options||{}),i=Object.getOwnPropertyNames(n._calls||{}),o=n._inherited||[],a=n._d3options||[],s=r.concat(i).concat(o).concat(a);s.unshift(n),s.unshift(e),d3.rebind.apply(this,s),e._inherited=t.utils.arrayUnique(r.concat(i).concat(o).concat(r).concat(e._inherited||[])),e._d3options=t.utils.arrayUnique(a.concat(e._d3options||[]))},t.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},t.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},t.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},t.utils.availableHeight=function(e,n,r){return t.utils.sanitizeHeight(e,n)-r.top-r.bottom},t.utils.availableWidth=function(e,n,r){return t.utils.sanitizeWidth(e,n)-r.left-r.right},t.utils.noData=function(e,n){var r=e.options(),i=r.margin(),o=r.noData(),a=null==o?["No Data Available."]:[o],s=t.utils.availableHeight(r.height(),n,i),u=t.utils.availableWidth(r.width(),n,i),l=i.left+u/2,c=i.top+s/2;n.selectAll("g").remove();var f=n.selectAll(".nv-noData").data(a);f.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),f.attr("x",l).attr("y",c).text(function(t){return t})},t.models.axis=function(){"use strict";var e,n=d3.svg.axis(),r=d3.scale.linear(),i={top:0,right:0,bottom:0,left:0},o=75,a=60,s=null,u=!0,l=0,c=!0,f=!1,d=!1,h=null,p=0,g=250,v=d3.dispatch("renderEnd");n.scale(r).orient("bottom").tickFormat(function(t){return t});var m=t.utils.renderWatch(v,g);function y(a){return m.reset(),a.each(function(a){var g=d3.select(this);t.utils.initSVG(g);var v=g.selectAll("g.nv-wrap.nv-axis").data([a]),y=(v.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),v.select("g"));null!==h?n.ticks(h):"top"!=n.orient()&&"bottom"!=n.orient()||n.ticks(Math.abs(r.range()[1]-r.range()[0])/100),y.watchTransition(m,"axis").call(n),e=e||n.scale();var b=n.tickFormat();null==b&&(b=e.tickFormat());var x,w,k,_=y.selectAll("text.nv-axislabel").data([s||null]);switch(_.exit().remove(),n.orient()){case"top":_.enter().append("text").attr("class","nv-axislabel"),k=r.range().length<2?0:2===r.range().length?r.range()[1]:r.range()[r.range().length-1]+(r.range()[1]-r.range()[0]),_.attr("text-anchor","middle").attr("y",0).attr("x",k/2),u&&((w=v.selectAll("g.nv-axisMaxMin").data(r.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),w.exit().remove(),w.attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r(e))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-n.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),w.watchTransition(m,"min-max top").attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r.range()[n])+",0)"}));break;case"bottom":x=p+36;var M=30,S=0,C=y.selectAll("g").select("text"),A="";if(l%360){C.each(function(t,e){var n=this.getBoundingClientRect(),r=n.width;S=n.height,r>M&&(M=r)}),A="rotate("+l+" 0,"+(S/2+n.tickPadding())+")";var D=Math.abs(Math.sin(l*Math.PI/180));x=(D?D*M:M)+30,C.attr("transform",A).style("text-anchor",l%360>0?"start":"end")}_.enter().append("text").attr("class","nv-axislabel"),k=r.range().length<2?0:2===r.range().length?r.range()[1]:r.range()[r.range().length-1]+(r.range()[1]-r.range()[0]),_.attr("text-anchor","middle").attr("y",x).attr("x",k/2),u&&((w=v.selectAll("g.nv-axisMaxMin").data([r.domain()[0],r.domain()[r.domain().length-1]])).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),w.exit().remove(),w.attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r(e)+(d?r.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",n.tickPadding()).attr("transform",A).style("text-anchor",l?l%360>0?"start":"end":"middle").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),w.watchTransition(m,"min-max bottom").attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r(e)+(d?r.rangeBand()/2:0))+",0)"})),f&&C.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":_.enter().append("text").attr("class","nv-axislabel"),_.style("text-anchor",c?"middle":"begin").attr("transform",c?"rotate(90)":"").attr("y",c?12-Math.max(i.right,o):-10).attr("x",c?d3.max(r.range())/2:n.tickPadding()),u&&((w=v.selectAll("g.nv-axisMaxMin").data(r.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),w.exit().remove(),w.attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(r(e))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",n.tickPadding()).style("text-anchor","start").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),w.watchTransition(m,"min-max right").attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(r.range()[n])+")"}).select("text").style("opacity",1));break;case"left":_.enter().append("text").attr("class","nv-axislabel"),_.style("text-anchor",c?"middle":"end").attr("transform",c?"rotate(-90)":"").attr("y",c?25-Math.max(i.left,o)-(p||0):-10).attr("x",c?-d3.max(r.range())/2:-n.tickPadding()),u&&((w=v.selectAll("g.nv-axisMaxMin").data(r.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),w.exit().remove(),w.attr("transform",function(n,r){return"translate(0,"+t.utils.NaNtoZero(e(n))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-n.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),w.watchTransition(m,"min-max right").attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(r.range()[n])+")"}).select("text").style("opacity",1))}if(_.text(function(t){return t}),!u||"left"!==n.orient()&&"right"!==n.orient()||(y.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(r(t)<r.range()[1]+10||r(t)>r.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),r.domain()[0]==r.domain()[1]&&0==r.domain()[0]&&v.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),u&&("top"===n.orient()||"bottom"===n.orient())){var T=[];v.selectAll("g.nv-axisMaxMin").each(function(t,e){try{T.push(e?r(t)-this.getBoundingClientRect().width-4:r(t)+this.getBoundingClientRect().width+4)}catch(n){T.push(e?r(t)-4:r(t)+4)}}),y.selectAll("g").each(function(t,e){(r(t)<T[0]||r(t)>T[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}y.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t}).classed("zero",!0),e=r.copy()}),m.renderEnd("axis immediate"),y}return y.axis=n,y.dispatch=v,y.options=t.utils.optionsFunc.bind(y),y._options=Object.create({},{axisLabelDistance:{get:function(){return p},set:function(t){p=t}},staggerLabels:{get:function(){return f},set:function(t){f=t}},rotateLabels:{get:function(){return l},set:function(t){l=t}},rotateYLabel:{get:function(){return c},set:function(t){c=t}},showMaxMin:{get:function(){return u},set:function(t){u=t}},axisLabel:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return a},set:function(t){a=t}},ticks:{get:function(){return h},set:function(t){h=t}},width:{get:function(){return o},set:function(t){o=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},duration:{get:function(){return g},set:function(t){m.reset(g=t)}},scale:{get:function(){return r},set:function(e){n.scale(r=e),d="function"==typeof r.rangeBands,t.utils.inheritOptionsD3(y,r,["domain","range","rangeBand","rangeBands"])}}}),t.utils.initOptions(y),t.utils.inheritOptionsD3(y,n,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),t.utils.inheritOptionsD3(y,r,["domain","range","rangeBand","rangeBands"]),y},t.models.boxPlot=function(){"use strict";var e,n,r,i,o,a,s={top:0,right:0,bottom:0,left:0},u=960,l=500,c=Math.floor(1e4*Math.random()),f=d3.scale.ordinal(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},g=t.utils.defaultColor(),v=null,m=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),y=250,b=null,x=t.utils.renderWatch(m,y);function w(c){return x.reset(),c.each(function(c){var p=u-s.left-s.right,w=l-s.top-s.bottom;v=d3.select(this),t.utils.initSVG(v),f.domain(e||c.map(function(t,e){return h(t,e)})).rangeBands(r||[0,p],.1);var k=[];n||(k=[d3.min(c.map(function(t){var e=[];return e.push(t.values.Q1),t.values.hasOwnProperty("whisker_low")&&null!==t.values.whisker_low&&e.push(t.values.whisker_low),t.values.hasOwnProperty("outliers")&&null!==t.values.outliers&&(e=e.concat(t.values.outliers)),d3.min(e)})),d3.max(c.map(function(t){var e=[];return e.push(t.values.Q3),t.values.hasOwnProperty("whisker_high")&&null!==t.values.whisker_high&&e.push(t.values.whisker_high),t.values.hasOwnProperty("outliers")&&null!==t.values.outliers&&(e=e.concat(t.values.outliers)),d3.max(e)}))]),d.domain(n||k),d.range(i||[w,0]),o=o||f,a=a||d.copy().range([d(0),d(0)]);var _=v.selectAll("g.nv-wrap").data([c]);_.enter().append("g").attr("class","nvd3 nv-wrap"),_.attr("transform","translate("+s.left+","+s.top+")");var M=_.selectAll(".nv-boxplot").data(function(t){return t}),S=M.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);M.attr("class","nv-boxplot").attr("transform",function(t,e,n){return"translate("+(f(h(t,e))+.05*f.rangeBand())+", 0)"}).classed("hover",function(t){return t.hover}),M.watchTransition(x,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(t,e){return e*y/c.length}).attr("transform",function(t,e){return"translate("+(f(h(t,e))+.05*f.rangeBand())+", 0)"}),M.exit().remove(),S.each(function(t,e){var n=d3.select(this);["low","high"].forEach(function(r){t.values.hasOwnProperty("whisker_"+r)&&null!==t.values["whisker_"+r]&&(n.append("line").style("stroke",t.color?t.color:g(t,e)).attr("class","nv-boxplot-whisker nv-boxplot-"+r),n.append("line").style("stroke",t.color?t.color:g(t,e)).attr("class","nv-boxplot-tick nv-boxplot-"+r))})});var C=M.selectAll(".nv-boxplot-outlier").data(function(t){return t.values.hasOwnProperty("outliers")&&null!==t.values.outliers?t.values.outliers:[]});C.enter().append("circle").style("fill",function(t,e,n){return g(t,n)}).style("stroke",function(t,e,n){return g(t,n)}).on("mouseover",function(t,e,n){d3.select(this).classed("hover",!0),m.elementMouseover({series:{key:t,color:g(t,n)},e:d3.event})}).on("mouseout",function(t,e,n){d3.select(this).classed("hover",!1),m.elementMouseout({series:{key:t,color:g(t,n)},e:d3.event})}).on("mousemove",function(t,e){m.elementMousemove({e:d3.event})}),C.attr("class","nv-boxplot-outlier"),C.watchTransition(x,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*f.rangeBand()).attr("cy",function(t,e,n){return d(t)}).attr("r","3"),C.exit().remove();var A=function(){return null===b?.9*f.rangeBand():Math.min(75,.9*f.rangeBand())},D=function(){return.45*f.rangeBand()-A()/2},T=function(){return.45*f.rangeBand()+A()/2};["low","high"].forEach(function(t){var e="low"===t?"Q1":"Q3";M.select("line.nv-boxplot-whisker.nv-boxplot-"+t).watchTransition(x,"nv-boxplot: boxplots").attr("x1",.45*f.rangeBand()).attr("y1",function(e,n){return d(e.values["whisker_"+t])}).attr("x2",.45*f.rangeBand()).attr("y2",function(t,n){return d(t.values[e])}),M.select("line.nv-boxplot-tick.nv-boxplot-"+t).watchTransition(x,"nv-boxplot: boxplots").attr("x1",D).attr("y1",function(e,n){return d(e.values["whisker_"+t])}).attr("x2",T).attr("y2",function(e,n){return d(e.values["whisker_"+t])})}),["low","high"].forEach(function(t){S.selectAll(".nv-boxplot-"+t).on("mouseover",function(e,n,r){d3.select(this).classed("hover",!0),m.elementMouseover({series:{key:e.values["whisker_"+t],color:g(e,r)},e:d3.event})}).on("mouseout",function(e,n,r){d3.select(this).classed("hover",!1),m.elementMouseout({series:{key:e.values["whisker_"+t],color:g(e,r)},e:d3.event})}).on("mousemove",function(t,e){m.elementMousemove({e:d3.event})})}),S.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),m.elementMouseover({key:t.label,value:t.label,series:[{key:"Q3",value:t.values.Q3,color:t.color||g(t,e)},{key:"Q2",value:t.values.Q2,color:t.color||g(t,e)},{key:"Q1",value:t.values.Q1,color:t.color||g(t,e)}],data:t,index:e,e:d3.event})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),m.elementMouseout({key:t.label,value:t.label,series:[{key:"Q3",value:t.values.Q3,color:t.color||g(t,e)},{key:"Q2",value:t.values.Q2,color:t.color||g(t,e)},{key:"Q1",value:t.values.Q1,color:t.color||g(t,e)}],data:t,index:e,e:d3.event})}).on("mousemove",function(t,e){m.elementMousemove({e:d3.event})}),M.select("rect.nv-boxplot-box").watchTransition(x,"nv-boxplot: boxes").attr("y",function(t,e){return d(t.values.Q3)}).attr("width",A).attr("x",D).attr("height",function(t,e){return Math.abs(d(t.values.Q3)-d(t.values.Q1))||1}).style("fill",function(t,e){return t.color||g(t,e)}).style("stroke",function(t,e){return t.color||g(t,e)}),S.append("line").attr("class","nv-boxplot-median"),M.select("line.nv-boxplot-median").watchTransition(x,"nv-boxplot: boxplots line").attr("x1",D).attr("y1",function(t,e){return d(t.values.Q2)}).attr("x2",T).attr("y2",function(t,e){return d(t.values.Q2)}),o=f.copy(),a=d.copy()}),x.renderEnd("nv-boxplot immediate"),w}return w.dispatch=m,w.options=t.utils.optionsFunc.bind(w),w._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return l},set:function(t){l=t}},maxBoxWidth:{get:function(){return b},set:function(t){b=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return p},set:function(t){p=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},id:{get:function(){return c},set:function(t){c=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e)}},duration:{get:function(){return y},set:function(t){x.reset(y=t)}}}),t.utils.initOptions(w),w},t.models.boxPlotChart=function(){"use strict";var e,n,r=t.models.boxPlot(),i=t.models.axis(),o=t.models.axis(),a={top:15,right:10,bottom:50,left:60},s=null,u=null,l=t.utils.getColor(),c=!0,f=!0,d=!1,h=!1,p=t.models.tooltip(),g="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),m=250;i.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),o.orient(d?"right":"left").tickFormat(d3.format(",.1f")),p.duration(0);var y=t.utils.renderWatch(v,m);function b(l){return y.reset(),y.models(r),c&&y.models(i),f&&y.models(o),l.each(function(l){var p=d3.select(this);t.utils.initSVG(p);var y=(s||parseInt(p.style("width"))||960)-a.left-a.right,x=(u||parseInt(p.style("height"))||400)-a.top-a.bottom;if(b.update=function(){v.beforeUpdate(),p.transition().duration(m).call(b)},b.container=this,!(l&&l.length&&l.filter(function(t){return t.values.hasOwnProperty("Q1")&&t.values.hasOwnProperty("Q2")&&t.values.hasOwnProperty("Q3")}).length)){var w=p.selectAll(".nv-noData").data([g]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",a.left+y/2).attr("y",a.top+x/2).text(function(t){return t}),b}p.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale().clamp(!0);var k=p.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([l]),_=k.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),M=_.append("defs"),S=k.select("g");if(_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),_.append("g").attr("class","nv-barsWrap"),S.attr("transform","translate("+a.left+","+a.top+")"),d&&S.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)"),r.width(y).height(x),S.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled})).transition().call(r),M.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect"),S.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",e.rangeBand()*(h?2:1)).attr("height",16).attr("x",-e.rangeBand()/(h?1:2)),c){i.scale(e).ticks(t.utils.calcTicksX(y/100,l)).tickSize(-x,0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),S.select(".nv-x.nv-axis").call(i);var C=S.select(".nv-x.nv-axis").selectAll("g");h&&C.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}f&&(o.scale(n).ticks(Math.floor(x/36)).tickSize(-y,0),S.select(".nv-y.nv-axis").call(o)),S.select(".nv-zeroLine line").attr("x1",0).attr("x2",y).attr("y1",n(0)).attr("y2",n(0))}),y.renderEnd("nv-boxplot chart immediate"),b}return r.dispatch.on("elementMouseover.tooltip",function(t){p.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){p.data(t).hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(t){p.position({top:d3.event.pageY,left:d3.event.pageX})()}),b.dispatch=v,b.boxplot=r,b.xAxis=i,b.yAxis=o,b.tooltip=p,b.options=t.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return u},set:function(t){u=t}},staggerLabels:{get:function(){return h},set:function(t){h=t}},showXAxis:{get:function(){return c},set:function(t){c=t}},showYAxis:{get:function(){return f},set:function(t){f=t}},tooltips:{get:function(){return tooltips},set:function(t){tooltips=t}},tooltipContent:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},duration:{get:function(){return m},set:function(t){y.reset(m=t),r.duration(m),i.duration(m),o.duration(m)}},color:{get:function(){return l},set:function(e){l=t.utils.getColor(e),r.color(l)}},rightAlignYAxis:{get:function(){return d},set:function(t){d=t,o.orient(t?"right":"left")}}}),t.utils.inheritOptions(b,r),t.utils.initOptions(b),b},t.models.bullet=function(){"use strict";var e={top:0,right:0,bottom:0,left:0},n="left",r=!1,i=function(t){return t.ranges},o=function(t){return t.markers?t.markers:[0]},a=function(t){return t.measures},s=function(t){return t.rangeLabels?t.rangeLabels:[]},u=function(t){return t.markerLabels?t.markerLabels:[]},l=function(t){return t.measureLabels?t.measureLabels:[]},c=[0],f=380,d=30,h=null,p=null,g=t.utils.getColor(["#1f77b4"]),v=d3.dispatch("elementMouseover","elementMouseout","elementMousemove");function m(n){return n.each(function(n,p){var m=f-e.left-e.right,y=d-e.top-e.bottom;h=d3.select(this),t.utils.initSVG(h);var b=i.call(this,n,p).slice().sort(d3.descending),x=o.call(this,n,p).slice().sort(d3.descending),w=a.call(this,n,p).slice().sort(d3.descending),k=s.call(this,n,p).slice(),_=u.call(this,n,p).slice(),M=l.call(this,n,p).slice(),S=d3.scale.linear().domain(d3.extent(d3.merge([c,b]))).range(r?[m,0]:[0,m]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(S.range()),this.__chart__=S;var C=d3.min(b),A=d3.max(b),D=b[1],T=h.selectAll("g.nv-wrap.nv-bullet").data([n]),L=T.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),E=T.select("g");L.append("rect").attr("class","nv-range nv-rangeMax"),L.append("rect").attr("class","nv-range nv-rangeAvg"),L.append("rect").attr("class","nv-range nv-rangeMin"),L.append("rect").attr("class","nv-measure"),T.attr("transform","translate("+e.left+","+e.top+")");var N=function(t){return Math.abs(S(t)-S(0))},O=function(t){return S(t<0?t:0)};E.select("rect.nv-rangeMax").attr("height",y).attr("width",N(A>0?A:C)).attr("x",O(A>0?A:C)).datum(A>0?A:C),E.select("rect.nv-rangeAvg").attr("height",y).attr("width",N(D)).attr("x",O(D)).datum(D),E.select("rect.nv-rangeMin").attr("height",y).attr("width",N(A)).attr("x",O(A)).attr("width",N(A>0?C:A)).attr("x",O(A>0?C:A)).datum(A>0?C:A),E.select("rect.nv-measure").style("fill",g).attr("height",y/3).attr("y",y/3).attr("width",w<0?S(0)-S(w[0]):S(w[0])-S(0)).attr("x",O(w)).on("mouseover",function(){v.elementMouseover({value:w[0],label:M[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){v.elementMousemove({value:w[0],label:M[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){v.elementMouseout({value:w[0],label:M[0]||"Current",color:d3.select(this).style("fill")})});var F=y/6,P=x.map(function(t,e){return{value:t,label:_[e]}});L.selectAll("path.nv-markerTriangle").data(P).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(t){return"translate("+S(t.value)+","+y/2+")"}).attr("d","M0,"+F+"L"+F+","+-F+" "+-F+","+-F+"Z").on("mouseover",function(t){v.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[S(t.value),y/2]})}).on("mousemove",function(t){v.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){v.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),T.selectAll(".nv-range").on("mouseover",function(t,e){v.elementMouseover({value:t,label:k[e]||(e?1==e?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})}).on("mousemove",function(){v.elementMousemove({value:w[0],label:M[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){v.elementMouseout({value:t,label:k[e]||(e?1==e?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})})}),m}return m.dispatch=v,m.options=t.utils.optionsFunc.bind(m),m._options=Object.create({},{ranges:{get:function(){return i},set:function(t){i=t}},markers:{get:function(){return o},set:function(t){o=t}},measures:{get:function(){return a},set:function(t){a=t}},forceX:{get:function(){return c},set:function(t){c=t}},width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return d},set:function(t){d=t}},tickFormat:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},orient:{get:function(){return n},set:function(t){r="right"==(n=t)||"bottom"==n}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e)}}}),t.utils.initOptions(m),m},t.models.bulletChart=function(){"use strict";var e=t.models.bullet(),n=t.models.tooltip(),r="left",i=!1,o={top:5,right:40,bottom:20,left:120},a=function(t){return t.ranges},s=function(t){return t.markers?t.markers:[0]},u=function(t){return t.measures},l=null,c=55,f=null,d=null,h=null,p=d3.dispatch("tooltipShow","tooltipHide");function g(n){return n.each(function(r,h){var p=d3.select(this);t.utils.initSVG(p);var v=t.utils.availableWidth(l,p,o),m=c-o.top-o.bottom;if(g.update=function(){g(n)},g.container=this,!r||!a.call(this,r,h))return t.utils.noData(g,p),g;p.selectAll(".nv-noData").remove();var y=a.call(this,r,h).slice().sort(d3.descending),b=s.call(this,r,h).slice().sort(d3.descending),x=u.call(this,r,h).slice().sort(d3.descending),w=p.selectAll("g.nv-wrap.nv-bulletChart").data([r]),k=w.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),_=w.select("g");k.append("g").attr("class","nv-bulletWrap"),k.append("g").attr("class","nv-titles"),w.attr("transform","translate("+o.left+","+o.top+")");var M=d3.scale.linear().domain([0,Math.max(y[0],b[0],x[0])]).range(i?[v,0]:[0,v]),S=this.__chart__||d3.scale.linear().domain([0,1/0]).range(M.range());this.__chart__=M;var C=k.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(c-o.top-o.bottom)/2+")");C.append("text").attr("class","nv-title").text(function(t){return t.title}),C.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),e.width(v).height(m);var A=_.select(".nv-bulletWrap");d3.transition(A).call(e);var D=f||M.tickFormat(v/100),T=_.selectAll("g.nv-tick").data(M.ticks(d||v/50),function(t){return this.textContent||D(t)}),L=T.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+S(t)+",0)"}).style("opacity",1e-6);L.append("line").attr("y1",m).attr("y2",7*m/6),L.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*m/6).text(D);var E=d3.transition(T).attr("transform",function(t){return"translate("+M(t)+",0)"}).style("opacity",1);E.select("line").attr("y1",m).attr("y2",7*m/6),E.select("text").attr("y",7*m/6),d3.transition(T.exit()).attr("transform",function(t){return"translate("+M(t)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),g}return n.duration(0).headerEnabled(!1),e.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.label,value:t.value,color:t.color},n.data(t).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){n.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(t){n.position({top:d3.event.pageY,left:d3.event.pageX})()}),g.bullet=e,g.dispatch=p,g.tooltip=n,g.options=t.utils.optionsFunc.bind(g),g._options=Object.create({},{ranges:{get:function(){return a},set:function(t){a=t}},markers:{get:function(){return s},set:function(t){s=t}},measures:{get:function(){return u},set:function(t){u=t}},width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return c},set:function(t){c=t}},tickFormat:{get:function(){return f},set:function(t){f=t}},ticks:{get:function(){return d},set:function(t){d=t}},noData:{get:function(){return h},set:function(t){h=t}},tooltips:{get:function(){return n.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),n.enabled(!!e)}},tooltipContent:{get:function(){return n.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),n.contentGenerator(e)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},orient:{get:function(){return r},set:function(t){i="right"==(r=t)||"bottom"==r}}}),t.utils.inheritOptions(g,e),t.utils.initOptions(g),g},t.models.candlestickBar=function(){"use strict";var e,n,r,i,o,a={top:0,right:0,bottom:0,left:0},s=null,u=null,l=Math.floor(1e4*Math.random()),c=d3.scale.linear(),f=d3.scale.linear(),d=function(t){return t.x},h=function(t){return t.y},p=function(t){return t.open},g=function(t){return t.close},v=function(t){return t.high},m=function(t){return t.low},y=[],b=[],x=!1,w=!0,k=t.utils.defaultColor(),_=!1,M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function S(k){return k.each(function(k){e=d3.select(this);var _=t.utils.availableWidth(s,e,a),S=t.utils.availableHeight(u,e,a);t.utils.initSVG(e);var C=_/k[0].values.length*.45;c.domain(n||d3.extent(k[0].values.map(d).concat(y))),c.range(x?i||[.5*_/k[0].values.length,_*(k[0].values.length-.5)/k[0].values.length]:i||[5+C/2,_-C/2-5]),f.domain(r||[d3.min(k[0].values.map(m).concat(b)),d3.max(k[0].values.map(v).concat(b))]).range(o||[S,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var A=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([k[0].values]),D=A.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),T=D.append("defs"),L=D.append("g"),E=A.select("g");L.append("g").attr("class","nv-ticks"),A.attr("transform","translate("+a.left+","+a.top+")"),e.on("click",function(t,e){M.chartClick({data:t,index:e,pos:d3.event,id:l})}),T.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect"),A.select("#nv-chart-clip-path-"+l+" rect").attr("width",_).attr("height",S),E.attr("clip-path",w?"url(#nv-chart-clip-path-"+l+")":"");var N=A.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});N.exit().remove();var O=N.enter().append("g").attr("class",function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e});O.append("line").attr("class","nv-candlestick-lines").attr("transform",function(t,e){return"translate("+c(d(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return f(v(t,e))}).attr("x2",0).attr("y2",function(t,e){return f(m(t,e))}),O.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(t,e){return"translate("+(c(d(t,e))-C/2)+","+(f(h(t,e))-(p(t,e)>g(t,e)?f(g(t,e))-f(p(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",C).attr("height",function(t,e){var n=p(t,e),r=g(t,e);return n>r?f(r)-f(n):f(n)-f(r)}),e.selectAll(".nv-candlestick-lines").transition().attr("transform",function(t,e){return"translate("+c(d(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return f(v(t,e))}).attr("x2",0).attr("y2",function(t,e){return f(m(t,e))}),e.selectAll(".nv-candlestick-rects").transition().attr("transform",function(t,e){return"translate("+(c(d(t,e))-C/2)+","+(f(h(t,e))-(p(t,e)>g(t,e)?f(g(t,e))-f(p(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",C).attr("height",function(t,e){var n=p(t,e),r=g(t,e);return n>r?f(r)-f(n):f(n)-f(r)})}),S}return S.highlightPoint=function(t,n){S.clearHighlights(),e.select(".nv-candlestickBar .nv-tick-0-"+t).classed("hover",n)},S.clearHighlights=function(){e.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},S.dispatch=M,S.options=t.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return u},set:function(t){u=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return l},set:function(t){l=t}},interactive:{get:function(){return _},set:function(t){_=t}},x:{get:function(){return d},set:function(t){d=t}},y:{get:function(){return h},set:function(t){h=t}},open:{get:function(){return p()},set:function(t){p=t}},close:{get:function(){return g()},set:function(t){g=t}},high:{get:function(){return v},set:function(t){v=t}},low:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return a},set:function(t){a.top=null!=t.top?t.top:a.top,a.right=null!=t.right?t.right:a.right,a.bottom=null!=t.bottom?t.bottom:a.bottom,a.left=null!=t.left?t.left:a.left}},color:{get:function(){return k},set:function(e){k=t.utils.getColor(e)}}}),t.utils.initOptions(S),S},t.models.cumulativeLineChart=function(){"use strict";var e,n,r=t.models.line(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),s=t.models.legend(),u=t.interactiveGuideline(),l=t.models.tooltip(),c={top:30,right:30,bottom:50,left:60},f=t.utils.defaultColor(),d=null,h=null,p=!0,g=!0,v=!0,m=!1,y=!0,b=!1,x=!0,w=r.id(),k=t.utils.state(),_=null,M=null,S=function(t){return t.average},C=d3.dispatch("stateChange","changeState","renderEnd"),A=250,D=!1;k.index=0,k.rescaleY=x,i.orient("bottom").tickPadding(7),o.orient(m?"right":"left"),l.valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)}),s.updateState(!1);var T=d3.scale.linear(),L={i:0,x:0},E=t.utils.renderWatch(C,A);function N(l){return E.reset(),E.models(r),g&&E.models(i),v&&E.models(o),l.each(function(l){var M=d3.select(this);t.utils.initSVG(M),M.classed("nv-chart-"+w,!0);var E,F=this,P=t.utils.availableWidth(d,M,c),W=t.utils.availableHeight(h,M,c);if(N.update=function(){0===A?M.call(N):M.transition().duration(A).call(N)},N.container=this,k.setter(function(t){return function(e){void 0!==e.index&&(L.i=e.index),void 0!==e.rescaleY&&(x=e.rescaleY),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}}(l),N.update).getter(function(t){return function(){return{active:t.map(function(t){return!t.disabled}),index:L.i,rescaleY:x}}}(l)).update(),k.disabled=l.map(function(t){return!!t.disabled}),!_)for(E in _={},k)_[E]=k[E]instanceof Array?k[E].slice(0):k[E];var R=d3.behavior.drag().on("dragstart",function(t,e){d3.select(N.container).style("cursor","ew-resize")}).on("drag",function(t,e){L.x=d3.event.x,L.i=Math.round(T.invert(L.x)),K()}).on("dragend",function(t,e){d3.select(N.container).style("cursor","auto"),k.index=L.i,C.stateChange(k)});if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return t.utils.noData(N,M),N;if(M.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale(),x)r.yDomain(null);else{var z=l.filter(function(t){return!t.disabled}).map(function(t,e){var n=d3.extent(t.values,r.y());return n[0]<-.95&&(n[0]=-.95),[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),I=[d3.min(z,function(t){return t[0]}),d3.max(z,function(t){return t[1]})];r.yDomain(I)}T.domain([0,l[0].values.length-1]).range([0,P]).clamp(!0),l=function(t,e){return O||(O=r.y()),e.map(function(e,n){if(!e.values)return e;var r=e.values[t];if(null==r)return e;var i=O(r,t);return i<-.95&&!D?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(O(t,e)-i)/(1+i)},t}),e)})}(L.i,l);var H=b?"none":"all",Y=M.selectAll("g.nv-wrap.nv-cumulativeLine").data([l]),B=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),j=Y.select("g");if(B.append("g").attr("class","nv-interactive"),B.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-background"),B.append("g").attr("class","nv-linesWrap").style("pointer-events",H),B.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),B.append("g").attr("class","nv-legendWrap"),B.append("g").attr("class","nv-controlsWrap"),p&&(a.width(P),j.select(".nv-legendWrap").datum(l).call(a),c.top!=a.height()&&(c.top=a.height(),W=t.utils.availableHeight(h,M,c)),j.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")),y){var U=[{key:"Re-scale y-axis",disabled:!x}];s.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),j.select(".nv-controlsWrap").datum(U).attr("transform","translate(0,"+-c.top+")").call(s)}Y.attr("transform","translate("+c.left+","+c.top+")"),m&&j.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)");var G=l.filter(function(t){return t.tempDisabled});Y.select(".tempDisabled").remove(),G.length&&Y.append("text").attr("class","tempDisabled").attr("x",P/2).attr("y","-.71em").style("text-anchor","end").text(G.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),b&&(u.width(P).height(W).margin({left:c.left,top:c.top}).svgContainer(M).xScale(e),Y.select(".nv-interactive").call(u)),B.select(".nv-background").append("rect"),j.select(".nv-background rect").attr("width",P).attr("height",W),r.y(function(t){return t.display.y}).width(P).height(W).color(l.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!l[e].disabled&&!l[e].tempDisabled}));var V=j.select(".nv-linesWrap").datum(l.filter(function(t){return!t.disabled&&!t.tempDisabled}));V.call(r),l.forEach(function(t,e){t.seriesIndex=e});var q=l.filter(function(t){return!t.disabled&&!!S(t)}),$=j.select(".nv-avgLinesWrap").selectAll("line").data(q,function(t){return t.key}),X=function(t){var e=n(S(t));return e<0?0:e>W?W:e};$.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t,e){return r.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",P).attr("y1",X).attr("y2",X),$.style("stroke-opacity",function(t){var e=n(S(t));return e<0||e>W?0:1}).attr("x1",0).attr("x2",P).attr("y1",X).attr("y2",X),$.exit().remove();var Z=V.selectAll(".nv-indexLine").data([L]);function K(){Z.data([L]);var t=N.duration();N.duration(0),N.update(),N.duration(t)}Z.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(R),Z.attr("transform",function(t){return"translate("+T(t.i)+",0)"}).attr("height",W),g&&(i.scale(e)._ticks(t.utils.calcTicksX(P/70,l)).tickSize(-W,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),j.select(".nv-x.nv-axis").call(i)),v&&(o.scale(n)._ticks(t.utils.calcTicksY(W/36,l)).tickSize(-P,0),j.select(".nv-y.nv-axis").call(o)),j.select(".nv-background rect").on("click",function(){L.x=d3.mouse(this)[0],L.i=Math.round(T.invert(L.x)),k.index=L.i,C.stateChange(k),K()}),r.dispatch.on("elementClick",function(t){L.i=t.pointIndex,L.x=T(L.i),k.index=L.i,C.stateChange(k),K()}),s.dispatch.on("legendClick",function(t,e){t.disabled=!t.disabled,k.rescaleY=x=!t.disabled,C.stateChange(k),N.update()}),a.dispatch.on("stateChange",function(t){for(var e in t)k[e]=t[e];C.stateChange(k),N.update()}),u.dispatch.on("elementMousemove",function(e){r.clearHighlights();var n,a,s,d=[];if(l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i,o){a=t.interactiveBisect(i.values,e.pointXValue,N.x()),r.highlightPoint(o,a,!0);var u=i.values[a];void 0!==u&&(void 0===n&&(n=u),void 0===s&&(s=N.xScale()(N.x()(u,a))),d.push({key:i.key,value:N.y()(u,a),color:f(i,i.seriesIndex)}))}),d.length>2){var h=N.yScale().invert(e.mouseY),p=.03*Math.abs(N.yScale().domain()[0]-N.yScale().domain()[1]),g=t.nearestValueIndex(d.map(function(t){return t.value}),h,p);null!==g&&(d[g].highlight=!0)}var v=i.tickFormat()(N.x()(n,a),a);u.tooltip.position({left:s+c.left,top:e.mouseY+c.top}).chartContainer(F.parentNode).valueFormatter(function(t,e){return o.tickFormat()(t)}).data({value:v,series:d})(),u.renderGuideLine(s)}),u.dispatch.on("elementMouseout",function(t){r.clearHighlights()}),C.on("changeState",function(t){void 0!==t.disabled&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),k.disabled=t.disabled),void 0!==t.index&&(L.i=t.index,L.x=T(L.i),k.index=t.index,Z.data([L])),void 0!==t.rescaleY&&(x=t.rescaleY),N.update()})}),E.renderEnd("cumulativeLineChart immediate"),N}r.dispatch.on("elementMouseover.tooltip",function(t){var e={x:N.x()(t.point),y:N.y()(t.point),color:t.point.color};t.point=e,l.data(t).position(t.pos).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)});var O=null;return N.dispatch=C,N.lines=r,N.legend=a,N.controls=s,N.xAxis=i,N.yAxis=o,N.interactiveLayer=u,N.state=k,N.tooltip=l,N.options=t.utils.optionsFunc.bind(N),N._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return h},set:function(t){h=t}},rescaleY:{get:function(){return x},set:function(t){x=t}},showControls:{get:function(){return y},set:function(t){y=t}},showLegend:{get:function(){return p},set:function(t){p=t}},average:{get:function(){return S},set:function(t){S=t}},defaultState:{get:function(){return _},set:function(t){_=t}},noData:{get:function(){return M},set:function(t){M=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},noErrorCheck:{get:function(){return D},set:function(t){D=t}},tooltips:{get:function(){return l.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),l.enabled(!!e)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),l.contentGenerator(e)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return f},set:function(e){f=t.utils.getColor(e),a.color(f)}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=t,!0===t&&(N.interactive(!1),N.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return m},set:function(t){m=t,o.orient(t?"right":"left")}},duration:{get:function(){return A},set:function(t){r.duration(A=t),i.duration(A),o.duration(A),E.reset(A)}}}),t.utils.inheritOptions(N,r),t.utils.initOptions(N),N},t.models.discreteBar=function(){"use strict";var e,n,r,i,o,a,s,u={top:0,right:0,bottom:0,left:0},l=960,c=500,f=Math.floor(1e4*Math.random()),d=d3.scale.ordinal(),h=d3.scale.linear(),p=function(t){return t.x},g=function(t){return t.y},v=[0],m=t.utils.defaultColor(),y=!1,b=d3.format(",.2f"),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w="discreteBar",k=250,_=t.utils.renderWatch(x,k);function M(f){return _.reset(),f.each(function(f){var k=l-u.left-u.right,M=c-u.top-u.bottom;e=d3.select(this),t.utils.initSVG(e),f.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var S=n&&r?[]:f.map(function(t){return t.values.map(function(t,e){return{x:p(t,e),y:g(t,e),y0:t.y0}})});d.domain(n||d3.merge(S).map(function(t){return t.x})).rangeBands(i||[0,k],.1),h.domain(r||d3.extent(d3.merge(S).map(function(t){return t.y}).concat(v))),h.range(y?o||[M-(h.domain()[0]<0?12:0),h.domain()[1]>0?12:0]:o||[M,0]),a=a||d,s=s||h.copy().range([h(0),h(0)]);var C=e.selectAll("g.nv-wrap.nv-discretebar").data([f]),A=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");C.select("g"),A.append("g").attr("class","nv-groups"),C.attr("transform","translate("+u.left+","+u.top+")");var D=C.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});D.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),D.exit().watchTransition(_,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),D.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),D.watchTransition(_,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var T=D.selectAll("g.nv-bar").data(function(t){return t.values});T.exit().remove();var L=T.enter().append("g").attr("transform",function(t,e,n){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", "+h(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),x.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),x.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){x.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){x.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){x.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});L.append("rect").attr("height",0).attr("width",.9*d.rangeBand()/f.length),y?(L.append("text").attr("text-anchor","middle"),T.select("text").text(function(t,e){return b(g(t,e))}).watchTransition(_,"discreteBar: bars text").attr("x",.9*d.rangeBand()/2).attr("y",function(t,e){return g(t,e)<0?h(g(t,e))-h(0)+12:-4})):T.selectAll("text").remove(),T.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||m(t,e)}).style("stroke",function(t,e){return t.color||m(t,e)}).select("rect").attr("class",w).watchTransition(_,"discreteBar: bars rect").attr("width",.9*d.rangeBand()/f.length),T.watchTransition(_,"discreteBar: bars").attr("transform",function(t,e){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", "+(g(t,e)<0?h(0):h(0)-h(g(t,e))<1?h(0)-1:h(g(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(h(g(t,e))-h(r&&r[0]||0))||1)}),a=d.copy(),s=h.copy()}),_.renderEnd("discreteBar immediate"),M}return M.dispatch=x,M.options=t.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return c},set:function(t){c=t}},forceY:{get:function(){return v},set:function(t){v=t}},showValues:{get:function(){return y},set:function(t){y=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return g},set:function(t){g=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},valueFormat:{get:function(){return b},set:function(t){b=t}},id:{get:function(){return f},set:function(t){f=t}},rectClass:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},color:{get:function(){return m},set:function(e){m=t.utils.getColor(e)}},duration:{get:function(){return k},set:function(t){_.reset(k=t)}}}),t.utils.initOptions(M),M},t.models.discreteBarChart=function(){"use strict";var e,n,r=t.models.discreteBar(),i=t.models.axis(),o=t.models.axis(),a=t.models.tooltip(),s={top:15,right:10,bottom:50,left:60},u=null,l=null,c=t.utils.getColor(),f=!0,d=!0,h=!1,p=!1,g=null,v=d3.dispatch("beforeUpdate","renderEnd"),m=250;i.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),o.orient(h?"right":"left").tickFormat(d3.format(",.1f")),a.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).keyFormatter(function(t,e){return i.tickFormat()(t,e)});var y=t.utils.renderWatch(v,m);function b(a){return y.reset(),y.models(r),f&&y.models(i),d&&y.models(o),a.each(function(a){var c=d3.select(this);t.utils.initSVG(c);var g=t.utils.availableWidth(u,c,s),y=t.utils.availableHeight(l,c,s);if(b.update=function(){v.beforeUpdate(),c.transition().duration(m).call(b)},b.container=this,!(a&&a.length&&a.filter(function(t){return t.values.length}).length))return t.utils.noData(b,c),b;c.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale().clamp(!0);var x=c.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([a]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),k=w.append("defs"),_=x.select("g");if(w.append("g").attr("class","nv-x nv-axis"),w.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),w.append("g").attr("class","nv-barsWrap"),_.attr("transform","translate("+s.left+","+s.top+")"),h&&_.select(".nv-y.nv-axis").attr("transform","translate("+g+",0)"),r.width(g).height(y),_.select(".nv-barsWrap").datum(a.filter(function(t){return!t.disabled})).transition().call(r),k.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect"),_.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",e.rangeBand()*(p?2:1)).attr("height",16).attr("x",-e.rangeBand()/(p?1:2)),f){i.scale(e)._ticks(t.utils.calcTicksX(g/100,a)).tickSize(-y,0),_.select(".nv-x.nv-axis").attr("transform","translate(0,"+(n.range()[0]+(r.showValues()&&n.domain()[0]<0?16:0))+")"),_.select(".nv-x.nv-axis").call(i);var M=_.select(".nv-x.nv-axis").selectAll("g");p&&M.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}d&&(o.scale(n)._ticks(t.utils.calcTicksY(y/36,a)).tickSize(-g,0),_.select(".nv-y.nv-axis").call(o)),_.select(".nv-zeroLine line").attr("x1",0).attr("x2",g).attr("y1",n(0)).attr("y2",n(0))}),y.renderEnd("discreteBar chart immediate"),b}return r.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:b.x()(t.data),value:b.y()(t.data),color:t.color},a.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){a.hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(t){a.position({top:d3.event.pageY,left:d3.event.pageX})()}),b.dispatch=v,b.discretebar=r,b.xAxis=i,b.yAxis=o,b.tooltip=a,b.options=t.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return l},set:function(t){l=t}},staggerLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return f},set:function(t){f=t}},showYAxis:{get:function(){return d},set:function(t){d=t}},noData:{get:function(){return g},set:function(t){g=t}},tooltips:{get:function(){return a.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),a.enabled(!!e)}},tooltipContent:{get:function(){return a.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),a.contentGenerator(e)}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return m},set:function(t){y.reset(m=t),r.duration(m),i.duration(m),o.duration(m)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),r.color(c)}},rightAlignYAxis:{get:function(){return h},set:function(t){h=t,o.orient(t?"right":"left")}}}),t.utils.inheritOptions(b,r),t.utils.initOptions(b),b},t.models.distribution=function(){"use strict";var e,n={top:0,right:0,bottom:0,left:0},r=400,i=8,o="x",a=function(t){return t[o]},s=t.utils.defaultColor(),u=d3.scale.linear(),l=250,c=d3.dispatch("renderEnd"),f=t.utils.renderWatch(c,l);function d(r){return f.reset(),r.each(function(r){var l="x"==o?"y":"x",c=d3.select(this);t.utils.initSVG(c),e=e||u;var d=c.selectAll("g.nv-distribution").data([r]),h=(d.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),d.select("g"));d.attr("transform","translate("+n.left+","+n.top+")");var p=h.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});p.enter().append("g"),p.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return s(t,e)});var g=p.selectAll("line.nv-dist"+o).data(function(t){return t.values});g.enter().append("line").attr(o+"1",function(t,n){return e(a(t,n))}).attr(o+"2",function(t,n){return e(a(t,n))}),f.transition(p.exit().selectAll("line.nv-dist"+o),"dist exit").attr(o+"1",function(t,e){return u(a(t,e))}).attr(o+"2",function(t,e){return u(a(t,e))}).style("stroke-opacity",0).remove(),g.attr("class",function(t,e){return"nv-dist"+o+" nv-dist"+o+"-"+e}).attr(l+"1",0).attr(l+"2",i),f.transition(g,"dist").attr(o+"1",function(t,e){return u(a(t,e))}).attr(o+"2",function(t,e){return u(a(t,e))}),e=u.copy()}),f.renderEnd("distribution immediate"),d}return d.options=t.utils.optionsFunc.bind(d),d.dispatch=c,d.margin=function(t){return arguments.length?(n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left,d):n},d.width=function(t){return arguments.length?(r=t,d):r},d.axis=function(t){return arguments.length?(o=t,d):o},d.size=function(t){return arguments.length?(i=t,d):i},d.getData=function(t){return arguments.length?(a=d3.functor(t),d):a},d.scale=function(t){return arguments.length?(u=t,d):u},d.color=function(e){return arguments.length?(s=t.utils.getColor(e),d):s},d.duration=function(t){return arguments.length?(f.reset(l=t),d):l},d},t.models.furiousLegend=function(){"use strict";var e={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(t){return t.key},o=t.utils.getColor(),a=!0,s=28,u=!0,l=!0,c=!1,f=!1,d=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),h="classic";function p(g){function v(t,e){return"furious"!=h?"#000":f?t.disengaged?o(t,e):"#fff":f?void 0:t.disabled?o(t,e):"#fff"}function m(t,e){return f&&"furious"==h?t.disengaged?"#fff":o(t,e):t.disabled?"#fff":o(t,e)}return g.each(function(p){var g=n-e.left-e.right,y=d3.select(this);t.utils.initSVG(y);var b=y.selectAll("g.nv-legend").data([p]),x=(b.enter().append("g").attr("class","nvd3 nv-legend").append("g"),b.select("g"));b.attr("transform","translate("+e.left+","+e.top+")");var w,k=x.selectAll(".nv-series").data(function(t){return"furious"!=h?t:t.filter(function(t){return!!f||!t.disengaged})}),_=k.enter().append("g").attr("class","nv-series");"classic"==h?(_.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),w=k.select("circle")):"furious"==h&&(_.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),w=k.select("rect"),_.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),k.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",v(t,e))})),_.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var M,S=k.select("text.nv-legend-text");switch(k.on("mouseover",function(t,e){d.legendMouseover(t,e)}).on("mouseout",function(t,e){d.legendMouseout(t,e)}).on("click",function(t,e){d.legendClick(t,e);var n=k.data();l&&("classic"==h?c?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1})):"furious"==h&&(f?(t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled):f||(t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1}))),d.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})}))}).on("dblclick",function(t,e){if(("furious"!=h||!f)&&(d.legendDblclick(t,e),l)){var n=k.data();n.forEach(function(t){t.disabled=!0,"furious"==h&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==h&&(t.userDisabled=t.disabled),d.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),k.classed("nv-disabled",function(t){return t.userDisabled}),k.exit().remove(),S.attr("fill",v).text(i),h){case"furious":M=23;break;case"classic":M=20}if(a){var C=[];k.each(function(e,n){var r,i=d3.select(this).select("text");try{if((r=i.node().getComputedTextLength())<=0)throw Error()}catch(o){r=t.utils.calcApproxTextWidth(i)}C.push(r+s)});for(var A=0,D=0,T=[];D<g&&A<C.length;)T[A]=C[A],D+=C[A++];for(0===A&&(A=1);D>g&&A>1;){T=[],A--;for(var L=0;L<C.length;L++)C[L]>(T[L%A]||0)&&(T[L%A]=C[L]);D=T.reduce(function(t,e,n,r){return t+e})}for(var E=[],N=0,O=0;N<A;N++)E[N]=O,O+=T[N];k.attr("transform",function(t,e){return"translate("+E[e%A]+","+(5+Math.floor(e/A)*M)+")"}),x.attr("transform",u?"translate("+(n-e.right-D)+","+e.top+")":"translate(0,"+e.top+")"),r=e.top+e.bottom+Math.ceil(C.length/A)*M}else{var F,P=5,W=5,R=0;k.attr("transform",function(t,r){var i=d3.select(this).select("text").node().getComputedTextLength()+s;return n<e.left+e.right+(F=W)+i&&(W=F=5,P+=M),(W+=i)>R&&(R=W),"translate("+F+","+P+")"}),x.attr("transform","translate("+(n-e.right-R)+","+e.top+")"),r=e.top+e.bottom+P+15}"furious"==h&&w.attr("width",function(t,e){return S[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),w.style("fill",m).style("stroke",function(t,e){return t.color||o(t,e)})}),p}return p.dispatch=d,p.options=t.utils.optionsFunc.bind(p),p._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},key:{get:function(){return i},set:function(t){i=t}},align:{get:function(){return a},set:function(t){a=t}},rightAlign:{get:function(){return u},set:function(t){u=t}},padding:{get:function(){return s},set:function(t){s=t}},updateState:{get:function(){return l},set:function(t){l=t}},radioButtonMode:{get:function(){return c},set:function(t){c=t}},expanded:{get:function(){return f},set:function(t){f=t}},vers:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return o},set:function(e){o=t.utils.getColor(e)}}}),t.utils.initOptions(p),p},t.models.historicalBar=function(){"use strict";var e,n,r,i,o={top:0,right:0,bottom:0,left:0},a=null,s=null,u=Math.floor(1e4*Math.random()),l=null,c=d3.scale.linear(),f=d3.scale.linear(),d=function(t){return t.x},h=function(t){return t.y},p=[],g=[0],v=!1,m=!0,y=t.utils.defaultColor(),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),x=!0,w=t.utils.renderWatch(b,0);function k(_){return _.each(function(k){w.reset(),l=d3.select(this);var _=t.utils.availableWidth(a,l,o),M=t.utils.availableHeight(s,l,o);t.utils.initSVG(l),c.domain(e||d3.extent(k[0].values.map(d).concat(p))),c.range(v?r||[.5*_/k[0].values.length,_*(k[0].values.length-.5)/k[0].values.length]:r||[0,_]),f.domain(n||d3.extent(k[0].values.map(h).concat(g))).range(i||[M,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var S=l.selectAll("g.nv-wrap.nv-historicalBar-"+u).data([k[0].values]),C=S.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+u),A=C.append("defs"),D=C.append("g"),T=S.select("g");D.append("g").attr("class","nv-bars"),S.attr("transform","translate("+o.left+","+o.top+")"),l.on("click",function(t,e){b.chartClick({data:t,index:e,pos:d3.event,id:u})}),A.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),S.select("#nv-chart-clip-path-"+u+" rect").attr("width",_).attr("height",M),T.attr("clip-path",m?"url(#nv-chart-clip-path-"+u+")":"");var L=S.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return d(t,e)});L.exit().remove(),L.enter().append("rect").attr("x",0).attr("y",function(e,n){return t.utils.NaNtoZero(f(Math.max(0,h(e,n))))}).attr("height",function(e,n){return t.utils.NaNtoZero(Math.abs(f(h(e,n))-f(0)))}).attr("transform",function(t,e){return"translate("+(c(d(t,e))-_/k[0].values.length*.45)+",0)"}).on("mouseover",function(t,e){x&&(d3.select(this).classed("hover",!0),b.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mouseout",function(t,e){x&&(d3.select(this).classed("hover",!1),b.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mousemove",function(t,e){x&&b.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){x&&(b.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(t,e){x&&(b.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),L.attr("fill",function(t,e){return y(t,e)}).attr("class",function(t,e,n){return(h(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).watchTransition(w,"bars").attr("transform",function(t,e){return"translate("+(c(d(t,e))-_/k[0].values.length*.45)+",0)"}).attr("width",_/k[0].values.length*.9),L.watchTransition(w,"bars").attr("y",function(e,n){var r=h(e,n)<0?f(0):f(0)-f(h(e,n))<1?f(0)-1:f(h(e,n));return t.utils.NaNtoZero(r)}).attr("height",function(e,n){return t.utils.NaNtoZero(Math.max(Math.abs(f(h(e,n))-f(0)),1))})}),w.renderEnd("historicalBar immediate"),k}return k.highlightPoint=function(t,e){l.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},k.clearHighlights=function(){l.select(".nv-bars .nv-bar.hover").classed("hover",!1)},k.dispatch=b,k.options=t.utils.optionsFunc.bind(k),k._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},forceX:{get:function(){return p},set:function(t){p=t}},forceY:{get:function(){return g},set:function(t){g=t}},padData:{get:function(){return v},set:function(t){v=t}},x:{get:function(){return d},set:function(t){d=t}},y:{get:function(){return h},set:function(t){h=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},clipEdge:{get:function(){return m},set:function(t){m=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return x},set:function(t){x=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return y},set:function(e){y=t.utils.getColor(e)}}}),t.utils.initOptions(k),k},t.models.historicalBarChart=function(e){"use strict";var n,r,i=e||t.models.historicalBar(),o=t.models.axis(),a=t.models.axis(),s=t.models.legend(),u=t.interactiveGuideline(),l=t.models.tooltip(),c={top:30,right:90,bottom:50,left:90},f=t.utils.defaultColor(),d=null,h=null,p=!1,g=!0,v=!0,m=!1,y=!1,b={},x=null,w=null,k=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),_=250;o.orient("bottom").tickPadding(7),a.orient(m?"right":"left"),l.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return a.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)});var M=t.utils.renderWatch(k,0);function S(e){return e.each(function(l){M.reset(),M.models(i),g&&M.models(o),v&&M.models(a);var w=d3.select(this),C=this;t.utils.initSVG(w);var A,D=t.utils.availableWidth(d,w,c),T=t.utils.availableHeight(h,w,c);if(S.update=function(){w.transition().duration(_).call(S)},S.container=this,b.disabled=l.map(function(t){return!!t.disabled}),!x)for(A in x={},b)x[A]=b[A]instanceof Array?b[A].slice(0):b[A];if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return t.utils.noData(S,w),S;w.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var L=w.selectAll("g.nv-wrap.nv-historicalBarChart").data([l]),E=L.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),N=L.select("g");E.append("g").attr("class","nv-x nv-axis"),E.append("g").attr("class","nv-y nv-axis"),E.append("g").attr("class","nv-barsWrap"),E.append("g").attr("class","nv-legendWrap"),E.append("g").attr("class","nv-interactive"),p&&(s.width(D),N.select(".nv-legendWrap").datum(l).call(s),c.top!=s.height()&&(c.top=s.height(),T=t.utils.availableHeight(h,w,c)),L.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")),L.attr("transform","translate("+c.left+","+c.top+")"),m&&N.select(".nv-y.nv-axis").attr("transform","translate("+D+",0)"),y&&(u.width(D).height(T).margin({left:c.left,top:c.top}).svgContainer(w).xScale(n),L.select(".nv-interactive").call(u)),i.width(D).height(T).color(l.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!l[e].disabled})),N.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled})).transition().call(i),g&&(o.scale(n)._ticks(t.utils.calcTicksX(D/100,l)).tickSize(-T,0),N.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),N.select(".nv-x.nv-axis").transition().call(o)),v&&(a.scale(r)._ticks(t.utils.calcTicksY(T/36,l)).tickSize(-D,0),N.select(".nv-y.nv-axis").transition().call(a)),u.dispatch.on("elementMousemove",function(e){i.clearHighlights();var n,r,s,d=[];l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(o,a){r=t.interactiveBisect(o.values,e.pointXValue,S.x()),i.highlightPoint(r,!0);var u=o.values[r];void 0!==u&&(void 0===n&&(n=u),void 0===s&&(s=S.xScale()(S.x()(u,r))),d.push({key:o.key,value:S.y()(u,r),color:f(o,o.seriesIndex),data:o.values[r]}))});var h=o.tickFormat()(S.x()(n,r));u.tooltip.position({left:s+c.left,top:e.mouseY+c.top}).chartContainer(C.parentNode).valueFormatter(function(t,e){return a.tickFormat()(t)}).data({value:h,index:r,series:d})(),u.renderGuideLine(s)}),u.dispatch.on("elementMouseout",function(t){k.tooltipHide(),i.clearHighlights()}),s.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,l.filter(function(t){return!t.disabled}).length||l.map(function(t){return t.disabled=!1,L.selectAll(".nv-series").classed("disabled",!1),t}),b.disabled=l.map(function(t){return!!t.disabled}),k.stateChange(b),e.transition().call(S)}),s.dispatch.on("legendDblclick",function(t){l.forEach(function(t){t.disabled=!0}),t.disabled=!1,b.disabled=l.map(function(t){return!!t.disabled}),k.stateChange(b),S.update()}),k.on("changeState",function(t){void 0!==t.disabled&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),b.disabled=t.disabled),S.update()})}),M.renderEnd("historicalBarChart immediate"),S}return i.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:S.x()(t.data),value:S.y()(t.data),color:t.color},l.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){l.position({top:d3.event.pageY,left:d3.event.pageX})()}),S.dispatch=k,S.bars=i,S.legend=s,S.xAxis=o,S.yAxis=a,S.interactiveLayer=u,S.tooltip=l,S.options=t.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},defaultState:{get:function(){return x},set:function(t){x=t}},noData:{get:function(){return w},set:function(t){w=t}},tooltips:{get:function(){return l.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),l.enabled(!!e)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),l.contentGenerator(e)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return f},set:function(e){f=t.utils.getColor(e),s.color(f),i.color(f)}},duration:{get:function(){return _},set:function(t){M.reset(_=t),a.duration(_),o.duration(_)}},rightAlignYAxis:{get:function(){return m},set:function(t){m=t,a.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return y},set:function(t){y=t,!0===t&&S.interactive(!1)}}}),t.utils.inheritOptions(S,i),t.utils.initOptions(S),S},t.models.ohlcBarChart=function(){var e=t.models.historicalBarChart(t.models.ohlcBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator(function(t){var n=t.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),e},t.models.candlestickBarChart=function(){var e=t.models.historicalBarChart(t.models.candlestickBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator(function(t){var n=t.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),e},t.models.legend=function(){"use strict";var e={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(t){return t.key},o=t.utils.getColor(),a=!0,s=32,u=!0,l=!0,c=!1,f=!1,d=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),h="classic";function p(g){function v(t,e){return"furious"!=h?"#000":f?t.disengaged?"#000":"#fff":f?void 0:(t.color||(t.color=o(t,e)),t.disabled?t.color:"#fff")}function m(t,e){return f&&"furious"==h&&t.disengaged?"#eee":t.color||o(t,e)}function y(t,e){return f&&"furious"==h?1:t.disabled?0:1}return g.each(function(o){var p=n-e.left-e.right,g=d3.select(this);t.utils.initSVG(g);var b=g.selectAll("g.nv-legend").data([o]),x=b.enter().append("g").attr("class","nvd3 nv-legend").append("g"),w=b.select("g");b.attr("transform","translate("+e.left+","+e.top+")");var k,_,M=w.selectAll(".nv-series").data(function(t){return"furious"!=h?t:t.filter(function(t){return!!f||!t.disengaged})}),S=M.enter().append("g").attr("class","nv-series");switch(h){case"furious":_=23;break;case"classic":_=20}"classic"==h?(S.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),k=M.select("circle")):"furious"==h&&(S.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),k=M.select(".nv-legend-symbol"),S.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),M.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",v(t,e))})),S.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var C=M.select("text.nv-legend-text");M.on("mouseover",function(t,e){d.legendMouseover(t,e)}).on("mouseout",function(t,e){d.legendMouseout(t,e)}).on("click",function(t,e){d.legendClick(t,e);var n=M.data();l&&("classic"==h?c?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1})):"furious"==h&&(f?(t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled):f||(t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1}))),d.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})}))}).on("dblclick",function(t,e){if(("furious"!=h||!f)&&(d.legendDblclick(t,e),l)){var n=M.data();n.forEach(function(t){t.disabled=!0,"furious"==h&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==h&&(t.userDisabled=t.disabled),d.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),M.classed("nv-disabled",function(t){return t.userDisabled}),M.exit().remove(),C.attr("fill",v).text(i);var A=0;if(a){var D=[];M.each(function(e,n){var r,i=d3.select(this).select("text");try{if((r=i.node().getComputedTextLength())<=0)throw Error()}catch(o){r=t.utils.calcApproxTextWidth(i)}D.push(r+s)});var T=0,L=[];for(A=0;A<p&&T<D.length;)L[T]=D[T],A+=D[T++];for(0===T&&(T=1);A>p&&T>1;){L=[],T--;for(var E=0;E<D.length;E++)D[E]>(L[E%T]||0)&&(L[E%T]=D[E]);A=L.reduce(function(t,e,n,r){return t+e})}for(var N=[],O=0,F=0;O<T;O++)N[O]=F,F+=L[O];M.attr("transform",function(t,e){return"translate("+N[e%T]+","+(5+Math.floor(e/T)*_)+")"}),w.attr("transform",u?"translate("+(n-e.right-A)+","+e.top+")":"translate(0,"+e.top+")"),r=e.top+e.bottom+Math.ceil(D.length/T)*_}else{var P,W=5,R=5,z=0;M.attr("transform",function(t,r){var i=d3.select(this).select("text").node().getComputedTextLength()+s;return n<e.left+e.right+(P=R)+i&&(R=P=5,W+=_),(R+=i)>z&&(z=R),A<P+z&&(A=P+z),"translate("+P+","+W+")"}),w.attr("transform","translate("+(n-e.right-z)+","+e.top+")"),r=e.top+e.bottom+W+15}"furious"==h&&(k.attr("width",function(t,e){return C[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),x.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),w.select(".nv-legend-bg").transition().duration(300).attr("x",-_).attr("width",A+_-12).attr("height",r+10).attr("y",-e.top-10).attr("opacity",f?1:0)),k.style("fill",m).style("fill-opacity",y).style("stroke",m)}),p}return p.dispatch=d,p.options=t.utils.optionsFunc.bind(p),p._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},key:{get:function(){return i},set:function(t){i=t}},align:{get:function(){return a},set:function(t){a=t}},rightAlign:{get:function(){return u},set:function(t){u=t}},padding:{get:function(){return s},set:function(t){s=t}},updateState:{get:function(){return l},set:function(t){l=t}},radioButtonMode:{get:function(){return c},set:function(t){c=t}},expanded:{get:function(){return f},set:function(t){f=t}},vers:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return o},set:function(e){o=t.utils.getColor(e)}}}),t.utils.initOptions(p),p},t.models.line=function(){"use strict";var e,n,r=t.models.scatter(),i={top:0,right:0,bottom:0,left:0},o=960,a=500,s=null,u=t.utils.defaultColor(),l=function(t){return t.x},c=function(t){return t.y},f=function(t,e){return!isNaN(c(t,e))&&null!==c(t,e)},d=function(t){return t.area},h=!1,p="linear",g=250,v=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");r.pointSize(16).pointDomain([16,256]);var m,y,b=t.utils.renderWatch(v,g);function x(g){return b.reset(),b.models(r),g.each(function(g){s=d3.select(this);var v=t.utils.availableWidth(o,s,i),x=t.utils.availableHeight(a,s,i);t.utils.initSVG(s),e=r.xScale(),n=r.yScale(),m=m||e,y=y||n;var w=s.selectAll("g.nv-wrap.nv-line").data([g]),k=w.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),_=k.append("defs"),M=k.append("g"),S=w.select("g");M.append("g").attr("class","nv-groups"),M.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+i.left+","+i.top+")"),r.width(v).height(x);var C=w.select(".nv-scatterWrap");C.call(r),_.append("clipPath").attr("id","nv-edge-clip-"+r.id()).append("rect"),w.select("#nv-edge-clip-"+r.id()+" rect").attr("width",v).attr("height",x>0?x:0),S.attr("clip-path",h?"url(#nv-edge-clip-"+r.id()+")":""),C.attr("clip-path",h?"url(#nv-edge-clip-"+r.id()+")":"");var A=w.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});A.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(t){return t.strokeWidth||1.5}).style("fill-opacity",1e-6),A.exit().remove(),A.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return u(t,e)}).style("stroke",function(t,e){return u(t,e)}),A.watchTransition(b,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(t){return t.fillOpacity||.5});var D=A.selectAll("path.nv-area").data(function(t){return d(t)?[t]:[]});D.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(p).defined(f).x(function(e,n){return t.utils.NaNtoZero(m(l(e,n)))}).y0(function(e,n){return t.utils.NaNtoZero(y(c(e,n)))}).y1(function(t,e){return y(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])}).apply(this,[e.values])}),A.exit().selectAll("path.nv-area").remove(),D.watchTransition(b,"line: areaPaths").attr("d",function(r){return d3.svg.area().interpolate(p).defined(f).x(function(n,r){return t.utils.NaNtoZero(e(l(n,r)))}).y0(function(e,r){return t.utils.NaNtoZero(n(c(e,r)))}).y1(function(t,e){return n(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])}).apply(this,[r.values])});var T=A.selectAll("path.nv-line").data(function(t){return[t.values]});T.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(f).x(function(e,n){return t.utils.NaNtoZero(m(l(e,n)))}).y(function(e,n){return t.utils.NaNtoZero(y(c(e,n)))})),T.watchTransition(b,"line: linePaths").attr("d",d3.svg.line().interpolate(p).defined(f).x(function(n,r){return t.utils.NaNtoZero(e(l(n,r)))}).y(function(e,r){return t.utils.NaNtoZero(n(c(e,r)))})),m=e.copy(),y=n.copy()}),b.renderEnd("line immediate"),x}return x.dispatch=v,x.scatter=r,r.dispatch.on("elementClick",function(){v.elementClick.apply(this,arguments)}),r.dispatch.on("elementMouseover",function(){v.elementMouseover.apply(this,arguments)}),r.dispatch.on("elementMouseout",function(){v.elementMouseout.apply(this,arguments)}),x.options=t.utils.optionsFunc.bind(x),x._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},defined:{get:function(){return f},set:function(t){f=t}},interpolate:{get:function(){return p},set:function(t){p=t}},clipEdge:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},duration:{get:function(){return g},set:function(t){b.reset(g=t),r.duration(g)}},isArea:{get:function(){return d},set:function(t){d=d3.functor(t)}},x:{get:function(){return l},set:function(t){l=t,r.x(t)}},y:{get:function(){return c},set:function(t){c=t,r.y(t)}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e),r.color(u)}}}),t.utils.inheritOptions(x,r),t.utils.initOptions(x),x},t.models.lineChart=function(){"use strict";var e,n,r=t.models.line(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),s=t.interactiveGuideline(),u=t.models.tooltip(),l={top:30,right:20,bottom:50,left:60},c=t.utils.defaultColor(),f=null,d=null,h=!0,p=!0,g=!0,v=!1,m=!1,y=t.utils.state(),b=null,x=null,w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),k=250;i.orient("bottom").tickPadding(7),o.orient(v?"right":"left"),u.valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)});var _=t.utils.renderWatch(w,k);function M(u){return _.reset(),_.models(r),p&&_.models(i),g&&_.models(o),u.each(function(u){var x=d3.select(this),_=this;t.utils.initSVG(x);var S,C=t.utils.availableWidth(f,x,l),A=t.utils.availableHeight(d,x,l);if(M.update=function(){0===k?x.call(M):x.transition().duration(k).call(M)},M.container=this,y.setter(function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}}(u),M.update).getter(function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}}(u)).update(),y.disabled=u.map(function(t){return!!t.disabled}),!b)for(S in b={},y)b[S]=y[S]instanceof Array?y[S].slice(0):y[S];if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return t.utils.noData(M,x),M;x.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale();var D=x.selectAll("g.nv-wrap.nv-lineChart").data([u]),T=D.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),L=D.select("g");T.append("rect").style("opacity",0),T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-linesWrap"),T.append("g").attr("class","nv-legendWrap"),T.append("g").attr("class","nv-interactive"),L.select("rect").attr("width",C).attr("height",A>0?A:0),h&&(a.width(C),L.select(".nv-legendWrap").datum(u).call(a),l.top!=a.height()&&(l.top=a.height(),A=t.utils.availableHeight(d,x,l)),D.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")),D.attr("transform","translate("+l.left+","+l.top+")"),v&&L.select(".nv-y.nv-axis").attr("transform","translate("+C+",0)"),m&&(s.width(C).height(A).margin({left:l.left,top:l.top}).svgContainer(x).xScale(e),D.select(".nv-interactive").call(s)),r.width(C).height(A).color(u.map(function(t,e){return t.color||c(t,e)}).filter(function(t,e){return!u[e].disabled})),L.select(".nv-linesWrap").datum(u.filter(function(t){return!t.disabled})).call(r),p&&(i.scale(e)._ticks(t.utils.calcTicksX(C/100,u)).tickSize(-A,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),L.select(".nv-x.nv-axis").call(i)),g&&(o.scale(n)._ticks(t.utils.calcTicksY(A/36,u)).tickSize(-C,0),L.select(".nv-y.nv-axis").call(o)),a.dispatch.on("stateChange",function(t){for(var e in t)y[e]=t[e];w.stateChange(y),M.update()}),s.dispatch.on("elementMousemove",function(e){r.clearHighlights();var n,a,f,d=[];if(u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i,o){a=t.interactiveBisect(i.values,e.pointXValue,M.x());var s=i.values[a],u=M.y()(s,a);null!=u&&r.highlightPoint(o,a,!0),void 0!==s&&(void 0===n&&(n=s),void 0===f&&(f=M.xScale()(M.x()(s,a))),d.push({key:i.key,value:u,color:c(i,i.seriesIndex)}))}),d.length>2){var h=M.yScale().invert(e.mouseY),p=.03*Math.abs(M.yScale().domain()[0]-M.yScale().domain()[1]),g=t.nearestValueIndex(d.map(function(t){return t.value}),h,p);null!==g&&(d[g].highlight=!0)}var v=i.tickFormat()(M.x()(n,a));s.tooltip.position({left:e.mouseX+l.left,top:e.mouseY+l.top}).chartContainer(_.parentNode).valueFormatter(function(t,e){return null==t?"N/A":o.tickFormat()(t)}).data({value:v,index:a,series:d})(),s.renderGuideLine(f)}),s.dispatch.on("elementClick",function(e){var n,i=[];u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(r){var o=t.interactiveBisect(r.values,e.pointXValue,M.x()),a=r.values[o];if(void 0!==a){void 0===n&&(n=M.xScale()(M.x()(a,o)));var s=M.yScale()(M.y()(a,o));i.push({point:a,pointIndex:o,pos:[n,s],seriesIndex:r.seriesIndex,series:r})}}),r.dispatch.elementClick(i)}),s.dispatch.on("elementMouseout",function(t){r.clearHighlights()}),w.on("changeState",function(t){void 0!==t.disabled&&u.length===t.disabled.length&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),y.disabled=t.disabled),M.update()})}),_.renderEnd("lineChart immediate"),M}return r.dispatch.on("elementMouseover.tooltip",function(t){u.data(t).position(t.pos).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0)}),M.dispatch=w,M.lines=r,M.legend=a,M.xAxis=i,M.yAxis=o,M.interactiveLayer=s,M.tooltip=u,M.dispatch=w,M.options=t.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return h},set:function(t){h=t}},showXAxis:{get:function(){return p},set:function(t){p=t}},showYAxis:{get:function(){return g},set:function(t){g=t}},defaultState:{get:function(){return b},set:function(t){b=t}},noData:{get:function(){return x},set:function(t){x=t}},tooltips:{get:function(){return u.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),u.enabled(!!e)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),u.contentGenerator(e)}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return k},set:function(t){_.reset(k=t),r.duration(k),i.duration(k),o.duration(k)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),a.color(c),r.color(c)}},rightAlignYAxis:{get:function(){return v},set:function(t){o.orient((v=t)?"right":"left")}},useInteractiveGuideline:{get:function(){return m},set:function(t){(m=t)&&(r.interactive(!1),r.useVoronoi(!1))}}}),t.utils.inheritOptions(M,r),t.utils.initOptions(M),M},t.models.linePlusBarChart=function(){"use strict";var e,n,r,i,o,a,s,u=t.models.line(),l=t.models.line(),c=t.models.historicalBar(),f=t.models.historicalBar(),d=t.models.axis(),h=t.models.axis(),p=t.models.axis(),g=t.models.axis(),v=t.models.axis(),m=t.models.axis(),y=t.models.legend(),b=d3.svg.brush(),x=t.models.tooltip(),w={top:30,right:30,bottom:30,left:60},k=null,_=null,M=function(t){return t.x},S=function(t){return t.y},C=t.utils.defaultColor(),A=!0,D=!0,T=!1,L=!0,E=50,N=null,O=null,F=d3.dispatch("brush","stateChange","changeState"),P=0,W=t.utils.state(),R=null,z=" (left axis)",I=" (right axis)";function H(x){return x.each(function(x){var O=d3.select(this);t.utils.initSVG(O);var Y,B=t.utils.availableWidth(k,O,w),j=t.utils.availableHeight(_,O,w)-(D?E:0),U=E-0-20;if(H.update=function(){O.transition().duration(P).call(H)},H.container=this,W.setter(function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}}(x),H.update).getter(function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}}(x)).update(),W.disabled=x.map(function(t){return!!t.disabled}),!R)for(Y in R={},W)R[Y]=W[Y]instanceof Array?W[Y].slice(0):W[Y];if(!(x&&x.length&&x.filter(function(t){return t.values.length}).length))return t.utils.noData(H,O),H;O.selectAll(".nv-noData").remove();var G=x.filter(function(t){return!t.disabled&&t.bar}),V=x.filter(function(t){return!t.bar});n=c.xScale(),r=h.scale(),i=c.yScale(),o=u.yScale(),a=f.yScale(),s=l.yScale();var q=x.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,e){return{x:M(t,e),y:S(t,e)}})}),$=x.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,e){return{x:M(t,e),y:S(t,e)}})});n.range([0,B]),r.domain(d3.extent(d3.merge(q.concat($)),function(t){return t.x})).range([0,B]);var X=O.selectAll("g.nv-wrap.nv-linePlusBar").data([x]),Z=X.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),K=X.select("g");Z.append("g").attr("class","nv-legendWrap");var Q=Z.append("g").attr("class","nv-focus");Q.append("g").attr("class","nv-x nv-axis"),Q.append("g").attr("class","nv-y1 nv-axis"),Q.append("g").attr("class","nv-y2 nv-axis"),Q.append("g").attr("class","nv-barsWrap"),Q.append("g").attr("class","nv-linesWrap");var J=Z.append("g").attr("class","nv-context");if(J.append("g").attr("class","nv-x nv-axis"),J.append("g").attr("class","nv-y1 nv-axis"),J.append("g").attr("class","nv-y2 nv-axis"),J.append("g").attr("class","nv-barsWrap"),J.append("g").attr("class","nv-linesWrap"),J.append("g").attr("class","nv-brushBackground"),J.append("g").attr("class","nv-x nv-brush"),A){var tt=y.align()?B/2:B,et=y.align()?tt:0;y.width(tt),K.select(".nv-legendWrap").datum(x.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?z:I),t})).call(y),w.top!=y.height()&&(w.top=y.height(),j=t.utils.availableHeight(_,O,w)-E),K.select(".nv-legendWrap").attr("transform","translate("+et+","+-w.top+")")}X.attr("transform","translate("+w.left+","+w.top+")"),K.select(".nv-context").style("display",D?"initial":"none"),f.width(B).height(U).color(x.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!x[e].disabled&&x[e].bar})),l.width(B).height(U).color(x.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!x[e].disabled&&!x[e].bar}));var nt=K.select(".nv-context .nv-barsWrap").datum(G.length?G:[{values:[]}]),rt=K.select(".nv-context .nv-linesWrap").datum(V[0].disabled?[{values:[]}]:V);K.select(".nv-context").attr("transform","translate(0,"+(j+w.bottom+0)+")"),nt.transition().call(f),rt.transition().call(l),L&&(h._ticks(t.utils.calcTicksX(B/100,x)).tickSize(-U,0),K.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),K.select(".nv-context .nv-x.nv-axis").transition().call(h)),T&&(v.scale(a)._ticks(U/36).tickSize(-B,0),m.scale(s)._ticks(U/36).tickSize(G.length?0:-B,0),K.select(".nv-context .nv-y3.nv-axis").style("opacity",G.length?1:0).attr("transform","translate(0,"+r.range()[0]+")"),K.select(".nv-context .nv-y2.nv-axis").style("opacity",V.length?1:0).attr("transform","translate("+r.range()[1]+",0)"),K.select(".nv-context .nv-y1.nv-axis").transition().call(v),K.select(".nv-context .nv-y2.nv-axis").transition().call(m)),b.x(r).on("brush",st),N&&b.extent(N);var it=K.select(".nv-brushBackground").selectAll("g").data([N||b.extent()]),ot=it.enter().append("g");ot.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",U),ot.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",U);var at=K.select(".nv-x.nv-brush").call(b);function st(){N=b.empty()?null:b.extent(),e=b.empty()?r.domain():b.extent(),F.brush({extent:e,brush:b}),b.empty()||b.extent(N),it.data([b.empty()?r.domain():N]).each(function(t,e){var n=r(t[0])-r.range()[0],i=r.range()[1]-r(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",i<0?0:i)}),c.width(B).height(j).color(x.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!x[e].disabled&&x[e].bar})),u.width(B).height(j).color(x.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!x[e].disabled&&!x[e].bar}));var a=K.select(".nv-focus .nv-barsWrap").datum(G.length?G.map(function(t,n){return{key:t.key,values:t.values.filter(function(t,n){return c.x()(t,n)>=e[0]&&c.x()(t,n)<=e[1]})}}):[{values:[]}]),s=K.select(".nv-focus .nv-linesWrap").datum(V[0].disabled?[{values:[]}]:V.map(function(t,n){return{area:t.area,fillOpacity:t.fillOpacity,key:t.key,values:t.values.filter(function(t,n){return u.x()(t,n)>=e[0]&&u.x()(t,n)<=e[1]})}}));n=G.length?c.xScale():u.xScale(),d.scale(n)._ticks(t.utils.calcTicksX(B/100,x)).tickSize(-j,0),d.domain([Math.ceil(e[0]),Math.floor(e[1])]),K.select(".nv-x.nv-axis").transition().duration(P).call(d),a.transition().duration(P).call(c),s.transition().duration(P).call(u),K.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),p.scale(i)._ticks(t.utils.calcTicksY(j/36,x)).tickSize(-B,0),g.scale(o)._ticks(t.utils.calcTicksY(j/36,x)).tickSize(G.length?0:-B,0),K.select(".nv-focus .nv-y1.nv-axis").style("opacity",G.length?1:0),K.select(".nv-focus .nv-y2.nv-axis").style("opacity",V.length&&!V[0].disabled?1:0).attr("transform","translate("+n.range()[1]+",0)"),K.select(".nv-focus .nv-y1.nv-axis").transition().duration(P).call(p),K.select(".nv-focus .nv-y2.nv-axis").transition().duration(P).call(g)}at.selectAll("rect").attr("height",U),at.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,r=U/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}),y.dispatch.on("stateChange",function(t){for(var e in t)W[e]=t[e];F.stateChange(W),H.update()}),F.on("changeState",function(t){void 0!==t.disabled&&(x.forEach(function(e,n){e.disabled=t.disabled[n]}),W.disabled=t.disabled),H.update()}),st()}),H}return u.clipEdge(!0),l.interactive(!1),d.orient("bottom").tickPadding(5),p.orient("left"),g.orient("right"),h.orient("bottom").tickPadding(5),v.orient("left"),m.orient("right"),x.headerEnabled(!0).headerFormatter(function(t,e){return d.tickFormat()(t,e)}),u.dispatch.on("elementMouseover.tooltip",function(t){x.duration(100).valueFormatter(function(t,e){return g.tickFormat()(t,e)}).data(t).position(t.pos).hidden(!1)}),u.dispatch.on("elementMouseout.tooltip",function(t){x.hidden(!0)}),c.dispatch.on("elementMouseover.tooltip",function(t){t.value=H.x()(t.data),t.series={value:H.y()(t.data),color:t.color},x.duration(0).valueFormatter(function(t,e){return p.tickFormat()(t,e)}).data(t).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(t){x.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(t){x.position({top:d3.event.pageY,left:d3.event.pageX})()}),H.dispatch=F,H.legend=y,H.lines=u,H.lines2=l,H.bars=c,H.bars2=f,H.xAxis=d,H.x2Axis=h,H.y1Axis=p,H.y2Axis=g,H.y3Axis=v,H.y4Axis=m,H.tooltip=x,H.options=t.utils.optionsFunc.bind(H),H._options=Object.create({},{width:{get:function(){return k},set:function(t){k=t}},height:{get:function(){return _},set:function(t){_=t}},showLegend:{get:function(){return A},set:function(t){A=t}},brushExtent:{get:function(){return N},set:function(t){N=t}},noData:{get:function(){return O},set:function(t){O=t}},focusEnable:{get:function(){return D},set:function(t){D=t}},focusHeight:{get:function(){return E},set:function(t){E=t}},focusShowAxisX:{get:function(){return L},set:function(t){L=t}},focusShowAxisY:{get:function(){return T},set:function(t){T=t}},legendLeftAxisHint:{get:function(){return z},set:function(t){z=t}},legendRightAxisHint:{get:function(){return I},set:function(t){I=t}},tooltips:{get:function(){return x.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),x.enabled(!!e)}},tooltipContent:{get:function(){return x.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),x.contentGenerator(e)}},margin:{get:function(){return w},set:function(t){w.top=void 0!==t.top?t.top:w.top,w.right=void 0!==t.right?t.right:w.right,w.bottom=void 0!==t.bottom?t.bottom:w.bottom,w.left=void 0!==t.left?t.left:w.left}},duration:{get:function(){return P},set:function(t){P=t}},color:{get:function(){return C},set:function(e){C=t.utils.getColor(e),y.color(C)}},x:{get:function(){return M},set:function(t){M=t,u.x(t),l.x(t),c.x(t),f.x(t)}},y:{get:function(){return S},set:function(t){S=t,u.y(t),l.y(t),c.y(t),f.y(t)}}}),t.utils.inheritOptions(H,u),t.utils.initOptions(H),H},t.models.lineWithFocusChart=function(){"use strict";var e,n,r,i,o=t.models.line(),a=t.models.line(),s=t.models.axis(),u=t.models.axis(),l=t.models.axis(),c=t.models.axis(),f=t.models.legend(),d=d3.svg.brush(),h=t.models.tooltip(),p=t.interactiveGuideline(),g={top:30,right:30,bottom:30,left:60},v=t.utils.defaultColor(),m=null,y=null,b=50,x=!1,w=!0,k=null,_=null,M=d3.dispatch("brush","stateChange","changeState"),S=250,C=t.utils.state(),A=null;function D(h){return h.each(function(h){var _=d3.select(this),T=this;t.utils.initSVG(_);var L,E=t.utils.availableWidth(m,_,g),N=t.utils.availableHeight(y,_,g)-b,O=b-0-20;if(D.update=function(){_.transition().duration(S).call(D)},D.container=this,C.setter(function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}}(h),D.update).getter(function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}}(h)).update(),C.disabled=h.map(function(t){return!!t.disabled}),!A)for(L in A={},C)A[L]=C[L]instanceof Array?C[L].slice(0):C[L];if(!(h&&h.length&&h.filter(function(t){return t.values.length}).length))return t.utils.noData(D,_),D;_.selectAll(".nv-noData").remove(),e=o.xScale(),n=o.yScale(),r=a.xScale(),i=a.yScale();var F=_.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([h]),P=F.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),W=F.select("g");P.append("g").attr("class","nv-legendWrap");var R=P.append("g").attr("class","nv-focus");R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-linesWrap"),R.append("g").attr("class","nv-interactive");var z=P.append("g").attr("class","nv-context");z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-linesWrap"),z.append("g").attr("class","nv-brushBackground"),z.append("g").attr("class","nv-x nv-brush"),w&&(f.width(E),W.select(".nv-legendWrap").datum(h).call(f),g.top!=f.height()&&(g.top=f.height(),N=t.utils.availableHeight(y,_,g)-b),W.select(".nv-legendWrap").attr("transform","translate(0,"+-g.top+")")),F.attr("transform","translate("+g.left+","+g.top+")"),x&&(p.width(E).height(N).margin({left:g.left,top:g.top}).svgContainer(_).xScale(e),F.select(".nv-interactive").call(p)),o.width(E).height(N).color(h.map(function(t,e){return t.color||v(t,e)}).filter(function(t,e){return!h[e].disabled})),a.defined(o.defined()).width(E).height(O).color(h.map(function(t,e){return t.color||v(t,e)}).filter(function(t,e){return!h[e].disabled})),W.select(".nv-context").attr("transform","translate(0,"+(N+g.bottom+0)+")");var I=W.select(".nv-context .nv-linesWrap").datum(h.filter(function(t){return!t.disabled}));d3.transition(I).call(a),s.scale(e)._ticks(t.utils.calcTicksX(E/100,h)).tickSize(-N,0),u.scale(n)._ticks(t.utils.calcTicksY(N/36,h)).tickSize(-E,0),W.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+N+")"),d.x(r).on("brush",function(){j()}),k&&d.extent(k);var H=W.select(".nv-brushBackground").selectAll("g").data([k||d.extent()]),Y=H.enter().append("g");Y.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",O),Y.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",O);var B=W.select(".nv-x.nv-brush").call(d);function j(){k=d.empty()?null:d.extent();var t=d.empty()?r.domain():d.extent();Math.abs(t[0]-t[1])<=1||(M.brush({extent:t,brush:d}),d.empty()||d.extent(k),H.data([d.empty()?r.domain():k]).each(function(t,n){var i=r(t[0])-e.range()[0],o=E-r(t[1]);d3.select(this).select(".left").attr("width",i<0?0:i),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",o<0?0:o)}),W.select(".nv-focus .nv-linesWrap").datum(h.filter(function(t){return!t.disabled}).map(function(e,n){return{key:e.key,area:e.area,values:e.values.filter(function(e,n){return o.x()(e,n)>=t[0]&&o.x()(e,n)<=t[1]})}})).transition().duration(S).call(o),W.select(".nv-focus .nv-x.nv-axis").transition().duration(S).call(s),W.select(".nv-focus .nv-y.nv-axis").transition().duration(S).call(u))}B.selectAll("rect").attr("height",O),B.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,r=O/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}),j(),l.scale(r)._ticks(t.utils.calcTicksX(E/100,h)).tickSize(-O,0),W.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(W.select(".nv-context .nv-x.nv-axis")).call(l),c.scale(i)._ticks(t.utils.calcTicksY(O/36,h)).tickSize(-E,0),d3.transition(W.select(".nv-context .nv-y.nv-axis")).call(c),W.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),f.dispatch.on("stateChange",function(t){for(var e in t)C[e]=t[e];M.stateChange(C),D.update()}),p.dispatch.on("elementMousemove",function(e){o.clearHighlights();var n,i,a,l=[];if(h.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(s,u){var c=d.empty()?r.domain():d.extent(),f=s.values.filter(function(t,e){return o.x()(t,e)>=c[0]&&o.x()(t,e)<=c[1]}),h=f[i=t.interactiveBisect(f,e.pointXValue,o.x())];null!=D.y()(h,i)&&o.highlightPoint(u,i,!0),void 0!==h&&(void 0===n&&(n=h),void 0===a&&(a=D.xScale()(D.x()(h,i))),l.push({key:s.key,value:D.y()(h,i),color:v(s,s.seriesIndex)}))}),l.length>2){var c=D.yScale().invert(e.mouseY),f=.03*Math.abs(D.yScale().domain()[0]-D.yScale().domain()[1]),m=t.nearestValueIndex(l.map(function(t){return t.value}),c,f);null!==m&&(l[m].highlight=!0)}var y=s.tickFormat()(D.x()(n,i));p.tooltip.position({left:e.mouseX+g.left,top:e.mouseY+g.top}).chartContainer(T.parentNode).valueFormatter(function(t,e){return null==t?"N/A":u.tickFormat()(t)}).data({value:y,index:i,series:l})(),p.renderGuideLine(a)}),p.dispatch.on("elementMouseout",function(t){o.clearHighlights()}),M.on("changeState",function(t){void 0!==t.disabled&&h.forEach(function(e,n){e.disabled=t.disabled[n]}),D.update()})}),D}return o.clipEdge(!0).duration(0),a.interactive(!1),s.orient("bottom").tickPadding(5),u.orient("left"),l.orient("bottom").tickPadding(5),c.orient("left"),h.valueFormatter(function(t,e){return u.tickFormat()(t,e)}).headerFormatter(function(t,e){return s.tickFormat()(t,e)}),o.dispatch.on("elementMouseover.tooltip",function(t){h.data(t).position(t.pos).hidden(!1)}),o.dispatch.on("elementMouseout.tooltip",function(t){h.hidden(!0)}),D.dispatch=M,D.legend=f,D.lines=o,D.lines2=a,D.xAxis=s,D.yAxis=u,D.x2Axis=l,D.y2Axis=c,D.interactiveLayer=p,D.tooltip=h,D.options=t.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return m},set:function(t){m=t}},height:{get:function(){return y},set:function(t){y=t}},focusHeight:{get:function(){return b},set:function(t){b=t}},showLegend:{get:function(){return w},set:function(t){w=t}},brushExtent:{get:function(){return k},set:function(t){k=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return _},set:function(t){_=t}},tooltips:{get:function(){return h.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),h.enabled(!!e)}},tooltipContent:{get:function(){return h.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),h.contentGenerator(e)}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},color:{get:function(){return v},set:function(e){v=t.utils.getColor(e),f.color(v)}},interpolate:{get:function(){return o.interpolate()},set:function(t){o.interpolate(t),a.interpolate(t)}},xTickFormat:{get:function(){return s.tickFormat()},set:function(t){s.tickFormat(t),l.tickFormat(t)}},yTickFormat:{get:function(){return u.tickFormat()},set:function(t){u.tickFormat(t),c.tickFormat(t)}},duration:{get:function(){return S},set:function(t){u.duration(S=t),c.duration(S),s.duration(S),l.duration(S)}},x:{get:function(){return o.x()},set:function(t){o.x(t),a.x(t)}},y:{get:function(){return o.y()},set:function(t){o.y(t),a.y(t)}},useInteractiveGuideline:{get:function(){return x},set:function(t){(x=t)&&(o.interactive(!1),o.useVoronoi(!1))}}}),t.utils.inheritOptions(D,o),t.utils.initOptions(D),D},t.models.multiBar=function(){"use strict";var e,n,r,i,o,a,s,u={top:0,right:0,bottom:0,left:0},l=960,c=500,f=d3.scale.ordinal(),d=d3.scale.linear(),h=Math.floor(1e4*Math.random()),p=null,g=function(t){return t.x},v=function(t){return t.y},m=[0],y=!0,b=!1,x="zero",w=t.utils.defaultColor(),k=!1,_=null,M=500,S=.1,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),A=t.utils.renderWatch(C,M),D=0;function T(L){return A.reset(),L.each(function(T){var L=l-u.left-u.right,E=c-u.top-u.bottom;p=d3.select(this),t.utils.initSVG(p);var N=0;if(k&&T.length&&(k=[{values:T[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),b){var O=d3.layout.stack().offset(x).values(function(t){return t.values}).y(v)(!T.length&&k?k:T);O.forEach(function(t,e){t.nonStackable?(T[e].nonStackableSeries=N++,O[e]=T[e]):e>0&&O[e-1].nonStackable&&O[e].values.map(function(t,n){t.y0-=O[e-1].values[n].y,t.y1=t.y0+t.y})}),T=O}T.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),b&&T[0].values.map(function(t,e){var n=0,r=0;T.map(function(t,i){if(!T[i].nonStackable){var o=t.values[e];o.size=Math.abs(o.y),o.y<0?(o.y1=r,r-=o.size):(o.y1=o.size+n,n+=o.size)}})});var F=n&&r?[]:T.map(function(t,e){return t.values.map(function(t,n){return{x:g(t,n),y:v(t,n),y0:t.y0,y1:t.y1,idx:e}})});f.domain(n||d3.merge(F).map(function(t){return t.x})).rangeBands(i||[0,L],S),d.domain(r||d3.extent(d3.merge(F).map(function(t){var e=t.y;return b&&!T[t.idx].nonStackable&&(e=t.y>0?t.y1:t.y1+t.y),e}).concat(m))).range(o||[E,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1])),a=a||f,s=s||d;var P=p.selectAll("g.nv-wrap.nv-multibar").data([T]),W=P.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),R=W.append("defs"),z=W.append("g"),I=P.select("g");z.append("g").attr("class","nv-groups"),P.attr("transform","translate("+u.left+","+u.top+")"),R.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect"),P.select("#nv-edge-clip-"+h+" rect").attr("width",L).attr("height",E),I.attr("clip-path",y?"url(#nv-edge-clip-"+h+")":"");var H=P.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});H.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var Y=A.transition(H.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,M)).attr("y",function(t,e,n){var r=s(0)||0;return b&&T[t.series]&&!T[t.series].nonStackable&&(r=s(t.y0)),r}).attr("height",0).remove();Y.delay&&Y.delay(function(t,e){return e*(M/(D+1))-e}),H.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return w(t,e)}).style("stroke",function(t,e){return w(t,e)}),H.style("stroke-opacity",1).style("fill-opacity",.75);var B=H.selectAll("rect.nv-bar").data(function(t){return k&&!T.length?k.values:t.values});B.exit().remove(),B.enter().append("rect").attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,e,n){return b&&!T[n].nonStackable?0:n*f.rangeBand()/T.length}).attr("y",function(t,e,n){return s(b&&!T[n].nonStackable?t.y0:0)||0}).attr("height",0).attr("width",function(t,e,n){return f.rangeBand()/(b&&!T[n].nonStackable?1:T.length)}).attr("transform",function(t,e){return"translate("+f(g(t,e))+",0)"}),B.style("fill",function(t,e,n){return w(t,n,e)}).style("stroke",function(t,e,n){return w(t,n,e)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),C.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),C.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){C.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){C.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){C.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),B.attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,e){return"translate("+f(g(t,e))+",0)"}),_&&(e||(e=T.map(function(){return!0})),B.style("fill",function(t,n,r){return d3.rgb(_(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}).style("stroke",function(t,n,r){return d3.rgb(_(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}));var j=B.watchTransition(A,"multibar",Math.min(250,M)).delay(function(t,e){return e*M/T[0].values.length});b?j.attr("y",function(t,e,n){return T[n].nonStackable?v(t,e)<0?d(0):d(0)-d(v(t,e))<-1?d(0)-1:d(v(t,e))||0:d(t.y1)}).attr("height",function(t,e,n){return T[n].nonStackable?Math.max(Math.abs(d(v(t,e))-d(0)),1)||0:Math.max(Math.abs(d(t.y+t.y0)-d(t.y0)),1)}).attr("x",function(t,e,n){var r=0;return T[n].nonStackable&&(r=t.series*f.rangeBand()/T.length,T.length!==N&&(r=T[n].nonStackableSeries*f.rangeBand()/(2*N))),r}).attr("width",function(t,e,n){if(T[n].nonStackable){var r=f.rangeBand()/N;return T.length!==N&&(r=f.rangeBand()/(2*N)),r}return f.rangeBand()}):j.attr("x",function(t,e){return t.series*f.rangeBand()/T.length}).attr("width",f.rangeBand()/T.length).attr("y",function(t,e){return v(t,e)<0?d(0):d(0)-d(v(t,e))<1?d(0)-1:d(v(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(d(v(t,e))-d(0)),1)||0}),a=f.copy(),s=d.copy(),T[0]&&T[0].values&&(D=T[0].values.length)}),A.renderEnd("multibar immediate"),T}return T.dispatch=C,T.options=t.utils.optionsFunc.bind(T),T._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return m},set:function(t){m=t}},stacked:{get:function(){return b},set:function(t){b=t}},stackOffset:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return y},set:function(t){y=t}},disabled:{get:function(){return e},set:function(t){e=t}},id:{get:function(){return h},set:function(t){h=t}},hideable:{get:function(){return k},set:function(t){k=t}},groupSpacing:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return M},set:function(t){A.reset(M=t)}},color:{get:function(){return w},set:function(e){w=t.utils.getColor(e)}},barColor:{get:function(){return _},set:function(e){_=e?t.utils.getColor(e):null}}}),t.utils.initOptions(T),T},t.models.multiBarChart=function(){"use strict";var e,n,r=t.models.multiBar(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),s=t.models.legend(),u=t.models.tooltip(),l={top:30,right:20,bottom:50,left:60},c=null,f=null,d=t.utils.defaultColor(),h=!0,p={},g=!0,v=!0,m=!0,y=!1,b=!0,x=!1,w=0,k=t.utils.state(),_=null,M=null,S=d3.dispatch("stateChange","changeState","renderEnd"),C=function(){return h?180:0},A=250;k.stacked=!1,r.stacked(!1),i.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(t){return t}),o.orient(y?"right":"left").tickFormat(d3.format(",.1f")),u.duration(0).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)}),s.updateState(!1);var D=t.utils.renderWatch(S),T=!1;function L(u){return D.reset(),D.models(r),v&&D.models(i),m&&D.models(o),u.each(function(u){var M=d3.select(this);t.utils.initSVG(M);var D,E=t.utils.availableWidth(c,M,l),N=t.utils.availableHeight(f,M,l);if(L.update=function(){0===A?M.call(L):M.transition().duration(A).call(L)},L.container=this,k.setter(function(t){return function(e){void 0!==e.stacked&&(T=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}}(u),L.update).getter(function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:T}}}(u)).update(),k.disabled=u.map(function(t){return!!t.disabled}),!_)for(D in _={},k)_[D]=k[D]instanceof Array?k[D].slice(0):k[D];if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return t.utils.noData(L,M),L;M.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale();var O=M.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([u]),F=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),P=O.select("g");if(F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis"),F.append("g").attr("class","nv-barsWrap"),F.append("g").attr("class","nv-legendWrap"),F.append("g").attr("class","nv-controlsWrap"),g&&(a.width(E-C()),P.select(".nv-legendWrap").datum(u).call(a),l.top!=a.height()&&(l.top=a.height(),N=t.utils.availableHeight(f,M,l)),P.select(".nv-legendWrap").attr("transform","translate("+C()+","+-l.top+")")),h){var W=[{key:p.grouped||"Grouped",disabled:r.stacked()},{key:p.stacked||"Stacked",disabled:!r.stacked()}];s.width(C()).color(["#444","#444","#444"]),P.select(".nv-controlsWrap").datum(W).attr("transform","translate(0,"+-l.top+")").call(s)}if(O.attr("transform","translate("+l.left+","+l.top+")"),y&&P.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),r.disabled(u.map(function(t){return t.disabled})).width(E).height(N).color(u.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!u[e].disabled})),P.select(".nv-barsWrap").datum(u.filter(function(t){return!t.disabled})).call(r),v){i.scale(e)._ticks(t.utils.calcTicksX(E/100,u)).tickSize(-N,0),P.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),P.select(".nv-x.nv-axis").call(i);var R=P.select(".nv-x.nv-axis > g").selectAll("g");if(R.selectAll("line, text").style("opacity",1),x){var z=function(t,e){return"translate("+t+","+e+")"};R.selectAll("text").attr("transform",function(t,e,n){return z(0,n%2==0?5:17)});var I=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;P.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return z(0,0===e||I%2!=0?17:5)})}b&&R.filter(function(t,e){return e%Math.ceil(u[0].values.length/(E/100))!=0}).selectAll("text, line").style("opacity",0),w&&R.selectAll(".tick text").attr("transform","rotate("+w+" 0,0)").style("text-anchor",w>0?"start":"end"),P.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}m&&(o.scale(n)._ticks(t.utils.calcTicksY(N/36,u)).tickSize(-E,0),P.select(".nv-y.nv-axis").call(o)),a.dispatch.on("stateChange",function(t){for(var e in t)k[e]=t[e];S.stateChange(k),L.update()}),s.dispatch.on("legendClick",function(t,e){if(t.disabled){switch(W=W.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":case p.grouped:r.stacked(!1);break;case"Stacked":case p.stacked:r.stacked(!0)}k.stacked=r.stacked(),S.stateChange(k),L.update()}}),S.on("changeState",function(t){void 0!==t.disabled&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),k.disabled=t.disabled),void 0!==t.stacked&&(r.stacked(t.stacked),k.stacked=t.stacked,T=t.stacked),L.update()})}),D.renderEnd("multibarchart immediate"),L}return r.dispatch.on("elementMouseover.tooltip",function(t){t.value=L.x()(t.data),t.series={key:t.data.key,value:L.y()(t.data),color:t.color},u.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(t){u.position({top:d3.event.pageY,left:d3.event.pageX})()}),L.dispatch=S,L.multibar=r,L.legend=a,L.controls=s,L.xAxis=i,L.yAxis=o,L.state=k,L.tooltip=u,L.options=t.utils.optionsFunc.bind(L),L._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return g},set:function(t){g=t}},showControls:{get:function(){return h},set:function(t){h=t}},controlLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return _},set:function(t){_=t}},noData:{get:function(){return M},set:function(t){M=t}},reduceXTicks:{get:function(){return b},set:function(t){b=t}},rotateLabels:{get:function(){return w},set:function(t){w=t}},staggerLabels:{get:function(){return x},set:function(t){x=t}},tooltips:{get:function(){return u.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),u.enabled(!!e)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),u.contentGenerator(e)}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return A},set:function(t){r.duration(A=t),i.duration(A),o.duration(A),D.reset(A)}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e),a.color(d)}},rightAlignYAxis:{get:function(){return y},set:function(t){o.orient((y=t)?"right":"left")}},barColor:{get:function(){return r.barColor},set:function(t){r.barColor(t),a.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),t.utils.inheritOptions(L,r),t.utils.initOptions(L),L},t.models.multiBarHorizontal=function(){"use strict";var e,n,r,i,o,a,s,u={top:0,right:0,bottom:0,left:0},l=960,c=500,f=Math.floor(1e4*Math.random()),d=null,h=d3.scale.ordinal(),p=d3.scale.linear(),g=function(t){return t.x},v=function(t){return t.y},m=function(t){return t.yErr},y=[0],b=t.utils.defaultColor(),x=null,w=!1,k=!1,_=60,M=.1,S=d3.format(",.2f"),C=250,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),D=t.utils.renderWatch(A,C);function T(f){return D.reset(),f.each(function(f){var C=l-u.left-u.right,T=c-u.top-u.bottom;d=d3.select(this),t.utils.initSVG(d),w&&(f=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(v)(f)),f.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),w&&f[0].values.map(function(t,e){var n=0,r=0;f.map(function(t){var i=t.values[e];i.size=Math.abs(i.y),i.y<0?(i.y1=r-i.size,r-=i.size):(i.y1=n,n+=i.size)})});var L=n&&r?[]:f.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:v(t,e),y0:t.y0,y1:t.y1}})});h.domain(n||d3.merge(L).map(function(t){return t.x})).rangeBands(i||[0,T],M),p.domain(r||d3.extent(d3.merge(L).map(function(t){return w?t.y>0?t.y1+t.y:t.y1:t.y}).concat(y))),p.range(k&&!w?o||[p.domain()[0]<0?_:0,C-(p.domain()[1]>0?_:0)]:o||[0,C]),a=a||h,s=s||d3.scale.linear().domain(p.domain()).range([p(0),p(0)]);var E=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([f]),N=E.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),O=(N.append("defs"),N.append("g"));E.select("g"),O.append("g").attr("class","nv-groups"),E.attr("transform","translate("+u.left+","+u.top+")");var F=E.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),F.exit().watchTransition(D,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),F.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return b(t,e)}).style("stroke",function(t,e){return b(t,e)}),F.watchTransition(D,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);var P=F.selectAll("g.nv-bar").data(function(t){return t.values});P.exit().remove();var W=P.enter().append("g").attr("transform",function(t,e,n){return"translate("+s(w?t.y0:0)+","+(w?0:n*h.rangeBand()/f.length+h(g(t,e)))+")"});W.append("rect").attr("width",0).attr("height",h.rangeBand()/(w?1:f.length)),P.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),A.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),A.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){A.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){A.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){A.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){A.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),m(f[0],0)&&(W.append("polyline"),P.select("polyline").attr("fill","none").attr("points",function(t,e){var n=m(t,e),r=.8*h.rangeBand()/(2*(w?1:f.length));return[[(n=(n=n.length?n:[-Math.abs(n),Math.abs(n)]).map(function(t){return p(t)-p(0)}))[0],-r],[n[0],r],[n[0],0],[n[1],0],[n[1],-r],[n[1],r]].map(function(t){return t.join(",")}).join(" ")}).attr("transform",function(t,e){var n=h.rangeBand()/(2*(w?1:f.length));return"translate("+(v(t,e)<0?0:p(v(t,e))-p(0))+", "+n+")"})),W.append("text"),k&&!w?(P.select("text").attr("text-anchor",function(t,e){return v(t,e)<0?"end":"start"}).attr("y",h.rangeBand()/(2*f.length)).attr("dy",".32em").text(function(t,e){var n=S(v(t,e)),r=m(t,e);return void 0===r?n:r.length?n+"+"+S(Math.abs(r[1]))+"-"+S(Math.abs(r[0])):n+"\xb1"+S(Math.abs(r))}),P.watchTransition(D,"multibarhorizontal: bars").select("text").attr("x",function(t,e){return v(t,e)<0?-4:p(v(t,e))-p(0)+4})):P.selectAll("text").text(""),P.selectAll("text.nv-bar-label").text(""),P.attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}),x&&(e||(e=f.map(function(){return!0})),P.style("fill",function(t,n,r){return d3.rgb(x(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}).style("stroke",function(t,n,r){return d3.rgb(x(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()})),w?P.watchTransition(D,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+p(t.y1)+","+h(g(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(p(v(t,e)+t.y0)-p(t.y0))}).attr("height",h.rangeBand()):P.watchTransition(D,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+(v(t,e)<0?p(v(t,e)):p(0))+","+(t.series*h.rangeBand()/f.length+h(g(t,e)))+")"}).select("rect").attr("height",h.rangeBand()/f.length).attr("width",function(t,e){return Math.max(Math.abs(p(v(t,e))-p(0)),1)}),a=h.copy(),s=p.copy()}),D.renderEnd("multibarHorizontal immediate"),T}return T.dispatch=A,T.options=t.utils.optionsFunc.bind(T),T._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return v},set:function(t){v=t}},yErr:{get:function(){return m},set:function(t){m=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return y},set:function(t){y=t}},stacked:{get:function(){return w},set:function(t){w=t}},showValues:{get:function(){return k},set:function(t){k=t}},disabled:{get:function(){return e},set:function(t){e=t}},id:{get:function(){return f},set:function(t){f=t}},valueFormat:{get:function(){return S},set:function(t){S=t}},valuePadding:{get:function(){return _},set:function(t){_=t}},groupSpacing:{get:function(){return M},set:function(t){M=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return C},set:function(t){D.reset(C=t)}},color:{get:function(){return b},set:function(e){b=t.utils.getColor(e)}},barColor:{get:function(){return x},set:function(e){x=e?t.utils.getColor(e):null}}}),t.utils.initOptions(T),T},t.models.multiBarHorizontalChart=function(){"use strict";var e,n,r=t.models.multiBarHorizontal(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend().height(30),s=t.models.legend().height(30),u=t.models.tooltip(),l={top:30,right:20,bottom:50,left:60},c=null,f=null,d=t.utils.defaultColor(),h=!0,p={},g=!0,v=!0,m=!0,y=!1,b=t.utils.state(),x=null,w=null,k=d3.dispatch("stateChange","changeState","renderEnd"),_=function(){return h?180:0},M=250;b.stacked=!1,r.stacked(y),i.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(t){return t}),o.orient("bottom").tickFormat(d3.format(",.1f")),u.duration(0).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)}),s.updateState(!1);var S=t.utils.renderWatch(k,M);function C(u){return S.reset(),S.models(r),v&&S.models(i),m&&S.models(o),u.each(function(u){var w=d3.select(this);t.utils.initSVG(w);var S,A=t.utils.availableWidth(c,w,l),D=t.utils.availableHeight(f,w,l);if(C.update=function(){w.transition().duration(M).call(C)},C.container=this,y=r.stacked(),b.setter(function(t){return function(e){void 0!==e.stacked&&(y=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}}(u),C.update).getter(function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:y}}}(u)).update(),b.disabled=u.map(function(t){return!!t.disabled}),!x)for(S in x={},b)x[S]=b[S]instanceof Array?b[S].slice(0):b[S];if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return t.utils.noData(C,w),C;w.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale();var T=w.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([u]),L=T.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),E=T.select("g");if(L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),L.append("g").attr("class","nv-barsWrap"),L.append("g").attr("class","nv-legendWrap"),L.append("g").attr("class","nv-controlsWrap"),g&&(a.width(A-_()),E.select(".nv-legendWrap").datum(u).call(a),l.top!=a.height()&&(l.top=a.height(),D=t.utils.availableHeight(f,w,l)),E.select(".nv-legendWrap").attr("transform","translate("+_()+","+-l.top+")")),h){var N=[{key:p.grouped||"Grouped",disabled:r.stacked()},{key:p.stacked||"Stacked",disabled:!r.stacked()}];s.width(_()).color(["#444","#444","#444"]),E.select(".nv-controlsWrap").datum(N).attr("transform","translate(0,"+-l.top+")").call(s)}T.attr("transform","translate("+l.left+","+l.top+")"),r.disabled(u.map(function(t){return t.disabled})).width(A).height(D).color(u.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!u[e].disabled})),E.select(".nv-barsWrap").datum(u.filter(function(t){return!t.disabled})).transition().call(r),v&&(i.scale(e)._ticks(t.utils.calcTicksY(D/24,u)).tickSize(-A,0),E.select(".nv-x.nv-axis").call(i),E.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text")),m&&(o.scale(n)._ticks(t.utils.calcTicksX(A/100,u)).tickSize(-D,0),E.select(".nv-y.nv-axis").attr("transform","translate(0,"+D+")"),E.select(".nv-y.nv-axis").call(o)),E.select(".nv-zeroLine line").attr("x1",n(0)).attr("x2",n(0)).attr("y1",0).attr("y2",-D),a.dispatch.on("stateChange",function(t){for(var e in t)b[e]=t[e];k.stateChange(b),C.update()}),s.dispatch.on("legendClick",function(t,e){if(t.disabled){switch(N=N.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":r.stacked(!1);break;case"Stacked":r.stacked(!0)}b.stacked=r.stacked(),k.stateChange(b),y=r.stacked(),C.update()}}),k.on("changeState",function(t){void 0!==t.disabled&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),b.disabled=t.disabled),void 0!==t.stacked&&(r.stacked(t.stacked),b.stacked=t.stacked,y=t.stacked),C.update()})}),S.renderEnd("multibar horizontal chart immediate"),C}return r.dispatch.on("elementMouseover.tooltip",function(t){t.value=C.x()(t.data),t.series={key:t.data.key,value:C.y()(t.data),color:t.color},u.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(t){u.position({top:d3.event.pageY,left:d3.event.pageX})()}),C.dispatch=k,C.multibar=r,C.legend=a,C.controls=s,C.xAxis=i,C.yAxis=o,C.state=b,C.tooltip=u,C.options=t.utils.optionsFunc.bind(C),C._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return g},set:function(t){g=t}},showControls:{get:function(){return h},set:function(t){h=t}},controlLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return x},set:function(t){x=t}},noData:{get:function(){return w},set:function(t){w=t}},tooltips:{get:function(){return u.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),u.enabled(!!e)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),u.contentGenerator(e)}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return M},set:function(t){S.reset(M=t),r.duration(M),i.duration(M),o.duration(M)}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e),a.color(d)}},barColor:{get:function(){return r.barColor},set:function(t){r.barColor(t),a.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),t.utils.inheritOptions(C,r),t.utils.initOptions(C),C},t.models.multiChart=function(){"use strict";var e,n,r={top:30,right:20,bottom:50,left:60},i=t.utils.defaultColor(),o=null,a=null,s=!0,u=null,l=function(t){return t.x},c=function(t){return t.y},f="monotone",d=!0,h=d3.scale.linear(),p=d3.scale.linear(),g=d3.scale.linear(),v=t.models.line().yScale(p),m=t.models.line().yScale(g),y=t.models.multiBar().stacked(!1).yScale(p),b=t.models.multiBar().stacked(!1).yScale(g),x=t.models.stackedArea().yScale(p),w=t.models.stackedArea().yScale(g),k=t.models.axis().scale(h).orient("bottom").tickPadding(5),_=t.models.axis().scale(p).orient("left"),M=t.models.axis().scale(g).orient("right"),S=t.models.legend().height(30),C=t.models.tooltip(),A=d3.dispatch();function D(u){return u.each(function(u){var l=d3.select(this);t.utils.initSVG(l),D.update=function(){l.transition().call(D)},D.container=this;var c=t.utils.availableWidth(o,l,r),d=t.utils.availableHeight(a,l,r),A=u.filter(function(t){return"line"==t.type&&1==t.yAxis}),T=u.filter(function(t){return"line"==t.type&&2==t.yAxis}),L=u.filter(function(t){return"bar"==t.type&&1==t.yAxis}),E=u.filter(function(t){return"bar"==t.type&&2==t.yAxis}),N=u.filter(function(t){return"area"==t.type&&1==t.yAxis}),O=u.filter(function(t){return"area"==t.type&&2==t.yAxis});if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return t.utils.noData(D,l),D;l.selectAll(".nv-noData").remove();var F=u.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})}),P=u.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})});h.domain(d3.extent(d3.merge(F.concat(P)),function(t){return t.x})).range([0,c]);var W=l.selectAll("g.wrap.multiChart").data([u]),R=W.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y1 nv-axis"),R.append("g").attr("class","nv-y2 nv-axis"),R.append("g").attr("class","lines1Wrap"),R.append("g").attr("class","lines2Wrap"),R.append("g").attr("class","bars1Wrap"),R.append("g").attr("class","bars2Wrap"),R.append("g").attr("class","stack1Wrap"),R.append("g").attr("class","stack2Wrap"),R.append("g").attr("class","legendWrap");var z=W.select("g"),I=u.map(function(t,e){return u[e].color||i(t,e)});if(s){var H=S.align()?c/2:c,Y=S.align()?H:0;S.width(H),S.color(I),z.select(".legendWrap").datum(u.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call(S),r.top!=S.height()&&(r.top=S.height(),d=t.utils.availableHeight(a,l,r)),z.select(".legendWrap").attr("transform","translate("+Y+","+-r.top+")")}v.width(c).height(d).interpolate(f).color(I.filter(function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"line"==u[e].type})),m.width(c).height(d).interpolate(f).color(I.filter(function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"line"==u[e].type})),y.width(c).height(d).color(I.filter(function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"bar"==u[e].type})),b.width(c).height(d).color(I.filter(function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"bar"==u[e].type})),x.width(c).height(d).color(I.filter(function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"area"==u[e].type})),w.width(c).height(d).color(I.filter(function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"area"==u[e].type})),z.attr("transform","translate("+r.left+","+r.top+")");var B=z.select(".lines1Wrap").datum(A.filter(function(t){return!t.disabled})),j=z.select(".bars1Wrap").datum(L.filter(function(t){return!t.disabled})),U=z.select(".stack1Wrap").datum(N.filter(function(t){return!t.disabled})),G=z.select(".lines2Wrap").datum(T.filter(function(t){return!t.disabled})),V=z.select(".bars2Wrap").datum(E.filter(function(t){return!t.disabled})),q=z.select(".stack2Wrap").datum(O.filter(function(t){return!t.disabled})),$=N.length?N.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],X=O.length?O.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];function Z(t){var e=2===u[t.seriesIndex].yAxis?M:_;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color},C.duration(100).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).position(t.pos).hidden(!1)}function K(t){var e=2===u[t.seriesIndex].yAxis?M:_;t.point.x=x.x()(t.point),t.point.y=x.y()(t.point),C.duration(100).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).position(t.pos).hidden(!1)}function Q(t){var e=2===u[t.data.series].yAxis?M:_;t.value=y.x()(t.data),t.series={value:y.y()(t.data),color:t.color},C.duration(0).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}p.domain(e||d3.extent(d3.merge(F).concat($),function(t){return t.y})).range([0,d]),g.domain(n||d3.extent(d3.merge(P).concat(X),function(t){return t.y})).range([0,d]),v.yDomain(p.domain()),y.yDomain(p.domain()),x.yDomain(p.domain()),m.yDomain(g.domain()),b.yDomain(g.domain()),w.yDomain(g.domain()),N.length&&d3.transition(U).call(x),O.length&&d3.transition(q).call(w),L.length&&d3.transition(j).call(y),E.length&&d3.transition(V).call(b),A.length&&d3.transition(B).call(v),T.length&&d3.transition(G).call(m),k._ticks(t.utils.calcTicksX(c/100,u)).tickSize(-d,0),z.select(".nv-x.nv-axis").attr("transform","translate(0,"+d+")"),d3.transition(z.select(".nv-x.nv-axis")).call(k),_._ticks(t.utils.calcTicksY(d/36,u)).tickSize(-c,0),d3.transition(z.select(".nv-y1.nv-axis")).call(_),M._ticks(t.utils.calcTicksY(d/36,u)).tickSize(-c,0),d3.transition(z.select(".nv-y2.nv-axis")).call(M),z.select(".nv-y1.nv-axis").classed("nv-disabled",!F.length).attr("transform","translate("+h.range()[0]+",0)"),z.select(".nv-y2.nv-axis").classed("nv-disabled",!P.length).attr("transform","translate("+h.range()[1]+",0)"),S.dispatch.on("stateChange",function(t){D.update()}),v.dispatch.on("elementMouseover.tooltip",Z),m.dispatch.on("elementMouseover.tooltip",Z),v.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),m.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),x.dispatch.on("elementMouseover.tooltip",K),w.dispatch.on("elementMouseover.tooltip",K),x.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),w.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),y.dispatch.on("elementMouseover.tooltip",Q),b.dispatch.on("elementMouseover.tooltip",Q),y.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),b.dispatch.on("elementMouseout.tooltip",function(t){C.hidden(!0)}),y.dispatch.on("elementMousemove.tooltip",function(t){C.position({top:d3.event.pageY,left:d3.event.pageX})()}),b.dispatch.on("elementMousemove.tooltip",function(t){C.position({top:d3.event.pageY,left:d3.event.pageX})()})}),D}return D.dispatch=A,D.lines1=v,D.lines2=m,D.bars1=y,D.bars2=b,D.stack1=x,D.stack2=w,D.xAxis=k,D.yAxis1=_,D.yAxis2=M,D.tooltip=C,D.options=t.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},showLegend:{get:function(){return s},set:function(t){s=t}},yDomain1:{get:function(){return e},set:function(t){e=t}},yDomain2:{get:function(){return n},set:function(t){n=t}},noData:{get:function(){return u},set:function(t){u=t}},interpolate:{get:function(){return f},set:function(t){f=t}},tooltips:{get:function(){return C.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),C.enabled(!!e)}},tooltipContent:{get:function(){return C.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),C.contentGenerator(e)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},color:{get:function(){return i},set:function(e){i=t.utils.getColor(e)}},x:{get:function(){return l},set:function(t){l=t,v.x(t),m.x(t),y.x(t),b.x(t),x.x(t),w.x(t)}},y:{get:function(){return c},set:function(t){c=t,v.y(t),m.y(t),x.y(t),w.y(t),y.y(t),b.y(t)}},useVoronoi:{get:function(){return d},set:function(t){d=t,v.useVoronoi(t),m.useVoronoi(t),x.useVoronoi(t),w.useVoronoi(t)}}}),t.utils.initOptions(D),D},t.models.ohlcBar=function(){"use strict";var e,n,r,i,o={top:0,right:0,bottom:0,left:0},a=null,s=null,u=Math.floor(1e4*Math.random()),l=null,c=d3.scale.linear(),f=d3.scale.linear(),d=function(t){return t.x},h=function(t){return t.y},p=function(t){return t.open},g=function(t){return t.close},v=function(t){return t.high},m=function(t){return t.low},y=[],b=[],x=!1,w=!0,k=t.utils.defaultColor(),_=!1,M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function S(_){return _.each(function(_){l=d3.select(this);var S=t.utils.availableWidth(a,l,o),C=t.utils.availableHeight(s,l,o);t.utils.initSVG(l);var A=S/_[0].values.length*.9;c.domain(e||d3.extent(_[0].values.map(d).concat(y))),c.range(x?r||[.5*S/_[0].values.length,S*(_[0].values.length-.5)/_[0].values.length]:r||[5+A/2,S-A/2-5]),f.domain(n||[d3.min(_[0].values.map(m).concat(b)),d3.max(_[0].values.map(v).concat(b))]).range(i||[C,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var D=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([_[0].values]),T=D.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),L=T.append("defs"),E=T.append("g"),N=D.select("g");E.append("g").attr("class","nv-ticks"),D.attr("transform","translate("+o.left+","+o.top+")"),l.on("click",function(t,e){M.chartClick({data:t,index:e,pos:d3.event,id:u})}),L.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),D.select("#nv-chart-clip-path-"+u+" rect").attr("width",S).attr("height",C),N.attr("clip-path",w?"url(#nv-chart-clip-path-"+u+")":"");var O=D.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});O.exit().remove(),O.enter().append("path").attr("class",function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(t,e){return"m0,0l0,"+(f(p(t,e))-f(v(t,e)))+"l"+-A/2+",0l"+A/2+",0l0,"+(f(m(t,e))-f(p(t,e)))+"l0,"+(f(g(t,e))-f(m(t,e)))+"l"+A/2+",0l"+-A/2+",0z"}).attr("transform",function(t,e){return"translate("+c(d(t,e))+","+f(v(t,e))+")"}).attr("fill",function(t,e){return k[0]}).attr("stroke",function(t,e){return k[0]}).attr("x",0).attr("y",function(t,e){return f(Math.max(0,h(t,e)))}).attr("height",function(t,e){return Math.abs(f(h(t,e))-f(0))}),O.attr("class",function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(O).attr("transform",function(t,e){return"translate("+c(d(t,e))+","+f(v(t,e))+")"}).attr("d",function(t,e){var n=S/_[0].values.length*.9;return"m0,0l0,"+(f(p(t,e))-f(v(t,e)))+"l"+-n/2+",0l"+n/2+",0l0,"+(f(m(t,e))-f(p(t,e)))+"l0,"+(f(g(t,e))-f(m(t,e)))+"l"+n/2+",0l"+-n/2+",0z"})}),S}return S.highlightPoint=function(t,e){S.clearHighlights(),l.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",e)},S.clearHighlights=function(){l.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},S.dispatch=M,S.options=t.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return _},set:function(t){_=t}},x:{get:function(){return d},set:function(t){d=t}},y:{get:function(){return h},set:function(t){h=t}},open:{get:function(){return p()},set:function(t){p=t}},close:{get:function(){return g()},set:function(t){g=t}},high:{get:function(){return v},set:function(t){v=t}},low:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return o},set:function(t){o.top=null!=t.top?t.top:o.top,o.right=null!=t.right?t.right:o.right,o.bottom=null!=t.bottom?t.bottom:o.bottom,o.left=null!=t.left?t.left:o.left}},color:{get:function(){return k},set:function(e){k=t.utils.getColor(e)}}}),t.utils.initOptions(S),S},t.models.parallelCoordinates=function(){"use strict";var e={top:30,right:0,bottom:10,left:0},n=null,r=null,i=d3.scale.ordinal(),o={},a=[],s=[],u=t.utils.defaultColor(),l=[],c=[],f=[],d=1,h=d3.dispatch("brush","elementMouseover","elementMouseout");function p(g){return g.each(function(p){var g=d3.select(this),v=t.utils.availableWidth(n,g,e),m=t.utils.availableHeight(r,g,e);t.utils.initSVG(g),c=p,i.rangePoints([0,v],1).domain(a);var y={};a.forEach(function(t){var e=d3.extent(p,function(e){return+e[t]});return y[t]=!1,void 0===e[0]&&(y[t]=!0,e[0]=0,e[1]=0),e[0]===e[1]&&(e[0]=e[0]-1,e[1]=e[1]+1),o[t]=d3.scale.linear().domain(e).range([.9*(m-12),0]),o[t].brush=d3.svg.brush().y(o[t]).on("brush",P),"name"!=t});var b=g.selectAll("g.nv-wrap.nv-parallelCoordinates").data([p]),x=b.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),w=b.select("g");x.append("g").attr("class","nv-parallelCoordinates background"),x.append("g").attr("class","nv-parallelCoordinates foreground"),x.append("g").attr("class","nv-parallelCoordinates missingValuesline"),b.attr("transform","translate("+e.left+","+e.top+")");var k,_,M=d3.svg.line().interpolate("cardinal").tension(d),S=d3.svg.axis().orient("left"),C=d3.behavior.drag().on("dragstart",function(t,e){f[t]=this.parentNode.__origin__=i(t),L.attr("visibility","hidden")}).on("drag",function(t,e){f[t]=Math.min(v,Math.max(0,this.parentNode.__origin__+=d3.event.x)),E.attr("d",F),a.sort(function(t,e){return W(t)-W(e)}),i.domain(a),N.attr("transform",function(t){return"translate("+W(t)+")"})}).on("dragend",function(t,e){delete this.parentNode.__origin__,delete f[t],d3.select(this.parentNode).attr("transform","translate("+i(t)+")"),E.attr("d",F),L.attr("d",F).attr("visibility",null)}),A=i.range()[1]-i.range()[0],D=[],T=[0+A/2,m-12,v-A/2,m-12];(k=b.select(".missingValuesline").selectAll("line").data([T])).enter().append("line"),k.exit().remove(),k.attr("x1",function(t){return t[0]}).attr("y1",function(t){return t[1]}).attr("x2",function(t){return t[2]}).attr("y2",function(t){return t[3]}),(_=b.select(".missingValuesline").selectAll("text").data(["undefined values"])).append("text").data(["undefined values"]),_.enter().append("text"),_.exit().remove(),_.attr("y",m).attr("x",v-92-A/2).text(function(t){return t});var L=b.select(".background").selectAll("path").data(p);L.enter().append("path"),L.exit().remove(),L.attr("d",F);var E=b.select(".foreground").selectAll("path").data(p);E.enter().append("path"),E.exit().remove(),E.attr("d",F).attr("stroke",u),E.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),h.elementMouseover({label:t.name,data:t.data,index:e,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})}),E.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),h.elementMouseout({label:t.name,data:t.data,index:e})});var N=w.selectAll(".dimension").data(a),O=N.enter().append("g").attr("class","nv-parallelCoordinates dimension");function F(t){return M(a.map(function(e){if(isNaN(t[e])||isNaN(parseFloat(t[e]))){var n=o[e].domain(),r=o[e].range(),a=n[0]-(n[1]-n[0])/9;if(D.indexOf(e)<0){var s=d3.scale.linear().domain([a,n[1]]).range([m-12,r[1]]);o[e].brush.y(s),D.push(e)}return[i(e),o[e](a)]}return D.length>0?(k.style("display","inline"),_.style("display","inline")):(k.style("display","none"),_.style("display","none")),[i(e),o[e](t[e])]}))}function P(){var t=a.filter(function(t){return!o[t].brush.empty()}),e=t.map(function(t){return o[t].brush.extent()});l=[],t.forEach(function(t,n){l[n]={dimension:t,extent:e[n]}}),c=[],E.style("display",function(n){var r=t.every(function(t,r){return!(!isNaN(n[t])||e[r][0]!=o[t].brush.y().domain()[0])||e[r][0]<=n[t]&&n[t]<=e[r][1]});return r&&c.push(n),r?null:"none"}),h.brush({filters:l,active:c})}function W(t){var e=f[t];return null==e?i(t):e}O.append("g").attr("class","nv-parallelCoordinates nv-axis"),O.append("g").attr("class","nv-parallelCoordinates-brush"),O.append("text").attr("class","nv-parallelCoordinates nv-label"),N.attr("transform",function(t){return"translate("+i(t)+",0)"}),N.exit().remove(),N.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(t,e){h.elementMouseover({dim:t,pos:[d3.mouse(this.parentNode.parentNode)[0],d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(t,e){h.elementMouseout({dim:t})}).call(C),N.select(".nv-axis").each(function(t,e){d3.select(this).call(S.scale(o[t]).tickFormat(d3.format(s[e])))}),N.select(".nv-parallelCoordinates-brush").each(function(t){d3.select(this).call(o[t].brush)}).selectAll("rect").attr("x",-8).attr("width",16)}),p}return p.dispatch=h,p.options=t.utils.optionsFunc.bind(p),p._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},dimensionNames:{get:function(){return a},set:function(t){a=t}},dimensionFormats:{get:function(){return s},set:function(t){s=t}},lineTension:{get:function(){return d},set:function(t){d=t}},dimensions:{get:function(){return a},set:function(e){t.deprecated("dimensions","use dimensionNames instead"),a=e}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e)}}}),t.utils.initOptions(p),p},t.models.pie=function(){"use strict";var e={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(t){return t.x},o=function(t){return t.y},a=Math.floor(1e4*Math.random()),s=null,u=t.utils.defaultColor(),l=d3.format(",.2f"),c=!0,f=!1,d="key",h=.02,p=!1,g=!1,v=!0,m=0,y=!1,b=!1,x=!1,w=!1,k=0,_=.5,M=[],S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),C=[],A=[],D=t.utils.renderWatch(S);function T(L){return D.reset(),L.each(function(T){var L=n-e.left-e.right,E=r-e.top-e.bottom,N=Math.min(L,E)/2,O=[],F=[];if(s=d3.select(this),0===M.length)for(var P=N-N/5,W=_*N,R=0;R<T[0].length;R++)O.push(P),F.push(W);else O=M.map(function(t){return(t.outer-t.outer/5)*N}),F=M.map(function(t){return(t.inner-t.inner/5)*N}),_=d3.min(M.map(function(t){return t.inner-t.inner/5}));t.utils.initSVG(s);var z=s.selectAll(".nv-wrap.nv-pie").data(T),I=z.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a).append("g"),H=z.select("g"),Y=I.append("g").attr("class","nv-pie");for(I.append("g").attr("class","nv-pieLabels"),z.attr("transform","translate("+e.left+","+e.top+")"),H.select(".nv-pie").attr("transform","translate("+L/2+","+E/2+")"),H.select(".nv-pieLabels").attr("transform","translate("+L/2+","+E/2+")"),s.on("click",function(t,e){S.chartClick({data:t,index:e,pos:d3.event,id:a})}),C=[],A=[],R=0;R<T[0].length;R++){var B=d3.svg.arc().outerRadius(O[R]),j=d3.svg.arc().outerRadius(O[R]+5);!1!==b&&(B.startAngle(b),j.startAngle(b)),!1!==w&&(B.endAngle(w),j.endAngle(w)),p&&(B.innerRadius(F[R]),j.innerRadius(F[R])),B.cornerRadius&&k&&(B.cornerRadius(k),j.cornerRadius(k)),C.push(B),A.push(j)}var U=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:o(t)});U.padAngle&&x&&U.padAngle(x),p&&g&&(Y.append("text").attr("class","nv-pie-title"),z.select(".nv-pie-title").style("text-anchor","middle").text(function(t){return g}).style("font-size",Math.min(L,E)*_*2/(g.length+2)+"px").attr("dy","0.35em").attr("transform",function(t,e){return"translate(0, "+m+")"}));var G=z.select(".nv-pie").selectAll(".nv-slice").data(U),V=z.select(".nv-pieLabels").selectAll(".nv-label").data(U);G.exit().remove(),V.exit().remove();var q=G.enter().append("g");if(q.attr("class","nv-slice"),q.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),v&&d3.select(this).select("path").transition().duration(70).attr("d",A[e]),S.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill")})}),q.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),v&&d3.select(this).select("path").transition().duration(50).attr("d",C[e]),S.elementMouseout({data:t.data,index:e})}),q.on("mousemove",function(t,e){S.elementMousemove({data:t.data,index:e})}),q.on("click",function(t,e){S.elementClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),q.on("dblclick",function(t,e){S.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),G.attr("fill",function(t,e){return u(t.data,e)}),G.attr("stroke",function(t,e){return u(t.data,e)}),q.append("path").each(function(t){this._current=t}),G.select("path").transition().attr("d",function(t,e){return C[e](t)}).attrTween("d",function(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,p||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return C[e](n(t))}}),c){var $=[];for(R=0;R<T[0].length;R++)$.push(C[R]),f?p&&($[R]=d3.svg.arc().outerRadius(C[R].outerRadius()),!1!==b&&$[R].startAngle(b),!1!==w&&$[R].endAngle(w)):p||$[R].innerRadius(0);V.enter().append("g").classed("nv-label",!0).each(function(t,e){var n=d3.select(this);n.attr("transform",function(t,e){if(y){t.outerRadius=O[e]+10,t.innerRadius=O[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+$[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=N+10,t.innerRadius=N+15,"translate("+$[e].centroid(t)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",y?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var X={},Z=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)};V.watchTransition(D,"pie labels").attr("transform",function(t,e){if(y){t.outerRadius=O[e]+10,t.innerRadius=O[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+$[e].centroid(t)+") rotate("+n+")"}t.outerRadius=N+10,t.innerRadius=N+15;var r=$[e].centroid(t);if(t.value){var i=Z(r);X[i]&&(r[1]-=14),X[Z(r)]=!0}return"translate("+r+")"}),V.select(".nv-label text").style("text-anchor",function(t,e){return y?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(t,e){var n=(t.endAngle-t.startAngle)/(2*Math.PI),r="";if(!t.value||n<h)return"";if("function"==typeof d)r=d(t,e,{key:i(t.data),value:o(t.data),percent:l(n)});else switch(d){case"key":r=i(t.data);break;case"value":r=l(o(t.data));break;case"percent":r=d3.format("%")(n)}return r})}}),D.renderEnd("pie immediate"),T}return T.dispatch=S,T.options=t.utils.optionsFunc.bind(T),T._options=Object.create({},{arcsRadius:{get:function(){return M},set:function(t){M=t}},width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},showLabels:{get:function(){return c},set:function(t){c=t}},title:{get:function(){return g},set:function(t){g=t}},titleOffset:{get:function(){return m},set:function(t){m=t}},labelThreshold:{get:function(){return h},set:function(t){h=t}},valueFormat:{get:function(){return l},set:function(t){l=t}},x:{get:function(){return i},set:function(t){i=t}},id:{get:function(){return a},set:function(t){a=t}},endAngle:{get:function(){return w},set:function(t){w=t}},startAngle:{get:function(){return b},set:function(t){b=t}},padAngle:{get:function(){return x},set:function(t){x=t}},cornerRadius:{get:function(){return k},set:function(t){k=t}},donutRatio:{get:function(){return _},set:function(t){_=t}},labelsOutside:{get:function(){return f},set:function(t){f=t}},labelSunbeamLayout:{get:function(){return y},set:function(t){y=t}},donut:{get:function(){return p},set:function(t){p=t}},growOnHover:{get:function(){return v},set:function(t){v=t}},pieLabelsOutside:{get:function(){return f},set:function(e){f=e,t.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return f},set:function(e){f=e,t.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return l},set:function(e){l=e,t.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},y:{get:function(){return o},set:function(t){o=d3.functor(t)}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e)}},labelType:{get:function(){return d},set:function(t){d=t||"key"}}}),t.utils.initOptions(T),T},t.models.pieChart=function(){"use strict";var e=t.models.pie(),n=t.models.legend(),r=t.models.tooltip(),i={top:30,right:20,bottom:20,left:20},o=!0,a="top",s=t.utils.defaultColor(),u=t.utils.state(),l=null,c=null,f=250,d=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");r.headerEnabled(!1).duration(0).valueFormatter(function(t,n){return e.valueFormat()(t,n)});var h=t.utils.renderWatch(d);function p(r){return h.reset(),h.models(e),r.each(function(r){var s=d3.select(this);t.utils.initSVG(s);var c,f=t.utils.availableWidth(null,s,i),h=t.utils.availableHeight(null,s,i);if(p.update=function(){s.transition().call(p)},p.container=this,u.setter(function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}}(r),p.update).getter(function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}}(r)).update(),u.disabled=r.map(function(t){return!!t.disabled}),!l)for(c in l={},u)l[c]=u[c]instanceof Array?u[c].slice(0):u[c];if(!r||!r.length)return t.utils.noData(p,s),p;s.selectAll(".nv-noData").remove();var g=s.selectAll("g.nv-wrap.nv-pieChart").data([r]),v=g.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),m=g.select("g");if(v.append("g").attr("class","nv-pieWrap"),v.append("g").attr("class","nv-legendWrap"),o)if("top"===a)n.width(f).key(e.x()),g.select(".nv-legendWrap").datum(r).call(n),i.top!=n.height()&&(i.top=n.height(),h=t.utils.availableHeight(null,s,i)),g.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")");else if("right"===a){var y=t.models.legend().width();f/2<y&&(y=f/2),n.height(h).key(e.x()),n.width(y),f-=n.width(),g.select(".nv-legendWrap").datum(r).call(n).attr("transform","translate("+f+",0)")}g.attr("transform","translate("+i.left+","+i.top+")"),e.width(f).height(h);var b=m.select(".nv-pieWrap").datum([r]);d3.transition(b).call(e),n.dispatch.on("stateChange",function(t){for(var e in t)u[e]=t[e];d.stateChange(u),p.update()}),d.on("changeState",function(t){void 0!==t.disabled&&(r.forEach(function(e,n){e.disabled=t.disabled[n]}),u.disabled=t.disabled),p.update()})}),h.renderEnd("pieChart immediate"),p}return e.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:p.x()(t.data),value:p.y()(t.data),color:t.color},r.data(t).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){r.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(t){r.position({top:d3.event.pageY,left:d3.event.pageX})()}),p.legend=n,p.dispatch=d,p.pie=e,p.tooltip=r,p.options=t.utils.optionsFunc.bind(p),p._options=Object.create({},{noData:{get:function(){return c},set:function(t){c=t}},showLegend:{get:function(){return o},set:function(t){o=t}},legendPosition:{get:function(){return a},set:function(t){a=t}},defaultState:{get:function(){return l},set:function(t){l=t}},tooltips:{get:function(){return r.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),r.enabled(!!e)}},tooltipContent:{get:function(){return r.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),r.contentGenerator(e)}},color:{get:function(){return s},set:function(t){n.color(s=t),e.color(s)}},duration:{get:function(){return f},set:function(t){h.reset(f=t)}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),t.utils.inheritOptions(p,e),t.utils.initOptions(p),p},t.models.scatter=function(){"use strict";var e,n,r,i,o={top:0,right:0,bottom:0,left:0},a=null,s=null,u=t.utils.defaultColor(),l=Math.floor(1e5*Math.random()),c=null,f=d3.scale.linear(),d=d3.scale.linear(),h=d3.scale.linear(),p=function(t){return t.x},g=function(t){return t.y},v=function(t){return t.size||1},m=function(t){return t.shape||"circle"},y=[],b=[],x=[],w=!0,k=function(t){return!t.notActive},_=!1,M=.1,S=!1,C=!0,A=!1,D=function(){return 25},T=null,L=null,E=null,N=null,O=null,F=null,P=!1,W=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),R=!0,z=250,I=!1,H=t.utils.renderWatch(W,z),Y=[16,256];function B(z){return H.reset(),z.each(function(z){c=d3.select(this);var B=t.utils.availableWidth(a,c,o),j=t.utils.availableHeight(s,c,o);t.utils.initSVG(c),z.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var U=T&&L&&O?[]:d3.merge(z.map(function(t){return t.values.map(function(t,e){return{x:p(t,e),y:g(t,e),size:v(t,e)}})}));f.domain(T||d3.extent(U.map(function(t){return t.x}).concat(y))),f.range(_&&z[0]?E||[(B*M+B)/(2*z[0].values.length),B-B*(1+M)/(2*z[0].values.length)]:E||[0,B]),d.domain(L||d3.extent(U.map(function(t){return t.y}).concat(b))).range(N||[j,0]),h.domain(O||d3.extent(U.map(function(t){return t.size}).concat(x))).range(F||Y),P=f.domain()[0]===f.domain()[1]||d.domain()[0]===d.domain()[1],f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),isNaN(f.domain()[0])&&f.domain([-1,1]),isNaN(d.domain()[0])&&d.domain([-1,1]),e=e||f,n=n||d,r=r||h;var G=c.selectAll("g.nv-wrap.nv-scatter").data([z]),V=G.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+l),q=V.append("defs"),$=V.append("g"),X=G.select("g");G.classed("nv-single-point",P),$.append("g").attr("class","nv-groups"),$.append("g").attr("class","nv-point-paths"),V.append("g").attr("class","nv-point-clips"),G.attr("transform","translate("+o.left+","+o.top+")"),q.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),G.select("#nv-edge-clip-"+l+" rect").attr("width",B).attr("height",j>0?j:0),X.attr("clip-path",S?"url(#nv-edge-clip-"+l+")":""),I=!0;var Z=G.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});Z.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Z.exit().remove(),Z.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),Z.watchTransition(H,"scatter: groups").style("fill",function(t,e){return u(t,e)}).style("stroke",function(t,e){return u(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5);var K=Z.selectAll("path.nv-point").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return k(t[0],e)})});K.enter().append("path").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t){return"translate("+e(p(t[0],t[1]))+","+n(g(t[0],t[1]))+")"}).attr("d",t.utils.symbol().type(function(t){return m(t[0])}).size(function(t){return h(v(t[0],t[1]))})),K.exit().remove(),Z.exit().selectAll("path.nv-point").watchTransition(H,"scatter exit").attr("transform",function(t){return"translate("+f(p(t[0],t[1]))+","+d(g(t[0],t[1]))+")"}).remove(),K.each(function(t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t[1],!0).classed("nv-noninteractive",!w).classed("hover",!1)}),K.watchTransition(H,"scatter points").attr("transform",function(t){return"translate("+f(p(t[0],t[1]))+","+d(g(t[0],t[1]))+")"}).attr("d",t.utils.symbol().type(function(t){return m(t[0])}).size(function(t){return h(v(t[0],t[1]))})),clearTimeout(i),i=setTimeout(function(){if(I=!1,!w)return!1;if(!0===R){var t=d3.merge(z.map(function(t,e){return t.values.map(function(t,n){var r=p(t,n),i=g(t,n);return[f(r)+1e-4*Math.random(),d(i)+1e-4*Math.random(),e,n,t]}).filter(function(t,e){return k(t[4],e)})}));if(0==t.length)return!1;t.length<3&&(t.push([f.range()[0]-20,d.range()[0]-20,null,null]),t.push([f.range()[1]+20,d.range()[1]+20,null,null]),t.push([f.range()[0]-20,d.range()[0]+20,null,null]),t.push([f.range()[1]+20,d.range()[1]-20,null,null]));var e=d3.geom.polygon([[-10,-10],[-10,s+10],[a+10,s+10],[a+10,-10]]),n=d3.geom.voronoi(t).map(function(n,r){return{data:e.clip(n),series:t[r][2],point:t[r][3]}});G.select(".nv-point-paths").selectAll("path").remove();var r=G.select(".nv-point-paths").selectAll("path").data(n),i=r.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,e){return"nv-path-"+e}).attr("clip-path",function(t,e){return"url(#nv-clip-"+e+")"});A&&i.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),C&&(G.select(".nv-point-clips").selectAll("clipPath").remove(),G.select(".nv-point-clips").selectAll("clipPath").data(t).enter().append("svg:clipPath").attr("id",function(t,e){return"nv-clip-"+e}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",D));var l=function(t,e){if(I)return 0;var n=z[t.series];if(void 0!==n){var r=n.values[t.point];r.color=u(n,t.series),r.x=p(r),r.y=g(r);var i=c.node().getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft;e({point:r,series:n,pos:{left:f(p(r,t.point))+i.left+s+o.left+10,top:d(g(r,t.point))+i.top+a+o.top+10},seriesIndex:t.series,pointIndex:t.point})}};r.on("click",function(t){l(t,W.elementClick)}).on("dblclick",function(t){l(t,W.elementDblClick)}).on("mouseover",function(t){l(t,W.elementMouseover)}).on("mouseout",function(t,e){l(t,W.elementMouseout)})}else G.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,e){if(I||!z[t.series])return 0;var n=z[t.series],r=n.values[e];W.elementClick({point:r,series:n,pos:[f(p(r,e))+o.left,d(g(r,e))+o.top],seriesIndex:t.series,pointIndex:e})}).on("dblclick",function(t,e){if(I||!z[t.series])return 0;var n=z[t.series],r=n.values[e];W.elementDblClick({point:r,series:n,pos:[f(p(r,e))+o.left,d(g(r,e))+o.top],seriesIndex:t.series,pointIndex:e})}).on("mouseover",function(t,e){if(I||!z[t.series])return 0;var n=z[t.series],r=n.values[e];W.elementMouseover({point:r,series:n,pos:[f(p(r,e))+o.left,d(g(r,e))+o.top],seriesIndex:t.series,pointIndex:e,color:u(t,e)})}).on("mouseout",function(t,e){if(I||!z[t.series])return 0;var n=z[t.series];W.elementMouseout({point:n.values[e],series:n,seriesIndex:t.series,pointIndex:e,color:u(t,e)})})},300),e=f.copy(),n=d.copy(),r=h.copy()}),H.renderEnd("scatter immediate"),B}return B.dispatch=W,B.options=t.utils.optionsFunc.bind(B),B._calls=new function(){this.clearHighlights=function(){return t.dom.write(function(){c.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(e,n,r){t.dom.write(function(){c.select(" .nv-series-"+e+" .nv-point-"+n).classed("hover",r)})}},W.on("elementMouseover.point",function(t){w&&B._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),W.on("elementMouseout.point",function(t){w&&B._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),B._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},pointScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return T},set:function(t){T=t}},yDomain:{get:function(){return L},set:function(t){L=t}},pointDomain:{get:function(){return O},set:function(t){O=t}},xRange:{get:function(){return E},set:function(t){E=t}},yRange:{get:function(){return N},set:function(t){N=t}},pointRange:{get:function(){return F},set:function(t){F=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return b},set:function(t){b=t}},forcePoint:{get:function(){return x},set:function(t){x=t}},interactive:{get:function(){return w},set:function(t){w=t}},pointActive:{get:function(){return k},set:function(t){k=t}},padDataOuter:{get:function(){return M},set:function(t){M=t}},padData:{get:function(){return _},set:function(t){_=t}},clipEdge:{get:function(){return S},set:function(t){S=t}},clipVoronoi:{get:function(){return C},set:function(t){C=t}},clipRadius:{get:function(){return D},set:function(t){D=t}},showVoronoi:{get:function(){return A},set:function(t){A=t}},id:{get:function(){return l},set:function(t){l=t}},x:{get:function(){return p},set:function(t){p=d3.functor(t)}},y:{get:function(){return g},set:function(t){g=d3.functor(t)}},pointSize:{get:function(){return v},set:function(t){v=d3.functor(t)}},pointShape:{get:function(){return m},set:function(t){m=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return z},set:function(t){H.reset(z=t)}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e)}},useVoronoi:{get:function(){return R},set:function(t){!1===(R=t)&&(C=!1)}}}),t.utils.initOptions(B),B},t.models.scatterChart=function(){"use strict";var e=t.models.scatter(),n=t.models.axis(),r=t.models.axis(),i=t.models.legend(),o=t.models.distribution(),a=t.models.distribution(),s=t.models.tooltip(),u={top:30,right:20,bottom:50,left:75},l=null,c=null,f=null,d=t.utils.defaultColor(),h=e.xScale(),p=e.yScale(),g=!1,v=!1,m=!0,y=!0,b=!0,x=!1,w=t.utils.state(),k=null,_=d3.dispatch("stateChange","changeState","renderEnd"),M=null,S=250;e.xScale(h).yScale(p),n.orient("bottom").tickPadding(10),r.orient(x?"right":"left").tickPadding(10),o.axis("x"),a.axis("y"),s.headerFormatter(function(t,e){return n.tickFormat()(t,e)}).valueFormatter(function(t,e){return r.tickFormat()(t,e)});var C=t.utils.renderWatch(_,S);function A(M){return C.reset(),C.models(e),y&&C.models(n),b&&C.models(r),g&&C.models(o),v&&C.models(a),M.each(function(M){f=d3.select(this),t.utils.initSVG(f);var D,T=t.utils.availableWidth(l,f,u),L=t.utils.availableHeight(c,f,u);if(A.update=function(){0===S?f.call(A):f.transition().duration(S).call(A)},A.container=this,w.setter(function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}}(M),A.update).getter(function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}}(M)).update(),w.disabled=M.map(function(t){return!!t.disabled}),!k)for(D in k={},w)k[D]=w[D]instanceof Array?w[D].slice(0):w[D];if(!(M&&M.length&&M.filter(function(t){return t.values.length}).length))return t.utils.noData(A,f),C.renderEnd("scatter immediate"),A;f.selectAll(".nv-noData").remove(),h=e.xScale(),p=e.yScale();var E=f.selectAll("g.nv-wrap.nv-scatterChart").data([M]),N=E.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()).append("g"),O=E.select("g");N.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-scatterWrap"),N.append("g").attr("class","nv-regressionLinesWrap"),N.append("g").attr("class","nv-distWrap"),N.append("g").attr("class","nv-legendWrap"),x&&O.select(".nv-y.nv-axis").attr("transform","translate("+T+",0)"),m&&(i.width(T),E.select(".nv-legendWrap").datum(M).call(i),u.top!=i.height()&&(u.top=i.height(),L=t.utils.availableHeight(c,f,u)),E.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")),E.attr("transform","translate("+u.left+","+u.top+")"),e.width(T).height(L).color(M.map(function(t,e){return t.color=t.color||d(t,e),t.color}).filter(function(t,e){return!M[e].disabled})),E.select(".nv-scatterWrap").datum(M.filter(function(t){return!t.disabled})).call(e),E.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");var F=E.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});F.enter().append("g").attr("class","nv-regLines");var P=F.selectAll(".nv-regLine").data(function(t){return[t]});P.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),P.filter(function(t){return t.intercept&&t.slope}).watchTransition(C,"scatterPlusLineChart: regline").attr("x1",h.range()[0]).attr("x2",h.range()[1]).attr("y1",function(t,e){return p(h.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t,e){return p(h.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return d(t,n)}).style("stroke-opacity",function(t,e){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1}),y&&(n.scale(h)._ticks(t.utils.calcTicksX(T/100,M)).tickSize(-L,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(n)),b&&(r.scale(p)._ticks(t.utils.calcTicksY(L/36,M)).tickSize(-T,0),O.select(".nv-y.nv-axis").call(r)),g&&(o.getData(e.x()).scale(h).width(T).color(M.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!M[e].disabled})),N.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),O.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(M.filter(function(t){return!t.disabled})).call(o)),v&&(a.getData(e.y()).scale(p).width(L).color(M.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!M[e].disabled})),N.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),O.select(".nv-distributionY").attr("transform","translate("+(x?T:-a.size())+",0)").datum(M.filter(function(t){return!t.disabled})).call(a)),i.dispatch.on("stateChange",function(t){for(var e in t)w[e]=t[e];_.stateChange(w),A.update()}),_.on("changeState",function(t){void 0!==t.disabled&&(M.forEach(function(e,n){e.disabled=t.disabled[n]}),w.disabled=t.disabled),A.update()}),e.dispatch.on("elementMouseout.tooltip",function(t){s.hidden(!0),f.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),f.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",a.size())}),e.dispatch.on("elementMouseover.tooltip",function(t){f.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos.top-L-u.top),f.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos.left+o.size()-u.left),s.position(t.pos).data(t).hidden(!1)}),h.copy(),p.copy()}),C.renderEnd("scatter with line immediate"),A}return A.dispatch=_,A.scatter=e,A.legend=i,A.xAxis=n,A.yAxis=r,A.distX=o,A.distY=a,A.tooltip=s,A.options=t.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return c},set:function(t){c=t}},container:{get:function(){return f},set:function(t){f=t}},showDistX:{get:function(){return g},set:function(t){g=t}},showDistY:{get:function(){return v},set:function(t){v=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return y},set:function(t){y=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return M},set:function(t){M=t}},duration:{get:function(){return S},set:function(t){S=t}},tooltips:{get:function(){return s.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),s.enabled(!!e)}},tooltipContent:{get:function(){return s.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),s.contentGenerator(e)}},tooltipXContent:{get:function(){return s.contentGenerator()},set:function(e){t.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},tooltipYContent:{get:function(){return s.contentGenerator()},set:function(e){t.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},rightAlignYAxis:{get:function(){return x},set:function(t){x=t,r.orient(t?"right":"left")}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e),i.color(d),o.color(d),a.color(d)}}}),t.utils.inheritOptions(A,e),t.utils.initOptions(A),A},t.models.sparkline=function(){"use strict";var e,n,r,i,o={top:2,right:0,bottom:2,left:0},a=400,s=32,u=null,l=!0,c=d3.scale.linear(),f=d3.scale.linear(),d=function(t){return t.x},h=function(t){return t.y},p=t.utils.getColor(["#000"]);function g(l){return l.each(function(l){var g=a-o.left-o.right,v=s-o.top-o.bottom;u=d3.select(this),t.utils.initSVG(u),c.domain(e||d3.extent(l,d)).range(r||[0,g]),f.domain(n||d3.extent(l,h)).range(i||[v,0]);var m=u.selectAll("g.nv-wrap.nv-sparkline").data([l]);m.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),m.select("g"),m.attr("transform","translate("+o.left+","+o.top+")");var y=m.selectAll("path").data(function(t){return[t]});y.enter().append("path"),y.exit().remove(),y.style("stroke",function(t,e){return t.color||p(t,e)}).attr("d",d3.svg.line().x(function(t,e){return c(d(t,e))}).y(function(t,e){return f(h(t,e))}));var b=m.selectAll("circle.nv-point").data(function(t){var e=t.map(function(t,e){return h(t,e)});function n(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var r=n(e.lastIndexOf(f.domain()[1]));return[n(e.indexOf(f.domain()[0])),r,n(e.length-1)].filter(function(t){return null!=t})});b.enter().append("circle"),b.exit().remove(),b.attr("cx",function(t,e){return c(d(t,t.pointIndex))}).attr("cy",function(t,e){return f(h(t,t.pointIndex))}).attr("r",2).attr("class",function(t,e){return d(t,t.pointIndex)==c.domain()[1]?"nv-point nv-currentValue":h(t,t.pointIndex)==f.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),g}return g.options=t.utils.optionsFunc.bind(g),g._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},animate:{get:function(){return l},set:function(t){l=t}},x:{get:function(){return d},set:function(t){d=d3.functor(t)}},y:{get:function(){return h},set:function(t){h=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e)}}}),t.utils.initOptions(g),g},t.models.sparklinePlus=function(){"use strict";var e,n,r=t.models.sparkline(),i={top:15,right:100,bottom:10,left:50},o=null,a=null,s=[],u=!1,l=d3.format(",r"),c=d3.format(",.2f"),f=!0,d=!0,h=!1,p=null;function g(p){return p.each(function(p){var v=d3.select(this);t.utils.initSVG(v);var m=t.utils.availableWidth(o,v,i),y=t.utils.availableHeight(a,v,i);if(g.update=function(){v.call(g)},g.container=this,!p||!p.length)return t.utils.noData(g,v),g;v.selectAll(".nv-noData").remove();var b=r.y()(p[p.length-1],p.length-1);e=r.xScale(),n=r.yScale();var x=v.selectAll("g.nv-wrap.nv-sparklineplus").data([p]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),k=x.select("g");w.append("g").attr("class","nv-sparklineWrap"),w.append("g").attr("class","nv-valueWrap"),w.append("g").attr("class","nv-hoverArea"),x.attr("transform","translate("+i.left+","+i.top+")");var _=k.select(".nv-sparklineWrap");if(r.width(m).height(y),_.call(r),f){var M=k.select(".nv-valueWrap").selectAll(".nv-currentValue").data([b]);M.enter().append("text").attr("class","nv-currentValue").attr("dx",h?-8:8).attr("dy",".9em").style("text-anchor",h?"end":"start"),M.attr("x",m+(h?i.right:0)).attr("y",d?function(t){return n(t)}:0).style("fill",r.color()(p[p.length-1],p.length-1)).text(c(b))}function S(){if(!u){var t=k.selectAll(".nv-hoverValue").data(s),n=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+e(r.x()(p[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),s.length&&(n.append("line").attr("x1",0).attr("y1",-i.top).attr("x2",0).attr("y2",y),n.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-i.top).attr("text-anchor","end").attr("dy",".9em"),k.select(".nv-hoverValue .nv-xValue").text(l(r.x()(p[s[0]],s[0]))),n.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-i.top).attr("text-anchor","start").attr("dy",".9em"),k.select(".nv-hoverValue .nv-yValue").text(c(r.y()(p[s[0]],s[0]))))}}w.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!u){var t=d3.mouse(this)[0]-i.left;s=[function(t,e){for(var n=Math.abs(r.x()(t[0],0)-e),i=0,o=0;o<t.length;o++)Math.abs(r.x()(t[o],o)-e)<n&&(n=Math.abs(r.x()(t[o],o)-e),i=o);return i}(p,Math.round(e.invert(t)))],S()}}).on("click",function(){u=!u}).on("mouseout",function(){s=[],S()}),k.select(".nv-hoverArea rect").attr("transform",function(t){return"translate("+-i.left+","+-i.top+")"}).attr("width",m+i.left+i.right).attr("height",y+i.top)}),g}return g.sparkline=r,g.options=t.utils.optionsFunc.bind(g),g._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},xTickFormat:{get:function(){return l},set:function(t){l=t}},yTickFormat:{get:function(){return c},set:function(t){c=t}},showLastValue:{get:function(){return f},set:function(t){f=t}},alignValue:{get:function(){return d},set:function(t){d=t}},rightAlignValue:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),t.utils.inheritOptions(g,r),t.utils.initOptions(g),g},t.models.stackedArea=function(){"use strict";var e,n,r={top:0,right:0,bottom:0,left:0},i=960,o=500,a=t.utils.defaultColor(),s=Math.floor(1e5*Math.random()),u=null,l=function(t){return t.x},c=function(t){return t.y},f="stack",d="zero",h="default",p="linear",g=!1,v=t.models.scatter(),m=250,y=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");v.pointSize(2.2).pointDomain([2.2,2.2]);var b=t.utils.renderWatch(y,m);function x(f){return b.reset(),b.models(v),f.each(function(f){var m=i-r.left-r.right,w=o-r.top-r.bottom;u=d3.select(this),t.utils.initSVG(u),e=v.xScale(),n=v.yScale();var k=f;f.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var _=f.filter(function(t){return!t.disabled});f=d3.layout.stack().order(h).offset(d).values(function(t){return t.values}).x(l).y(c).out(function(t,e,n){t.display={y:n,y0:e}})(_);var M=u.selectAll("g.nv-wrap.nv-stackedarea").data([f]),S=M.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),C=S.append("defs"),A=S.append("g"),D=M.select("g");A.append("g").attr("class","nv-areaWrap"),A.append("g").attr("class","nv-scatterWrap"),M.attr("transform","translate("+r.left+","+r.top+")"),0==v.forceY().length&&v.forceY().push(0),v.width(m).height(w).x(l).y(function(t){return t.display.y+t.display.y0}).forceY([0]).color(f.map(function(t,e){return t.color||a(t,t.seriesIndex)})),D.select(".nv-scatterWrap").datum(f).call(v),C.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),M.select("#nv-edge-clip-"+s+" rect").attr("width",m).attr("height",w),D.attr("clip-path",g?"url(#nv-edge-clip-"+s+")":"");var T=d3.svg.area().x(function(t,n){return e(l(t,n))}).y0(function(t){return n(t.display.y0)}).y1(function(t){return n(t.display.y+t.display.y0)}).interpolate(p),L=d3.svg.area().x(function(t,n){return e(l(t,n))}).y0(function(t){return n(t.display.y0)}).y1(function(t){return n(t.display.y0)}),E=D.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});E.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t,e){return L(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),y.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),y.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t,e){d3.select(this).classed("hover",!1),y.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),E.exit().remove(),E.style("fill",function(t,e){return t.color||a(t,t.seriesIndex)}).style("stroke",function(t,e){return t.color||a(t,t.seriesIndex)}),E.watchTransition(b,"stackedArea path").attr("d",function(t,e){return T(t.values,e)}),v.dispatch.on("elementMouseover.area",function(t){D.select(".nv-chart-"+s+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),v.dispatch.on("elementMouseout.area",function(t){D.select(".nv-chart-"+s+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),x.d3_stackedOffset_stackPercent=function(t){var e,n,r,i=t.length,o=t[0].length,a=[];for(n=0;n<o;++n){for(e=0,r=0;e<k.length;e++)r+=c(k[e].values[n]);if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=0}for(n=0;n<o;++n)a[n]=0;return a}}),b.renderEnd("stackedArea immediate"),x}return x.dispatch=y,x.scatter=v,v.dispatch.on("elementClick",function(){y.elementClick.apply(this,arguments)}),v.dispatch.on("elementMouseover",function(){y.elementMouseover.apply(this,arguments)}),v.dispatch.on("elementMouseout",function(){y.elementMouseout.apply(this,arguments)}),x.interpolate=function(t){return arguments.length?(p=t,x):p},x.duration=function(t){return arguments.length?(b.reset(m=t),v.duration(m),x):m},x.dispatch=y,x.scatter=v,x.options=t.utils.optionsFunc.bind(x),x._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return o},set:function(t){o=t}},clipEdge:{get:function(){return g},set:function(t){g=t}},offset:{get:function(){return d},set:function(t){d=t}},order:{get:function(){return h},set:function(t){h=t}},interpolate:{get:function(){return p},set:function(t){p=t}},x:{get:function(){return l},set:function(t){l=d3.functor(t)}},y:{get:function(){return c},set:function(t){c=d3.functor(t)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},color:{get:function(){return a},set:function(e){a=t.utils.getColor(e)}},style:{get:function(){return f},set:function(t){switch(f=t){case"stack":x.offset("zero"),x.order("default");break;case"stream":x.offset("wiggle"),x.order("inside-out");break;case"stream-center":x.offset("silhouette"),x.order("inside-out");break;case"expand":x.offset("expand"),x.order("default");break;case"stack_percent":x.offset(x.d3_stackedOffset_stackPercent),x.order("default")}}},duration:{get:function(){return m},set:function(t){b.reset(m=t),v.duration(m)}}}),t.utils.inheritOptions(x,v),t.utils.initOptions(x),x},t.models.stackedAreaChart=function(){"use strict";var e,n,r=t.models.stackedArea(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),s=t.models.legend(),u=t.interactiveGuideline(),l=t.models.tooltip(),c={top:30,right:25,bottom:50,left:60},f=null,d=null,h=t.utils.defaultColor(),p=!0,g=!0,v=!0,m=!0,y=!1,b=!1,x=t.utils.state(),w=null,k=null,_=d3.dispatch("stateChange","changeState","renderEnd"),M=250,S=["Stacked","Stream","Expanded"],C={},A=250;x.style=r.style(),i.orient("bottom").tickPadding(7),o.orient(y?"right":"left"),l.headerFormatter(function(t,e){return i.tickFormat()(t,e)}).valueFormatter(function(t,e){return o.tickFormat()(t,e)}),u.tooltip.headerFormatter(function(t,e){return i.tickFormat()(t,e)}).valueFormatter(function(t,e){return o.tickFormat()(t,e)});var D=null,T=null;s.updateState(!1);var L=t.utils.renderWatch(_),E=(r.style(),d3.format("%"));function N(l){return L.reset(),L.models(r),v&&L.models(i),m&&L.models(o),l.each(function(l){var k=d3.select(this),L=this;t.utils.initSVG(k);var O,F=t.utils.availableWidth(f,k,c),P=t.utils.availableHeight(d,k,c);if(N.update=function(){k.transition().duration(A).call(N)},N.container=this,x.setter(function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}}(l),N.update).getter(function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:r.style()}}}(l)).update(),x.disabled=l.map(function(t){return!!t.disabled}),!w)for(O in w={},x)w[O]=x[O]instanceof Array?x[O].slice(0):x[O];if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return t.utils.noData(N,k),N;k.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale();var W=k.selectAll("g.nv-wrap.nv-stackedAreaChart").data([l]),R=W.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),z=W.select("g");if(R.append("rect").style("opacity",0),R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-stackedWrap"),R.append("g").attr("class","nv-legendWrap"),R.append("g").attr("class","nv-controlsWrap"),R.append("g").attr("class","nv-interactive"),z.select("rect").attr("width",F).attr("height",P),g){var I=p?F-M:F;a.width(I),z.select(".nv-legendWrap").datum(l).call(a),c.top!=a.height()&&(c.top=a.height(),P=t.utils.availableHeight(d,k,c)),z.select(".nv-legendWrap").attr("transform","translate("+(F-I)+","+-c.top+")")}if(p){var H=[{key:C.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=r.style(),style:"stack"},{key:C.stream||"Stream",metaKey:"Stream",disabled:"stream"!=r.style(),style:"stream"},{key:C.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=r.style(),style:"expand"},{key:C.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=r.style(),style:"stack_percent"}];M=S.length/3*260,H=H.filter(function(t){return-1!==S.indexOf(t.metaKey)}),s.width(M).color(["#444","#444","#444"]),z.select(".nv-controlsWrap").datum(H).call(s),c.top!=Math.max(s.height(),a.height())&&(c.top=Math.max(s.height(),a.height()),P=t.utils.availableHeight(d,k,c)),z.select(".nv-controlsWrap").attr("transform","translate(0,"+-c.top+")")}if(W.attr("transform","translate("+c.left+","+c.top+")"),y&&z.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)"),b&&(u.width(F).height(P).margin({left:c.left,top:c.top}).svgContainer(k).xScale(e),W.select(".nv-interactive").call(u)),r.width(F).height(P),z.select(".nv-stackedWrap").datum(l).transition().call(r),v&&(i.scale(e)._ticks(t.utils.calcTicksX(F/100,l)).tickSize(-P,0),z.select(".nv-x.nv-axis").attr("transform","translate(0,"+P+")"),z.select(".nv-x.nv-axis").transition().duration(0).call(i)),m){var Y;if(Y="wiggle"===r.offset()?0:t.utils.calcTicksY(P/36,l),o.scale(n)._ticks(Y).tickSize(-F,0),"expand"===r.style()||"stack_percent"===r.style()){var B=o.tickFormat();D&&B===E||(D=B),o.tickFormat(E)}else D&&(o.tickFormat(D),D=null);z.select(".nv-y.nv-axis").transition().duration(0).call(o)}r.dispatch.on("areaClick.toggle",function(t){1===l.filter(function(t){return!t.disabled}).length?l.forEach(function(t){t.disabled=!1}):l.forEach(function(e,n){e.disabled=n!=t.seriesIndex}),x.disabled=l.map(function(t){return!!t.disabled}),_.stateChange(x),N.update()}),a.dispatch.on("stateChange",function(t){for(var e in t)x[e]=t[e];_.stateChange(x),N.update()}),s.dispatch.on("legendClick",function(t,e){t.disabled&&(H=H.map(function(t){return t.disabled=!0,t}),t.disabled=!1,r.style(t.style),x.style=r.style(),_.stateChange(x),N.update())}),u.dispatch.on("elementMousemove",function(e){r.clearHighlights();var n,o,a,s=[];if(l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i,u){o=t.interactiveBisect(i.values,e.pointXValue,N.x());var l=i.values[o];if(null!=N.y()(l,o)&&r.highlightPoint(u,o,!0),void 0!==l){void 0===n&&(n=l),void 0===a&&(a=N.xScale()(N.x()(l,o)));var c="expand"==r.style()?l.display.y:N.y()(l,o);s.push({key:i.key,value:c,color:h(i,i.seriesIndex),stackedValue:l.display})}}),s.reverse(),s.length>2){var f=N.yScale().invert(e.mouseY),d=null;s.forEach(function(t,e){f=Math.abs(f);var n=Math.abs(t.stackedValue.y0),r=Math.abs(t.stackedValue.y);f>=n&&f<=r+n&&(d=e)}),null!=d&&(s[d].highlight=!0)}var p=i.tickFormat()(N.x()(n,o)),g=u.tooltip.valueFormatter();"expand"===r.style()||"stack_percent"===r.style()?(T||(T=g),g=d3.format(".1%")):T&&(g=T,T=null),u.tooltip.position({left:a+c.left,top:e.mouseY+c.top}).chartContainer(L.parentNode).valueFormatter(g).data({value:p,series:s})(),u.renderGuideLine(a)}),u.dispatch.on("elementMouseout",function(t){r.clearHighlights()}),_.on("changeState",function(t){void 0!==t.disabled&&l.length===t.disabled.length&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),x.disabled=t.disabled),void 0!==t.style&&r.style(t.style),N.update()})}),L.renderEnd("stacked Area chart immediate"),N}return r.dispatch.on("elementMouseover.tooltip",function(t){t.point.x=r.x()(t.point),t.point.y=r.y()(t.point),l.data(t).position(t.pos).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),N.dispatch=_,N.stacked=r,N.legend=a,N.controls=s,N.xAxis=i,N.yAxis=o,N.interactiveLayer=u,N.tooltip=l,N.dispatch=_,N.options=t.utils.optionsFunc.bind(N),N._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return w},set:function(t){w=t}},noData:{get:function(){return k},set:function(t){k=t}},showControls:{get:function(){return p},set:function(t){p=t}},controlLabels:{get:function(){return C},set:function(t){C=t}},controlOptions:{get:function(){return S},set:function(t){S=t}},tooltips:{get:function(){return l.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),l.enabled(!!e)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),l.contentGenerator(e)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return A},set:function(t){L.reset(A=t),r.duration(A),i.duration(A),o.duration(A)}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),a.color(h),r.color(h)}},rightAlignYAxis:{get:function(){return y},set:function(t){o.orient((y=t)?"right":"left")}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=!!t,N.interactive(!t),N.useVoronoi(!t),r.scatter.interactive(!t)}}}),t.utils.inheritOptions(N,r),t.utils.initOptions(N),N},t.models.sunburst=function(){"use strict";var e,n,r,i={top:0,right:0,bottom:0,left:0},o=null,a=null,s="count",u={count:function(t){return 1},size:function(t){return t.size}},l=Math.floor(1e4*Math.random()),c=null,f=t.utils.defaultColor(),d=500,h=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),p=d3.scale.linear().range([0,2*Math.PI]),g=d3.scale.sqrt(),v=d3.layout.partition().sort(null).value(function(t){return 1}),m=d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,p(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,p(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,g(t.y))}).outerRadius(function(t){return Math.max(0,g(t.y+t.dy))}),y=t.utils.renderWatch(h);function b(x){return y.reset(),x.each(function(y){c=d3.select(this);var b,x=t.utils.availableWidth(o,c,i),w=t.utils.availableHeight(a,c,i),k=Math.min(x,w)/2;t.utils.initSVG(c);var _=c.selectAll(".nv-wrap.nv-sunburst").data(y),M=_.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+l).selectAll("nv-sunburst");function S(t){t.x0=t.x,t.dx0=t.dx}function C(t){var e=d3.interpolate(p.domain(),[t.x,t.x+t.dx]),n=d3.interpolate(g.domain(),[t.y,1]),r=d3.interpolate(g.range(),[t.y?20:0,k]);return function(t,i){return i?function(e){return m(t)}:function(i){return p.domain(e(i)),g.domain(n(i)).range(r(i)),m(t)}}}_.attr("transform","translate("+x/2+","+w/2+")"),c.on("click",function(t,e){h.chartClick({data:t,index:e,pos:d3.event,id:l})}),g.range([0,k]),e=e||y,r=y[0],v.value(u[s]||u.count),b=M.data(v.nodes).enter().append("path").attr("d",m).style("fill",function(t){return f((t.children?t:t.parent).name)}).style("stroke","#FFF").on("click",function(t){n!==e&&e!==t&&(n=e),e=t,b.transition().duration(d).attrTween("d",C(t))}).each(S).on("dblclick",function(t){n.parent==t&&b.transition().duration(d).attrTween("d",C(r))}).each(S).on("mouseover",function(t,e){d3.select(this).classed("hover",!0).style("opacity",.8),h.elementMouseover({data:t,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("opacity",1),h.elementMouseout({data:t})}).on("mousemove",function(t,e){h.elementMousemove({data:t})})}),y.renderEnd("sunburst immediate"),b}return b.dispatch=h,b.options=t.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},mode:{get:function(){return s},set:function(t){s=t}},id:{get:function(){return l},set:function(t){l=t}},duration:{get:function(){return d},set:function(t){d=t}},margin:{get:function(){return i},set:function(t){i.top=null!=t.top?t.top:i.top,i.right=null!=t.right?t.right:i.right,i.bottom=null!=t.bottom?t.bottom:i.bottom,i.left=null!=t.left?t.left:i.left}},color:{get:function(){return f},set:function(e){f=t.utils.getColor(e)}}}),t.utils.initOptions(b),b},t.models.sunburstChart=function(){"use strict";var e=t.models.sunburst(),n=t.models.tooltip(),r={top:30,right:20,bottom:20,left:20},i=t.utils.defaultColor(),o=(Math.round(1e5*Math.random()),null),a=null,s=250,u=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),l=t.utils.renderWatch(u);function c(n){return l.reset(),l.models(e),n.each(function(n){var i=d3.select(this);t.utils.initSVG(i);var o=t.utils.availableWidth(null,i,r),a=t.utils.availableHeight(null,i,r);if(c.update=function(){0===s?i.call(c):i.transition().duration(s).call(c)},c.container=this,!n||!n.length)return t.utils.noData(c,i),c;i.selectAll(".nv-noData").remove();var u=i.selectAll("g.nv-wrap.nv-sunburstChart").data(n),l=u.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),f=u.select("g");l.append("g").attr("class","nv-sunburstWrap"),u.attr("transform","translate("+r.left+","+r.top+")"),e.width(o).height(a);var d=f.select(".nv-sunburstWrap").datum(n);d3.transition(d).call(e)}),l.renderEnd("sunburstChart immediate"),c}return n.headerEnabled(!1).duration(0).valueFormatter(function(t,e){return t}),e.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.data.name,value:t.data.size,color:t.color},n.data(t).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(t){n.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(t){n.position({top:d3.event.pageY,left:d3.event.pageX})()}),c.dispatch=u,c.sunburst=e,c.tooltip=n,c.options=t.utils.optionsFunc.bind(c),c._options=Object.create({},{noData:{get:function(){return a},set:function(t){a=t}},defaultState:{get:function(){return o},set:function(t){o=t}},color:{get:function(){return i},set:function(t){e.color(i=t)}},duration:{get:function(){return s},set:function(t){l.reset(s=t),e.duration(s)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}}}),t.utils.inheritOptions(c,e),t.utils.initOptions(c),c},t.version="1.8.1"}(),function(t,e){"use strict";"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.returnExports=e()}(this,function(){var t,e,n=Array,r=n.prototype,i=Object,o=i.prototype,a=Function,s=a.prototype,u=String,l=u.prototype,c=Number,f=c.prototype,d=r.slice,h=r.splice,p=r.push,g=r.unshift,v=r.concat,m=r.join,y=s.call,b=s.apply,x=Math.max,w=Math.min,k=Math.floor,_=Math.abs,M=Math.pow,S=o.toString,C="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,A=Function.prototype.toString,D=/^\s*class /,T=function(t){try{var e=A.call(t).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return D.test(e)}catch(n){return!1}},L=function(t){try{return!T(t)&&(A.call(t),!0)}catch(e){return!1}},E="[object Function]",N="[object GeneratorFunction]",O=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(C)return L(t);if(T(t))return!1;var e=S.call(t);return e===E||e===N},F=RegExp.prototype.exec,P=function(t){try{return F.call(t),!0}catch(e){return!1}},W="[object RegExp]";t=function(t){return"object"==typeof t&&(C?P(t):S.call(t)===W)};var R=String.prototype.valueOf,z=function(t){try{return R.call(t),!0}catch(e){return!1}},I="[object String]";e=function(t){return"string"==typeof t||"object"==typeof t&&(C?z(t):S.call(t)===I)};var H,Y,B=i.defineProperty&&function(){try{var t={};for(var e in i.defineProperty(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(n){return!1}}(),j=(H=o.hasOwnProperty,Y=B?function(t,e,n,r){!r&&e in t||i.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,r){!r&&e in t||(t[e]=n)},function(t,e,n){for(var r in e)H.call(e,r)&&Y(t,r,e[r],n)}),U=function(t){var e=typeof t;return null===t||"object"!==e&&"function"!==e},G=c.isNaN||function(t){return t!=t},V={ToInteger:function(t){var e=+t;return G(e)?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*k(_(e))),e},ToPrimitive:function(t){var e,n,r;if(U(t))return t;if(O(n=t.valueOf)&&(e=n.call(t),U(e)))return e;if(O(r=t.toString)&&(e=r.call(t),U(e)))return e;throw new TypeError},ToObject:function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return i(t)},ToUint32:function(t){return t>>>0}},q=function(){};j(s,{bind:function(t){var e=this;if(!O(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,r=d.call(arguments,1),o=function(){if(this instanceof n){var o=b.call(e,this,v.call(r,d.call(arguments)));return i(o)===o?o:this}return b.call(e,t,v.call(r,d.call(arguments)))},s=x(0,e.length-r.length),u=[],l=0;l<s;l++)p.call(u,"$"+l);return n=a("binder","return function ("+m.call(u,",")+"){ return binder.apply(this, arguments); }")(o),e.prototype&&(q.prototype=e.prototype,n.prototype=new q,q.prototype=null),n}});var $=y.bind(o.hasOwnProperty),X=y.bind(o.toString),Z=y.bind(d),K=b.bind(d);if("object"==typeof document&&document&&document.documentElement)try{Z(document.documentElement.childNodes)}catch(Qe){var Q=Z,J=K;Z=function(t){for(var e=[],n=t.length;n-- >0;)e[n]=t[n];return J(e,Q(arguments,1))},K=function(t,e){return J(Z(t),e)}}var tt=y.bind(l.slice),et=y.bind(l.split),nt=y.bind(l.indexOf),rt=y.bind(p),it=y.bind(o.propertyIsEnumerable),ot=y.bind(r.sort),at=n.isArray||function(t){return"[object Array]"===X(t)},st=1!==[].unshift(0);j(r,{unshift:function(){return g.apply(this,arguments),this.length}},st),j(n,{isArray:at});var ut=i("a"),lt="a"!==ut[0]||!(0 in ut),ct=function(t){var e=!0,n=!0,r=!1;if(t)try{t.call("foo",function(t,n,r){"object"!=typeof r&&(e=!1)}),t.call([1],function(){"use strict";n="string"==typeof this},"x")}catch(Qe){r=!0}return!!t&&!r&&e&&n};j(r,{forEach:function(t){var n,r=V.ToObject(this),i=lt&&e(this)?et(this,""):r,o=-1,a=V.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!O(t))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++o<a;)o in i&&(void 0===n?t(i[o],o,r):t.call(n,i[o],o,r))}},!ct(r.forEach)),j(r,{map:function(t){var r,i=V.ToObject(this),o=lt&&e(this)?et(this,""):i,a=V.ToUint32(o.length),s=n(a);if(arguments.length>1&&(r=arguments[1]),!O(t))throw new TypeError("Array.prototype.map callback must be a function");for(var u=0;u<a;u++)u in o&&(s[u]=void 0===r?t(o[u],u,i):t.call(r,o[u],u,i));return s}},!ct(r.map)),j(r,{filter:function(t){var n,r,i=V.ToObject(this),o=lt&&e(this)?et(this,""):i,a=V.ToUint32(o.length),s=[];if(arguments.length>1&&(r=arguments[1]),!O(t))throw new TypeError("Array.prototype.filter callback must be a function");for(var u=0;u<a;u++)u in o&&(n=o[u],(void 0===r?t(n,u,i):t.call(r,n,u,i))&&rt(s,n));return s}},!ct(r.filter)),j(r,{every:function(t){var n,r=V.ToObject(this),i=lt&&e(this)?et(this,""):r,o=V.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!O(t))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;a<o;a++)if(a in i&&!(void 0===n?t(i[a],a,r):t.call(n,i[a],a,r)))return!1;return!0}},!ct(r.every)),j(r,{some:function(t){var n,r=V.ToObject(this),i=lt&&e(this)?et(this,""):r,o=V.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!O(t))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;a<o;a++)if(a in i&&(void 0===n?t(i[a],a,r):t.call(n,i[a],a,r)))return!0;return!1}},!ct(r.some));var ft=!1;r.reduce&&(ft="object"==typeof r.reduce.call("es5",function(t,e,n,r){return r})),j(r,{reduce:function(t){var n=V.ToObject(this),r=lt&&e(this)?et(this,""):n,i=V.ToUint32(r.length);if(!O(t))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,a=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in r){o=r[a++];break}if(++a>=i)throw new TypeError("reduce of empty array with no initial value")}for(;a<i;a++)a in r&&(o=t(o,r[a],a,n));return o}},!ft);var dt=!1;r.reduceRight&&(dt="object"==typeof r.reduceRight.call("es5",function(t,e,n,r){return r})),j(r,{reduceRight:function(t){var n,r=V.ToObject(this),i=lt&&e(this)?et(this,""):r,o=V.ToUint32(i.length);if(!O(t))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===o&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var a=o-1;if(arguments.length>=2)n=arguments[1];else for(;;){if(a in i){n=i[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(a<0)return n;do{a in i&&(n=t(n,i[a],a,r))}while(a--);return n}},!dt);var ht=r.indexOf&&-1!==[0,1].indexOf(1,2);j(r,{indexOf:function(t){var n=lt&&e(this)?et(this,""):V.ToObject(this),r=V.ToUint32(n.length);if(0===r)return-1;var i=0;for(arguments.length>1&&(i=V.ToInteger(arguments[1])),i=i>=0?i:x(0,r+i);i<r;i++)if(i in n&&n[i]===t)return i;return-1}},ht);var pt=r.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);j(r,{lastIndexOf:function(t){var n=lt&&e(this)?et(this,""):V.ToObject(this),r=V.ToUint32(n.length);if(0===r)return-1;var i=r-1;for(arguments.length>1&&(i=w(i,V.ToInteger(arguments[1]))),i=i>=0?i:r-_(i);i>=0;i--)if(i in n&&t===n[i])return i;return-1}},pt);var gt,vt,mt=(vt=(gt=[1,2]).splice(),2===gt.length&&at(vt)&&0===vt.length);j(r,{splice:function(t,e){return 0===arguments.length?[]:h.apply(this,arguments)}},!mt);var yt,bt=(r.splice.call(yt={},0,0,1),1===yt.length);j(r,{splice:function(t,e){if(0===arguments.length)return[];var n=arguments;return this.length=x(V.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof e&&((n=Z(arguments)).length<2?rt(n,this.length-t):n[1]=V.ToInteger(e)),h.apply(this,n)}},!bt);var xt,wt=((xt=new n(1e5))[8]="x",xt.splice(1,1),7===xt.indexOf("x")),kt=function(){var t=[];return t[256]="a",t.splice(257,0,"b"),"a"===t[256]}();j(r,{splice:function(t,e){for(var n,r=V.ToObject(this),i=[],o=V.ToUint32(r.length),a=V.ToInteger(t),s=a<0?x(o+a,0):w(a,o),l=0===arguments.length?0:1===arguments.length?o-s:w(x(V.ToInteger(e),0),o-s),c=0;c<l;)n=u(s+c),$(r,n)&&(i[c]=r[n]),c+=1;var f,d=Z(arguments,2),h=d.length;if(h<l){c=s;for(var p=o-l;c<p;)n=u(c+l),f=u(c+h),$(r,n)?r[f]=r[n]:delete r[f],c+=1;c=o;for(var g=o-l+h;c>g;)delete r[c-1],c-=1}else if(h>l)for(c=o-l;c>s;)n=u(c+l-1),f=u(c+h-1),$(r,n)?r[f]=r[n]:delete r[f],c-=1;c=s;for(var v=0;v<d.length;++v)r[c]=d[v],c+=1;return r.length=o-l+h,i}},!wt||!kt);var _t,Mt=r.join;try{_t="1,2,3"!==Array.prototype.join.call("123",",")}catch(Qe){_t=!0}_t&&j(r,{join:function(t){var n=void 0===t?",":t;return Mt.call(e(this)?et(this,""):this,n)}},_t);var St="1,2"!==[1,2].join(void 0);St&&j(r,{join:function(t){return Mt.call(this,void 0===t?",":t)}},St);var Ct=function(t){for(var e=V.ToObject(this),n=V.ToUint32(e.length),r=0;r<arguments.length;)e[n+r]=arguments[r],r+=1;return e.length=n+r,n+r},At=function(){var t={};return 1!==Array.prototype.push.call(t,void 0)||1!==t.length||void 0!==t[0]||!$(t,0)}();j(r,{push:function(t){return at(this)?p.apply(this,arguments):Ct.apply(this,arguments)}},At);var Dt=function(){var t=[];return 1!==t.push(void 0)||1!==t.length||void 0!==t[0]||!$(t,0)}();j(r,{push:Ct},Dt),j(r,{slice:function(t,n){var r=e(this)?et(this,""):this;return K(r,arguments)}},lt);var Tt=function(){try{[1,2].sort(null)}catch(Qe){try{[1,2].sort({})}catch(t){return!1}}return!0}(),Lt=function(){try{return[1,2].sort(/a/),!1}catch(Qe){}return!0}(),Et=function(){try{return[1,2].sort(void 0),!0}catch(Qe){}return!1}();j(r,{sort:function(t){if(void 0===t)return ot(this);if(!O(t))throw new TypeError("Array.prototype.sort callback must be a function");return ot(this,t)}},Tt||!Et||!Lt);var Nt=!it({toString:null},"toString"),Ot=it(function(){},"prototype"),Ft=!$("x","0"),Pt=function(t){var e=t.constructor;return e&&e.prototype===t},Wt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},Rt=function(){if("undefined"==typeof window)return!1;for(var t in window)try{!Wt["$"+t]&&$(window,t)&&null!==window[t]&&"object"==typeof window[t]&&Pt(window[t])}catch(Qe){return!0}return!1}(),zt=function(t){if("undefined"==typeof window||!Rt)return Pt(t);try{return Pt(t)}catch(Qe){return!1}},It=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ht=It.length,Yt=function(t){return"[object Arguments]"===X(t)},Bt=function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&!at(t)&&O(t.callee)},jt=Yt(arguments)?Yt:Bt;j(i,{keys:function(t){var n=O(t),r=jt(t),i=null!==t&&"object"==typeof t,o=i&&e(t);if(!i&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=[],s=Ot&&n;if(o&&Ft||r)for(var l=0;l<t.length;++l)rt(a,u(l));if(!r)for(var c in t)s&&"prototype"===c||!$(t,c)||rt(a,u(c));if(Nt)for(var f=zt(t),d=0;d<Ht;d++){var h=It[d];f&&"constructor"===h||!$(t,h)||rt(a,h)}return a}});var Ut=i.keys&&function(){return 2===i.keys(arguments).length}(1,2),Gt=i.keys&&function(){var t=i.keys(arguments);return 1!==arguments.length||1!==t.length||1!==t[0]}(1),Vt=i.keys;j(i,{keys:function(t){return jt(t)?Vt(Z(t)):Vt(t)}},!Ut||Gt);var qt,$t,Xt=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Zt=new Date(-0x55d318d56a724),Kt=new Date(14496624e5),Qt="Mon, 01 Jan -45875 11:59:59 GMT"!==Zt.toUTCString(),Jt=Zt.getTimezoneOffset();Jt<-720?(qt="Tue Jan 02 -45875"!==Zt.toDateString(),$t=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(Kt))):(qt="Mon Jan 01 -45875"!==Zt.toDateString(),$t=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(Kt)));var te=y.bind(Date.prototype.getFullYear),ee=y.bind(Date.prototype.getMonth),ne=y.bind(Date.prototype.getDate),re=y.bind(Date.prototype.getUTCFullYear),ie=y.bind(Date.prototype.getUTCMonth),oe=y.bind(Date.prototype.getUTCDate),ae=y.bind(Date.prototype.getUTCDay),se=y.bind(Date.prototype.getUTCHours),ue=y.bind(Date.prototype.getUTCMinutes),le=y.bind(Date.prototype.getUTCSeconds),ce=y.bind(Date.prototype.getUTCMilliseconds),fe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],de=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],he=function(t,e){return ne(new Date(e,t,0))};j(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=te(this);return t<0&&ee(this)>11?t+1:t},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=te(this),e=ee(this);return t<0&&e>11?0:e},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=te(this),e=ee(this),n=ne(this);return t<0&&e>11?12===e?n:he(0,t+1)-n+1:n},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=re(this);return t<0&&ie(this)>11?t+1:t},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=re(this),e=ie(this);return t<0&&e>11?0:e},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=re(this),e=ie(this),n=oe(this);return t<0&&e>11?12===e?n:he(0,t+1)-n+1:n}},Xt),j(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=ae(this),e=oe(this),n=ie(this),r=re(this),i=se(this),o=ue(this),a=le(this);return fe[t]+", "+(e<10?"0"+e:e)+" "+de[n]+" "+r+" "+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"}},Xt||Qt),j(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=this.getDay(),e=this.getDate(),n=this.getMonth(),r=this.getFullYear();return fe[t]+" "+de[n]+" "+(e<10?"0"+e:e)+" "+r}},Xt||qt),(Xt||$t)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=this.getDay(),e=this.getDate(),n=this.getMonth(),r=this.getFullYear(),i=this.getHours(),o=this.getMinutes(),a=this.getSeconds(),s=this.getTimezoneOffset(),u=k(_(s)/60),l=k(_(s)%60);return fe[t]+" "+de[n]+" "+(e<10?"0"+e:e)+" "+r+" "+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"+(s>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)},B&&i.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var pe=-621987552e5,ge="-000001",ve=Date.prototype.toISOString&&-1===new Date(pe).toISOString().indexOf(ge),me=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),ye=y.bind(Date.prototype.getTime);j(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(ye(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var t=re(this),e=ie(this);t+=k(e/12);var n=[1+(e=(e%12+12)%12),oe(this),se(this),ue(this),le(this)];t=(t<0?"-":t>9999?"+":"")+tt("00000"+_(t),0<=t&&t<=9999?-4:-6);for(var r=0;r<n.length;++r)n[r]=tt("00"+n[r],-2);return t+"-"+Z(n,0,2).join("-")+"T"+Z(n,2).join(":")+"."+tt("000"+ce(this),-3)+"Z"}},ve||me);var be=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(pe).toJSON().indexOf(ge)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(Qe){return!1}}();be||(Date.prototype.toJSON=function(t){var e=i(this),n=V.ToPrimitive(e);if("number"==typeof n&&!isFinite(n))return null;var r=e.toISOString;if(!O(r))throw new TypeError("toISOString property is not callable");return r.call(e)});var xe=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),we=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),ke=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(ke||we||!xe){var _e=M(2,31)-1,Me=G(new Date(1970,0,1,0,0,0,_e+1).getTime());Date=function(t){var e=function(n,r,i,o,a,s,l){var c,f=arguments.length;if(this instanceof t){var d=s,h=l;if(Me&&f>=7&&l>_e){var p=k(l/_e)*_e,g=k(p/1e3);d+=g,h-=1e3*g}c=1===f&&u(n)===n?new t(e.parse(n)):f>=7?new t(n,r,i,o,a,d,h):f>=6?new t(n,r,i,o,a,d):f>=5?new t(n,r,i,o,a):f>=4?new t(n,r,i,o):f>=3?new t(n,r,i):f>=2?new t(n,r):f>=1?new t(n instanceof t?+n:n):new t}else c=t.apply(this,arguments);return U(c)||j(c,{constructor:e},!0),c},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),r=[0,31,59,90,120,151,181,212,243,273,304,334,365],i=function(t,e){var n=e>1?1:0;return r[e]+k((t-1969+n)/4)-k((t-1901+n)/100)+k((t-1601+n)/400)+365*(t-1970)},o=function(e){var n=0,r=e;if(Me&&r>_e){var i=k(r/_e)*_e,o=k(i/1e3);n+=o,r-=1e3*o}return c(new t(1970,0,1,0,0,n,r))};for(var a in t)$(t,a)&&(e[a]=t[a]);return j(e,{now:t.now,UTC:t.UTC},!0),e.prototype=t.prototype,j(e.prototype,{constructor:e},!0),j(e,{parse:function(e){var r=n.exec(e);if(r){var a,s=c(r[1]),u=c(r[2]||1)-1,l=c(r[3]||1)-1,f=c(r[4]||0),d=c(r[5]||0),h=c(r[6]||0),p=k(1e3*c(r[7]||0)),g=Boolean(r[4]&&!r[8]),v="-"===r[9]?1:-1,m=c(r[10]||0),y=c(r[11]||0),b=d>0||h>0||p>0;return f<(b?24:25)&&d<60&&h<60&&p<1e3&&u>-1&&u<12&&m<24&&y<60&&l>-1&&l<i(s,u+1)-i(s,u)&&(a=1e3*(60*((a=60*(24*(i(s,u)+l)+f+m*v))+d+y*v)+h)+p,g&&(a=o(a)),-864e13<=a&&a<=864e13)?a:NaN}return t.parse.apply(this,arguments)}}),e}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var Se=f.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),Ce={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(t,e){for(var n=-1,r=e;++n<Ce.size;)Ce.data[n]=(r+=t*Ce.data[n])%Ce.base,r=k(r/Ce.base)},divide:function(t){for(var e=Ce.size,n=0;--e>=0;)Ce.data[e]=k((n+=Ce.data[e])/t),n=n%t*Ce.base},numToString:function(){for(var t=Ce.size,e="";--t>=0;)if(""!==e||0===t||0!==Ce.data[t]){var n=u(Ce.data[t]);""===e?e=n:e+=tt("0000000",0,7-n.length)+n}return e},pow:function t(e,n,r){return 0===n?r:n%2==1?t(e,n-1,r*e):t(e*e,n/2,r)},log:function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}},Ae=function(t){var e,n,r,i,o,a,s,l;if(e=c(t),(e=G(e)?0:k(e))<0||e>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=c(this),G(n))return"NaN";if(n<=-1e21||n>=1e21)return u(n);if(r="",n<0&&(r="-",n=-n),i="0",n>1e-21)if(a=(o=Ce.log(n*Ce.pow(2,69,1))-69)<0?n*Ce.pow(2,-o,1):n/Ce.pow(2,o,1),a*=4503599627370496,(o=52-o)>0){for(Ce.multiply(0,a),s=e;s>=7;)Ce.multiply(1e7,0),s-=7;for(Ce.multiply(Ce.pow(10,s,1),0),s=o-1;s>=23;)Ce.divide(1<<23),s-=23;Ce.divide(1<<s),Ce.multiply(1,1),Ce.divide(2),i=Ce.numToString()}else Ce.multiply(0,a),Ce.multiply(1<<-o,0),i=Ce.numToString()+tt("0.00000000000000000000",2,2+e);return e>0?(l=i.length)<=e?r+tt("0.0000000000000000000",0,e-l+2)+i:r+tt(i,0,l-e)+"."+tt(i,l-e):r+i};j(f,{toFixed:Ae},Se);var De,Te,Le=function(){try{return"1"===1..toPrecision(void 0)}catch(Qe){return!0}}(),Ee=f.toPrecision;j(f,{toPrecision:function(t){return void 0===t?Ee.call(this):Ee.call(this,t)}},Le),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(De=void 0===/()??/.exec("")[1],Te=M(2,32)-1,l.split=function(e,n){var r=String(this);if(void 0===e&&0===n)return[];if(!t(e))return et(this,e,n);var i,o,a,s,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,f=new RegExp(e.source,l+"g");De||(i=new RegExp("^"+f.source+"$(?!\\s)",l));var d=void 0===n?Te:V.ToUint32(n);for(o=f.exec(r);o&&!((a=o.index+o[0].length)>c&&(rt(u,tt(r,c,o.index)),!De&&o.length>1&&o[0].replace(i,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)}),o.length>1&&o.index<r.length&&p.apply(u,Z(o,1)),s=o[0].length,c=a,u.length>=d));)f.lastIndex===o.index&&f.lastIndex++,o=f.exec(r);return c===r.length?!s&&f.test("")||rt(u,""):rt(u,tt(r,c)),u.length>d?Z(u,0,d):u}):"0".split(void 0,0).length&&(l.split=function(t,e){return void 0===t&&0===e?[]:et(this,t,e)});var Ne,Oe=l.replace,Fe=(Ne=[],"x".replace(/x(.)?/g,function(t,e){rt(Ne,e)}),1===Ne.length&&void 0===Ne[0]);Fe||(l.replace=function(e,n){var r=O(n),i=t(e)&&/\)[*?]/.test(e.source);return Oe.call(this,e,r&&i?function(t){var r=arguments.length,i=e.lastIndex;e.lastIndex=0;var o=e.exec(t)||[];return e.lastIndex=i,rt(o,arguments[r-2],arguments[r-1]),n.apply(this,o)}:n)});var Pe=l.substr,We="".substr&&"b"!=="0b".substr(-1);j(l,{substr:function(t,e){var n=t;return t<0&&(n=x(this.length+t,0)),Pe.call(this,n,e)}},We);var Re="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",ze="\u200b",Ie="["+Re+"]",He=new RegExp("^"+Ie+Ie+"*"),Ye=new RegExp(Ie+Ie+"*$"),Be=l.trim&&(Re.trim()||!ze.trim());j(l,{trim:function(){if(null==this)throw new TypeError("can't convert "+this+" to object");return u(this).replace(He,"").replace(Ye,"")}},Be);var je=y.bind(String.prototype.trim),Ue=l.lastIndexOf&&-1!=="abc\u3042\u3044".lastIndexOf("\u3042\u3044",2);j(l,{lastIndexOf:function(t){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var e=u(this),n=u(t),r=arguments.length>1?c(arguments[1]):NaN,i=G(r)?1/0:V.ToInteger(r),o=w(x(i,0),e.length),a=n.length,s=o+a;s>0;){s=x(0,s-a);var l=nt(tt(e,s,o+a),n);if(-1!==l)return s+l}return-1}},Ue);var Ge,Ve,qe,$e=l.lastIndexOf;if(j(l,{lastIndexOf:function(t){return $e.apply(this,arguments)}},1!==l.lastIndexOf.length),8===parseInt(Re+"08")&&22===parseInt(Re+"0x16")||(parseInt=(Ge=parseInt,Ve=/^[-+]?0[xX]/,function(t,e){var n=je(String(t)),r=c(e)||(Ve.test(n)?16:10);return Ge(n,r)})),1/parseFloat("-0")!=-1/0&&(parseFloat=(qe=parseFloat,function(t){var e=je(String(t)),n=qe(e);return 0===n&&"-"===tt(e,0,1)?-0:n})),"RangeError: test"!==String(new RangeError("test"))){var Xe=function(){if(null==this)throw new TypeError("can't convert "+this+" to object");var t=this.name;void 0===t?t="Error":"string"!=typeof t&&(t=u(t));var e=this.message;return void 0===e?e="":"string"!=typeof e&&(e=u(e)),t?e?t+": "+e:t:e};Error.prototype.toString=Xe}if(B){var Ze=function(t,e){if(it(t,e)){var n=Object.getOwnPropertyDescriptor(t,e);n.configurable&&(n.enumerable=!1,Object.defineProperty(t,e,n))}};Ze(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),Ze(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var Ke=function(){var t="/"+this.source+"/";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),t};RegExp.prototype.toString=Ke}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).CodeMirror=e()}(this,function(){"use strict";var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),r=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),a=r||i||o,s=a&&(r?document.documentMode||6:+(o||i)[1]),u=!o&&/WebKit\//.test(t),l=u&&/Qt\/\d+\.\d+/.test(t),c=!o&&/Chrome\//.test(t),f=/Opera\//.test(t),d=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),p=/PhantomJS/.test(t),g=d&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),v=/Android/.test(t),m=g||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),y=g||/Mac/.test(e),b=/\bCrOS\b/.test(t),x=/win/i.test(e),w=f&&t.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(f=!1,u=!0);var k=y&&(l||f&&(null==w||w<12.11)),_=n||a&&s>=9;function M(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var S,C=function(t,e){var n=t.className,r=M(e).exec(n);if(r){var i=n.slice(r.index+r[0].length);t.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function A(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function D(t,e){return A(t).appendChild(e)}function T(t,e,n,r){var i=document.createElement(t);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof e)i.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function L(t,e,n,r){var i=T(t,e,n,r);return i.setAttribute("role","presentation"),i}function E(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function N(){var t;try{t=document.activeElement}catch(Lt){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function O(t,e){var n=t.className;M(e).test(n)||(t.className+=(n?" ":"")+e)}function F(t,e){for(var n=t.split(" "),r=0;r<n.length;r++)n[r]&&!M(n[r]).test(e)&&(e+=" "+n[r]);return e}S=document.createRange?function(t,e,n,r){var i=document.createRange();return i.setEnd(r||t,n),i.setStart(t,e),i}:function(t,e,n){var r=document.body.createTextRange();try{r.moveToElementText(t.parentNode)}catch(Lt){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",e),r};var P=function(t){t.select()};function W(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function R(t,e,n){for(var r in e||(e={}),t)!t.hasOwnProperty(r)||!1===n&&e.hasOwnProperty(r)||(e[r]=t[r]);return e}function z(t,e,n,r,i){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=r||0,a=i||0;;){var s=t.indexOf("\t",o);if(s<0||s>=e)return a+(e-o);a+=s-o,a+=n-a%n,o=s+1}}g?P=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:a&&(P=function(t){try{t.select()}catch(e){}});var I=function(){this.id=null,this.f=null,this.time=0,this.handler=W(this.onTimeout,this)};function H(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}I.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},I.prototype.set=function(t,e){this.f=e;var n=+new Date+t;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=n)};var Y={toString:function(){return"CodeMirror.Pass"}},B={scroll:!1},j={origin:"*mouse"},U={origin:"+move"};function G(t,e,n){for(var r=0,i=0;;){var o=t.indexOf("\t",r);-1==o&&(o=t.length);var a=o-r;if(o==t.length||i+a>=e)return r+Math.min(a,e-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=e)return r}}var V=[""];function q(t){for(;V.length<=t;)V.push($(V)+" ");return V[t]}function $(t){return t[t.length-1]}function X(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r],r);return n}function Z(){}function K(t,e){var n;return Object.create?n=Object.create(t):(Z.prototype=t,n=new Z),e&&R(e,n),n}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||Q.test(t))}function tt(t,e){return e?!!(e.source.indexOf("\\w")>-1&&J(t))||e.test(t):J(t)}function et(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var nt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function rt(t){return t.charCodeAt(0)>=768&&nt.test(t)}function it(t,e,n){for(;(n<0?e>0:e<t.length)&&rt(t.charAt(e));)e+=n;return e}function ot(t,e,n){for(var r=e>n?-1:1;;){if(e==n)return e;var i=(e+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+r}}var at=null;function st(t,e,n){var r;at=null;for(var i=0;i<t.length;++i){var o=t[i];if(o.from<e&&o.to>e)return i;o.to==e&&(o.from!=o.to&&"before"==n?r=i:at=i),o.from==e&&(o.from!=o.to&&"before"!=n?r=i:at=i)}return null!=r?r:at}var ut=function(){var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,n=/[LRr]/,r=/[Lb1n]/,i=/[1n]/;function o(t,e,n){this.level=t,this.from=e,this.to=n}return function(a,s){var u="ltr"==s?"L":"R";if(0==a.length||"ltr"==s&&!t.test(a))return!1;for(var l,c=a.length,f=[],d=0;d<c;++d)f.push((l=a.charCodeAt(d))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var h=0,p=u;h<c;++h){var g=f[h];"m"==g?f[h]=p:p=g}for(var v=0,m=u;v<c;++v){var y=f[v];"1"==y&&"r"==m?f[v]="n":n.test(y)&&(m=y,"r"==y&&(f[v]="R"))}for(var b=1,x=f[0];b<c-1;++b){var w=f[b];"+"==w&&"1"==x&&"1"==f[b+1]?f[b]="1":","!=w||x!=f[b+1]||"1"!=x&&"n"!=x||(f[b]=x),x=w}for(var k=0;k<c;++k){var _=f[k];if(","==_)f[k]="N";else if("%"==_){var M=void 0;for(M=k+1;M<c&&"%"==f[M];++M);for(var S=k&&"!"==f[k-1]||M<c&&"1"==f[M]?"1":"N",C=k;C<M;++C)f[C]=S;k=M-1}}for(var A=0,D=u;A<c;++A){var T=f[A];"L"==D&&"1"==T?f[A]="L":n.test(T)&&(D=T)}for(var L=0;L<c;++L)if(e.test(f[L])){var E=void 0;for(E=L+1;E<c&&e.test(f[E]);++E);for(var N="L"==(L?f[L-1]:u),O=N==("L"==(E<c?f[E]:u))?N?"L":"R":u,F=L;F<E;++F)f[F]=O;L=E-1}for(var P,W=[],R=0;R<c;)if(r.test(f[R])){var z=R;for(++R;R<c&&r.test(f[R]);++R);W.push(new o(0,z,R))}else{var I=R,H=W.length,Y="rtl"==s?1:0;for(++R;R<c&&"L"!=f[R];++R);for(var B=I;B<R;)if(i.test(f[B])){I<B&&(W.splice(H,0,new o(1,I,B)),H+=Y);var j=B;for(++B;B<R&&i.test(f[B]);++B);W.splice(H,0,new o(2,j,B)),H+=Y,I=B}else++B;I<R&&W.splice(H,0,new o(1,I,R))}return"ltr"==s&&(1==W[0].level&&(P=a.match(/^\s+/))&&(W[0].from=P[0].length,W.unshift(new o(0,0,P[0].length))),1==$(W).level&&(P=a.match(/\s+$/))&&($(W).to-=P[0].length,W.push(new o(0,c-P[0].length,c)))),"rtl"==s?W.reverse():W}}();function lt(t,e){var n=t.order;return null==n&&(n=t.order=ut(t.text,e)),n}var ct=[],ft=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var r=t._handlers||(t._handlers={});r[e]=(r[e]||ct).concat(n)}};function dt(t,e){return t._handlers&&t._handlers[e]||ct}function ht(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var r=t._handlers,i=r&&r[e];if(i){var o=H(i,n);o>-1&&(r[e]=i.slice(0,o).concat(i.slice(o+1)))}}}function pt(t,e){var n=dt(t,e);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function gt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),pt(t,n||e.type,t,e),wt(e)||e.codemirrorIgnore}function vt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),r=0;r<e.length;++r)-1==H(n,e[r])&&n.push(e[r])}function mt(t,e){return dt(t,e).length>0}function yt(t){t.prototype.on=function(t,e){ft(this,t,e)},t.prototype.off=function(t,e){ht(this,t,e)}}function bt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function xt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function wt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function kt(t){bt(t),xt(t)}function _t(t){return t.target||t.srcElement}function Mt(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),y&&t.ctrlKey&&1==e&&(e=3),e}var St,Ct,At=function(){if(a&&s<9)return!1;var t=T("div");return"draggable"in t||"dragDrop"in t}();function Dt(t){if(null==St){var e=T("span","\u200b");D(t,T("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(St=e.offsetWidth<=1&&e.offsetHeight>2&&!(a&&s<8))}var n=St?T("span","\u200b"):T("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Tt(t){if(null!=Ct)return Ct;var e=D(t,document.createTextNode("A\u062eA")),n=S(e,0,1).getBoundingClientRect(),r=S(e,1,2).getBoundingClientRect();return A(t),!(!n||n.left==n.right)&&(Ct=r.right-n.right<3)}var Lt,Et=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],r=t.length;e<=r;){var i=t.indexOf("\n",e);-1==i&&(i=t.length);var o=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),e+=a+1):(n.push(o),e=i+1)}return n}:function(t){return t.split(/\r\n?|\n/)},Nt=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(Lt){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(Lt){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Ot="oncopy"in(Lt=T("div"))||(Lt.setAttribute("oncopy","return;"),"function"==typeof Lt.oncopy),Ft=null,Pt={},Wt={};function Rt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Pt[t]=e}function zt(t){if("string"==typeof t&&Wt.hasOwnProperty(t))t=Wt[t];else if(t&&"string"==typeof t.name&&Wt.hasOwnProperty(t.name)){var e=Wt[t.name];"string"==typeof e&&(e={name:e}),(t=K(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return zt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return zt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function It(t,e){e=zt(e);var n=Pt[e.name];if(!n)return It(t,"text/plain");var r=n(t,e);if(Ht.hasOwnProperty(e.name)){var i=Ht[e.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=e.name,e.helperType&&(r.helperType=e.helperType),e.modeProps)for(var a in e.modeProps)r[a]=e.modeProps[a];return r}var Ht={};function Yt(t,e){R(e,Ht.hasOwnProperty(t)?Ht[t]:Ht[t]={})}function Bt(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function jt(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Ut(t,e,n){return!t.startState||t.startState(e,n)}var Gt=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Vt(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(e<o){n=i;break}e-=o}return n.lines[e]}function qt(t,e,n){var r=[],i=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;i==n.line&&(o=o.slice(0,n.ch)),i==e.line&&(o=o.slice(e.ch)),r.push(o),++i}),r}function $t(t,e,n){var r=[];return t.iter(e,n,function(t){r.push(t.text)}),r}function Xt(t,e){var n=e-t.height;if(n)for(var r=t;r;r=r.parent)r.height+=n}function Zt(t){if(null==t.parent)return null;for(var e=t.parent,n=H(e.lines,t),r=e.parent;r;e=r,r=r.parent)for(var i=0;r.children[i]!=e;++i)n+=r.children[i].chunkSize();return n+e.first}function Kt(t,e){var n=t.first;t:do{for(var r=0;r<t.children.length;++r){var i=t.children[r],o=i.height;if(e<o){t=i;continue t}e-=o,n+=i.chunkSize()}return n}while(!t.lines);for(var a=0;a<t.lines.length;++a){var s=t.lines[a].height;if(e<s)break;e-=s}return n+a}function Qt(t,e){return e>=t.first&&e<t.first+t.size}function Jt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function te(t,e,n){if(void 0===n&&(n=null),!(this instanceof te))return new te(t,e,n);this.line=t,this.ch=e,this.sticky=n}function ee(t,e){return t.line-e.line||t.ch-e.ch}function ne(t,e){return t.sticky==e.sticky&&0==ee(t,e)}function re(t){return te(t.line,t.ch)}function ie(t,e){return ee(t,e)<0?e:t}function oe(t,e){return ee(t,e)<0?t:e}function ae(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function se(t,e){if(e.line<t.first)return te(t.first,0);var n=t.first+t.size-1;return e.line>n?te(n,Vt(t,n).text.length):function(t,e){var n=t.ch;return null==n||n>e?te(t.line,e):n<0?te(t.line,0):t}(e,Vt(t,e.line).text.length)}function ue(t,e){for(var n=[],r=0;r<e.length;r++)n[r]=se(t,e[r]);return n}Gt.prototype.eol=function(){return this.pos>=this.string.length},Gt.prototype.sol=function(){return this.pos==this.lineStart},Gt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Gt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Gt.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Gt.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Gt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Gt.prototype.skipToEnd=function(){this.pos=this.string.length},Gt.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Gt.prototype.backUp=function(t){this.pos-=t},Gt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=z(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Gt.prototype.indentation=function(){return z(this.string,null,this.tabSize)-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Gt.prototype.match=function(t,e,n){if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&!1!==e&&(this.pos+=r[0].length),r)}var i=function(t){return n?t.toLowerCase():t};if(i(this.string.substr(this.pos,t.length))==i(t))return!1!==e&&(this.pos+=t.length),!0},Gt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Gt.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Gt.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Gt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var le=function(t,e){this.state=t,this.lookAhead=e},ce=function(t,e,n,r){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function fe(t,e,n,r){var i=[t.state.modeGen],o={};xe(t,e.text,t.doc.mode,n,function(t,e){return i.push(t,e)},o,r);for(var a=n.state,s=function(r){n.baseTokens=i;var s=t.state.overlays[r],u=1,l=0;n.state=!0,xe(t,e.text,s.mode,n,function(t,e){for(var n=u;l<t;){var r=i[u];r>t&&i.splice(u,1,t,i[u+1],r),u+=2,l=Math.min(t,r)}if(e)if(s.opaque)i.splice(n,u-n,t,"overlay "+e),u=n+2;else for(;n<u;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+e}},o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},u=0;u<t.state.overlays.length;++u)s(u);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function de(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var r=he(t,Zt(e)),i=e.text.length>t.options.maxHighlightLength&&Bt(t.doc.mode,r.state),o=fe(t,e,r);i&&(r.state=i),e.stateAfter=r.save(!i),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function he(t,e,n){var r=t.doc,i=t.display;if(!r.mode.startState)return new ce(r,!0,e);var o=function(t,e,n){for(var r,i,o=t.doc,a=n?-1:e-(t.doc.mode.innerMode?1e3:100),s=e;s>a;--s){if(s<=o.first)return o.first;var u=Vt(o,s-1),l=u.stateAfter;if(l&&(!n||s+(l instanceof le?l.lookAhead:0)<=o.modeFrontier))return s;var c=z(u.text,null,t.options.tabSize);(null==i||r>c)&&(i=s-1,r=c)}return i}(t,e,n),a=o>r.first&&Vt(r,o-1).stateAfter,s=a?ce.fromSaved(r,a,o):new ce(r,Ut(r.mode),o);return r.iter(o,e,function(n){pe(t,n.text,s);var r=s.line;n.stateAfter=r==e-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()}),n&&(r.modeFrontier=s.line),s}function pe(t,e,n,r){var i=t.doc.mode,o=new Gt(e,t.options.tabSize,n);for(o.start=o.pos=r||0,""==e&&ge(i,n.state);!o.eol();)ve(i,o,n.state),o.start=o.pos}function ge(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=jt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function ve(t,e,n,r){for(var i=0;i<10;i++){r&&(r[0]=jt(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}ce.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},ce.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},ce.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ce.fromSaved=function(t,e,n){return e instanceof le?new ce(t,Bt(t.mode,e.state),n,e.lookAhead):new ce(t,Bt(t.mode,e),n)},ce.prototype.save=function(t){var e=!1!==t?Bt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new le(e,this.maxLookAhead):e};var me=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function ye(t,e,n,r){var i,o,a=t.doc,s=a.mode,u=Vt(a,(e=se(a,e)).line),l=he(t,e.line,n),c=new Gt(u.text,t.options.tabSize,l);for(r&&(o=[]);(r||c.pos<e.ch)&&!c.eol();)c.start=c.pos,i=ve(s,c,l.state),r&&o.push(new me(c,i,Bt(a.mode,l.state)));return r?o:new me(c,i,l.state)}function be(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==e[r]?e[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(e[r])||(e[r]+=" "+n[2])}return t}function xe(t,e,n,r,i,o,a){var s=n.flattenSpans;null==s&&(s=t.options.flattenSpans);var u,l=0,c=null,f=new Gt(e,t.options.tabSize,r),d=t.options.addModeClass&&[null];for(""==e&&be(ge(n,r.state),o);!f.eol();){if(f.pos>t.options.maxHighlightLength?(s=!1,a&&pe(t,e,r,f.pos),f.pos=e.length,u=null):u=be(ve(n,f,r.state,d),o),d){var h=d[0].name;h&&(u="m-"+(u?h+" "+u:h))}if(!s||c!=u){for(;l<f.start;)i(l=Math.min(f.start,l+5e3),c);c=u}f.start=f.pos}for(;l<f.pos;){var p=Math.min(f.pos,l+5e3);i(p,c),l=p}}var we=!1,ke=!1;function _e(t,e,n){this.marker=t,this.from=e,this.to=n}function Me(t,e){if(t)for(var n=0;n<t.length;++n){var r=t[n];if(r.marker==e)return r}}function Se(t,e){for(var n,r=0;r<t.length;++r)t[r]!=e&&(n||(n=[])).push(t[r]);return n}function Ce(t,e){if(e.full)return null;var n=Qt(t,e.from.line)&&Vt(t,e.from.line).markedSpans,r=Qt(t,e.to.line)&&Vt(t,e.to.line).markedSpans;if(!n&&!r)return null;var i=e.from.ch,o=e.to.ch,a=0==ee(e.from,e.to),s=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],a=o.marker;null!=o.from&&!(a.inclusiveLeft?o.from<=e:o.from<e)&&(o.from!=e||"bookmark"!=a.type||n&&o.marker.insertLeft)||(r||(r=[])).push(new _e(a,o.from,null==o.to||(a.inclusiveRight?o.to>=e:o.to>e)?null:o.to))}return r}(n,i,a),u=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],a=o.marker;(null==o.to||(a.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==a.type&&(!n||o.marker.insertLeft))&&(r||(r=[])).push(new _e(a,null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e)?null:o.from-e,null==o.to?null:o.to-e))}return r}(r,o,a),l=1==e.text.length,c=$(e.text).length+(l?i:0);if(s)for(var f=0;f<s.length;++f){var d=s[f];if(null==d.to){var h=Me(u,d.marker);h?l&&(d.to=null==h.to?null:h.to+c):d.to=i}}if(u)for(var p=0;p<u.length;++p){var g=u[p];null!=g.to&&(g.to+=c),null==g.from?Me(s,g.marker)||(g.from=c,l&&(s||(s=[])).push(g)):(g.from+=c,l&&(s||(s=[])).push(g))}s&&(s=Ae(s)),u&&u!=s&&(u=Ae(u));var v=[s];if(!l){var m,y=e.text.length-2;if(y>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(m||(m=[])).push(new _e(s[b].marker,null,null));for(var x=0;x<y;++x)v.push(m);v.push(u)}return v}function Ae(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function De(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Te(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Le(t){return t.inclusiveLeft?-1:0}function Ee(t){return t.inclusiveRight?1:0}function Ne(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var r=t.find(),i=e.find(),o=ee(r.from,i.from)||Le(t)-Le(e);return o?-o:ee(r.to,i.to)||Ee(t)-Ee(e)||e.id-t.id}function Oe(t,e){var n,r=ke&&t.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(e?i.from:i.to)&&(!n||Ne(n,i.marker)<0)&&(n=i.marker);return n}function Fe(t){return Oe(t,!0)}function Pe(t){return Oe(t,!1)}function We(t,e){var n,r=ke&&t.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||Ne(n,o.marker)<0)&&(n=o.marker)}return n}function Re(t,e,n,r,i){var o=Vt(t,e),a=ke&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var u=a[s];if(u.marker.collapsed){var l=u.marker.find(0),c=ee(l.from,n)||Le(u.marker)-Le(i),f=ee(l.to,r)||Ee(u.marker)-Ee(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(u.marker.inclusiveRight&&i.inclusiveLeft?ee(l.to,n)>=0:ee(l.to,n)>0)||c>=0&&(u.marker.inclusiveRight&&i.inclusiveLeft?ee(l.from,r)<=0:ee(l.from,r)<0)))return!0}}}function ze(t){for(var e;e=Fe(t);)t=e.find(-1,!0).line;return t}function Ie(t,e){var n=Vt(t,e),r=ze(n);return n==r?e:Zt(r)}function He(t,e){if(e>t.lastLine())return e;var n,r=Vt(t,e);if(!Ye(t,r))return e;for(;n=Pe(r);)r=n.find(1,!0).line;return Zt(r)+1}function Ye(t,e){var n=ke&&e.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Be(t,e,r))return!0}}function Be(t,e,n){if(null==n.to){var r=n.marker.find(1,!0);return Be(t,r.line,Me(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var i=void 0,o=0;o<e.markedSpans.length;++o)if((i=e.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Be(t,e,i))return!0}function je(t){for(var e=0,n=(t=ze(t)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==t)break;e+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;e+=s.height}return e}function Ue(t){if(0==t.height)return 0;for(var e,n=t.text.length,r=t;e=Fe(r);){var i=e.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=t;e=Pe(r);){var o=e.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function Ge(t){var e=t.display,n=t.doc;e.maxLine=Vt(n,n.first),e.maxLineLength=Ue(e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var n=Ue(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}var Ve=function(t,e,n){this.text=t,Te(this,e),this.height=n?n(this):1};function qe(t){t.parent=null,De(t)}Ve.prototype.lineNo=function(){return Zt(this)},yt(Ve);var $e={},Xe={};function Ze(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Xe:$e;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Ke(t,e){var n=L("span",null,null,u?"padding-right: .1px":null),r={pre:L("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var i=0;i<=(e.rest?e.rest.length:0);i++){var o=i?e.rest[i-1]:e.line,a=void 0;r.pos=0,r.addToken=Je,Tt(t.display.measure)&&(a=lt(o,t.doc.direction))&&(r.addToken=tn(r.addToken,a)),r.map=[],nn(o,r,de(t,o,e!=t.display.externalMeasured&&Zt(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=F(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=F(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Dt(t.display.measure))),0==i?(e.measure.map=r.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(r.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(u){var s=r.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return pt(t,"renderLine",t,e.line,r.pre),r.pre.className&&(r.textClass=F(r.pre.className,r.textClass||"")),r}function Qe(t){var e=T("span","\u2022","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Je(t,e,n,r,i,o,u){if(e){var l,c=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,r="",i=0;i<t.length;i++){var o=t.charAt(i);" "!=o||!n||i!=t.length-1&&32!=t.charCodeAt(i+1)||(o="\xa0"),r+=o,n=" "==o}return r}(e,t.trailingSpace):e,f=t.cm.state.specialChars,d=!1;if(f.test(e)){l=document.createDocumentFragment();for(var h=0;;){f.lastIndex=h;var p=f.exec(e),g=p?p.index-h:e.length-h;if(g){var v=document.createTextNode(c.slice(h,h+g));l.appendChild(a&&s<9?T("span",[v]):v),t.map.push(t.pos,t.pos+g,v),t.col+=g,t.pos+=g}if(!p)break;h+=g+1;var m=void 0;if("\t"==p[0]){var y=t.cm.options.tabSize,b=y-t.col%y;(m=l.appendChild(T("span",q(b),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),t.col+=b}else"\r"==p[0]||"\n"==p[0]?((m=l.appendChild(T("span","\r"==p[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",p[0]),t.col+=1):((m=t.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),l.appendChild(a&&s<9?T("span",[m]):m),t.col+=1);t.map.push(t.pos,t.pos+1,m),t.pos++}}else t.col+=e.length,l=document.createTextNode(c),t.map.push(t.pos,t.pos+e.length,l),a&&s<9&&(d=!0),t.pos+=e.length;if(t.trailingSpace=32==c.charCodeAt(e.length-1),n||r||i||d||o||u){var x=n||"";r&&(x+=r),i&&(x+=i);var w=T("span",[l],x,o);if(u)for(var k in u)u.hasOwnProperty(k)&&"style"!=k&&"class"!=k&&w.setAttribute(k,u[k]);return t.content.appendChild(w)}t.content.appendChild(l)}}function tn(t,e){return function(n,r,i,o,a,s,u){i=i?i+" cm-force-border":"cm-force-border";for(var l=n.pos,c=l+r.length;;){for(var f=void 0,d=0;d<e.length&&!((f=e[d]).to>l&&f.from<=l);d++);if(f.to>=c)return t(n,r,i,o,a,s,u);t(n,r.slice(0,f.to-l),i,o,null,s,u),o=null,r=r.slice(f.to-l),l=f.to}}}function en(t,e,n,r){var i=!r&&n.widgetNode;i&&t.map.push(t.pos,t.pos+e,i),!r&&t.cm.display.input.needsContentAttribute&&(i||(i=t.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(t.cm.display.input.setUneditable(i),t.content.appendChild(i)),t.pos+=e,t.trailingSpace=!1}function nn(t,e,n){var r=t.markedSpans,i=t.text,o=0;if(r)for(var a,s,u,l,c,f,d,h=i.length,p=0,g=1,v="",m=0;;){if(m==p){u=l=c=s="",d=null,f=null,m=1/0;for(var y=[],b=void 0,x=0;x<r.length;++x){var w=r[x],k=w.marker;if("bookmark"==k.type&&w.from==p&&k.widgetNode)y.push(k);else if(w.from<=p&&(null==w.to||w.to>p||k.collapsed&&w.to==p&&w.from==p)){if(null!=w.to&&w.to!=p&&m>w.to&&(m=w.to,l=""),k.className&&(u+=" "+k.className),k.css&&(s=(s?s+";":"")+k.css),k.startStyle&&w.from==p&&(c+=" "+k.startStyle),k.endStyle&&w.to==m&&(b||(b=[])).push(k.endStyle,w.to),k.title&&((d||(d={})).title=k.title),k.attributes)for(var _ in k.attributes)(d||(d={}))[_]=k.attributes[_];k.collapsed&&(!f||Ne(f.marker,k)<0)&&(f=w)}else w.from>p&&m>w.from&&(m=w.from)}if(b)for(var M=0;M<b.length;M+=2)b[M+1]==m&&(l+=" "+b[M]);if(!f||f.from==p)for(var S=0;S<y.length;++S)en(e,0,y[S]);if(f&&(f.from||0)==p){if(en(e,(null==f.to?h+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=h)break;for(var C=Math.min(h,m);;){if(v){var A=p+v.length;if(!f){var D=A>C?v.slice(0,C-p):v;e.addToken(e,D,a?a+u:u,c,p+D.length==m?l:"",s,d)}if(A>=C){v=v.slice(C-p),p=C;break}p=A,c=""}v=i.slice(o,o=n[g++]),a=Ze(n[g++],e.cm.options)}}else for(var T=1;T<n.length;T+=2)e.addToken(e,i.slice(o,o=n[T]),Ze(n[T+1],e.cm.options))}function rn(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=Pe(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?Zt($(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Ye(t,e)}function on(t,e,n){for(var r,i=[],o=e;o<n;o=r){var a=new rn(t.doc,Vt(t.doc,o),o);r=o+a.size,i.push(a)}return i}var an=null,sn=null;function un(t,e){var n=dt(t,e);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);an?r=an.delayedCallbacks:sn?r=sn:(r=sn=[],setTimeout(ln,0));for(var o=function(t){r.push(function(){return n[t].apply(null,i)})},a=0;a<n.length;++a)o(a)}}function ln(){var t=sn;sn=null;for(var e=0;e<t.length;++e)t[e]()}function cn(t,e,n,r){for(var i=0;i<e.changes.length;i++){var o=e.changes[i];"text"==o?hn(t,e):"gutter"==o?gn(t,e,n,r):"class"==o?pn(t,e):"widget"==o&&vn(t,e,r)}e.changes=null}function fn(t){return t.node==t.text&&(t.node=T("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),a&&s<8&&(t.node.style.zIndex=2)),t.node}function dn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Ke(t,e)}function hn(t,e){var n=e.text.className,r=dn(t,e);e.text==e.node&&(e.node=r.pre),e.text.parentNode.replaceChild(r.pre,e.text),e.text=r.pre,r.bgClass!=e.bgClass||r.textClass!=e.textClass?(e.bgClass=r.bgClass,e.textClass=r.textClass,pn(t,e)):n&&(e.text.className=n)}function pn(t,e){!function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var r=fn(e);e.background=r.insertBefore(T("div",null,n),r.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?fn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className=""),e.text.className=(e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass)||""}function gn(t,e,n,r){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var i=fn(e);e.gutterBackground=T("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),i.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var a=fn(e),s=e.gutter=T("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(s.setAttribute("aria-hidden","true"),t.display.input.setUneditable(s),a.insertBefore(s,e.text),e.line.gutterClass&&(s.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=s.appendChild(T("div",Jt(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var u=0;u<t.display.gutterSpecs.length;++u){var l=t.display.gutterSpecs[u].className,c=o.hasOwnProperty(l)&&o[l];c&&s.appendChild(T("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[l]+"px; width: "+r.gutterWidth[l]+"px"))}}}function vn(t,e,n){e.alignable&&(e.alignable=null);for(var r=M("CodeMirror-linewidget"),i=e.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,r.test(i.className)&&e.node.removeChild(i);yn(t,e,n)}function mn(t,e,n,r){var i=dn(t,e);return e.text=e.node=i.pre,i.bgClass&&(e.bgClass=i.bgClass),i.textClass&&(e.textClass=i.textClass),pn(t,e),gn(t,e,n,r),yn(t,e,r),e.node}function yn(t,e,n){if(bn(t,e.line,e,n,!0),e.rest)for(var r=0;r<e.rest.length;r++)bn(t,e.rest[r],e,n,!1)}function bn(t,e,n,r,i){if(e.widgets)for(var o=fn(n),a=0,s=e.widgets;a<s.length;++a){var u=s[a],l=T("div",[u.node],"CodeMirror-linewidget"+(u.className?" "+u.className:""));u.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),xn(u,l,n,r),t.display.input.setUneditable(l),i&&u.above?o.insertBefore(l,n.gutter||n.text):o.appendChild(l),un(u,"redraw")}}function xn(t,e,n,r){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var i=r.wrapperWidth;e.style.left=r.fixedPos+"px",t.coverGutter||(i-=r.gutterTotalWidth,e.style.paddingLeft=r.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-r.gutterTotalWidth+"px"))}function wn(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!E(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),D(e.display.measure,T("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function kn(t,e){for(var n=_t(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function _n(t){return t.lineSpace.offsetTop}function Mn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Sn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=D(t.measure,T("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(t.cachedPaddingH=r),r}function Cn(t){return 50-t.display.nativeBarWidth}function An(t){return t.display.scroller.clientWidth-Cn(t)-t.display.barWidth}function Dn(t){return t.display.scroller.clientHeight-Cn(t)-t.display.barHeight}function Tn(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var r=0;r<t.rest.length;r++)if(t.rest[r]==e)return{map:t.measure.maps[r],cache:t.measure.caches[r]};for(var i=0;i<t.rest.length;i++)if(Zt(t.rest[i])>n)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}function Ln(t,e,n,r){return On(t,Nn(t,e),n,r)}function En(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[cr(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Nn(t,e){var n=Zt(e),r=En(t,n);r&&!r.text?r=null:r&&r.changes&&(cn(t,r,n,or(t)),t.curOp.forceUpdate=!0),r||(r=function(t,e){var n=Zt(e=ze(e)),r=t.display.externalMeasured=new rn(t.doc,e,n);r.lineN=n;var i=r.built=Ke(t,r);return r.text=i.pre,D(t.display.lineMeasure,i.pre),r}(t,e));var i=Tn(r,e,n);return{line:e,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function On(t,e,n,r,i){e.before&&(n=-1);var o,u=n+(r||"");return e.cache.hasOwnProperty(u)?o=e.cache[u]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,n){var r=t.options.lineWrapping,i=r&&An(t);if(!e.measure.heights||r&&e.measure.width!=i){var o=e.measure.heights=[];if(r){e.measure.width=i;for(var a=e.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var u=a[s],l=a[s+1];Math.abs(u.bottom-l.bottom)>2&&o.push((u.bottom+l.top)/2-n.top)}}o.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(o=function(t,e,n,r){var i,o=Wn(e.map,n,r),u=o.node,l=o.start,c=o.end,f=o.collapse;if(3==u.nodeType){for(var d=0;d<4;d++){for(;l&&rt(e.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+c<o.coverEnd&&rt(e.line.text.charAt(o.coverStart+c));)++c;if((i=a&&s<9&&0==l&&c==o.coverEnd-o.coverStart?u.parentNode.getBoundingClientRect():Rn(S(u,l,c).getClientRects(),r)).left||i.right||0==l)break;c=l,l-=1,f="right"}a&&s<11&&(i=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=Ft)return Ft;var e=D(t,T("span","x")),n=e.getBoundingClientRect(),r=S(e,0,1).getBoundingClientRect();return Ft=Math.abs(n.left-r.left)>1}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*r,bottom:e.bottom*r}}(t.display.measure,i))}else{var h;l>0&&(f=r="right"),i=t.options.lineWrapping&&(h=u.getClientRects()).length>1?h["right"==r?h.length-1:0]:u.getBoundingClientRect()}if(a&&s<9&&!l&&(!i||!i.left&&!i.right)){var p=u.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+ir(t.display),top:p.top,bottom:p.bottom}:Pn}for(var g=i.top-e.rect.top,v=i.bottom-e.rect.top,m=(g+v)/2,y=e.view.measure.heights,b=0;b<y.length-1&&!(m<y[b]);b++);var x={left:("right"==f?i.right:i.left)-e.rect.left,right:("left"==f?i.left:i.right)-e.rect.left,top:b?y[b-1]:0,bottom:y[b]};return i.left||i.right||(x.bogus=!0),t.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=v),x}(t,e,n,r)).bogus||(e.cache[u]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Fn,Pn={left:0,right:0,top:0,bottom:0};function Wn(t,e,n){for(var r,i,o,a,s,u,l=0;l<t.length;l+=3)if(u=t[l+1],e<(s=t[l])?(i=0,o=1,a="left"):e<u?o=1+(i=e-s):(l==t.length-3||e==u&&t[l+3]>e)&&(i=(o=u-s)-1,e>=u&&(a="right")),null!=i){if(r=t[l+2],s==u&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;l&&t[l-2]==t[l-3]&&t[l-1].insertLeft;)r=t[2+(l-=3)],a="left";if("right"==n&&i==u-s)for(;l<t.length-3&&t[l+3]==t[l+4]&&!t[l+5].insertLeft;)r=t[(l+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:s,coverEnd:u}}function Rn(t,e){var n=Pn;if("left"==e)for(var r=0;r<t.length&&(n=t[r]).left==n.right;r++);else for(var i=t.length-1;i>=0&&(n=t[i]).left==n.right;i--);return n}function zn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function In(t){t.display.externalMeasure=null,A(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)zn(t.display.view[e])}function Hn(t){In(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Yn(){return c&&v?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Bn(){return c&&v?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function jn(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=wn(t.widgets[n]));return e}function Un(t,e,n,r,i){if(!i){var o=jn(e);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=je(e);if("local"==r?a+=_n(t.display):a-=t.display.viewOffset,"page"==r||"window"==r){var s=t.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:Bn());var u=s.left+("window"==r?0:Yn());n.left+=u,n.right+=u}return n.top+=a,n.bottom+=a,n}function Gn(t,e,n){if("div"==n)return e;var r=e.left,i=e.top;if("page"==n)r-=Yn(),i-=Bn();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=t.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function Vn(t,e,n,r,i){return r||(r=Vt(t.doc,e.line)),Un(t,r,Ln(t,r,e.ch,i),n)}function qn(t,e,n,r,i,o){function a(e,a){var s=On(t,i,e,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Un(t,r,s,n)}r=r||Vt(t.doc,e.line),i||(i=Nn(t,r));var s=lt(r,t.doc.direction),u=e.ch,l=e.sticky;if(u>=r.text.length?(u=r.text.length,l="before"):u<=0&&(u=0,l="after"),!s)return a("before"==l?u-1:u,"before"==l);function c(t,e,n){return a(n?t-1:t,1==s[e].level!=n)}var f=st(s,u,l),d=at,h=c(u,f,"before"==l);return null!=d&&(h.other=c(u,d,"before"!=l)),h}function $n(t,e){var n=0;e=se(t.doc,e),t.options.lineWrapping||(n=ir(t.display)*e.ch);var r=Vt(t.doc,e.line),i=je(r)+_n(t.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Xn(t,e,n,r,i){var o=te(t,e,n);return o.xRel=i,r&&(o.outside=r),o}function Zn(t,e,n){var r=t.doc;if((n+=t.display.viewOffset)<0)return Xn(r.first,0,null,-1,-1);var i=Kt(r,n),o=r.first+r.size-1;if(i>o)return Xn(r.first+r.size-1,Vt(r,o).text.length,null,1,1);e<0&&(e=0);for(var a=Vt(r,i);;){var s=tr(t,a,i,e,n),u=We(a,s.ch+(s.xRel>0||s.outside>0?1:0));if(!u)return s;var l=u.find(1);if(l.line==i)return l;a=Vt(r,i=l.line)}}function Kn(t,e,n,r){r-=jn(e);var i=e.text.length,o=ot(function(e){return On(t,n,e-1).bottom<=r},i,0);return{begin:o,end:i=ot(function(e){return On(t,n,e).top>r},o,i)}}function Qn(t,e,n,r){return n||(n=Nn(t,e)),Kn(t,e,n,Un(t,e,On(t,n,r),"line").top)}function Jn(t,e,n,r){return!(t.bottom<=n)&&(t.top>n||(r?t.left:t.right)>e)}function tr(t,e,n,r,i){i-=je(e);var o=Nn(t,e),a=jn(e),s=0,u=e.text.length,l=!0,c=lt(e,t.doc.direction);if(c){var f=(t.options.lineWrapping?nr:er)(t,e,n,o,c,r,i);s=(l=1!=f.level)?f.from:f.to-1,u=l?f.to:f.from-1}var d,h,p=null,g=null,v=ot(function(e){var n=On(t,o,e);return n.top+=a,n.bottom+=a,!!Jn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(p=e,g=n),!0)},s,u),m=!1;if(g){var y=r-g.left<g.right-r,b=y==l;v=p+(b?0:1),h=b?"after":"before",d=y?g.left:g.right}else{l||v!=u&&v!=s||v++,h=0==v?"after":v==e.text.length?"before":On(t,o,v-(l?1:0)).bottom+a<=i==l?"after":"before";var x=qn(t,te(n,v,h),"line",e,o);d=x.left,m=i<x.top?-1:i>=x.bottom?1:0}return Xn(n,v=it(e.text,v,1),h,m,r-d)}function er(t,e,n,r,i,o,a){var s=ot(function(s){var u=i[s],l=1!=u.level;return Jn(qn(t,te(n,l?u.to:u.from,l?"before":"after"),"line",e,r),o,a,!0)},0,i.length-1),u=i[s];if(s>0){var l=1!=u.level,c=qn(t,te(n,l?u.from:u.to,l?"after":"before"),"line",e,r);Jn(c,o,a,!0)&&c.top>a&&(u=i[s-1])}return u}function nr(t,e,n,r,i,o,a){var s=Kn(t,e,r,a),u=s.begin,l=s.end;/\s/.test(e.text.charAt(l-1))&&l--;for(var c=null,f=null,d=0;d<i.length;d++){var h=i[d];if(!(h.from>=l||h.to<=u)){var p=On(t,r,1!=h.level?Math.min(l,h.to)-1:Math.max(u,h.from)).right,g=p<o?o-p+1e9:p-o;(!c||f>g)&&(c=h,f=g)}}return c||(c=i[i.length-1]),c.from<u&&(c={from:u,to:c.to,level:c.level}),c.to>l&&(c={from:c.from,to:l,level:c.level}),c}function rr(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Fn){Fn=T("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)Fn.appendChild(document.createTextNode("x")),Fn.appendChild(T("br"));Fn.appendChild(document.createTextNode("x"))}D(t.measure,Fn);var n=Fn.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),A(t.measure),n||1}function ir(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=T("span","xxxxxxxxxx"),n=T("pre",[e],"CodeMirror-line-like");D(t.measure,n);var r=e.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(t.cachedCharWidth=i),i||10}function or(t){for(var e=t.display,n={},r={},i=e.gutters.clientLeft,o=e.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var s=t.display.gutterSpecs[a].className;n[s]=o.offsetLeft+o.clientLeft+i,r[s]=o.clientWidth}return{fixedPos:ar(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:e.wrapper.clientWidth}}function ar(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function sr(t){var e=rr(t.display),n=t.options.lineWrapping,r=n&&Math.max(5,t.display.scroller.clientWidth/ir(t.display)-3);return function(i){if(Ye(t.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*e:o+e}}function ur(t){var e=t.doc,n=sr(t);e.iter(function(t){var e=n(t);e!=t.height&&Xt(t,e)})}function lr(t,e,n,r){var i=t.display;if(!n&&"true"==_t(e).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=e.clientX-s.left,a=e.clientY-s.top}catch(f){return null}var u,l=Zn(t,o,a);if(r&&l.xRel>0&&(u=Vt(t.doc,l.line).text).length==l.ch){var c=z(u,u.length,t.options.tabSize)-u.length;l=te(l.line,Math.max(0,Math.round((o-Sn(t.display).left)/ir(t.display))-c))}return l}function cr(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,r=0;r<n.length;r++)if((e-=n[r].size)<0)return r}function fr(t,e,n,r){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),r||(r=0);var i=t.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>e)&&(i.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=i.viewTo)ke&&Ie(t.doc,e)<i.viewTo&&hr(t);else if(n<=i.viewFrom)ke&&He(t.doc,n+r)>i.viewFrom?hr(t):(i.viewFrom+=r,i.viewTo+=r);else if(e<=i.viewFrom&&n>=i.viewTo)hr(t);else if(e<=i.viewFrom){var o=pr(t,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):hr(t)}else if(n>=i.viewTo){var a=pr(t,e,e,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):hr(t)}else{var s=pr(t,e,e,-1),u=pr(t,n,n+r,1);s&&u?(i.view=i.view.slice(0,s.index).concat(on(t,s.lineN,u.lineN)).concat(i.view.slice(u.index)),i.viewTo+=r):hr(t)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:e<l.lineN+l.size&&(i.externalMeasured=null))}function dr(t,e,n){t.curOp.viewChanged=!0;var r=t.display,i=t.display.externalMeasured;if(i&&e>=i.lineN&&e<i.lineN+i.size&&(r.externalMeasured=null),!(e<r.viewFrom||e>=r.viewTo)){var o=r.view[cr(t,e)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==H(a,n)&&a.push(n)}}}function hr(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function pr(t,e,n,r){var i,o=cr(t,e),a=t.display.view;if(!ke||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var s=t.display.viewFrom,u=0;u<o;u++)s+=a[u].size;if(s!=e){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-e,o++}else i=s-e;e+=i,n+=i}for(;Ie(t.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function gr(t){for(var e=t.display.view,n=0,r=0;r<e.length;r++){var i=e[r];i.hidden||i.node&&!i.changes||++n}return n}function vr(t){t.display.input.showSelection(t.display.input.prepareSelection())}function mr(t,e){void 0===e&&(e=!0);for(var n=t.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(e||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=t.display.viewTo||s.to().line<t.display.viewFrom)){var u=s.empty();(u||t.options.showCursorWhenSelecting)&&yr(t,s.head,i),u||xr(t,s,o)}}return r}function yr(t,e,n){var r=qn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),i=n.appendChild(T("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",r.other){var o=n.appendChild(T("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function br(t,e){return t.top-e.top||t.left-e.left}function xr(t,e,n){var r=t.display,i=t.doc,o=document.createDocumentFragment(),a=Sn(t.display),s=a.left,u=Math.max(r.sizerWidth,An(t)-r.sizer.offsetLeft)-a.right,l="ltr"==i.direction;function c(t,e,n,r){e<0&&(e=0),e=Math.round(e),r=Math.round(r),o.appendChild(T("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?u-t:n)+"px;\n                             height: "+(r-e)+"px"))}function f(e,n,r){var o,a,f=Vt(i,e),d=f.text.length;function h(n,r){return Vn(t,te(e,n),"div",f,r)}function p(e,n,r){var i=Qn(t,f,null,e),o="ltr"==n==("after"==r)?"left":"right";return h("after"==r?i.begin:i.end-(/\s/.test(f.text.charAt(i.end-1))?2:1),o)[o]}var g=lt(f,i.direction);return function(t,e,n,r){if(!t)return r(e,n,"ltr",0);for(var i=!1,o=0;o<t.length;++o){var a=t[o];(a.from<n&&a.to>e||e==n&&a.to==e)&&(r(Math.max(a.from,e),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),i=!0)}i||r(e,n,"ltr")}(g,n||0,null==r?d:r,function(t,e,i,f){var v="ltr"==i,m=h(t,v?"left":"right"),y=h(e-1,v?"right":"left"),b=null==n&&0==t,x=null==r&&e==d,w=0==f,k=!g||f==g.length-1;if(y.top-m.top<=3){var _=(l?b:x)&&w?s:(v?m:y).left;c(_,m.top,((l?x:b)&&k?u:(v?y:m).right)-_,m.bottom)}else{var M,S,C,A;v?(M=l&&b&&w?s:m.left,S=l?u:p(t,i,"before"),C=l?s:p(e,i,"after"),A=l&&x&&k?u:y.right):(M=l?p(t,i,"before"):s,S=!l&&b&&w?u:m.right,C=!l&&x&&k?s:y.left,A=l?p(e,i,"after"):u),c(M,m.top,S-M,m.bottom),m.bottom<y.top&&c(s,m.bottom,null,y.top),c(C,y.top,A-C,y.bottom)}(!o||br(m,o)<0)&&(o=m),br(y,o)<0&&(o=y),(!a||br(m,a)<0)&&(a=m),br(y,a)<0&&(a=y)}),{start:o,end:a}}var d=e.from(),h=e.to();if(d.line==h.line)f(d.line,d.ch,h.ch);else{var p=Vt(i,d.line),g=Vt(i,h.line),v=ze(p)==ze(g),m=f(d.line,d.ch,v?p.text.length+1:null).end,y=f(h.line,v?0:null,h.ch).start;v&&(m.top<y.top-2?(c(m.right,m.top,null,m.bottom),c(s,y.top,y.left,y.bottom)):c(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&c(s,m.bottom,null,y.top)}n.appendChild(o)}function wr(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){t.hasFocus()||Sr(t),e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function kr(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Mr(t))}function _r(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&Sr(t))},100)}function Mr(t,e){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(pt(t,"focus",t,e),t.state.focused=!0,O(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),u&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),wr(t))}function Sr(t,e){t.state.delayingBlurEvent||(t.state.focused&&(pt(t,"blur",t,e),t.state.focused=!1,C(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Cr(t){for(var e=t.display,n=e.lineDiv.offsetTop,r=0;r<e.view.length;r++){var i=e.view[r],o=t.options.lineWrapping,u=void 0,l=0;if(!i.hidden){if(a&&s<8){var c=i.node.offsetTop+i.node.offsetHeight;u=c-n,n=c}else{var f=i.node.getBoundingClientRect();u=f.bottom-f.top,!o&&i.text.firstChild&&(l=i.text.firstChild.getBoundingClientRect().right-f.left-1)}var d=i.line.height-u;if((d>.005||d<-.005)&&(Xt(i.line,u),Ar(i.line),i.rest))for(var h=0;h<i.rest.length;h++)Ar(i.rest[h]);if(l>t.display.sizerWidth){var p=Math.ceil(l/ir(t.display));p>t.display.maxLineLength&&(t.display.maxLineLength=p,t.display.maxLine=i.line,t.display.maxLineChanged=!0)}}}}function Ar(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Dr(t,e,n){var r=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;r=Math.floor(r-_n(t));var i=n&&null!=n.bottom?n.bottom:r+t.wrapper.clientHeight,o=Kt(e,r),a=Kt(e,i);if(n&&n.ensure){var s=n.ensure.from.line,u=n.ensure.to.line;s<o?(o=s,a=Kt(e,je(Vt(e,s))+t.wrapper.clientHeight)):Math.min(u,e.lastLine())>=a&&(o=Kt(e,je(Vt(e,u))-t.wrapper.clientHeight),a=u)}return{from:o,to:Math.max(a,o+1)}}function Tr(t,e){var n=t.display,r=rr(t.display);e.top<0&&(e.top=0);var i=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=Dn(t),a={};e.bottom-e.top>o&&(e.bottom=e.top+o);var s=t.doc.height+Mn(n),u=e.bottom>s-r;if(e.top<i)a.scrollTop=e.top<r?0:e.top;else if(e.bottom>i+o){var l=Math.min(e.top,(u?s:e.bottom)-o);l!=i&&(a.scrollTop=l)}var c=t.options.fixedGutter?0:n.gutters.offsetWidth,f=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft-c,d=An(t)-n.gutters.offsetWidth,h=e.right-e.left>d;return h&&(e.right=e.left+d),e.left<10?a.scrollLeft=0:e.left<f?a.scrollLeft=Math.max(0,e.left+c-(h?0:10)):e.right>d+f-3&&(a.scrollLeft=e.right+(h?0:10)-d),a}function Lr(t,e){null!=e&&(Or(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Er(t){Or(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Nr(t,e,n){null==e&&null==n||Or(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Or(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Fr(t,$n(t,e.from),$n(t,e.to),e.margin))}function Fr(t,e,n,r){var i=Tr(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-r,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+r});Nr(t,i.scrollLeft,i.scrollTop)}function Pr(t,e){Math.abs(t.doc.scrollTop-e)<2||(n||ui(t,{top:e}),Wr(t,e,!0),n&&ui(t),ri(t,100))}function Wr(t,e,n){e=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e)),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function Rr(t,e,n,r){e=Math.max(0,Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!r||(t.doc.scrollLeft=e,fi(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function zr(t){var e=t.display,n=e.gutters.offsetWidth,r=Math.round(t.doc.height+Mn(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Cn(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var Ir=function(t,e,n){this.cm=n;var r=this.vert=T("div",[T("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=T("div",[T("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,t(r),t(i),ft(r,"scroll",function(){r.clientHeight&&e(r.scrollTop,"vertical")}),ft(i,"scroll",function(){i.clientWidth&&e(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ir.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,r=t.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=e?r+"px":"0",this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+(t.viewHeight-(e?r:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),e?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=t.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+(t.viewWidth-t.barLeft-(n?r:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&t.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:e?r:0}},Ir.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ir.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ir.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=y&&!h?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new I,this.disableVert=new I},Ir.prototype.enableZeroWidthBar=function(t,e,n){t.style.pointerEvents="auto",e.set(1e3,function r(){var i=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,r)})},Ir.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Hr=function(){};function Yr(t,e){e||(e=zr(t));var n=t.display.barWidth,r=t.display.barHeight;Br(t,e);for(var i=0;i<4&&n!=t.display.barWidth||r!=t.display.barHeight;i++)n!=t.display.barWidth&&t.options.lineWrapping&&Cr(t),Br(t,zr(t)),n=t.display.barWidth,r=t.display.barHeight}function Br(t,e){var n=t.display,r=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}Hr.prototype.update=function(){return{bottom:0,right:0}},Hr.prototype.setScrollLeft=function(){},Hr.prototype.setScrollTop=function(){},Hr.prototype.clear=function(){};var jr={native:Ir,null:Hr};function Ur(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&C(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new jr[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),ft(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?Rr(t,e):Pr(t,e)},t),t.display.scrollbars.addClass&&O(t.display.wrapper,t.display.scrollbars.addClass)}var Gr=0;function Vr(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Gr},e=t.curOp,an?an.ops.push(e):e.ownsGroup=an={ops:[e],delayedCallbacks:[]}}function qr(t){var e=t.curOp;e&&function(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var r=0;r<t.ops.length;r++){var i=t.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<e.length)}(n)}finally{an=null,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)$r(e[n]);for(var r=0;r<e.length;r++)Xr(e[r]);for(var i=0;i<e.length;i++)Zr(e[i]);for(var o=0;o<e.length;o++)Kr(e[o]);for(var a=0;a<e.length;a++)Qr(e[a])}(t)}(n)}}(e)}function $r(t){var e=t.cm,n=e.display;!function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Cn(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Cn(t)+"px",e.scrollbarsClipped=!0)}(e),t.updateMaxLine&&Ge(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new oi(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Xr(t){t.updatedDisplay=t.mustUpdate&&ai(t.cm,t.update)}function Zr(t){var e=t.cm,n=e.display;t.updatedDisplay&&Cr(e),t.barMeasure=zr(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Ln(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+Cn(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-An(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function Kr(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Rr(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==N();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&Yr(e,t.barMeasure),t.updatedDisplay&&ci(e,t.barMeasure),t.selectionChanged&&wr(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&kr(t.cm)}function Qr(t){var e=t.cm,n=e.display,r=e.doc;t.updatedDisplay&&si(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Wr(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&Rr(e,t.scrollLeft,!0,!0),t.scrollToPos&&function(t,e){if(!gt(t,"scrollCursorIntoView")){var n=t.display,r=n.sizer.getBoundingClientRect(),i=null;if(e.top+r.top<0?i=!0:e.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=T("div","\u200b",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-_n(t.display))+"px;\n                         height: "+(e.bottom-e.top+Cn(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(i),t.display.lineSpace.removeChild(o)}}}(e,function(t,e,n,r){var i;null==r&&(r=0),t.options.lineWrapping||e!=n||(n="before"==(e=e.ch?te(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e).sticky?te(e.line,e.ch+1,"before"):e);for(var o=0;o<5;o++){var a=!1,s=qn(t,e),u=n&&n!=e?qn(t,n):s,l=Tr(t,i={left:Math.min(s.left,u.left),top:Math.min(s.top,u.top)-r,right:Math.max(s.left,u.left),bottom:Math.max(s.bottom,u.bottom)+r}),c=t.doc.scrollTop,f=t.doc.scrollLeft;if(null!=l.scrollTop&&(Pr(t,l.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(a=!0)),null!=l.scrollLeft&&(Rr(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-f)>1&&(a=!0)),!a)break}return i}(e,se(r,t.scrollToPos.from),se(r,t.scrollToPos.to),t.scrollToPos.margin));var i=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||pt(i[a],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&pt(o[s],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&pt(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Jr(t,e){if(t.curOp)return e();Vr(t);try{return e()}finally{qr(t)}}function ti(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Vr(t);try{return e.apply(t,arguments)}finally{qr(t)}}}function ei(t){return function(){if(this.curOp)return t.apply(this,arguments);Vr(this);try{return t.apply(this,arguments)}finally{qr(this)}}}function ni(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Vr(e);try{return t.apply(this,arguments)}finally{qr(e)}}}function ri(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,W(ii,t))}function ii(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,r=he(t,e.highlightFrontier),i=[];e.iter(r.line,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(r.line>=t.display.viewFrom){var a=o.styles,s=o.text.length>t.options.maxHighlightLength?Bt(e.mode,r.state):null,u=fe(t,o,r,!0);s&&(r.state=s),o.styles=u.styles;var l=o.styleClasses,c=u.classes;c?o.styleClasses=c:l&&(o.styleClasses=null);for(var f=!a||a.length!=o.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),d=0;!f&&d<a.length;++d)f=a[d]!=o.styles[d];f&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=t.options.maxHighlightLength&&pe(t,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(t,t.options.workDelay),!0}),e.highlightFrontier=r.line,e.modeFrontier=Math.max(e.modeFrontier,r.line),i.length&&Jr(t,function(){for(var e=0;e<i.length;e++)dr(t,i[e],"text")})}}var oi=function(t,e,n){var r=t.display;this.viewport=e,this.visible=Dr(r,t.doc,e),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=An(t),this.force=n,this.dims=or(t),this.events=[]};function ai(t,e){var n=t.display,r=t.doc;if(e.editorIsHidden)return hr(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==gr(t))return!1;di(t)&&(hr(t),e.dims=or(t));var i=r.first+r.size,o=Math.max(e.visible.from-t.options.viewportMargin,r.first),a=Math.min(i,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),ke&&(o=Ie(t.doc,o),a=He(t.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;!function(t,e,n){var r=t.display;0==r.view.length||e>=r.viewTo||n<=r.viewFrom?(r.view=on(t,e,n),r.viewFrom=e):(r.viewFrom>e?r.view=on(t,e,r.viewFrom).concat(r.view):r.viewFrom<e&&(r.view=r.view.slice(cr(t,e))),r.viewFrom=e,r.viewTo<n?r.view=r.view.concat(on(t,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,cr(t,n)))),r.viewTo=n}(t,o,a),n.viewOffset=je(Vt(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var l=gr(t);if(!s&&0==l&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(t){if(t.hasFocus())return null;var e=N();if(!e||!E(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&E(t.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(t);return l>4&&(n.lineDiv.style.display="none"),function(t,e,n){var r=t.display,i=t.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function s(e){var n=e.nextSibling;return u&&y&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var l=r.view,c=r.viewFrom,f=0;f<l.length;f++){var d=l[f];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;a!=d.node;)a=s(a);var h=i&&null!=e&&e<=c&&d.lineNumber;d.changes&&(H(d.changes,"gutter")>-1&&(h=!1),cn(t,d,c,n)),h&&(A(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(Jt(t.options,c)))),a=d.node.nextSibling}else{var p=mn(t,d,c,n);o.insertBefore(p,a)}c+=d.size}for(;a;)a=s(a)}(t,n.updateLineNumbers,e.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=N()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&E(document.body,t.anchorNode)&&E(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(c),A(n.cursorDiv),A(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,ri(t,400)),n.updateLineNumbers=null,!0}function si(t,e){for(var n=e.viewport,r=!0;;r=!1){if(r&&t.options.lineWrapping&&e.oldDisplayWidth!=An(t))r&&(e.visible=Dr(t.display,t.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Mn(t.display)-Dn(t),n.top)}),e.visible=Dr(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!ai(t,e))break;Cr(t);var i=zr(t);vr(t),Yr(t,i),ci(t,i),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ui(t,e){var n=new oi(t,e);if(ai(t,n)){Cr(t),si(t,n);var r=zr(t);vr(t),Yr(t,r),ci(t,r),n.finish()}}function li(t){t.sizer.style.marginLeft=t.gutters.offsetWidth+"px",un(t,"gutterChanged",t)}function ci(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Cn(t)+"px"}function fi(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=ar(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){t.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var u=0;u<s.length;u++)s[u].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=r+i+"px")}}function di(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=Jt(t.options,e.first+e.size-1),r=t.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(T("div",[T("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",li(t.display),!0}return!1}function hi(t,e){for(var n=[],r=!1,i=0;i<t.length;i++){var o=t[i],a=null;if("string"!=typeof o&&(a=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!e)continue;r=!0}n.push({className:o,style:a})}return e&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function pi(t){var e=t.gutters,n=t.gutterSpecs;A(e),t.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],o=i.className,a=i.style,s=e.appendChild(T("div",null,"CodeMirror-gutter "+o));a&&(s.style.cssText=a),"CodeMirror-linenumbers"==o&&(t.lineGutter=s,s.style.width=(t.lineNumWidth||1)+"px")}e.style.display=n.length?"":"none",li(t)}function gi(t){pi(t.display),fr(t),fi(t)}function vi(t,e,r,i){var o=this;this.input=r,o.scrollbarFiller=T("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=T("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=L("div",null,"CodeMirror-code"),o.selectionDiv=T("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=T("div",null,"CodeMirror-cursors"),o.measure=T("div",null,"CodeMirror-measure"),o.lineMeasure=T("div",null,"CodeMirror-measure"),o.lineSpace=L("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var l=L("div",[o.lineSpace],"CodeMirror-lines");o.mover=T("div",[l],null,"position: relative"),o.sizer=T("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=T("div",null,null,"position: absolute; height: 50px; width: 1px;"),o.gutters=T("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=T("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=T("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),a&&s<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),u||n&&m||(o.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(o.wrapper):t(o.wrapper)),o.viewFrom=o.viewTo=e.first,o.reportedViewFrom=o.reportedViewTo=e.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=hi(i.gutters,i.lineNumbers),pi(o),r.init(o)}oi.prototype.signal=function(t,e){mt(t,e)&&this.events.push(arguments)},oi.prototype.finish=function(){for(var t=0;t<this.events.length;t++)pt.apply(null,this.events[t])};var mi=0,yi=null;function bi(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function xi(t){var e=bi(t);return e.x*=yi,e.y*=yi,e}function wi(t,e){var r=bi(e),i=r.x,o=r.y,a=t.display,s=a.scroller,l=s.scrollHeight>s.clientHeight;if(i&&s.scrollWidth>s.clientWidth||o&&l){if(o&&y&&u)t:for(var c=e.target,d=a.view;c!=s;c=c.parentNode)for(var h=0;h<d.length;h++)if(d[h].node==c){t.display.currentWheelTarget=c;break t}if(i&&!n&&!f&&null!=yi)return o&&l&&Pr(t,Math.max(0,s.scrollTop+o*yi)),Rr(t,Math.max(0,s.scrollLeft+i*yi)),(!o||o&&l)&&bt(e),void(a.wheelStartX=null);if(o&&null!=yi){var p=o*yi,g=t.doc.scrollTop,v=g+a.wrapper.clientHeight;p<0?g=Math.max(0,g+p-50):v=Math.min(t.doc.height,v+p+50),ui(t,{top:g,bottom:v})}mi<20&&(null==a.wheelStartX?(a.wheelStartX=s.scrollLeft,a.wheelStartY=s.scrollTop,a.wheelDX=i,a.wheelDY=o,setTimeout(function(){if(null!=a.wheelStartX){var t=s.scrollLeft-a.wheelStartX,e=s.scrollTop-a.wheelStartY,n=e&&a.wheelDY&&e/a.wheelDY||t&&a.wheelDX&&t/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(yi=(yi*mi+n)/(mi+1),++mi)}},200)):(a.wheelDX+=i,a.wheelDY+=o))}}a?yi=-.53:n?yi=15:c?yi=-.7:d&&(yi=-1/3);var ki=function(t,e){this.ranges=t,this.primIndex=e};ki.prototype.primary=function(){return this.ranges[this.primIndex]},ki.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],r=t.ranges[e];if(!ne(n.anchor,r.anchor)||!ne(n.head,r.head))return!1}return!0},ki.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new _i(re(this.ranges[e].anchor),re(this.ranges[e].head));return new ki(t,this.primIndex)},ki.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},ki.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ee(e,r.from())>=0&&ee(t,r.to())<=0)return n}return-1};var _i=function(t,e){this.anchor=t,this.head=e};function Mi(t,e,n){var r=t&&t.options.selectionsMayTouch,i=e[n];e.sort(function(t,e){return ee(t.from(),e.from())}),n=H(e,i);for(var o=1;o<e.length;o++){var a=e[o],s=e[o-1],u=ee(s.to(),a.from());if(r&&!a.empty()?u>0:u>=0){var l=oe(s.from(),a.from()),c=ie(s.to(),a.to()),f=s.empty()?a.from()==a.head:s.from()==s.head;o<=n&&--n,e.splice(--o,2,new _i(f?c:l,f?l:c))}}return new ki(e,n)}function Si(t,e){return new ki([new _i(t,e||t)],0)}function Ci(t){return t.text?te(t.from.line+t.text.length-1,$(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Ai(t,e){if(ee(t,e.from)<0)return t;if(ee(t,e.to)<=0)return Ci(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=Ci(e).ch-e.to.ch),te(n,r)}function Di(t,e){for(var n=[],r=0;r<t.sel.ranges.length;r++){var i=t.sel.ranges[r];n.push(new _i(Ai(i.anchor,e),Ai(i.head,e)))}return Mi(t.cm,n,t.sel.primIndex)}function Ti(t,e,n){return t.line==e.line?te(n.line,t.ch-e.ch+n.ch):te(n.line+(t.line-e.line),t.ch)}function Li(t){t.doc.mode=It(t.options,t.doc.modeOption),Ei(t)}function Ei(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ri(t,100),t.state.modeGen++,t.curOp&&fr(t)}function Ni(t,e){return 0==e.from.ch&&0==e.to.ch&&""==$(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Oi(t,e,n,r){function i(t){return n?n[t]:null}function o(t,n,i){!function(t,e,n,r){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),De(t),Te(t,n);var i=r?r(t):1;i!=t.height&&Xt(t,i)}(t,n,i,r),un(t,"change",t,e)}function a(t,e){for(var n=[],o=t;o<e;++o)n.push(new Ve(l[o],i(o),r));return n}var s=e.from,u=e.to,l=e.text,c=Vt(t,s.line),f=Vt(t,u.line),d=$(l),h=i(l.length-1),p=u.line-s.line;if(e.full)t.insert(0,a(0,l.length)),t.remove(l.length,t.size-l.length);else if(Ni(t,e)){var g=a(0,l.length-1);o(f,f.text,h),p&&t.remove(s.line,p),g.length&&t.insert(s.line,g)}else if(c==f)if(1==l.length)o(c,c.text.slice(0,s.ch)+d+c.text.slice(u.ch),h);else{var v=a(1,l.length-1);v.push(new Ve(d+c.text.slice(u.ch),h,r)),o(c,c.text.slice(0,s.ch)+l[0],i(0)),t.insert(s.line+1,v)}else if(1==l.length)o(c,c.text.slice(0,s.ch)+l[0]+f.text.slice(u.ch),i(0)),t.remove(s.line+1,p);else{o(c,c.text.slice(0,s.ch)+l[0],i(0)),o(f,d+f.text.slice(u.ch),h);var m=a(1,l.length-1);p>1&&t.remove(s.line+1,p-1),t.insert(s.line+1,m)}un(t,"change",t,e)}function Fi(t,e,n){!function t(r,i,o){if(r.linked)for(var a=0;a<r.linked.length;++a){var s=r.linked[a];if(s.doc!=i){var u=o&&s.sharedHist;n&&!u||(e(s.doc,u),t(s.doc,r,u))}}}(t,null,!0)}function Pi(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,ur(t),Li(t),Wi(t),t.options.lineWrapping||Ge(t),t.options.mode=e.modeOption,fr(t)}function Wi(t){("rtl"==t.doc.direction?O:C)(t.display.lineDiv,"CodeMirror-rtl")}function Ri(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function zi(t,e){var n={from:re(e.from),to:Ci(e),text:qt(t,e.from,e.to)};return Bi(t,n,e.from.line,e.to.line+1),Fi(t,function(t){return Bi(t,n,e.from.line,e.to.line+1)},!0),n}function Ii(t){for(;t.length&&$(t).ranges;)t.pop()}function Hi(t,e,n,r){var i=t.history;i.undone.length=0;var o,a,s=+new Date;if((i.lastOp==r||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&i.lastModTime>s-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=function(t,e){return e?(Ii(t.done),$(t.done)):t.done.length&&!$(t.done).ranges?$(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),$(t.done)):void 0}(i,i.lastOp==r)))a=$(o.changes),0==ee(e.from,e.to)&&0==ee(e.from,a.to)?a.to=Ci(e):o.changes.push(zi(t,e));else{var u=$(i.done);for(u&&u.ranges||Yi(t.sel,i.done),o={changes:[zi(t,e)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=e.origin,a||pt(t,"historyAdded")}function Yi(t,e){var n=$(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Bi(t,e,n,r){var i=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,r),function(n){n.markedSpans&&((i||(i=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function ji(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Ui(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var r=[],i=0;i<e.text.length;++i)r.push(ji(n[i]));return r}(t,e),r=Ce(t,e);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)t:for(var s=0;s<a.length;++s){for(var u=a[s],l=0;l<o.length;++l)if(o[l].marker==u.marker)continue t;o.push(u)}else a&&(n[i]=a)}return n}function Gi(t,e,n){for(var r=[],i=0;i<t.length;++i){var o=t[i];if(o.ranges)r.push(n?ki.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];r.push({changes:s});for(var u=0;u<a.length;++u){var l=a[u],c=void 0;if(s.push({from:l.from,to:l.to,text:l.text}),e)for(var f in l)(c=f.match(/^spans_(\d+)$/))&&H(e,Number(c[1]))>-1&&($(s)[f]=l[f],delete l[f])}}}return r}function Vi(t,e,n,r){if(r){var i=t.anchor;if(n){var o=ee(e,i)<0;o!=ee(n,i)<0?(i=e,e=n):o!=ee(e,n)<0&&(e=n)}return new _i(i,e)}return new _i(n||e,e)}function qi(t,e,n,r,i){null==i&&(i=t.cm&&(t.cm.display.shift||t.extend)),Qi(t,new ki([Vi(t.sel.primary(),e,n,i)],0),r)}function $i(t,e,n){for(var r=[],i=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)r[o]=Vi(t.sel.ranges[o],e[o],null,i);Qi(t,Mi(t.cm,r,t.sel.primIndex),n)}function Xi(t,e,n,r){var i=t.sel.ranges.slice(0);i[e]=n,Qi(t,Mi(t.cm,i,t.sel.primIndex),r)}function Zi(t,e,n,r){Qi(t,Si(e,n),r)}function Ki(t,e,n){var r=t.history.done,i=$(r);i&&i.ranges?(r[r.length-1]=e,Ji(t,e,n)):Qi(t,e,n)}function Qi(t,e,n){Ji(t,e,n),function(t,e,n,r){var i=t.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(t,e,n,r){var i=e.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,o,$(i.done),e))?i.done[i.done.length-1]=e:Yi(e,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Ii(i.undone)}(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function Ji(t,e,n){(mt(t,"beforeSelectionChange")||t.cm&&mt(t.cm,"beforeSelectionChange"))&&(e=function(t,e,n){var r={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new _i(se(t,e[n].anchor),se(t,e[n].head))},origin:n&&n.origin};return pt(t,"beforeSelectionChange",t,r),t.cm&&pt(t.cm,"beforeSelectionChange",t.cm,r),r.ranges!=e.ranges?Mi(t.cm,r.ranges,r.ranges.length-1):e}(t,e,n));var r=n&&n.bias||(ee(e.primary().head,t.sel.primary().head)<0?-1:1);to(t,no(t,e,r,!0)),n&&!1===n.scroll||!t.cm||"nocursor"==t.cm.getOption("readOnly")||Er(t.cm)}function to(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,vt(t.cm)),un(t,"cursorActivity",t))}function eo(t){to(t,no(t,t.sel,null,!1))}function no(t,e,n,r){for(var i,o=0;o<e.ranges.length;o++){var a=e.ranges[o],s=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],u=io(t,a.anchor,s&&s.anchor,n,r),l=io(t,a.head,s&&s.head,n,r);(i||u!=a.anchor||l!=a.head)&&(i||(i=e.ranges.slice(0,o)),i[o]=new _i(u,l))}return i?Mi(t.cm,i,e.primIndex):e}function ro(t,e,n,r,i){var o=Vt(t,e.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],u=s.marker,l="selectLeft"in u?!u.selectLeft:u.inclusiveLeft,c="selectRight"in u?!u.selectRight:u.inclusiveRight;if((null==s.from||(l?s.from<=e.ch:s.from<e.ch))&&(null==s.to||(c?s.to>=e.ch:s.to>e.ch))){if(i&&(pt(u,"beforeCursorEnter"),u.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!u.atomic)continue;if(n){var f=u.find(r<0?1:-1),d=void 0;if((r<0?c:l)&&(f=oo(t,f,-r,f&&f.line==e.line?o:null)),f&&f.line==e.line&&(d=ee(f,n))&&(r<0?d<0:d>0))return ro(t,f,e,r,i)}var h=u.find(r<0?-1:1);return(r<0?l:c)&&(h=oo(t,h,r,h.line==e.line?o:null)),h?ro(t,h,e,r,i):null}}return e}function io(t,e,n,r,i){var o=r||1;return ro(t,e,n,o,i)||!i&&ro(t,e,n,o,!0)||ro(t,e,n,-o,i)||!i&&ro(t,e,n,-o,!0)||(t.cantEdit=!0,te(t.first,0))}function oo(t,e,n,r){return n<0&&0==e.ch?e.line>t.first?se(t,te(e.line-1)):null:n>0&&e.ch==(r||Vt(t,e.line)).text.length?e.line<t.first+t.size-1?te(e.line+1,0):null:new te(e.line,e.ch+n)}function ao(t){t.setSelection(te(t.firstLine(),0),te(t.lastLine()),B)}function so(t,e,n){var r={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(e,n,i,o){e&&(r.from=se(t,e)),n&&(r.to=se(t,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),pt(t,"beforeChange",t,r),t.cm&&pt(t.cm,"beforeChange",t.cm,r),r.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function uo(t,e,n){if(t.cm){if(!t.cm.curOp)return ti(t.cm,uo)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(mt(t,"beforeChange")||t.cm&&mt(t.cm,"beforeChange"))||(e=so(t,e,!0))){var r=we&&!n&&function(t,e,n){var r=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||r&&-1!=H(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:e,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),u=0;u<i.length;++u){var l=i[u];if(!(ee(l.to,s.from)<0||ee(l.from,s.to)>0)){var c=[u,1],f=ee(l.from,s.from),d=ee(l.to,s.to);(f<0||!a.inclusiveLeft&&!f)&&c.push({from:l.from,to:s.from}),(d>0||!a.inclusiveRight&&!d)&&c.push({from:s.to,to:l.to}),i.splice.apply(i,c),u+=c.length-3}}return i}(t,e.from,e.to);if(r)for(var i=r.length-1;i>=0;--i)lo(t,{from:r[i].from,to:r[i].to,text:i?[""]:e.text,origin:e.origin});else lo(t,e)}}function lo(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ee(e.from,e.to)){var n=Di(t,e);Hi(t,e,n,t.cm?t.cm.curOp.id:NaN),ho(t,e,n,Ce(t,e));var r=[];Fi(t,function(t,n){n||-1!=H(r,t.history)||(mo(t.history,e),r.push(t.history)),ho(t,e,null,Ce(t,e))})}}function co(t,e,n){var r=t.cm&&t.cm.state.suppressEdits;if(!r||n){for(var i,o=t.history,a=t.sel,s="undo"==e?o.done:o.undone,u="undo"==e?o.undone:o.done,l=0;l<s.length&&(i=s[l],n?!i.ranges||i.equals(t.sel):i.ranges);l++);if(l!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(r)return void s.push(i);break}if(Yi(i,u),n&&!i.equals(t.sel))return void Qi(t,i,{clearRedo:!1});a=i}var c=[];Yi(a,u),u.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var f=mt(t,"beforeChange")||t.cm&&mt(t.cm,"beforeChange"),d=function(n){var r=i.changes[n];if(r.origin=e,f&&!so(t,r,!1))return s.length=0,{};c.push(zi(t,r));var o=n?Di(t,r):$(s);ho(t,r,o,Ui(t,r)),!n&&t.cm&&t.cm.scrollIntoView({from:r.from,to:Ci(r)});var a=[];Fi(t,function(t,e){e||-1!=H(a,t.history)||(mo(t.history,r),a.push(t.history)),ho(t,r,null,Ui(t,r))})},h=i.changes.length-1;h>=0;--h){var p=d(h);if(p)return p.v}}}}function fo(t,e){if(0!=e&&(t.first+=e,t.sel=new ki(X(t.sel.ranges,function(t){return new _i(te(t.anchor.line+e,t.anchor.ch),te(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){fr(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,r=n.viewFrom;r<n.viewTo;r++)dr(t.cm,r,"gutter")}}function ho(t,e,n,r){if(t.cm&&!t.cm.curOp)return ti(t.cm,ho)(t,e,n,r);if(e.to.line<t.first)fo(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);fo(t,i),e={from:te(t.first,0),to:te(e.to.line+i,e.to.ch),text:[$(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:te(o,Vt(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=qt(t,e.from,e.to),n||(n=Di(t,e)),t.cm?function(t,e,n){var r=t.doc,i=t.display,o=e.from,a=e.to,s=!1,u=o.line;t.options.lineWrapping||(u=Zt(ze(Vt(r,o.line))),r.iter(u,a.line+1,function(t){if(t==i.maxLine)return s=!0,!0})),r.sel.contains(e.from,e.to)>-1&&vt(t),Oi(r,e,n,sr(t)),t.options.lineWrapping||(r.iter(u,o.line+e.text.length,function(t){var e=Ue(t);e>i.maxLineLength&&(i.maxLine=t,i.maxLineLength=e,i.maxLineChanged=!0,s=!1)}),s&&(t.curOp.updateMaxLine=!0)),function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,r=e-1;r>n;r--){var i=Vt(t,r).stateAfter;if(i&&(!(i instanceof le)||r+i.lookAhead<e)){n=r+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}(r,o.line),ri(t,400);var l=e.text.length-(a.line-o.line)-1;e.full?fr(t):o.line!=a.line||1!=e.text.length||Ni(t.doc,e)?fr(t,o.line,a.line+1,l):dr(t,o.line,"text");var c=mt(t,"changes"),f=mt(t,"change");if(f||c){var d={from:o,to:a,text:e.text,removed:e.removed,origin:e.origin};f&&un(t,"change",t,d),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}(t.cm,e,r):Oi(t,e,r),Ji(t,n,B),t.cantEdit&&io(t,te(t.firstLine(),0))&&(t.cantEdit=!1)}}function po(t,e,n,r,i){var o;r||(r=n),ee(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof e&&(e=t.splitLines(e)),uo(t,{from:n,to:r,text:e,origin:i})}function go(t,e,n,r){n<t.line?t.line+=r:e<t.line&&(t.line=e,t.ch=0)}function vo(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i],a=!0;if(o.ranges){o.copied||((o=t[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)go(o.ranges[s].anchor,e,n,r),go(o.ranges[s].head,e,n,r)}else{for(var u=0;u<o.changes.length;++u){var l=o.changes[u];if(n<l.from.line)l.from=te(l.from.line+r,l.from.ch),l.to=te(l.to.line+r,l.to.ch);else if(e<=l.to.line){a=!1;break}}a||(t.splice(0,i+1),i=0)}}}function mo(t,e){var n=e.from.line,r=e.to.line,i=e.text.length-(r-n)-1;vo(t.done,n,r,i),vo(t.undone,n,r,i)}function yo(t,e,n,r){var i=e,o=e;return"number"==typeof e?o=Vt(t,ae(t,e)):i=Zt(e),null==i?null:(r(o,i)&&t.cm&&dr(t.cm,i,n),o)}function bo(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function xo(t){this.children=t;for(var e=0,n=0,r=0;r<t.length;++r){var i=t[r];e+=i.chunkSize(),n+=i.height,i.parent=this}this.size=e,this.height=n,this.parent=null}_i.prototype.from=function(){return oe(this.anchor,this.head)},_i.prototype.to=function(){return ie(this.anchor,this.head)},_i.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},bo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,r=t+e;n<r;++n){var i=this.lines[n];this.height-=i.height,qe(i),un(i,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var r=0;r<e.length;++r)e[r].parent=this},iterN:function(t,e,n){for(var r=t+e;t<r;++t)if(n(this.lines[t]))return!0}},xo.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(t<i){var o=Math.min(e,i-t),a=r.height;if(r.removeInner(t,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(e-=o))break;t=0}else t-=i}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof bo))){var s=[];this.collapse(s),this.children=[new bo(s)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<=o){if(i.insertInner(t,e,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,s=a;s<i.lines.length;){var u=new bo(i.lines.slice(s,s+=25));i.height-=u.height,this.children.splice(++r,0,u),u.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new xo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=H(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var r=new xo(t.children);r.parent=t,t.children=[r,e],t=r}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<o){var a=Math.min(e,o-t);if(i.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=o}}};var wo=function(t,e,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=t,this.node=e};function ko(t,e,n){je(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Lr(t,n)}wo.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,r=Zt(n);if(null!=r&&e){for(var i=0;i<e.length;++i)e[i]==this&&e.splice(i--,1);e.length||(n.widgets=null);var o=wn(this);Xt(n,Math.max(0,n.height-o)),t&&(Jr(t,function(){ko(t,n,-o),dr(t,r,"widget")}),un(t,"lineWidgetCleared",t,this,r))}},wo.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=wn(this)-e;i&&(Ye(this.doc,r)||Xt(r,r.height+i),n&&Jr(n,function(){n.curOp.forceUpdate=!0,ko(n,r,i),un(n,"lineWidgetChanged",n,t,Zt(r))}))},yt(wo);var _o=0,Mo=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++_o};function So(t,e,n,r,i){if(r&&r.shared)return function(t,e,n,r,i){(r=R(r)).shared=!1;var o=[So(t,e,n,r,i)],a=o[0],s=r.widgetNode;return Fi(t,function(t){s&&(r.widgetNode=s.cloneNode(!0)),o.push(So(t,se(t,e),se(t,n),r,i));for(var u=0;u<t.linked.length;++u)if(t.linked[u].isParent)return;a=$(o)}),new Co(o,a)}(t,e,n,r,i);if(t.cm&&!t.cm.curOp)return ti(t.cm,So)(t,e,n,r,i);var o=new Mo(t,i),a=ee(e,n);if(r&&R(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=L("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Re(t,e.line,e,n,o)||e.line!=n.line&&Re(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");ke=!0}o.addToHistory&&Hi(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var s,u=e.line,l=t.cm;if(t.iter(u,n.line+1,function(t){l&&o.collapsed&&!l.options.lineWrapping&&ze(t)==l.display.maxLine&&(s=!0),o.collapsed&&u!=e.line&&Xt(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new _e(o,u==e.line?e.ch:null,u==n.line?n.ch:null)),++u}),o.collapsed&&t.iter(e.line,n.line+1,function(e){Ye(t,e)&&Xt(e,0)}),o.clearOnEnter&&ft(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(we=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++_o,o.atomic=!0),l){if(s&&(l.curOp.updateMaxLine=!0),o.collapsed)fr(l,e.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=e.line;c<=n.line;c++)dr(l,c,"text");o.atomic&&eo(l.doc),un(l,"markerAdded",l,o)}return o}Mo.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Vr(t),mt(this,"clear")){var n=this.find();n&&un(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Me(a.markedSpans,this);t&&!this.collapsed?dr(t,Zt(a),"text"):t&&(null!=s.to&&(i=Zt(a)),null!=s.from&&(r=Zt(a))),a.markedSpans=Se(a.markedSpans,s),null==s.from&&this.collapsed&&!Ye(this.doc,a)&&t&&Xt(a,rr(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var l=ze(this.lines[u]),c=Ue(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=r&&t&&this.collapsed&&fr(t,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&eo(t.doc)),t&&un(t,"markerCleared",t,this,r,i),e&&qr(t),this.parent&&this.parent.clear()}},Mo.prototype.find=function(t,e){var n,r;null==t&&"bookmark"==this.type&&(t=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=Me(o.markedSpans,this);if(null!=a.from&&(n=te(e?o:Zt(o),a.from),-1==t))return n;if(null!=a.to&&(r=te(e?o:Zt(o),a.to),1==t))return r}return n&&{from:n,to:r}},Mo.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,r=this.doc.cm;e&&r&&Jr(r,function(){var i=e.line,o=Zt(e.line),a=En(r,o);if(a&&(zn(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Ye(n.doc,i)&&null!=n.height){var s=n.height;n.height=null;var u=wn(n)-s;u&&Xt(i,i.height+u)}un(r,"markerChanged",r,t)})},Mo.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=H(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Mo.prototype.detachLine=function(t){if(this.lines.splice(H(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},yt(Mo);var Co=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function Ao(t){return t.findMarks(te(t.first,0),t.clipPos(te(t.lastLine())),function(t){return t.parent})}function Do(t){for(var e=function(e){var n=t[e],r=[n.primary.doc];Fi(n.primary.doc,function(t){return r.push(t)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==H(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<t.length;n++)e(n)}Co.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();un(this,"clear")}},Co.prototype.find=function(t,e){return this.primary.find(t,e)},yt(Co);var To=0,Lo=function(t,e,n,r,i){if(!(this instanceof Lo))return new Lo(t,e,n,r,i);null==n&&(n=0),xo.call(this,[new bo([new Ve("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=te(n,0);this.sel=Si(o),this.history=new Ri(null),this.id=++To,this.modeOption=e,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Oi(this,{from:o,to:o,text:t}),Qi(this,Si(o),B)};Lo.prototype=K(xo.prototype,{constructor:Lo,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,r=0;r<e.length;++r)n+=e[r].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=$t(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:ni(function(t){var e=te(this.first,0),n=this.first+this.size-1;uo(this,{from:e,to:te(n,Vt(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Nr(this.cm,0,0),Qi(this,Si(e),B)}),replaceRange:function(t,e,n,r){po(this,t,e=se(this,e),n=n?se(this,n):e,r)},getRange:function(t,e,n){var r=qt(this,se(this,t),se(this,e));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(Qt(this,t))return Vt(this,t)},getLineNumber:function(t){return Zt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Vt(this,t)),ze(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return se(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ni(function(t,e,n){Zi(this,se(this,"number"==typeof t?te(t,e||0):t),null,n)}),setSelection:ni(function(t,e,n){Zi(this,se(this,t),se(this,e||t),n)}),extendSelection:ni(function(t,e,n){qi(this,se(this,t),e&&se(this,e),n)}),extendSelections:ni(function(t,e){$i(this,ue(this,t),e)}),extendSelectionsBy:ni(function(t,e){$i(this,ue(this,X(this.sel.ranges,t)),e)}),setSelections:ni(function(t,e,n){if(t.length){for(var r=[],i=0;i<t.length;i++)r[i]=new _i(se(this,t[i].anchor),se(this,t[i].head||t[i].anchor));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Qi(this,Mi(this.cm,r,e),n)}}),addSelection:ni(function(t,e,n){var r=this.sel.ranges.slice(0);r.push(new _i(se(this,t),se(this,e||t))),Qi(this,Mi(this.cm,r,r.length-1),n)}),getSelection:function(t){for(var e,n=this.sel.ranges,r=0;r<n.length;r++){var i=qt(this,n[r].from(),n[r].to());e=e?e.concat(i):i}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=qt(this,n[r].from(),n[r].to());!1!==t&&(i=i.join(t||this.lineSeparator())),e[r]=i}return e},replaceSelection:function(t,e,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=t;this.replaceSelections(r,e,n||"+input")},replaceSelections:ni(function(t,e,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(t[o]),origin:n}}for(var s=e&&"end"!=e&&function(t,e,n){for(var r=[],i=te(t.first,0),o=i,a=0;a<e.length;a++){var s=e[a],u=Ti(s.from,i,o),l=Ti(Ci(s),i,o);if(i=s.to,o=l,"around"==n){var c=t.sel.ranges[a],f=ee(c.head,c.anchor)<0;r[a]=new _i(f?l:u,f?u:l)}else r[a]=new _i(u,u)}return new ki(r,t.sel.primIndex)}(this,r,e),u=r.length-1;u>=0;u--)uo(this,r[u]);s?Ki(this,s):this.cm&&Er(this.cm)}),undo:ni(function(){co(this,"undo")}),redo:ni(function(){co(this,"redo")}),undoSelection:ni(function(){co(this,"undo",!0)}),redoSelection:ni(function(){co(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,r=0;r<t.done.length;r++)t.done[r].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){var t=this;this.history=new Ri(this.history),Fi(this,function(e){return e.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Gi(this.history.done),undone:Gi(this.history.undone)}},setHistory:function(t){var e=this.history=new Ri(this.history);e.done=Gi(t.done.slice(0),null,!0),e.undone=Gi(t.undone.slice(0),null,!0)},setGutterMarker:ni(function(t,e,n){return yo(this,t,"gutter",function(t){var r=t.gutterMarkers||(t.gutterMarkers={});return r[e]=n,!n&&et(r)&&(t.gutterMarkers=null),!0})}),clearGutter:ni(function(t){var e=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&yo(e,n,"gutter",function(){return n.gutterMarkers[t]=null,et(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!Qt(this,t))return null;if(e=t,!(t=Vt(this,t)))return null}else if(null==(e=Zt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:ni(function(t,e,n){return yo(this,t,"gutter"==e?"gutter":"class",function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[r]){if(M(n).test(t[r]))return!1;t[r]+=" "+n}else t[r]=n;return!0})}),removeLineClass:ni(function(t,e,n){return yo(this,t,"gutter"==e?"gutter":"class",function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",i=t[r];if(!i)return!1;if(null==n)t[r]=null;else{var o=i.match(M(n));if(!o)return!1;var a=o.index+o[0].length;t[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:ni(function(t,e,n){return function(t,e,n,r){var i=new wo(t,n,r),o=t.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),yo(t,e,"widget",function(e){var n=e.widgets||(e.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length,Math.max(0,i.insertAt)),0,i),i.line=e,o&&!Ye(t,e)){var r=je(e)<t.scrollTop;Xt(e,e.height+wn(i)),r&&Lr(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&un(o,"lineWidgetAdded",o,i,"number"==typeof e?e:Zt(e)),i}(this,t,e,n)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return So(this,se(this,t),se(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return So(this,t=se(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=Vt(this,(t=se(this,t)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},findMarks:function(t,e,n){t=se(this,t),e=se(this,e);var r=[],i=t.line;return this.iter(t.line,e.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var u=a[s];null!=u.to&&i==t.line&&t.ch>=u.to||null==u.from&&i!=t.line||null!=u.from&&i==e.line&&u.from>=e.ch||n&&!n(u.marker)||r.push(u.marker.parent||u.marker)}++i}),r},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&t.push(n[r].marker)}),t},posFromIndex:function(t){var e,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>t)return e=t,!0;t-=o,++n}),se(this,te(n,e))},indexFromPos:function(t){var e=(t=se(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+n}),e},copy:function(t){var e=new Lo($t(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var r=new Lo($t(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:t.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.find(),o=t.clipPos(i.from),a=t.clipPos(i.to);if(ee(o,a)){var s=So(t,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}(r,Ao(this)),r},unlinkDoc:function(t){if(t instanceof Sa&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e)if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Do(Ao(this));break}if(t.history==this.history){var n=[t.id];Fi(t,function(t){return n.push(t.id)},!0),t.history=new Ri(null),t.history.done=Gi(this.history.done,n),t.history.undone=Gi(this.history.undone,n)}},iterLinkedDocs:function(t){Fi(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Et(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ni(function(t){var e;"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&Jr(e=this.cm,function(){Wi(e),fr(e)}))})}),Lo.prototype.eachLine=Lo.prototype.iter;var Eo=0;function No(t){var e=this;if(Oo(e),!gt(e,t)&&!kn(e.display,t)){bt(t),a&&(Eo=+new Date);var n=lr(e,t,!0),r=t.dataTransfer.files;if(n&&!e.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),s=0,u=function(){++s==i&&ti(e,function(){var t={from:n=se(e.doc,n),to:n,text:e.doc.splitLines(o.filter(function(t){return null!=t}).join(e.doc.lineSeparator())),origin:"paste"};uo(e.doc,t),Ki(e.doc,Si(se(e.doc,n),se(e.doc,Ci(t))))})()},l=function(t,n){if(e.options.allowDropFileTypes&&-1==H(e.options.allowDropFileTypes,t.type))u();else{var r=new FileReader;r.onerror=function(){return u()},r.onload=function(){var t=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(t)||(o[n]=t),u()},r.readAsText(t)}},c=0;c<r.length;c++)l(r[c],c);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout(function(){return e.display.input.focus()},20);try{var f=t.dataTransfer.getData("Text");if(f){var d;if(e.state.draggingText&&!e.state.draggingText.copy&&(d=e.listSelections()),Ji(e.doc,Si(n,n)),d)for(var h=0;h<d.length;++h)po(e.doc,"",d[h].anchor,d[h].head,"drag");e.replaceSelection(f,"around","paste"),e.display.input.focus()}}catch(p){}}}}function Oo(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Fo(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<e.length;r++){var i=e[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var e=0;e<n.length;e++)t(n[e])})}}var Po=!1;function Wo(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Ro={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},zo=0;zo<10;zo++)Ro[zo+48]=Ro[zo+96]=String(zo);for(var Io=65;Io<=90;Io++)Ro[Io]=String.fromCharCode(Io);for(var Ho=1;Ho<=12;Ho++)Ro[Ho+111]=Ro[Ho+63235]="F"+Ho;var Yo={};function Bo(t){var e,n,r,i,o=t.split(/-(?!$)/);t=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),i&&(t="Cmd-"+t),r&&(t="Shift-"+t),t}function jo(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete t[n];continue}for(var i=X(n.split(" "),Bo),o=0;o<i.length;o++){var a=void 0,s=void 0;o==i.length-1?(s=i.join(" "),a=r):(s=i.slice(0,o+1).join(" "),a="...");var u=e[s];if(u){if(u!=a)throw new Error("Inconsistent bindings for "+s)}else e[s]=a}delete t[n]}for(var l in e)t[l]=e[l];return t}function Uo(t,e,n,r){var i=(e=$o(e)).call?e.call(t,r):e[t];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Uo(t,e.fallthrough,n,r);for(var o=0;o<e.fallthrough.length;o++){var a=Uo(t,e.fallthrough[o],n,r);if(a)return a}}}function Go(t){var e="string"==typeof t?t:Ro[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Vo(t,e,n){var r=t;return e.altKey&&"Alt"!=r&&(t="Alt-"+t),(k?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(t="Ctrl-"+t),(k?e.ctrlKey:e.metaKey)&&"Mod"!=r&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=r&&(t="Shift-"+t),t}function qo(t,e){if(f&&34==t.keyCode&&t.char)return!1;var n=Ro[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Vo(n,t,e))}function $o(t){return"string"==typeof t?Yo[t]:t}function Xo(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=e(n[i]);r.length&&ee(o.from,$(r).to)<=0;){var a=r.pop();if(ee(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Jr(t,function(){for(var e=r.length-1;e>=0;e--)po(t.doc,"",r[e].from,r[e].to,"+delete");Er(t)})}function Zo(t,e,n){var r=it(t.text,e+n,n);return r<0||r>t.text.length?null:r}function Ko(t,e,n){var r=Zo(t,e.ch,n);return null==r?null:new te(e.line,r,n<0?"after":"before")}function Qo(t,e,n,r,i){if(t){"rtl"==e.doc.direction&&(i=-i);var o=lt(n,e.doc.direction);if(o){var a,s=i<0?$(o):o[0],u=i<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==e.doc.direction){var l=Nn(e,n),c=On(e,l,a=i<0?n.text.length-1:0).top;a=ot(function(t){return On(e,l,t).top==c},i<0==(1==s.level)?s.from:s.to-1,a),"before"==u&&(a=Zo(n,a,1))}else a=i<0?s.to:s.from;return new te(r,a,u)}}return new te(r,i<0?n.text.length:0,i<0?"before":"after")}Yo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Yo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Yo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Yo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Yo.default=y?Yo.macDefault:Yo.pcDefault;var Jo={selectAll:ao,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),B)},killLine:function(t){return Xo(t,function(e){if(e.empty()){var n=Vt(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:te(e.head.line+1,0)}:{from:e.head,to:te(e.head.line,n)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return Xo(t,function(e){return{from:te(e.from().line,0),to:se(t.doc,te(e.to().line+1,0))}})},delLineLeft:function(t){return Xo(t,function(t){return{from:te(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){return Xo(t,function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}})},delWrappedLineRight:function(t){return Xo(t,function(e){var n=t.charCoords(e.head,"div").top+5,r=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:r}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(te(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(te(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return ta(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return ea(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return function(t,e){var n=Vt(t.doc,e),r=function(t){for(var e;e=Pe(t);)t=e.find(1,!0).line;return t}(n);return r!=n&&(e=Zt(r)),Qo(!0,t,n,e,-1)}(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")},U)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")},U)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5,r=t.coordsChar({left:0,top:n},"div");return r.ch<t.getLine(r.line).search(/\S/)?ea(t,e.head):r},U)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),r=t.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=z(t.getLine(o.line),o.ch,r);e.push(q(r-a%r))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Jr(t,function(){for(var e=t.listSelections(),n=[],r=0;r<e.length;r++)if(e[r].empty()){var i=e[r].head,o=Vt(t.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new te(i.line,i.ch-1)),i.ch>0)i=new te(i.line,i.ch+1),t.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),te(i.line,i.ch-2),i,"+transpose");else if(i.line>t.doc.first){var a=Vt(t.doc,i.line-1).text;a&&(i=new te(i.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+a.charAt(a.length-1),te(i.line-1,a.length-1),i,"+transpose"))}n.push(new _i(i,i))}t.setSelections(n)})},newlineAndIndent:function(t){return Jr(t,function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var r=0;r<e.length;r++)t.indentLine(e[r].from().line,null,!0);Er(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function ta(t,e){var n=Vt(t.doc,e),r=ze(n);return r!=n&&(e=Zt(r)),Qo(!0,t,r,e,1)}function ea(t,e){var n=ta(t,e.line),r=Vt(t.doc,n.line),i=lt(r,t.doc.direction);if(!i||0==i[0].level){var o=Math.max(n.ch,r.text.search(/\S/));return te(n.line,e.line==n.line&&e.ch<=o&&e.ch?0:o,n.sticky)}return n}function na(t,e,n){if("string"==typeof e&&!(e=Jo[e]))return!1;t.display.input.ensurePolled();var r=t.display.shift,i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),i=e(t)!=Y}finally{t.display.shift=r,t.state.suppressEdits=!1}return i}var ra=new I;function ia(t,e,n,r){var i=t.state.keySeq;if(i){if(Go(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:ra.set(50,function(){t.state.keySeq==i&&(t.state.keySeq=null,t.display.input.reset())}),oa(t,i+" "+e,n,r))return!0}return oa(t,e,n,r)}function oa(t,e,n,r){var i=function(t,e,n){for(var r=0;r<t.state.keyMaps.length;r++){var i=Uo(e,t.state.keyMaps[r],n,t);if(i)return i}return t.options.extraKeys&&Uo(e,t.options.extraKeys,n,t)||Uo(e,t.options.keyMap,n,t)}(t,e,r);return"multi"==i&&(t.state.keySeq=e),"handled"==i&&un(t,"keyHandled",t,e,n),"handled"!=i&&"multi"!=i||(bt(n),wr(t)),!!i}function aa(t,e){var n=qo(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?ia(t,"Shift-"+n,e,function(e){return na(t,e,!0)})||ia(t,n,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return na(t,e)}):ia(t,n,e,function(e){return na(t,e)}))}var sa=null;function ua(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||(e.curOp.focus=N(),gt(e,t)))){a&&s<11&&27==t.keyCode&&(t.returnValue=!1);var r=t.keyCode;e.display.shift=16==r||t.shiftKey;var i=aa(e,t);f&&(sa=i?r:null,i||88!=r||Ot||!(y?t.metaKey:t.ctrlKey)||e.replaceSelection("",null,"cut")),n&&!y&&!i&&46==r&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=r||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(C(e,"CodeMirror-crosshair"),ht(document,"keyup",n),ht(document,"mouseover",n))}O(e,"CodeMirror-crosshair"),ft(document,"keyup",n),ft(document,"mouseover",n)}(e)}}function la(t){16==t.keyCode&&(this.doc.sel.shift=!1),gt(this,t)}function ca(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||kn(e.display,t)||gt(e,t)||t.ctrlKey&&!t.altKey||y&&t.metaKey)){var n=t.keyCode,r=t.charCode;if(f&&n==sa)return sa=null,void bt(t);if(!f||t.which&&!(t.which<10)||!aa(e,t)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(t,e,n){return ia(t,"'"+n+"'",e,function(e){return na(t,e,!0)})}(e,t,i)||e.display.input.onKeyPress(t))}}}var fa,da,ha=function(t,e,n){this.time=t,this.pos=e,this.button=n};function pa(t){var e=this,n=e.display;if(!(gt(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,kn(n,t))u||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!ma(e,t)){var r=lr(e,t),i=Mt(t),o=r?function(t,e){var n=+new Date;return da&&da.compare(n,t,e)?(fa=da=null,"triple"):fa&&fa.compare(n,t,e)?(da=new ha(n,t,e),fa=null,"double"):(fa=new ha(n,t,e),da=null,"single")}(r,i):"single";window.focus(),1==i&&e.state.selectingText&&e.state.selectingText(t),r&&function(t,e,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),ia(t,Vo(o=(1==e?"Left":2==e?"Middle":"Right")+o,i),i,function(e){if("string"==typeof e&&(e=Jo[e]),!e)return!1;var r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),r=e(t,n)!=Y}finally{t.state.suppressEdits=!1}return r})}(e,i,r,o,t)||(1==i?r?function(t,e,n,r){a?setTimeout(W(kr,t),0):t.curOp.focus=N();var i,o=function(t,e,n){var r=t.getOption("configureMouse"),i=r?r(t,e,n):{};return null==i.unit&&(i.unit=(b?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==e?"char":"double"==e?"word":"line"),(null==i.extend||t.doc.extend)&&(i.extend=t.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=y?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(y?n.altKey:n.ctrlKey)),i}(t,n,r),l=t.doc.sel;t.options.dragDrop&&At&&!t.isReadOnly()&&"single"==n&&(i=l.contains(e))>-1&&(ee((i=l.ranges[i]).from(),e)<0||e.xRel>0)&&(ee(i.to(),e)>0||e.xRel<0)?function(t,e,n,r){var i=t.display,o=!1,l=ti(t,function(e){u&&(i.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:_r(t)),ht(i.wrapper.ownerDocument,"mouseup",l),ht(i.wrapper.ownerDocument,"mousemove",c),ht(i.scroller,"dragstart",f),ht(i.scroller,"drop",l),o||(bt(e),r.addNew||qi(t.doc,n,null,null,r.extend),u&&!d||a&&9==s?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),c=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},f=function(){return o=!0};u&&(i.scroller.draggable=!0),t.state.draggingText=l,l.copy=!r.moveOnDrag,ft(i.wrapper.ownerDocument,"mouseup",l),ft(i.wrapper.ownerDocument,"mousemove",c),ft(i.scroller,"dragstart",f),ft(i.scroller,"drop",l),t.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}(t,r,e,o):function(t,e,n,r){a&&_r(t);var i=t.display,o=t.doc;bt(e);var s,u,l=o.sel,c=l.ranges;if(r.addNew&&!r.extend?(u=o.sel.contains(n),s=u>-1?c[u]:new _i(n,n)):(s=o.sel.primary(),u=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(s=new _i(n,n)),n=lr(t,e,!0,!0),u=-1;else{var f=ga(t,n,r.unit);s=r.extend?Vi(s,f.anchor,f.head,r.extend):f}r.addNew?-1==u?(u=c.length,Qi(o,Mi(t,c.concat([s]),u),{scroll:!1,origin:"*mouse"})):c.length>1&&c[u].empty()&&"char"==r.unit&&!r.extend?(Qi(o,Mi(t,c.slice(0,u).concat(c.slice(u+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Xi(o,u,s,j):(u=0,Qi(o,new ki([s],0),j),l=o.sel);var d=n,h=i.wrapper.getBoundingClientRect(),p=0;function g(e){var a=++p,c=lr(t,e,!0,"rectangle"==r.unit);if(c)if(0!=ee(c,d)){t.curOp.focus=N(),function(e){if(0!=ee(d,e))if(d=e,"rectangle"==r.unit){for(var i=[],a=t.options.tabSize,c=z(Vt(o,n.line).text,n.ch,a),f=z(Vt(o,e.line).text,e.ch,a),h=Math.min(c,f),p=Math.max(c,f),g=Math.min(n.line,e.line),v=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=v;g++){var m=Vt(o,g).text,y=G(m,h,a);h==p?i.push(new _i(te(g,y),te(g,y))):m.length>y&&i.push(new _i(te(g,y),te(g,G(m,p,a))))}i.length||i.push(new _i(n,n)),Qi(o,Mi(t,l.ranges.slice(0,u).concat(i),u),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,x=s,w=ga(t,e,r.unit),k=x.anchor;ee(w.anchor,k)>0?(b=w.head,k=oe(x.from(),w.anchor)):(b=w.anchor,k=ie(x.to(),w.head));var _=l.ranges.slice(0);_[u]=function(t,e){var n=e.anchor,r=e.head,i=Vt(t.doc,n.line);if(0==ee(n,r)&&n.sticky==r.sticky)return e;var o=lt(i);if(!o)return e;var a=st(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return e;var u,l=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==l||l==o.length)return e;if(r.line!=n.line)u=(r.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var c=st(o,r.ch,r.sticky),f=c-a||(r.ch-n.ch)*(1==s.level?-1:1);u=c==l-1||c==l?f<0:f>0}var d=o[l+(u?-1:0)],h=u==(1==d.level),p=h?d.from:d.to,g=h?"after":"before";return n.ch==p&&n.sticky==g?e:new _i(new te(n.line,p,g),r)}(t,new _i(se(o,k),b)),Qi(o,Mi(t,_,u),j)}}(c);var f=Dr(i,o);(c.line>=f.to||c.line<f.from)&&setTimeout(ti(t,function(){p==a&&g(e)}),150)}else{var v=e.clientY<h.top?-20:e.clientY>h.bottom?20:0;v&&setTimeout(ti(t,function(){p==a&&(i.scroller.scrollTop+=v,g(e))}),50)}}function v(e){t.state.selectingText=!1,p=1/0,e&&(bt(e),i.input.focus()),ht(i.wrapper.ownerDocument,"mousemove",m),ht(i.wrapper.ownerDocument,"mouseup",y),o.history.lastSelOrigin=null}var m=ti(t,function(t){0!==t.buttons&&Mt(t)?g(t):v(t)}),y=ti(t,v);t.state.selectingText=y,ft(i.wrapper.ownerDocument,"mousemove",m),ft(i.wrapper.ownerDocument,"mouseup",y)}(t,r,e,o)}(e,r,o,t):_t(t)==n.scroller&&bt(t):2==i?(r&&qi(e.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(_?e.display.input.onContextMenu(t):_r(e)))}}function ga(t,e,n){if("char"==n)return new _i(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new _i(te(e.line,0),se(t.doc,te(e.line+1,0)));var r=n(t,e);return new _i(r.from,r.to)}function va(t,e,n,r){var i,o;if(e.touches)i=e.touches[0].clientX,o=e.touches[0].clientY;else try{i=e.clientX,o=e.clientY}catch(c){return!1}if(i>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;r&&bt(e);var a=t.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!mt(t,n))return wt(e);o-=s.top-a.viewOffset;for(var u=0;u<t.display.gutterSpecs.length;++u){var l=a.gutters.childNodes[u];if(l&&l.getBoundingClientRect().right>=i)return pt(t,n,t,Kt(t.doc,o),t.display.gutterSpecs[u].className,e),wt(e)}}function ma(t,e){return va(t,e,"gutterClick",!0)}function ya(t,e){kn(t.display,e)||function(t,e){return!!mt(t,"gutterContextMenu")&&va(t,e,"gutterContextMenu",!1)}(t,e)||gt(t,e,"contextmenu")||_||t.display.input.onContextMenu(e)}function ba(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Hn(t)}ha.prototype.compare=function(t,e,n){return this.time+400>t&&0==ee(e,this.pos)&&n==this.button};var xa={toString:function(){return"CodeMirror.Init"}},wa={},ka={};function _a(t,e,n){if(!e!=!(n&&n!=xa)){var r=t.display.dragFunctions,i=e?ft:ht;i(t.display.scroller,"dragstart",r.start),i(t.display.scroller,"dragenter",r.enter),i(t.display.scroller,"dragover",r.over),i(t.display.scroller,"dragleave",r.leave),i(t.display.scroller,"drop",r.drop)}}function Ma(t){t.options.lineWrapping?(O(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(C(t.display.wrapper,"CodeMirror-wrap"),Ge(t)),ur(t),fr(t),Hn(t),setTimeout(function(){return Yr(t)},100)}function Sa(t,e){var n=this;if(!(this instanceof Sa))return new Sa(t,e);this.options=e=e?R(e):{},R(wa,e,!1);var r=e.value;"string"==typeof r?r=new Lo(r,e.mode,null,e.lineSeparator,e.direction):e.mode&&(r.modeOption=e.mode),this.doc=r;var i=new Sa.inputStyles[e.inputStyle](this),o=this.display=new vi(t,r,i,e);for(var l in o.wrapper.CodeMirror=this,ba(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ur(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new I,keySeq:null,specialChars:null},e.autofocus&&!m&&o.input.focus(),a&&s<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(t){var e=t.display;ft(e.scroller,"mousedown",ti(t,pa)),ft(e.scroller,"dblclick",a&&s<11?ti(t,function(e){if(!gt(t,e)){var n=lr(t,e);if(n&&!ma(t,e)&&!kn(t.display,e)){bt(e);var r=t.findWordAt(n);qi(t.doc,r.anchor,r.head)}}}):function(e){return gt(t,e)||bt(e)}),ft(e.scroller,"contextmenu",function(e){return ya(t,e)}),ft(e.input.getField(),"contextmenu",function(n){e.scroller.contains(n.target)||ya(t,n)});var n,r={end:0};function i(){e.activeTouch&&(n=setTimeout(function(){return e.activeTouch=null},1e3),(r=e.activeTouch).end=+new Date)}function o(t,e){if(null==e.left)return!0;var n=e.left-t.left,r=e.top-t.top;return n*n+r*r>400}ft(e.scroller,"touchstart",function(i){if(!gt(t,i)&&!function(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}(i)&&!ma(t,i)){e.input.ensurePolled(),clearTimeout(n);var o=+new Date;e.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(e.activeTouch.left=i.touches[0].pageX,e.activeTouch.top=i.touches[0].pageY)}}),ft(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),ft(e.scroller,"touchend",function(n){var r=e.activeTouch;if(r&&!kn(e,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,s=t.coordsChar(e.activeTouch,"page");a=!r.prev||o(r,r.prev)?new _i(s,s):!r.prev.prev||o(r,r.prev.prev)?t.findWordAt(s):new _i(te(s.line,0),se(t.doc,te(s.line+1,0))),t.setSelection(a.anchor,a.head),t.focus(),bt(n)}i()}),ft(e.scroller,"touchcancel",i),ft(e.scroller,"scroll",function(){e.scroller.clientHeight&&(Pr(t,e.scroller.scrollTop),Rr(t,e.scroller.scrollLeft,!0),pt(t,"scroll",t))}),ft(e.scroller,"mousewheel",function(e){return wi(t,e)}),ft(e.scroller,"DOMMouseScroll",function(e){return wi(t,e)}),ft(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(e){gt(t,e)||kt(e)},over:function(e){gt(t,e)||(function(t,e){var n=lr(t,e);if(n){var r=document.createDocumentFragment();yr(t,n,r),t.display.dragCursor||(t.display.dragCursor=T("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),D(t.display.dragCursor,r)}}(t,e),kt(e))},start:function(e){return function(t,e){if(a&&(!t.state.draggingText||+new Date-Eo<100))kt(e);else if(!gt(t,e)&&!kn(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!d)){var n=T("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}(t,e)},drop:ti(t,No),leave:function(e){gt(t,e)||Oo(t)}};var u=e.input.getField();ft(u,"keyup",function(e){return la.call(t,e)}),ft(u,"keydown",ti(t,ua)),ft(u,"keypress",ti(t,ca)),ft(u,"focus",function(e){return Mr(t,e)}),ft(u,"blur",function(e){return Sr(t,e)})}(this),function(){var t;Po||(ft(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Fo(Wo)},100))}),ft(window,"blur",function(){return Fo(Sr)}),Po=!0)}(),Vr(this),this.curOp.forceUpdate=!0,Pi(this,r),e.autofocus&&!m||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&Mr(n)},20):Sr(this),ka)ka.hasOwnProperty(l)&&ka[l](this,e[l],xa);di(this),e.finishInit&&e.finishInit(this);for(var c=0;c<Ca.length;++c)Ca[c](this);qr(this),u&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Sa.defaults=wa,Sa.optionHandlers=ka;var Ca=[];function Aa(t,e,n,r){var i,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=he(t,e).state:n="prev");var a=t.options.tabSize,s=Vt(o,e),u=z(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var l,c=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((l=o.mode.indent(i,s.text.slice(c.length),s.text))==Y||l>150)){if(!r)return;n="prev"}}else l=0,n="not";"prev"==n?l=e>o.first?z(Vt(o,e-1).text,null,a):0:"add"==n?l=u+t.options.indentUnit:"subtract"==n?l=u-t.options.indentUnit:"number"==typeof n&&(l=u+n),l=Math.max(0,l);var f="",d=0;if(t.options.indentWithTabs)for(var h=Math.floor(l/a);h;--h)d+=a,f+="\t";if(d<l&&(f+=q(l-d)),f!=c)return po(o,f,te(e,0),te(e,c.length),"+input"),s.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==e&&g.head.ch<c.length){var v=te(e,c.length);Xi(o,p,new _i(v,v));break}}}Sa.defineInitHook=function(t){return Ca.push(t)};var Da=null;function Ta(t){Da=t}function La(t,e,n,r,i){var o=t.doc;t.display.shift=!1,r||(r=o.sel);var a=+new Date-200,s="paste"==i||t.state.pasteIncoming>a,u=Et(e),l=null;if(s&&r.ranges.length>1)if(Da&&Da.text.join("\n")==e){if(r.ranges.length%Da.text.length==0){l=[];for(var c=0;c<Da.text.length;c++)l.push(o.splitLines(Da.text[c]))}}else u.length==r.ranges.length&&t.options.pasteLinesPerSelection&&(l=X(u,function(t){return[t]}));for(var f=t.curOp.updateInput,d=r.ranges.length-1;d>=0;d--){var h=r.ranges[d],p=h.from(),g=h.to();h.empty()&&(n&&n>0?p=te(p.line,p.ch-n):t.state.overwrite&&!s?g=te(g.line,Math.min(Vt(o,g.line).text.length,g.ch+$(u).length)):s&&Da&&Da.lineWise&&Da.text.join("\n")==u.join("\n")&&(p=g=te(p.line,0)));var v={from:p,to:g,text:l?l[d%l.length]:u,origin:i||(s?"paste":t.state.cutIncoming>a?"cut":"+input")};uo(t.doc,v),un(t,"inputRead",t,v)}e&&!s&&Na(t,e),Er(t),t.curOp.updateInput<2&&(t.curOp.updateInput=f),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Ea(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||Jr(e,function(){return La(e,n,0,null,"paste")}),!0}function Na(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=t.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(e.indexOf(o.electricChars.charAt(s))>-1){a=Aa(t,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Vt(t.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Aa(t,i.head.line,"smart"));a&&un(t,"electricInput",t,i.head.line)}}}function Oa(t){for(var e=[],n=[],r=0;r<t.doc.sel.ranges.length;r++){var i=t.doc.sel.ranges[r].head.line,o={anchor:te(i,0),head:te(i+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function Fa(t,e,n,r){t.setAttribute("autocorrect",n?"":"off"),t.setAttribute("autocapitalize",r?"":"off"),t.setAttribute("spellcheck",!!e)}function Pa(){var t=T("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=T("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return u?t.style.width="1000px":t.setAttribute("wrap","off"),g&&(t.style.border="1px solid black"),Fa(t),e}function Wa(t,e,n,r,i){var o=e,a=n,s=Vt(t,e.line),u=i&&"rtl"==t.direction?-n:n;function l(o){var a,l;if("codepoint"==r){var c=s.text.charCodeAt(e.ch+(n>0?0:-1));a=isNaN(c)?null:new te(e.line,Math.max(0,Math.min(s.text.length,e.ch+n*((n>0?c>=55296&&c<56320:c>=56320&&c<57343)?2:1))),-n)}else a=i?function(t,e,n,r){var i=lt(e,t.doc.direction);if(!i)return Ko(e,n,r);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=st(i,n.ch,n.sticky),a=i[o];if("ltr"==t.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return Ko(e,n,r);var s,u=function(t,n){return Zo(e,t instanceof te?t.ch:t,n)},l=function(n){return t.options.lineWrapping?(s=s||Nn(t,e),Qn(t,e,s,n)):{begin:0,end:e.text.length}},c=l("before"==n.sticky?u(n,-1):n.ch);if("rtl"==t.doc.direction||1==a.level){var f=1==a.level==r<0,d=u(n,f?1:-1);if(null!=d&&(f?d<=a.to&&d<=c.end:d>=a.from&&d>=c.begin))return new te(n.line,d,f?"before":"after")}var h=function(t,e,r){for(var o=function(t,e){return e?new te(n.line,u(t,1),"before"):new te(n.line,t,"after")};t>=0&&t<i.length;t+=e){var a=i[t],s=e>0==(1!=a.level),l=s?r.begin:u(r.end,-1);if(a.from<=l&&l<a.to)return o(l,s);if(l=s?a.from:u(a.to,-1),r.begin<=l&&l<r.end)return o(l,s)}},p=h(o+r,r,c);if(p)return p;var g=r>0?c.end:u(c.begin,-1);return null==g||r>0&&g==e.text.length||!(p=h(r>0?0:i.length-1,r,l(g)))?null:p}(t.cm,s,e,n):Ko(s,e,n);if(null==a){if(o||(l=e.line+u)<t.first||l>=t.first+t.size||(e=new te(l,e.ch,e.sticky),!(s=Vt(t,l))))return!1;e=Qo(i,t.cm,s,e.line,u)}else e=a;return!0}if("char"==r||"codepoint"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var c=null,f="group"==r,d=t.cm&&t.cm.getHelper(e,"wordChars"),h=!0;!(n<0)||l(!h);h=!1){var p=s.text.charAt(e.ch)||"\n",g=tt(p,d)?"w":f&&"\n"==p?"n":!f||/\s/.test(p)?null:"p";if(!f||h||g||(g="s"),c&&c!=g){n<0&&(n=1,l(),e.sticky="after");break}if(g&&(c=g),n>0&&!l(!h))break}var v=io(t,e,o,a,!0);return ne(o,v)&&(v.hitSide=!0),v}function Ra(t,e,n,r){var i,o,a=t.doc,s=e.left;if("page"==r){var u=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(u-.5*rr(t.display),3);i=(n>0?e.bottom:e.top)+n*l}else"line"==r&&(i=n>0?e.bottom+3:e.top-3);for(;(o=Zn(t,s,i)).outside;){if(n<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*n}return o}var za=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new I,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ia(t,e){var n=En(t,e.line);if(!n||n.hidden)return null;var r=Vt(t.doc,e.line),i=Tn(n,r,e.line),o=lt(r,t.doc.direction),a="left";o&&(a=st(o,e.ch)%2?"right":"left");var s=Wn(i.map,e.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function Ha(t,e){return e&&(t.bad=!0),t}function Ya(t,e,n){var r;if(e==t.display.lineDiv){if(!(r=t.display.lineDiv.childNodes[n]))return Ha(t.clipPos(te(t.display.viewTo-1)),!0);e=null,n=0}else for(r=e;;r=r.parentNode){if(!r||r==t.display.lineDiv)return null;if(r.parentNode&&r.parentNode==t.display.lineDiv)break}for(var i=0;i<t.display.view.length;i++){var o=t.display.view[i];if(o.node==r)return Ba(o,e,n)}}function Ba(t,e,n){var r=t.text.firstChild,i=!1;if(!e||!E(r,e))return Ha(te(Zt(t.line),0),!0);if(e==r&&(i=!0,e=r.childNodes[n],n=0,!e)){var o=t.rest?$(t.rest):t.line;return Ha(te(Zt(o),o.text.length),i)}var a=3==e.nodeType?e:null,s=e;for(a||1!=e.childNodes.length||3!=e.firstChild.nodeType||(a=e.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=r;)s=s.parentNode;var u=t.measure,l=u.maps;function c(e,n,r){for(var i=-1;i<(l?l.length:0);i++)for(var o=i<0?u.map:l[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==e||s==n){var c=Zt(i<0?t.line:t.rest[i]),f=o[a]+r;return(r<0||s!=e)&&(f=o[a+(r?1:0)]),te(c,f)}}}var f=c(a,s,n);if(f)return Ha(f,i);for(var d=s.nextSibling,h=a?a.nodeValue.length-n:0;d;d=d.nextSibling){if(f=c(d,d.firstChild,0))return Ha(te(f.line,f.ch-h),i);h+=d.textContent.length}for(var p=s.previousSibling,g=n;p;p=p.previousSibling){if(f=c(p,p.firstChild,-1))return Ha(te(f.line,f.ch+g),i);g+=p.textContent.length}}za.prototype.init=function(t){var e=this,n=this,r=n.cm,i=n.div=t.lineDiv;function o(t){for(var e=t.target;e;e=e.parentNode){if(e==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(e.className))break}return!1}function a(t){if(o(t)&&!gt(r,t)){if(r.somethingSelected())Ta({lineWise:!1,text:r.getSelections()}),"cut"==t.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var e=Oa(r);Ta({lineWise:!0,text:e.text}),"cut"==t.type&&r.operation(function(){r.setSelections(e.ranges,0,B),r.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var a=Da.text.join("\n");if(t.clipboardData.setData("Text",a),t.clipboardData.getData("Text")==a)return void t.preventDefault()}var s=Pa(),u=s.firstChild;r.display.lineSpace.insertBefore(s,r.display.lineSpace.firstChild),u.value=Da.text.join("\n");var l=N();P(u),setTimeout(function(){r.display.lineSpace.removeChild(s),l.focus(),l==i&&n.showPrimarySelection()},50)}}i.contentEditable=!0,Fa(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),ft(i,"paste",function(t){!o(t)||gt(r,t)||Ea(t,r)||s<=11&&setTimeout(ti(r,function(){return e.updateFromDOM()}),20)}),ft(i,"compositionstart",function(t){e.composing={data:t.data,done:!1}}),ft(i,"compositionupdate",function(t){e.composing||(e.composing={data:t.data,done:!1})}),ft(i,"compositionend",function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)}),ft(i,"touchstart",function(){return n.forceCompositionEnd()}),ft(i,"input",function(){e.composing||e.readFromDOMSoon()}),ft(i,"copy",a),ft(i,"cut",a)},za.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},za.prototype.prepareSelection=function(){var t=mr(this.cm,!1);return t.focus=N()==this.div,t},za.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},za.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},za.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,r=e.doc.sel.primary(),i=r.from(),o=r.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var a=Ya(e,t.anchorNode,t.anchorOffset),s=Ya(e,t.focusNode,t.focusOffset);if(!a||a.bad||!s||s.bad||0!=ee(oe(a,s),i)||0!=ee(ie(a,s),o)){var u=e.display.view,l=i.line>=e.display.viewFrom&&Ia(e,i)||{node:u[0].measure.map[2],offset:0},c=o.line<e.display.viewTo&&Ia(e,o);if(!c){var f=u[u.length-1].measure,d=f.maps?f.maps[f.maps.length-1]:f.map;c={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(l&&c){var h,p=t.rangeCount&&t.getRangeAt(0);try{h=S(l.node,l.offset,c.offset,c.node)}catch(Lt){}h&&(!n&&e.state.focused?(t.collapse(l.node,l.offset),h.collapsed||(t.removeAllRanges(),t.addRange(h))):(t.removeAllRanges(),t.addRange(h)),p&&null==t.anchorNode?t.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},za.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},za.prototype.showMultipleSelections=function(t){D(this.cm.display.cursorDiv,t.cursors),D(this.cm.display.selectionDiv,t.selection)},za.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},za.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return E(this.div,e)},za.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&N()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},za.prototype.blur=function(){this.div.blur()},za.prototype.getField=function(){return this.div},za.prototype.supportsTouch=function(){return!0},za.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():Jr(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},za.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},za.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(v&&c&&this.cm.display.gutterSpecs.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Ya(e,t.anchorNode,t.anchorOffset),r=Ya(e,t.focusNode,t.focusOffset);n&&r&&Jr(e,function(){Qi(e.doc,Si(n,r),B),(n.bad||r.bad)&&(e.curOp.selectionChanged=!0)})}}},za.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=te(a.line-1,Vt(r.doc,a.line-1).length)),s.ch==Vt(r.doc,s.line).text.length&&s.line<r.lastLine()&&(s=te(s.line+1,0)),a.line<i.viewFrom||s.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(t=cr(r,a.line))?(e=Zt(i.view[0].line),n=i.view[0].node):(e=Zt(i.view[t].line),n=i.view[t-1].node.nextSibling);var u,l,c=cr(r,s.line);if(c==i.view.length-1?(u=i.viewTo-1,l=i.lineDiv.lastChild):(u=Zt(i.view[c+1].line)-1,l=i.view[c+1].node.previousSibling),!n)return!1;for(var f=r.doc.splitLines(function(t,e,n,r,i){var o="",a=!1,s=t.doc.lineSeparator(),u=!1;function l(){a&&(o+=s,u&&(o+=s),a=u=!1)}function c(t){t&&(l(),o+=t)}function f(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void c(n);var o,d=e.getAttribute("cm-marker");if(d){var h=t.findMarks(te(r,0),te(i+1,0),(v=+d,function(t){return t.id==v}));return void(h.length&&(o=h[0].find(0))&&c(qt(t.doc,o.from,o.to).join(s)))}if("false"==e.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;p&&l();for(var g=0;g<e.childNodes.length;g++)f(e.childNodes[g]);/^(pre|p)$/i.test(e.nodeName)&&(u=!0),p&&(a=!0)}else 3==e.nodeType&&c(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var v}for(;f(e),e!=n;)e=e.nextSibling,u=!1;return o}(r,n,l,e,u)),d=qt(r.doc,te(e,0),te(u,Vt(r.doc,u).text.length));f.length>1&&d.length>1;)if($(f)==$(d))f.pop(),d.pop(),u--;else{if(f[0]!=d[0])break;f.shift(),d.shift(),e++}for(var h=0,p=0,g=f[0],v=d[0],m=Math.min(g.length,v.length);h<m&&g.charCodeAt(h)==v.charCodeAt(h);)++h;for(var y=$(f),b=$(d),x=Math.min(y.length-(1==f.length?h:0),b.length-(1==d.length?h:0));p<x&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==f.length&&1==d.length&&e==a.line)for(;h&&h>a.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)h--,p++;f[f.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),f[0]=f[0].slice(h).replace(/\u200b+$/,"");var w=te(e,h),k=te(u,d.length?$(d).length-p:0);return f.length>1||f[0]||ee(w,k)?(po(r.doc,f,w,k,"+input"),!0):void 0},za.prototype.ensurePolled=function(){this.forceCompositionEnd()},za.prototype.reset=function(){this.forceCompositionEnd()},za.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},za.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},za.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||Jr(this.cm,function(){return fr(t.cm)})},za.prototype.setUneditable=function(t){t.contentEditable="false"},za.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||ti(this.cm,La)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},za.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},za.prototype.onContextMenu=function(){},za.prototype.resetPosition=function(){},za.prototype.needsContentAttribute=!0;var ja=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new I,this.hasSelection=!1,this.composing=null};ja.prototype.init=function(t){var e=this,n=this,r=this.cm;this.createField(t);var i=this.textarea;function o(t){if(!gt(r,t)){if(r.somethingSelected())Ta({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var e=Oa(r);Ta({lineWise:!0,text:e.text}),"cut"==t.type?r.setSelections(e.ranges,null,B):(n.prevInput="",i.value=e.text.join("\n"),P(i))}"cut"==t.type&&(r.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),g&&(i.style.width="0px"),ft(i,"input",function(){a&&s>=9&&e.hasSelection&&(e.hasSelection=null),n.poll()}),ft(i,"paste",function(t){gt(r,t)||Ea(t,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())}),ft(i,"cut",o),ft(i,"copy",o),ft(t.scroller,"paste",function(e){if(!kn(t,e)&&!gt(r,e)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=e.clipboardData,i.dispatchEvent(o)}}),ft(t.lineSpace,"selectstart",function(e){kn(t,e)||bt(e)}),ft(i,"compositionstart",function(){var t=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:r.markText(t,r.getCursor("to"),{className:"CodeMirror-composing"})}}),ft(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},ja.prototype.createField=function(t){this.wrapper=Pa(),this.textarea=this.wrapper.firstChild},ja.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},ja.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,r=mr(t);if(t.options.moveInputWithCursor){var i=qn(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),a=e.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},ja.prototype.showSelection=function(t){var e=this.cm.display;D(e.cursorDiv,t.cursors),D(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},ja.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&P(this.textarea),a&&s>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",a&&s>=9&&(this.hasSelection=null))}},ja.prototype.getField=function(){return this.textarea},ja.prototype.supportsTouch=function(){return!1},ja.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!m||N()!=this.textarea))try{this.textarea.focus()}catch(Lt){}},ja.prototype.blur=function(){this.textarea.blur()},ja.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ja.prototype.receivedFocus=function(){this.slowPoll()},ja.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},ja.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,function n(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,n))})},ja.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||Nt(n)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=n.value;if(i==r&&!e.somethingSelected())return!1;if(a&&s>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var u=0,l=Math.min(r.length,i.length);u<l&&r.charCodeAt(u)==i.charCodeAt(u);)++u;return Jr(e,function(){La(e,i.slice(u),r.length-u,null,t.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=i,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ja.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ja.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null),this.fastPoll()},ja.prototype.onContextMenu=function(t){var e=this,n=e.cm,r=n.display,i=e.textarea;e.contextMenuPending&&e.contextMenuPending();var o=lr(n,t),l=r.scroller.scrollTop;if(o&&!f){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&ti(n,Qi)(n.doc,Si(o),B);var c,d=i.style.cssText,h=e.wrapper.style.cssText,p=e.wrapper.offsetParent.getBoundingClientRect();if(e.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-p.top-5)+"px; left: "+(t.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",u&&(c=window.scrollY),r.input.focus(),u&&window.scrollTo(null,c),r.input.reset(),n.somethingSelected()||(i.value=e.prevInput=" "),e.contextMenuPending=m,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),a&&s>=9&&v(),_){kt(t);var g=function(){ht(window,"mouseup",g),setTimeout(m,20)};ft(window,"mouseup",g)}else setTimeout(m,50)}function v(){if(null!=i.selectionStart){var t=n.somethingSelected(),o="\u200b"+(t?i.value:"");i.value="\u21da",i.value=o,e.prevInput=t?"":"\u200b",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function m(){if(e.contextMenuPending==m&&(e.contextMenuPending=!1,e.wrapper.style.cssText=h,i.style.cssText=d,a&&s<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=l),null!=i.selectionStart)){(!a||a&&s<9)&&v();var t=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==e.prevInput?ti(n,ao)(n):t++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},ja.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},ja.prototype.setUneditable=function(){},ja.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function n(n,r,i,o){t.defaults[n]=r,i&&(e[n]=o?function(t,e,n){n!=xa&&i(t,e,n)}:i)}t.defineOption=n,t.Init=xa,n("value","",function(t,e){return t.setValue(e)},!0),n("mode",null,function(t,e){t.doc.modeOption=e,Li(t)},!0),n("indentUnit",2,Li,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(t){Ei(t),Hn(t),fr(t)},!0),n("lineSeparator",null,function(t,e){if(t.doc.lineSep=e,e){var n=[],r=t.doc.first;t.doc.iter(function(t){for(var i=0;;){var o=t.text.indexOf(e,i);if(-1==o)break;i=o+e.length,n.push(te(r,o))}r++});for(var i=n.length-1;i>=0;i--)po(t.doc,e,n[i],te(n[i].line,n[i].ch+e.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=xa&&t.refresh()}),n("specialCharPlaceholder",Qe,function(t){return t.refresh()},!0),n("electricChars",!0),n("inputStyle",m?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),n("autocorrect",!1,function(t,e){return t.getInputField().autocorrect=e},!0),n("autocapitalize",!1,function(t,e){return t.getInputField().autocapitalize=e},!0),n("rtlMoveVisually",!x),n("wholeLineUpdateBefore",!0),n("theme","default",function(t){ba(t),gi(t)},!0),n("keyMap","default",function(t,e,n){var r=$o(e),i=n!=xa&&$o(n);i&&i.detach&&i.detach(t,r),r.attach&&r.attach(t,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Ma,!0),n("gutters",[],function(t,e){t.display.gutterSpecs=hi(e,t.options.lineNumbers),gi(t)},!0),n("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?ar(t.display)+"px":"0",t.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(t){return Yr(t)},!0),n("scrollbarStyle","native",function(t){Ur(t),Yr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),n("lineNumbers",!1,function(t,e){t.display.gutterSpecs=hi(t.options.gutters,e),gi(t)},!0),n("firstLineNumber",1,gi,!0),n("lineNumberFormatter",function(t){return t},gi,!0),n("showCursorWhenSelecting",!1,vr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(t,e){"nocursor"==e&&(Sr(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)}),n("screenReaderLabel",null,function(t,e){t.display.input.screenReaderLabelChanged(e=""===e?null:e)}),n("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),n("dragDrop",!0,_a),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,vr,!0),n("singleCursorHeightPerLine",!0,vr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ei,!0),n("addModeClass",!1,Ei,!0),n("pollInterval",100),n("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),n("historyEventDelay",1250),n("viewportMargin",10,function(t){return t.refresh()},!0),n("maxHighlightLength",1e4,Ei,!0),n("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),n("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),n("autofocus",null),n("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0),n("phrases",null)}(Sa),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var r=this.options,i=r[t];r[t]==n&&"mode"!=t||(r[t]=n,e.hasOwnProperty(t)&&ti(this,e[t])(this,n,i),pt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"]($o(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:ei(function(e,n){var r=e.token?e:t.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");!function(t,e,n){for(var r=0,i=n(e);r<t.length&&n(t[r])<=i;)r++;t.splice(r,0,e)}(this.state.overlays,{mode:r,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},function(t){return t.priority}),this.state.modeGen++,fr(this)}),removeOverlay:ei(function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var r=e[n].modeSpec;if(r==t||"string"==typeof t&&r.name==t)return e.splice(n,1),this.state.modeGen++,void fr(this)}}),indentLine:ei(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Qt(this.doc,t)&&Aa(this,t,e,n)}),indentSelection:ei(function(t){for(var e=this.doc.sel.ranges,n=-1,r=0;r<e.length;r++){var i=e[r];if(i.empty())i.head.line>n&&(Aa(this,i.head.line,t,!0),n=i.head.line,r==this.doc.sel.primIndex&&Er(this));else{var o=i.from(),a=i.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var u=s;u<n;++u)Aa(this,u,t);var l=this.doc.sel.ranges;0==o.ch&&e.length==l.length&&l[r].from().ch>0&&Xi(this.doc,r,new _i(o,l[r].to()),B)}}}),getTokenAt:function(t,e){return ye(this,t,e)},getLineTokens:function(t,e){return ye(this,te(t),e,!0)},getTokenTypeAt:function(t){t=se(this.doc,t);var e,n=de(this,Vt(this.doc,t.line)),r=0,i=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){e=n[2*a+2];break}r=a+1}}var s=e?e.indexOf("overlay "):-1;return s<0?e:0==s?null:e.slice(0,s-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var r=[];if(!n.hasOwnProperty(e))return r;var i=n[e],o=this.getModeAt(t);if("string"==typeof o[e])i[o[e]]&&r.push(i[o[e]]);else if(o[e])for(var a=0;a<o[e].length;a++){var s=i[o[e][a]];s&&r.push(s)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var u=0;u<i._global.length;u++){var l=i._global[u];l.pred(o,this)&&-1==H(r,l.val)&&r.push(l.val)}return r},getStateAfter:function(t,e){var n=this.doc;return he(this,(t=ae(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return qn(this,null==t?n.head:"object"==typeof t?se(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return Vn(this,se(this.doc,t),e||"page")},coordsChar:function(t,e){return Zn(this,(t=Gn(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Gn(this,{top:t,left:0},e||"page").top,Kt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var r,i=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,i=!0),r=Vt(this.doc,t)}else r=t;return Un(this,r,{top:0,left:0},e||"page",n||i).top+(i?this.doc.height-je(r):0)},defaultTextHeight:function(){return rr(this.display)},defaultCharWidth:function(){return ir(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,r,i){var o,a=this.display,s=(t=qn(this,se(this.doc,t))).bottom,u=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),a.sizer.appendChild(e),"over"==r)s=t.top;else if("above"==r||"near"==r){var l=Math.max(a.wrapper.clientHeight,this.doc.height),c=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==r||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(s=t.bottom),u+e.offsetWidth>c&&(u=c-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==i?(u=a.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(a.sizer.clientWidth-e.offsetWidth)/2),e.style.left=u+"px"),n&&(null!=(o=Tr(this,{left:u,top:s,right:u+e.offsetWidth,bottom:s+e.offsetHeight})).scrollTop&&Pr(this,o.scrollTop),null!=o.scrollLeft&&Rr(this,o.scrollLeft))},triggerOnKeyDown:ei(ua),triggerOnKeyPress:ei(ca),triggerOnKeyUp:la,triggerOnMouseDown:ei(pa),execCommand:function(t){if(Jo.hasOwnProperty(t))return Jo[t].call(null,this)},triggerElectric:ei(function(t){Na(this,t)}),findPosH:function(t,e,n,r){var i=1;e<0&&(i=-1,e=-e);for(var o=se(this.doc,t),a=0;a<e&&!(o=Wa(this.doc,o,i,n,r)).hitSide;++a);return o},moveH:ei(function(t,e){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Wa(n.doc,r.head,t,e,n.options.rtlMoveVisually):t<0?r.from():r.to()},U)}),deleteH:ei(function(t,e){var n=this.doc;this.doc.sel.somethingSelected()?n.replaceSelection("",null,"+delete"):Xo(this,function(r){var i=Wa(n,r.head,t,e,!1);return t<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(t,e,n,r){var i=1,o=r;e<0&&(i=-1,e=-e);for(var a=se(this.doc,t),s=0;s<e;++s){var u=qn(this,a,"div");if(null==o?o=u.left:u.left=o,(a=Ra(this,u,i,n)).hitSide)break}return a},moveV:ei(function(t,e){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return t<0?a.from():a.to();var s=qn(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var u=Ra(n,s,t,e);return"page"==e&&a==r.sel.primary()&&Lr(n,Vn(n,u,"div").top-s.top),u},U),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(t){var e=Vt(this.doc,t.line).text,n=t.ch,r=t.ch;if(e){var i=this.getHelper(t,"wordChars");"before"!=t.sticky&&r!=e.length||!n?++r:--n;for(var o=e.charAt(n),a=tt(o,i)?function(t){return tt(t,i)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!tt(t)};n>0&&a(e.charAt(n-1));)--n;for(;r<e.length&&a(e.charAt(r));)++r}return new _i(te(t.line,n),te(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?O(this.display.cursorDiv,"CodeMirror-overwrite"):C(this.display.cursorDiv,"CodeMirror-overwrite"),pt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==N()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ei(function(t,e){Nr(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Cn(this)-this.display.barHeight,width:t.scrollWidth-Cn(this)-this.display.barWidth,clientHeight:Dn(this),clientWidth:An(this)}},scrollIntoView:ei(function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:te(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Or(t),t.curOp.scrollToPos=e}(this,t):Fr(this,t.from,t.to,t.margin)}),setSize:ei(function(t,e){var n=this,r=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.options.lineWrapping&&In(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){dr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,pt(this,"refresh",this)}),operation:function(t){return Jr(this,t)},startOperation:function(){return Vr(this)},endOperation:function(){return qr(this)},refresh:ei(function(){var t=this.display.cachedTextHeight;fr(this),this.curOp.forceUpdate=!0,Hn(this),Nr(this,this.doc.scrollLeft,this.doc.scrollTop),li(this.display),(null==t||Math.abs(t-rr(this.display))>.5||this.options.lineWrapping)&&ur(this),pt(this,"refresh",this)}),swapDoc:ei(function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Pi(this,t),Hn(this),this.display.input.reset(),Nr(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,un(this,"swapDoc",this,e),e}),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},yt(t),t.registerHelper=function(e,r,i){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][r]=i},t.registerGlobalHelper=function(e,r,i,o){t.registerHelper(e,r,o),n[e]._global.push({pred:i,val:o})}}(Sa);var Ua="iter insert remove copy getEditor constructor".split(" ");for(var Ga in Lo.prototype)Lo.prototype.hasOwnProperty(Ga)&&H(Ua,Ga)<0&&(Sa.prototype[Ga]=function(t){return function(){return t.apply(this.doc,arguments)}}(Lo.prototype[Ga]));return yt(Lo),Sa.inputStyles={textarea:ja,contenteditable:za},Sa.defineMode=function(t){Sa.defaults.mode||"null"==t||(Sa.defaults.mode=t),Rt.apply(this,arguments)},Sa.defineMIME=function(t,e){Wt[t]=e},Sa.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Sa.defineMIME("text/plain","null"),Sa.defineExtension=function(t,e){Sa.prototype[t]=e},Sa.defineDocExtension=function(t,e){Lo.prototype[t]=e},Sa.fromTextArea=function(t,e){if((e=e?R(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=N();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function r(){t.value=s.getValue()}var i;if(t.form&&(ft(t.form,"submit",r),!e.leaveSubmitMethodAlone)){var o=t.form;i=o.submit;try{var a=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=a}}catch(Lt){}}e.finishInit=function(n){n.save=r,n.getTextArea=function(){return t},n.toTextArea=function(){n.toTextArea=isNaN,r(),t.parentNode.removeChild(n.getWrapperElement()),t.style.display="",t.form&&(ht(t.form,"submit",r),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=i))}},t.style.display="none";var s=Sa(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return s},function(t){t.off=ht,t.on=ft,t.wheelEventPixels=xi,t.Doc=Lo,t.splitLines=Et,t.countColumn=z,t.findColumn=G,t.isWordChar=J,t.Pass=Y,t.signal=pt,t.Line=Ve,t.changeEnd=Ci,t.scrollbarModel=jr,t.Pos=te,t.cmpPos=ee,t.modes=Pt,t.mimeModes=Wt,t.resolveMode=zt,t.getMode=It,t.modeExtensions=Ht,t.extendMode=Yt,t.copyState=Bt,t.startState=Ut,t.innerMode=jt,t.commands=Jo,t.keyMap=Yo,t.keyName=qo,t.isModifierKey=Go,t.lookupKey=Uo,t.normalizeKeyMap=jo,t.StringStream=Gt,t.SharedTextMarker=Co,t.TextMarker=Mo,t.LineWidget=wo,t.e_preventDefault=bt,t.e_stopPropagation=xt,t.e_stop=kt,t.addClass=O,t.contains=E,t.rmClass=C,t.keyNames=Ro}(Sa),Sa.version="5.61.0",Sa}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){function e(t){t.state.placeholder&&(t.state.placeholder.parentNode.removeChild(t.state.placeholder),t.state.placeholder=null)}function n(t){e(t);var n=t.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.style.direction=t.getOption("direction"),n.className="CodeMirror-placeholder CodeMirror-line-like";var r=t.getOption("placeholder");"string"==typeof r&&(r=document.createTextNode(r)),n.appendChild(r),t.display.lineSpace.insertBefore(n,t.display.lineSpace.firstChild)}function r(t){o(t)&&n(t)}function i(t){var r=t.getWrapperElement(),i=o(t);r.className=r.className.replace(" CodeMirror-empty","")+(i?" CodeMirror-empty":""),i?n(t):e(t)}function o(t){return 1===t.lineCount()&&""===t.getLine(0)}t.defineOption("placeholder","",function(o,a,s){var u=s&&s!=t.Init;if(a&&!u)o.on("blur",r),o.on("change",i),o.on("swapDoc",i),t.on(o.getInputField(),"compositionupdate",o.state.placeholderCompose=function(){!function(t){setTimeout(function(){var r=!1;if(1==t.lineCount()){var i=t.getInputField();r="TEXTAREA"==i.nodeName?!t.getLine(0).length:!/[^\u200b]/.test(i.querySelector(".CodeMirror-line").textContent)}r?n(t):e(t)},20)}(o)}),i(o);else if(!a&&u){o.off("blur",r),o.off("change",i),o.off("swapDoc",i),t.off(o.getInputField(),"compositionupdate",o.state.placeholderCompose),e(o);var l=o.getWrapperElement();l.className=l.className.replace(" CodeMirror-empty","")}a&&!o.hasFocus()&&r(o)})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("markdown",function(e,n){var r=t.getMode(e,"text/html"),i="null"==r.name;void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.emoji&&(n.emoji=!1),void 0===n.fencedCodeBlockHighlighting&&(n.fencedCodeBlockHighlighting=!0),void 0===n.fencedCodeBlockDefaultMode&&(n.fencedCodeBlockDefaultMode="text/plain"),void 0===n.xml&&(n.xml=!0),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var o={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var a in o)o.hasOwnProperty(a)&&n.tokenTypeOverrides[a]&&(o[a]=n.tokenTypeOverrides[a]);var s=/^([*\-_])(?:\s*\1){2,}\s*$/,u=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,l=/^\[(x| )\](?=\s)/i,c=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,f=/^ {0,3}(?:\={1,}|-{2,})\s*$/,d=/^[^#!\[\]*_\\<>` "'(~:]+/,h=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,p=/^\s*\[[^\]]+?\]:.*$/,g=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function v(t,e,n){return e.f=e.inline=n,n(t,e)}function m(t,e,n){return e.f=e.block=n,n(t,e)}function y(e){if(e.linkTitle=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,e.f==x){var n=i;if(!n){var o=t.innerMode(r,e.htmlState);n="xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText}n&&(e.f=M,e.block=b,e.htmlState=null)}return e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine={stream:null},null}function b(r,i){var a,d=r.column()===i.indentation,g=!(a=i.prevLine.stream)||!/\S/.test(a.string),m=i.indentedCode,y=i.prevLine.hr,b=!1!==i.list,x=(i.listStack[i.listStack.length-1]||0)+3;i.indentedCode=!1;var _=i.indentation;if(null===i.indentationDiff&&(i.indentationDiff=i.indentation,b)){for(i.list=null;_<i.listStack[i.listStack.length-1];)i.listStack.pop(),i.listStack.length?i.indentation=i.listStack[i.listStack.length-1]:i.list=!1;!1!==i.list&&(i.indentationDiff=_-i.listStack[i.listStack.length-1])}var M=!(g||y||i.prevLine.header||b&&m||i.prevLine.fencedCodeEnd),S=(!1===i.list||y||g)&&i.indentation<=x&&r.match(s),C=null;if(i.indentationDiff>=4&&(m||i.prevLine.fencedCodeEnd||i.prevLine.header||g))return r.skipToEnd(),i.indentedCode=!0,o.code;if(r.eatSpace())return null;if(d&&i.indentation<=x&&(C=r.match(c))&&C[1].length<=6)return i.quote=0,i.header=C[1].length,i.thisLine.header=!0,n.highlightFormatting&&(i.formatting="header"),i.f=i.inline,k(i);if(i.indentation<=x&&r.eat(">"))return i.quote=d?1:i.quote+1,n.highlightFormatting&&(i.formatting="quote"),r.eatSpace(),k(i);if(!S&&!i.setext&&d&&i.indentation<=x&&(C=r.match(u))){var A=C[1]?"ol":"ul";return i.indentation=_+r.current().length,i.list=!0,i.quote=0,i.listStack.push(i.indentation),i.em=!1,i.strong=!1,i.code=!1,i.strikethrough=!1,n.taskLists&&r.match(l,!1)&&(i.taskList=!0),i.f=i.inline,n.highlightFormatting&&(i.formatting=["list","list-"+A]),k(i)}return d&&i.indentation<=x&&(C=r.match(h,!0))?(i.quote=0,i.fencedEndRE=new RegExp(C[1]+"+ *$"),i.localMode=n.fencedCodeBlockHighlighting&&function(n){if(t.findModeByName){var r=t.findModeByName(n);r&&(n=r.mime||r.mimes[0])}var i=t.getMode(e,n);return"null"==i.name?null:i}(C[2]||n.fencedCodeBlockDefaultMode),i.localMode&&(i.localState=t.startState(i.localMode)),i.f=i.block=w,n.highlightFormatting&&(i.formatting="code-block"),i.code=-1,k(i)):i.setext||!(M&&b||i.quote||!1!==i.list||i.code||S||p.test(r.string))&&(C=r.lookAhead(1))&&(C=C.match(f))?(i.setext?(i.header=i.setext,i.setext=0,r.skipToEnd(),n.highlightFormatting&&(i.formatting="header")):(i.header="="==C[0].charAt(0)?1:2,i.setext=i.header),i.thisLine.header=!0,i.f=i.inline,k(i)):S?(r.skipToEnd(),i.hr=!0,i.thisLine.hr=!0,o.hr):"["===r.peek()?v(r,i,D):v(r,i,i.inline)}function x(e,n){var o=r.token(e,n.htmlState);if(!i){var a=t.innerMode(r,n.htmlState);("xml"==a.mode.name&&null===a.state.tagStart&&!a.state.context&&a.state.tokenize.isInText||n.md_inside&&e.current().indexOf(">")>-1)&&(n.f=M,n.block=b,n.htmlState=null)}return o}function w(t,e){var r,i=e.listStack[e.listStack.length-1]||0,a=e.indentation<i;return e.fencedEndRE&&e.indentation<=i+3&&(a||t.match(e.fencedEndRE))?(n.highlightFormatting&&(e.formatting="code-block"),a||(r=k(e)),e.localMode=e.localState=null,e.block=b,e.f=M,e.fencedEndRE=null,e.code=0,e.thisLine.fencedCodeEnd=!0,a?m(t,e,e.block):r):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),o.code)}function k(t){var e=[];if(t.formatting){e.push(o.formatting),"string"==typeof t.formatting&&(t.formatting=[t.formatting]);for(var r=0;r<t.formatting.length;r++)e.push(o.formatting+"-"+t.formatting[r]),"header"===t.formatting[r]&&e.push(o.formatting+"-"+t.formatting[r]+"-"+t.header),"quote"===t.formatting[r]&&e.push(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=t.quote?o.formatting+"-"+t.formatting[r]+"-"+t.quote:"error")}if(t.taskOpen)return e.push("meta"),e.length?e.join(" "):null;if(t.taskClosed)return e.push("property"),e.length?e.join(" "):null;if(t.linkHref?e.push(o.linkHref,"url"):(t.strong&&e.push(o.strong),t.em&&e.push(o.em),t.strikethrough&&e.push(o.strikethrough),t.emoji&&e.push(o.emoji),t.linkText&&e.push(o.linkText),t.code&&e.push(o.code),t.image&&e.push(o.image),t.imageAltText&&e.push(o.imageAltText,"link"),t.imageMarker&&e.push(o.imageMarker)),t.header&&e.push(o.header,o.header+"-"+t.header),t.quote&&(e.push(o.quote),e.push(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=t.quote?o.quote+"-"+t.quote:o.quote+"-"+n.maxBlockquoteDepth)),!1!==t.list){var i=(t.listStack.length-1)%3;e.push(i?1===i?o.list2:o.list3:o.list1)}return t.trailingSpaceNewLine?e.push("trailing-space-new-line"):t.trailingSpace&&e.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),e.length?e.join(" "):null}function _(t,e){if(t.match(d,!0))return k(e)}function M(e,i){var a=i.text(e,i);if(void 0!==a)return a;if(i.list)return i.list=null,k(i);if(i.taskList)return" "===e.match(l,!0)[1]?i.taskOpen=!0:i.taskClosed=!0,n.highlightFormatting&&(i.formatting="task"),i.taskList=!1,k(i);if(i.taskOpen=!1,i.taskClosed=!1,i.header&&e.match(/^#+$/,!0))return n.highlightFormatting&&(i.formatting="header"),k(i);var s=e.next();if(i.linkTitle){i.linkTitle=!1;var u=s;if("("===s&&(u=")"),u=(u+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),e.match(new RegExp("^\\s*(?:[^"+u+"\\\\]+|\\\\\\\\|\\\\.)"+u),!0))return o.linkHref}if("`"===s){var c=i.formatting;n.highlightFormatting&&(i.formatting="code"),e.eatWhile("`");var f=e.current().length;if(0!=i.code||i.quote&&1!=f){if(f==i.code){var d=k(i);return i.code=0,d}return i.formatting=c,k(i)}return i.code=f,k(i)}if(i.code)return k(i);if("\\"===s&&(e.next(),n.highlightFormatting)){var h=k(i),p=o.formatting+"-escape";return h?h+" "+p:p}if("!"===s&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return i.imageMarker=!0,i.image=!0,n.highlightFormatting&&(i.formatting="image"),k(i);if("["===s&&i.imageMarker&&e.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return i.imageMarker=!1,i.imageAltText=!0,n.highlightFormatting&&(i.formatting="image"),k(i);if("]"===s&&i.imageAltText)return n.highlightFormatting&&(i.formatting="image"),h=k(i),i.imageAltText=!1,i.image=!1,i.inline=i.f=C,h;if("["===s&&!i.image)return i.linkText&&e.match(/^.*?\]/)||(i.linkText=!0,n.highlightFormatting&&(i.formatting="link")),k(i);if("]"===s&&i.linkText)return n.highlightFormatting&&(i.formatting="link"),h=k(i),i.linkText=!1,i.inline=i.f=e.match(/\(.*?\)| ?\[.*?\]/,!1)?C:M,h;if("<"===s&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return i.f=i.inline=S,n.highlightFormatting&&(i.formatting="link"),(h=k(i))?h+=" ":h="",h+o.linkInline;if("<"===s&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return i.f=i.inline=S,n.highlightFormatting&&(i.formatting="link"),(h=k(i))?h+=" ":h="",h+o.linkEmail;if(n.xml&&"<"===s&&e.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var v=e.string.indexOf(">",e.pos);if(-1!=v){var y=e.string.substring(e.start,v);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(y)&&(i.md_inside=!0)}return e.backUp(1),i.htmlState=t.startState(r),m(e,i,x)}if(n.xml&&"<"===s&&e.match(/^\/\w*?>/))return i.md_inside=!1,"tag";if("*"===s||"_"===s){for(var b=1,w=1==e.pos?" ":e.string.charAt(e.pos-2);b<3&&e.eat(s);)b++;var _=e.peek()||" ",A=!/\s/.test(_)&&(!g.test(_)||/\s/.test(w)||g.test(w)),D=!/\s/.test(w)&&(!g.test(w)||/\s/.test(_)||g.test(_)),T=null,L=null;if(b%2&&(i.em||!A||"*"!==s&&D&&!g.test(w)?i.em!=s||!D||"*"!==s&&A&&!g.test(_)||(T=!1):T=!0),b>1&&(i.strong||!A||"*"!==s&&D&&!g.test(w)?i.strong!=s||!D||"*"!==s&&A&&!g.test(_)||(L=!1):L=!0),null!=L||null!=T)return n.highlightFormatting&&(i.formatting=null==T?"strong":null==L?"em":"strong em"),!0===T&&(i.em=s),!0===L&&(i.strong=s),d=k(i),!1===T&&(i.em=!1),!1===L&&(i.strong=!1),d}else if(" "===s&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return k(i);e.backUp(1)}if(n.strikethrough)if("~"===s&&e.eatWhile(s)){if(i.strikethrough)return n.highlightFormatting&&(i.formatting="strikethrough"),d=k(i),i.strikethrough=!1,d;if(e.match(/^[^\s]/,!1))return i.strikethrough=!0,n.highlightFormatting&&(i.formatting="strikethrough"),k(i)}else if(" "===s&&e.match("~~",!0)){if(" "===e.peek())return k(i);e.backUp(2)}if(n.emoji&&":"===s&&e.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){i.emoji=!0,n.highlightFormatting&&(i.formatting="emoji");var E=k(i);return i.emoji=!1,E}return" "===s&&(e.match(/^ +$/,!1)?i.trailingSpace++:i.trailingSpace&&(i.trailingSpaceNewLine=!0)),k(i)}function S(t,e){if(">"===t.next()){e.f=e.inline=M,n.highlightFormatting&&(e.formatting="link");var r=k(e);return r?r+=" ":r="",r+o.linkInline}return t.match(/^[^>]+/,!0),o.linkInline}function C(t,e){if(t.eatSpace())return null;var r,i=t.next();return"("===i||"["===i?(e.f=e.inline=(r="("===i?")":"]",function(t,e){if(t.next()===r){e.f=e.inline=M,n.highlightFormatting&&(e.formatting="link-string");var i=k(e);return e.linkHref=!1,i}return t.match(A[r]),e.linkHref=!0,k(e)}),n.highlightFormatting&&(e.formatting="link-string"),e.linkHref=!0,k(e)):"error"}var A={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function D(t,e){return t.match(/^([^\]\\]|\\.)*\]:/,!1)?(e.f=T,t.next(),n.highlightFormatting&&(e.formatting="link"),e.linkText=!0,k(e)):v(t,e,M)}function T(t,e){if(t.match("]:",!0)){e.f=e.inline=L,n.highlightFormatting&&(e.formatting="link");var r=k(e);return e.linkText=!1,r}return t.match(/^([^\]\\]|\\.)+/,!0),o.linkText}function L(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),e.f=e.inline=M,o.linkHref+" url")}var E={startState:function(){return{f:b,prevLine:{stream:null},thisLine:{stream:null},block:b,htmlState:null,indentation:0,inline:M,text:_,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&t.copyState(r,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?t.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkTitle:e.linkTitle,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,setext:e.setext,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE}},token:function(t,e){if(e.formatting=!1,t!=e.thisLine.stream){if(e.header=0,e.hr=!1,t.match(/^\s*$/,!0))return y(e),null;if(e.prevLine=e.thisLine,e.thisLine={stream:t},e.taskList=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,!e.localState&&(e.f=e.block,e.f!=x)){var n=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(e.indentation=n,e.indentationDiff=null,n>0)return null}}return e.f(t,e)},innerMode:function(t){return t.block==x?{state:t.htmlState,mode:r}:t.localState?{state:t.localState,mode:t.localMode}:{state:t,mode:E}},indent:function(e,n,i){return e.block==x&&r.indent?r.indent(e.htmlState,n,i):e.localState&&e.localMode.indent?e.localMode.indent(e.localState,n,i):t.Pass},blankLine:y,getType:k,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return E},"xml"),t.defineMIME("text/markdown","markdown"),t.defineMIME("text/x-markdown","markdown")}),(function(){function t(t){"use strict";var e={omitExtraWLInCodeBlocks:{default:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{default:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{default:!1,describe:"Specify a prefix to generated header ids",type:"string"},headerLevelStart:{default:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{default:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{default:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},literalMidWordUnderscores:{default:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{default:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{default:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{default:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{default:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{default:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{default:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"}};if(!1===t)return JSON.parse(JSON.stringify(e));var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r].default);return n}var e={},n={},r={},i=t(!0),o={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0},vanilla:t(!0)};function a(t,n){"use strict";var r=n?"Error in "+n+" extension->":"Error in unnamed extension",i={valid:!0,error:""};e.helper.isArray(t)||(t=[t]);for(var o=0;o<t.length;++o){var a=r+" sub-extension "+o+": ",s=t[o];if("object"!=typeof s)return i.valid=!1,i.error=a+"must be an object, but "+typeof s+" given",i;if(!e.helper.isString(s.type))return i.valid=!1,i.error=a+'property "type" must be a string, but '+typeof s.type+" given",i;var u=s.type=s.type.toLowerCase();if("language"===u&&(u=s.type="lang"),"html"===u&&(u=s.type="output"),"lang"!==u&&"output"!==u&&"listener"!==u)return i.valid=!1,i.error=a+"type "+u+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',i;if("listener"===u){if(e.helper.isUndefined(s.listeners))return i.valid=!1,i.error=a+'. Extensions of type "listener" must have a property called "listeners"',i}else if(e.helper.isUndefined(s.filter)&&e.helper.isUndefined(s.regex))return i.valid=!1,i.error=a+u+' extensions must define either a "regex" property or a "filter" method',i;if(s.listeners){if("object"!=typeof s.listeners)return i.valid=!1,i.error=a+'"listeners" property must be an object but '+typeof s.listeners+" given",i;for(var l in s.listeners)if(s.listeners.hasOwnProperty(l)&&"function"!=typeof s.listeners[l])return i.valid=!1,i.error=a+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+l+" must be a function but "+typeof s.listeners[l]+" given",i}if(s.filter){if("function"!=typeof s.filter)return i.valid=!1,i.error=a+'"filter" must be a function, but '+typeof s.filter+" given",i}else if(s.regex){if(e.helper.isString(s.regex)&&(s.regex=new RegExp(s.regex,"g")),!s.regex instanceof RegExp)return i.valid=!1,i.error=a+'"regex" property must either be a string or a RegExp object, but '+typeof s.regex+" given",i;if(e.helper.isUndefined(s.replace))return i.valid=!1,i.error=a+'"regex" extensions must implement a replace string or function',i}}return i}function s(t,e){"use strict";return"~E"+e.charCodeAt(0)+"E"}e.helper={},e.extensions={},e.setOption=function(t,e){"use strict";return i[t]=e,this},e.getOption=function(t){"use strict";return i[t]},e.getOptions=function(){"use strict";return i},e.resetOptions=function(){"use strict";i=t(!0)},e.setFlavor=function(t){"use strict";if(o.hasOwnProperty(t)){var e=o[t];for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n])}},e.getDefaultOptions=function(e){"use strict";return t(e)},e.subParser=function(t,r){"use strict";if(e.helper.isString(t)){if(void 0===r){if(n.hasOwnProperty(t))return n[t];throw Error("SubParser named "+t+" not registered!")}n[t]=r}},e.extension=function(t,n){"use strict";if(!e.helper.isString(t))throw Error("Extension 'name' must be a string");if(t=e.helper.stdExtName(t),e.helper.isUndefined(n)){if(!r.hasOwnProperty(t))throw Error("Extension named "+t+" is not registered!");return r[t]}"function"==typeof n&&(n=n()),e.helper.isArray(n)||(n=[n]);var i=a(n,t);if(!i.valid)throw Error(i.error);r[t]=n},e.getAllExtensions=function(){"use strict";return r},e.removeExtension=function(t){"use strict";delete r[t]},e.resetExtensions=function(){"use strict";r={}},e.validateExtension=function(t){"use strict";var e=a(t,null);return!!e.valid||(console.warn(e.error),!1)},e.hasOwnProperty("helper")||(e.helper={}),e.helper.isString=function(t){"use strict";return"string"==typeof t||t instanceof String},e.helper.forEach=function(t,e){"use strict";if("function"==typeof t.forEach)t.forEach(e);else for(var n=0;n<t.length;n++)e(t[n],n,t)},e.helper.isArray=function(t){"use strict";return t.constructor===Array},e.helper.isUndefined=function(t){"use strict";return void 0===t},e.helper.stdExtName=function(t){"use strict";return t.replace(/[_-]||\s/g,"").toLowerCase()},e.helper.escapeCharactersCallback=s,e.helper.escapeCharacters=function(t,e,n){"use strict";var r="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return t.replace(i,s)},e.helper.matchRecursiveRegExp=function(t,e,n,r){"use strict";var i,o,a,s,u,l=r||"",c=l.indexOf("g")>-1,f=new RegExp(e+"|"+n,l),d=new RegExp(e,l.replace(/g/g,"")),h=[];do{for(i=0;a=f.exec(t);)if(d.test(a[0]))i++||(s=a[0],o=f.lastIndex);else if(i&&!--i){u=a[0];var p=t.slice(o,a.index);if(h.push([s+p+u,p]),!c)return h}}while(i&&(f.lastIndex=o));return h},e.helper.isUndefined(console)&&(console={warn:function(t){"use strict";alert(t)},log:function(t){"use strict";alert(t)},error:function(t){"use strict";throw t}}),e.Converter=function(t){"use strict";var n={},s=[],u=[],l={};function c(t,n){if(n=n||null,e.helper.isString(t)){if(n=t=e.helper.stdExtName(t),e.extensions[t])return console.warn("DEPRECATION WARNING: "+t+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(t,n){"function"==typeof t&&(t=t(new e.Converter)),e.helper.isArray(t)||(t=[t]);var r=a(t,n);if(!r.valid)throw Error(r.error);for(var i=0;i<t.length;++i)switch(t[i].type){case"lang":s.push(t[i]);break;case"output":u.push(t[i]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(e.extensions[t],t);if(e.helper.isUndefined(r[t]))throw Error('Extension "'+t+'" could not be loaded. It was either not found or is not a valid extension.');t=r[t]}"function"==typeof t&&(t=t()),e.helper.isArray(t)||(t=[t]);var i=a(t,n);if(!i.valid)throw Error(i.error);for(var o=0;o<t.length;++o){switch(t[o].type){case"lang":s.push(t[o]);break;case"output":u.push(t[o])}if(t[o].hasOwnProperty(l))for(var c in t[o].listeners)t[o].listeners.hasOwnProperty(c)&&f(c,t[o].listeners[c])}}function f(t,n){if(!e.helper.isString(t))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof t+" given");if("function"!=typeof n)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof n+" given");l.hasOwnProperty(t)||(l[t]=[]),l[t].push(n)}!function(){for(var r in t=t||{},i)i.hasOwnProperty(r)&&(n[r]=i[r]);if("object"!=typeof t)throw Error("Converter expects the passed parameter to be an object, but "+typeof t+" was passed instead.");for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);n.extensions&&e.helper.forEach(n.extensions,c)}(),this._dispatch=function(t,e,n){if(l.hasOwnProperty(t))for(var r=0;r<l[t].length;++r){var i=l[t][r](t,e,this,n);i&&void 0!==i&&(e=i)}return e},this.listen=function(t,e){return f(t,e),this},this.makeHtml=function(t){if(!t)return t;var r={gHtmlBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:s,outputModifiers:u,converter:this};return t="\n\n"+(t=(t=(t=(t=t.replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"))+"\n\n",t=e.subParser("detab")(t,n,r),t=e.subParser("stripBlankLines")(t,n,r),e.helper.forEach(s,function(i){t=e.subParser("runExtension")(i,t,n,r)}),t=e.subParser("githubCodeBlocks")(t,n,r),t=e.subParser("hashHTMLBlocks")(t,n,r),t=e.subParser("hashHTMLSpans")(t,n,r),t=e.subParser("stripLinkDefinitions")(t,n,r),t=e.subParser("blockGamut")(t,n,r),t=e.subParser("unhashHTMLSpans")(t,n,r),t=(t=(t=e.subParser("unescapeSpecialChars")(t,n,r)).replace(/~D/g,"$$")).replace(/~T/g,"~"),e.helper.forEach(u,function(i){t=e.subParser("runExtension")(i,t,n,r)}),t},this.setOption=function(t,e){n[t]=e},this.getOption=function(t){return n[t]},this.getOptions=function(){return n},this.addExtension=function(t,e){c(t,e=e||null)},this.useExtension=function(t){c(t)},this.setFlavor=function(t){if(o.hasOwnProperty(t)){var e=o[t];for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r])}},this.removeExtension=function(t){e.helper.isArray(t)||(t=[t]);for(var n=0;n<t.length;++n){for(var r=t[n],i=0;i<s.length;++i)s[i]===r&&s[i].splice(i,1);for(;0<u.length;++i)u[0]===r&&u[0].splice(i,1)}},this.getAllExtensions=function(){return{language:s,output:u}}},e.subParser("anchors",function(t,n,r){"use strict";var i=function(t,n,i,o,a,s,u,l){e.helper.isUndefined(l)&&(l=""),t=n;var c=i,f=o.toLowerCase(),d=a,h=l;if(!d)if(f||(f=c.toLowerCase().replace(/ ?\n/g," ")),d="#"+f,e.helper.isUndefined(r.gUrls[f])){if(!(t.search(/\(\s*\)$/m)>-1))return t;d=""}else d=r.gUrls[f],e.helper.isUndefined(r.gTitles[f])||(h=r.gTitles[f]);var p='<a href="'+(d=e.helper.escapeCharacters(d,"*_",!1))+'"';return""!==h&&null!==h&&(h=h.replace(/"/g,"&quot;"),p+=' title="'+(h=e.helper.escapeCharacters(h,"*_",!1))+'"'),p+">"+c+"</a>"};return t=(t=(t=(t=r.converter._dispatch("anchors.before",t,n)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,i)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,i)).replace(/(\[([^\[\]]+)])()()()()()/g,i),r.converter._dispatch("anchors.after",t,n)}),e.subParser("autoLinks",function(t,n,r){"use strict";function i(t,n){var r=e.subParser("unescapeSpecialChars")(n);return e.subParser("encodeEmailAddress")(r)}return t=(t=(t=r.converter._dispatch("autoLinks.before",t,n)).replace(/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,'<a href="$1">$1</a>')).replace(/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,i),n.simplifiedAutoLink&&(t=(t=t.replace(/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)(?=\s|$)(?!["<>])/gi,'<a href="$1">$1</a>')).replace(/(?:^|[ \n\t])([A-Za-z0-9!#$%&'*+-/=?^_`\{|}~\.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?:$|[ \n\t])/gi,i)),r.converter._dispatch("autoLinks.after",t,n)}),e.subParser("blockGamut",function(t,n,r){"use strict";t=r.converter._dispatch("blockGamut.before",t,n),t=e.subParser("blockQuotes")(t,n,r),t=e.subParser("headers")(t,n,r);var i=e.subParser("hashBlock")("<hr />",n,r);return t=(t=(t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,i)).replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,i)).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,i),t=e.subParser("lists")(t,n,r),t=e.subParser("codeBlocks")(t,n,r),t=e.subParser("tables")(t,n,r),t=e.subParser("hashHTMLBlocks")(t,n,r),t=e.subParser("paragraphs")(t,n,r),r.converter._dispatch("blockGamut.after",t,n)}),e.subParser("blockQuotes",function(t,n,r){"use strict";return t=(t=r.converter._dispatch("blockQuotes.before",t,n)).replace(/((^[ \t]{0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,i){var o=i;return o=(o=(o=o.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""),o=e.subParser("githubCodeBlocks")(o,n,r),o=(o=(o=e.subParser("blockGamut")(o,n,r)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){return e.replace(/^  /gm,"~0").replace(/~0/g,"")}),e.subParser("hashBlock")("<blockquote>\n"+o+"\n</blockquote>",n,r)}),r.converter._dispatch("blockQuotes.after",t,n)}),e.subParser("codeBlocks",function(t,n,r){"use strict";return t=r.converter._dispatch("codeBlocks.before",t,n),t=(t=(t+="~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(t,i,o){var a=i,s=o,u="\n";return a=e.subParser("outdent")(a),a=e.subParser("encodeCode")(a),a=(a=(a=e.subParser("detab")(a)).replace(/^\n+/g,"")).replace(/\n+$/g,""),n.omitExtraWLInCodeBlocks&&(u=""),a="<pre><code>"+a+u+"</code></pre>",e.subParser("hashBlock")(a,n,r)+s})).replace(/~0/,""),r.converter._dispatch("codeBlocks.after",t,n)}),e.subParser("codeSpans",function(t,n,r){"use strict";return t=(t=r.converter._dispatch("codeSpans.before",t,n)).replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,n,r,i){var o=i;return o=(o=o.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),n+"<code>"+(o=e.subParser("encodeCode")(o))+"</code>"}),r.converter._dispatch("codeSpans.after",t,n)}),e.subParser("detab",function(t){"use strict";return(t=(t=(t=(t=t.replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"~A~B")).replace(/~B(.+?)~A/g,function(t,e){for(var n=e,r=4-n.length%4,i=0;i<r;i++)n+=" ";return n})).replace(/~A/g,"    ")).replace(/~B/g,"")}),e.subParser("encodeAmpsAndAngles",function(t){"use strict";return(t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?\$!])/gi,"&lt;")}),e.subParser("encodeBackslashEscapes",function(t){"use strict";return(t=t.replace(/\\(\\)/g,e.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+-.!])/g,e.helper.escapeCharactersCallback)}),e.subParser("encodeCode",function(t){"use strict";return t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e.helper.escapeCharacters(t,"*_{}[]\\",!1)}),e.subParser("encodeEmailAddress",function(t){"use strict";var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return(t='<a href="'+(t=(t="mailto:"+t).replace(/./g,function(t){if("@"===t)t=e[Math.floor(2*Math.random())](t);else if(":"!==t){var n=Math.random();t=n>.9?e[2](t):n>.45?e[1](t):e[0](t)}return t}))+'">'+t+"</a>").replace(/">.+:/g,'">')}),e.subParser("escapeSpecialCharsWithinTagAttributes",function(t){"use strict";return t.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(t){var n=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e.helper.escapeCharacters(n,"\\`*_",!1)})}),e.subParser("githubCodeBlocks",function(t,n,r){"use strict";return n.ghCodeBlocks?(t=r.converter._dispatch("githubCodeBlocks.before",t,n),t=(t=(t+="~0").replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(t,i,o){var a=n.omitExtraWLInCodeBlocks?"":"\n";return o=e.subParser("encodeCode")(o),o="<pre><code"+(i?' class="'+i+" language-"+i+'"':"")+">"+(o=(o=(o=e.subParser("detab")(o)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+a+"</code></pre>",e.subParser("hashBlock")(o,n,r)})).replace(/~0/,""),t=r.converter._dispatch("githubCodeBlocks.after",t,n)):t}),e.subParser("hashBlock",function(t,e,n){"use strict";return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.gHtmlBlocks.push(t)-1)+"K\n\n"}),e.subParser("hashElement",function(t,e,n){"use strict";return function(t,e){var r=e;return r=(r=(r=r.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),"\n\n~K"+(n.gHtmlBlocks.push(r)-1)+"K\n\n"}}),e.subParser("hashHTMLBlocks",function(t,n,r){"use strict";return(t=(t=(t=(t=(t=(t=t.replace(/\n/g,"\n\n")).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,e.subParser("hashElement")(t,n,r))).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside|address|audio|canvas|figure|hgroup|output|video)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,e.subParser("hashElement")(t,n,r))).replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(t,n,r))).replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(t,n,r))).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(t,n,r))).replace(/\n\n/g,"\n")}),e.subParser("hashHTMLSpans",function(t,n,r){"use strict";for(var i=e.helper.matchRecursiveRegExp(t,"<code\\b[^>]*>","</code>","gi"),o=0;o<i.length;++o)t=t.replace(i[o][0],"~L"+(r.gHtmlSpans.push(i[o][0])-1)+"L");return t}),e.subParser("unhashHTMLSpans",function(t,e,n){"use strict";for(var r=0;r<n.gHtmlSpans.length;++r)t=t.replace("~L"+r+"L",n.gHtmlSpans[r]);return t}),e.subParser("headers",function(t,n,r){"use strict";t=r.converter._dispatch("headers.before",t,n);var i=n.prefixHeaderId,o=isNaN(parseInt(n.headerLevelStart))?1:parseInt(n.headerLevelStart),a=n.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;function s(t){var n,o=t.replace(/[^\w]/g,"").toLowerCase();return r.hashLinkCounts[o]?n=o+"-"+r.hashLinkCounts[o]++:(n=o,r.hashLinkCounts[o]=1),!0===i&&(i="section"),e.helper.isString(i)?i+n:n}return t=(t=(t=t.replace(n.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(t,i){var a=e.subParser("spanGamut")(i,n,r),u=n.noHeaderId?"":' id="'+s(i)+'"',l="<h"+o+u+">"+a+"</h"+o+">";return e.subParser("hashBlock")(l,n,r)})).replace(a,function(t,i){var a=e.subParser("spanGamut")(i,n,r),u=n.noHeaderId?"":' id="'+s(i)+'"',l=o+1,c="<h"+l+u+">"+a+"</h"+l+">";return e.subParser("hashBlock")(c,n,r)})).replace(/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,function(t,i,a){var u=e.subParser("spanGamut")(a,n,r),l=n.noHeaderId?"":' id="'+s(a)+'"',c=o-1+i.length,f="<h"+c+l+">"+u+"</h"+c+">";return e.subParser("hashBlock")(f,n,r)}),r.converter._dispatch("headers.after",t,n)}),e.subParser("images",function(t,n,r){"use strict";function i(t,n,i,o,a,s,u,l){var c=r.gUrls,f=r.gTitles,d=r.gDimensions;if(i=i.toLowerCase(),l||(l=""),""===o||null===o){if(""!==i&&null!==i||(i=n.toLowerCase().replace(/ ?\n/g," ")),o="#"+i,e.helper.isUndefined(c[i]))return t;o=c[i],e.helper.isUndefined(f[i])||(l=f[i]),e.helper.isUndefined(d[i])||(a=d[i].width,s=d[i].height)}n=n.replace(/"/g,"&quot;"),n=e.helper.escapeCharacters(n,"*_",!1);var h='<img src="'+(o=e.helper.escapeCharacters(o,"*_",!1))+'" alt="'+n+'"';return l&&(l=l.replace(/"/g,"&quot;"),h+=' title="'+(l=e.helper.escapeCharacters(l,"*_",!1))+'"'),a&&s&&(h+=' width="'+(a="*"===a?"auto":a)+'"',h+=' height="'+(s="*"===s?"auto":s)+'"'),h+" />"}return t=(t=(t=r.converter._dispatch("images.before",t,n)).replace(/!\[(.*?)][ ]?(?:\n[ ]*)?\[(.*?)]()()()()()/g,i)).replace(/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,i),r.converter._dispatch("images.after",t,n)}),e.subParser("italicsAndBold",function(t,e,n){"use strict";return t=n.converter._dispatch("italicsAndBold.before",t,e),t=e.literalMidWordUnderscores?(t=(t=(t=t.replace(/(^|\s|>|\b)__(?=\S)([^]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>")).replace(/(^|\s|>|\b)_(?=\S)([^]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>")).replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>")).replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"):(t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),n.converter._dispatch("italicsAndBold.after",t,e)}),e.subParser("lists",function(t,n,r){"use strict";function i(t,i){r.gListLevel++,t=t.replace(/\n{2,}$/,"\n");var o=/\n[ \t]*\n(?!~0)/.test(t+="~0");return t=(t=t.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+((\[(x| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(t,i,a,s,u,l,c){c=c&&""!==c.trim();var f=e.subParser("outdent")(u,n,r),d="";return l&&n.tasklists&&(d=' class="task-list-item" style="list-style-type: none;"',f=f.replace(/^[ \t]*\[(x| )?]/m,function(){var t='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return c&&(t+=" checked"),t+">"})),i||f.search(/\n{2,}/)>-1?(f=e.subParser("githubCodeBlocks")(f,n,r),f=e.subParser("blockGamut")(f,n,r)):(f=(f=e.subParser("lists")(f,n,r)).replace(/\n$/,""),f=o?e.subParser("paragraphs")(f,n,r):e.subParser("spanGamut")(f,n,r)),"\n<li"+d+">"+f+"</li>\n"})).replace(/~0/g,""),r.gListLevel--,i&&(t=t.replace(/\s+$/,"")),t}function o(t,e,n){var r="ul"===e?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,o=[],a="";if(-1!==t.search(r)){!function t(o){var s=o.search(r);-1!==s?(a+="\n\n<"+e+">"+i(o.slice(0,s),!!n)+"</"+e+">\n\n",r="ul"==(e="ul"===e?"ol":"ul")?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,t(o.slice(s))):a+="\n\n<"+e+">"+i(o,!!n)+"</"+e+">\n\n"}(t);for(var s=0;s<o.length;++s);}else a="\n\n<"+e+">"+i(t,!!n)+"</"+e+">\n\n";return a}t=r.converter._dispatch("lists.before",t,n),t+="~0";var a=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return t=(t=r.gListLevel?t.replace(a,function(t,e,n){return o(e,n.search(/[*+-]/g)>-1?"ul":"ol",!0)}):t.replace(a=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(t,e,n,r){return o(n,r.search(/[*+-]/g)>-1?"ul":"ol")})).replace(/~0/,""),r.converter._dispatch("lists.after",t,n)}),e.subParser("outdent",function(t){"use strict";return(t=t.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")}),e.subParser("paragraphs",function(t,n,r){"use strict";for(var i=(t=(t=(t=r.converter._dispatch("paragraphs.before",t,n)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),o=[],a=i.length,s=0;s<a;s++){var u=i[s];u.search(/~K(\d+)K/g)>=0?o.push(u):u.search(/\S/)>=0&&(u=(u=e.subParser("spanGamut")(u,n,r)).replace(/^([ \t]*)/g,"<p>"),o.push(u+="</p>"))}for(a=o.length,s=0;s<a;s++)for(;o[s].search(/~K(\d+)K/)>=0;){var l=r.gHtmlBlocks[RegExp.$1];l=l.replace(/\$/g,"$$$$"),o[s]=o[s].replace(/~K\d+K/,l)}return t=r.converter._dispatch("paragraphs.after",t,n),o.join("\n\n")}),e.subParser("runExtension",function(t,e,n,r){"use strict";if(t.filter)e=t.filter(e,r.converter,n);else if(t.regex){var i=t.regex;!i instanceof RegExp&&(i=new RegExp(i,"g")),e=e.replace(i,t.replace)}return e}),e.subParser("spanGamut",function(t,n,r){"use strict";return t=r.converter._dispatch("spanGamut.before",t,n),t=e.subParser("codeSpans")(t,n,r),t=e.subParser("escapeSpecialCharsWithinTagAttributes")(t,n,r),t=e.subParser("encodeBackslashEscapes")(t,n,r),t=e.subParser("images")(t,n,r),t=e.subParser("anchors")(t,n,r),t=e.subParser("autoLinks")(t,n,r),t=e.subParser("encodeAmpsAndAngles")(t,n,r),t=e.subParser("italicsAndBold")(t,n,r),t=(t=e.subParser("strikethrough")(t,n,r)).replace(/  +\n/g," <br />\n"),r.converter._dispatch("spanGamut.after",t,n)}),e.subParser("strikethrough",function(t,e,n){"use strict";return e.strikethrough&&(t=(t=n.converter._dispatch("strikethrough.before",t,e)).replace(/(?:~T){2}([^~]+)(?:~T){2}/g,"<del>$1</del>"),t=n.converter._dispatch("strikethrough.after",t,e)),t}),e.subParser("stripBlankLines",function(t){"use strict";return t.replace(/^[ \t]+$/gm,"")}),e.subParser("stripLinkDefinitions",function(t,n,r){"use strict";return(t=(t+="~0").replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm,function(t,i,o,a,s,u,l){return i=i.toLowerCase(),r.gUrls[i]=e.subParser("encodeAmpsAndAngles")(o),u?u+l:(l&&(r.gTitles[i]=l.replace(/"|'/g,"&quot;")),n.parseImgDimensions&&a&&s&&(r.gDimensions[i]={width:a,height:s}),"")})).replace(/~0/,"")}),e.subParser("tables",function(t,n,r){"use strict";var i;if(n.tables){t=r.converter._dispatch("tables.before",t,n);var o=((i={th:function(t,i){var o="";return""===(t=t.trim())?"":(n.tableHeaderId&&(o=' id="'+t.replace(/ /g,"_").toLowerCase()+'"'),t=e.subParser("spanGamut")(t,n,r),"<th"+o+(i=i&&""!==i.trim()?' style="'+i+'"':"")+">"+t+"</th>")},td:function(t,i){var o=e.subParser("spanGamut")(t.trim(),n,r);return"<td"+(i=i&&""!==i.trim()?' style="'+i+'"':"")+">"+o+"</td>"}}).ths=function(){for(var t="",e=0,n=[].slice.apply(arguments[0]),r=[].slice.apply(arguments[1]);e<n.length;e+=1)t+=i.th(n[e],r[e])+"\n";return t},i.tds=function(){for(var t="",e=0,n=[].slice.apply(arguments[0]),r=[].slice.apply(arguments[1]);e<n.length;e+=1)t+=i.td(n[e],r[e])+"\n";return t},i.thead=function(){var t,e=[].slice.apply(arguments[0]),n=[].slice.apply(arguments[1]);return t="<thead>\n",t+="<tr>\n",t+=i.ths.apply(this,[e,n]),(t+="</tr>\n")+"</thead>\n"},i.tr=function(){var t,e=[].slice.apply(arguments[0]),n=[].slice.apply(arguments[1]);return t="<tr>\n",(t+=i.tds.apply(this,[e,n]))+"</tr>\n"},{parse:function(t){for(var e,n,r=0,o=t.split("\n"),a=[];r<o.length;r+=1){if((e=o[r]).trim().match(/^[|].*[|]$/)){e=e.trim();var s=[],u=o[r+1].trim(),l=[],c=0;if(u.match(/^[|][-=|: ]+[|]$/))for(l=u.substring(1,u.length-1).split("|"),c=0;c<l.length;++c)l[c]=l[c].trim(),l[c]=l[c].match(/^[:][-=| ]+[:]$/)?"text-align:center;":l[c].match(/^[-=| ]+[:]$/)?"text-align:right;":l[c].match(/^[:][-=| ]+$/)?"text-align:left;":"";if(s.push("<table>"),n=e.substring(1,e.length-1).split("|"),0===l.length)for(c=0;c<n.length;++c)l.push("text-align:left");if(s.push(i.thead.apply(this,[n,l])),(e=o[++r]).trim().match(/^[|][-=|: ]+[|]$/)){for(e=o[++r],s.push("<tbody>");e.trim().match(/^[|].*[|]$/);)e=e.trim(),s.push(i.tr.apply(this,[e.substring(1,e.length-1).split("|"),l])),e=o[++r];s.push("</tbody>"),s.push("</table>"),a.push(s.join("\n"));continue}e=o[--r]}a.push(e)}return a.join("\n")}});t=o.parse(t),t=r.converter._dispatch("tables.after",t,n)}return t}),e.subParser("unescapeSpecialChars",function(t){"use strict";return t.replace(/~E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)})}),"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define("showdown",function(){"use strict";return e}):this.showdown=e}).call(this);